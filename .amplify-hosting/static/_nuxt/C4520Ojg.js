import{_ as N}from"./Cw5ECwNl.js";import{_ as E}from"./Corpgyop.js";import{_ as M}from"./BWXQ7vJw.js";import{_ as Y}from"./Cxb8uY_z.js";import{n as U,u as z,k as G,c as a,t as J,l as B,B as K,o as l,a as k,w as t,p as e,s as O,v as A,y as S,m as i,b as d,F as w,D as T,_ as W,P as X}from"./CGQimWOm.js";import{u as D}from"./DYOgvRzJ.js";import{V as Z}from"./P_q-BwEt.js";import{V as I}from"./tTgLLTve.js";import{V as L}from"./BRveoiXI.js";import{V as $}from"./f5lwX8SZ.js";import{V as P}from"./CRY4crBU.js";import{V as x}from"./CS8xUUzH.js";import{V as R}from"./BEy3SeWo.js";import{V as Q}from"./BhN2__aY.js";import{u as ee}from"./BW5EWlXk.js";import{u as te}from"./D78L5r-E.js";import"./3SmzOII5.js";import"./DcSlHAeh.js";import"./BSH7BhKc.js";import"./BCoct7aH.js";import"./BkTuXOR_.js";import"./xvVMJZi9.js";import"./BeQTM7t9.js";import"./2hEmiBig.js";import"./Dn0bXcU5.js";import"./BvtSni_j.js";/* empty css        */const se={key:1,class:"mb-8"},ae={class:"d-flex align-center justify-space-between mb-4"},oe={key:2,class:"mb-8"},le={class:"d-flex align-center justify-space-between mb-4"},re={class:"mb-8"},ne={class:"d-flex align-center justify-space-between mb-4"},ce={class:"mb-8"},ue={class:"d-flex align-center justify-space-between mb-4"},ie={key:1,class:"py-4"},me=100,pe=U({__name:"SearchResultsPage",setup(F){const q=z(),c=G(),_=a(()=>q.query.search_query||""),o=D();J(_,async n=>{o.clearResults(),n.trim()&&await o.search(n,1)},{immediate:!0});const r=a(()=>o.searchResults.projects.results),p=a(()=>o.searchResults.users.results),h=a(()=>o.loading),s=a(()=>o.error),m=a(()=>r.value.length===0&&p.value.length===0),g=n=>{n&&n.username&&c.push(`/${n.username}`)};let v=!1;function b(){v||(window.requestAnimationFrame(()=>{const n=window.innerHeight+window.scrollY;if(document.body.offsetHeight-n<me&&!o.loading){const f=o.searchResults.projects.current_page,y=o.searchResults.projects.last_page;f<y&&o.search(_.value,f+1)}v=!1}),v=!0)}B(()=>{window.addEventListener("scroll",b)}),K(()=>{window.removeEventListener("scroll",b)});const V=a(()=>_.value?`Search Results for '${_.value}'`:"Search Results");return(n,j)=>{const f=N,y=E,C=M,H=Y;return l(),k(Q,null,{default:t(()=>[e(f,{title:V.value,class:"mb-3"},null,8,["title"]),s.value?(l(),k(Z,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:t(()=>[O(A(s.value),1)]),_:1})):S("",!0),r.value.length>0?(l(),i("section",se,[d("div",ae,[d("h2",null,"Projects ("+A(r.value.length)+")",1)]),e(L,null,{default:t(()=>[(l(!0),i(w,null,T(r.value,u=>(l(),k(I,{key:u.id},{default:t(()=>[e(y,{project:u},null,8,["project"])]),_:2},1024))),128))]),_:1})])):S("",!0),p.value.length>0?(l(),i("section",oe,[d("div",le,[d("h2",null,"Users ("+A(p.value.length)+")",1)]),e(L,null,{default:t(()=>[(l(!0),i(w,null,T(p.value,u=>(l(),k(I,{key:u.id,onClick:_e=>g(u)},{default:t(()=>[e(C,{user:u,layout:"compact"},null,8,["user"])]),_:2},1032,["onClick"]))),128))]),_:1})])):S("",!0),h.value?(l(),i(w,{key:3},[m.value?(l(),i(w,{key:0},[d("section",re,[d("div",ne,[e($,{type:"text",width:"150",class:"mb-2"})]),e(R,{class:"px-2"},{default:t(()=>[e(P,null,{default:t(()=>[(l(),i(w,null,T(3,u=>e(x,{cols:"12",key:`project-${u}`},{default:t(()=>[e(R,{class:"pa-3",rounded:"lg"},{default:t(()=>[e(P,{"no-gutters":""},{default:t(()=>[e(x,{cols:"12",sm:"4"},{default:t(()=>[e($,{type:"image",height:"180",class:"rounded-lg"})]),_:1}),e(x,{cols:"12",sm:"8",class:"pl-sm-4 pt-4 pt-sm-0"},{default:t(()=>[e($,{type:"article",class:"mt-2"})]),_:1})]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})]),d("section",ce,[d("div",ue,[e($,{type:"text",width:"120",class:"mb-2"})]),e(R,{class:"px-2"},{default:t(()=>[e(P,null,{default:t(()=>[(l(),i(w,null,T(4,u=>e(x,{cols:"12",md:"6",key:`user-${u}`},{default:t(()=>[e(R,{class:"pa-3",rounded:"lg",elevation:0},{default:t(()=>[e($,{type:"list-item-avatar-two-line",class:"rounded-lg"})]),_:1})]),_:2},1024)),64))]),_:1})]),_:1})])],64)):(l(),i("div",ie,[e(R,{class:"px-2"},{default:t(()=>[e(P,null,{default:t(()=>[e(x,{cols:"12"},{default:t(()=>[e(R,{class:"pa-3",rounded:"lg"},{default:t(()=>[e($,{type:"article, actions",class:"mb-4 rounded-lg"})]),_:1})]),_:1})]),_:1})]),_:1})]))],64)):S("",!0),!h.value&&m.value&&!s.value?(l(),k(H,{key:4,title:"No Results Found",message:"Try different keywords or check your spelling."})):S("",!0)]),_:1})}}}),de=W(pe,[["__scopeId","data-v-4c4d5b48"]]),Ee=U({__name:"search_results",setup(F){const q=X(),c=a(()=>q.query.search_query||""),_=ee(),o=D();B(async()=>{await Promise.all([_.fetchTalaStageApp()])});const r=a(()=>_.talastageApp),p=a(()=>{var s,m;return c.value?`Search Results for '${c.value}' - ${((s=r.value)==null?void 0:s.name)||"TalaStage"}`:`Search - ${((m=r.value)==null?void 0:m.name)||"TalaStage"}`}),h=a(()=>{var m,g,v,b,V,n,j,f,y,C;return c.value?`Found ${(((v=(g=o.searchResults)==null?void 0:g.projects)==null?void 0:v.total)||0)+(((V=(b=o.searchResults)==null?void 0:b.users)==null?void 0:V.total)||0)} results for '${c.value}' - ${((j=(n=o.searchResults)==null?void 0:n.users)==null?void 0:j.total)||0} talents and ${((y=(f=o.searchResults)==null?void 0:f.projects)==null?void 0:y.total)||0} projects on ${((C=r.value)==null?void 0:C.name)||"TalaStage"}`:`Search for talents and projects on ${((m=r.value)==null?void 0:m.name)||"TalaStage"}`});return te({title:p,description:h,keywords:a(()=>`search, results, talents, projects, opportunities, ${c.value}`),ogTitle:p,ogDescription:h,ogImage:a(()=>{var s;return((s=r.value)==null?void 0:s.logo_url)||"/default-social-image.png"}),ogUrl:a(()=>{var s;return`${((s=r.value)==null?void 0:s.canonical_url)||"https://talastage.com"}/search-results${c.value?`?search_query=${encodeURIComponent(c.value)}`:""}`}),ogType:"website",twitterCard:"summary_large_image",twitterTitle:p,twitterDescription:h,twitterImage:a(()=>{var s;return((s=r.value)==null?void 0:s.logo_url)||"/default-social-image.png"}),noIndex:!0,link:a(()=>[{rel:"canonical",href:a(()=>{var s;return`${((s=r.value)==null?void 0:s.canonical_url)||"https://talastage.com"}/search-results${c.value?`?search_query=${encodeURIComponent(c.value)}`:""}`}).value}])}),(s,m)=>{const g=de;return l(),i("div",null,[e(g)])}}});export{Ee as default};
