import{B as R}from"./COhe-ksk.js";import{u as A}from"./DMBY-Kaj.js";import{V as D}from"./2hEmiBig.js";import{V as T}from"./GXZRJwQ4.js";import{n as L,j as v,t as k,c as b,o as V,a as x,w as e,p as a,q as _,s as u,v as d,b as N,V as q,m as E,y as B}from"./CGQimWOm.js";import{V as F}from"./BhN2__aY.js";import{V as P}from"./CRY4crBU.js";import{V as U}from"./CS8xUUzH.js";import{V as $}from"./BkTuXOR_.js";import{V as M,a as O,b as z}from"./tTgLLTve.js";import{V as G}from"./DoIi4J9g.js";const H={class:"text-body-1 mb-4"},J={key:0},se=L({__name:"ApproveInvestmentDialog",props:{modelValue:{type:Boolean,required:!0},investment:{type:Object,default:null},mode:{type:String,default:"approve"}},emits:["update:modelValue","approved","rejected"],setup(s,{emit:C}){const o=s,p=C,g=A(),m=v(!1),r=v(""),c=v(""),t=v(!1);k(()=>o.mode,l=>{t.value=l==="reject"},{immediate:!0}),k(()=>o.modelValue,l=>{l&&(y(),t.value=o.mode==="reject")});const f=b({get:()=>o.modelValue,set:l=>p("update:modelValue",l)}),I=b(()=>t.value?"Reject Investment":"Approve Investment"),j=()=>{f.value=!1,y()},y=()=>{r.value="",c.value="",o.mode||(t.value=!1)},S=()=>t.value&&!r.value.trim()?(c.value="Please provide a reason for rejection",!1):(c.value="",!0),w=async()=>{if(o.investment&&S()){m.value=!0;try{t.value?p("rejected",o.investment.id,r.value.trim()):p("approved",o.investment.id),j(),g.success(`Investment ${t.value?"rejected":"approved"} successfully`)}catch(l){console.error("Investment action failed:",l),g.error(`Failed to ${t.value?"reject":"approve"} investment`)}finally{m.value=!1}}};return(l,n)=>{const h=R;return V(),x(h,{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=i=>f.value=i),title:I.value,"max-width":"600px"},{actions:e(()=>[a(T),a(_,{color:"grey-darken-1",variant:"text",onClick:j},{default:e(()=>n[2]||(n[2]=[u(" Cancel ")])),_:1}),a(_,{color:t.value?"error":"success",loading:m.value,disabled:m.value||t.value&&!r.value.trim(),onClick:w},{default:e(()=>[u(d(t.value?"Reject":"Approve"),1)]),_:1},8,["color","loading","disabled"])]),default:e(()=>[s.investment?(V(),x(F,{key:0},{default:e(()=>[a(P,null,{default:e(()=>[a(U,{cols:"12"},{default:e(()=>[N("div",H," Are you sure you want to "+d(t.value?"reject":"approve")+" this investment? ",1),a($,{variant:"outlined",class:"mb-4"},{default:e(()=>[a(M,null,{prepend:e(()=>[a(q,{color:s.investment.status==="pending"?"warning":"success"},{default:e(()=>[u(d(s.investment.status==="pending"?"mdi-clock-outline":"mdi-check-circle"),1)]),_:1},8,["color"])]),default:e(()=>[a(O,null,{default:e(()=>[u(" Share Percentage: "+d(s.investment.share_percentage)+"% ",1)]),_:1}),a(z,null,{default:e(()=>[u(" Status: "+d(s.investment.status),1)]),_:1})]),_:1})]),_:1}),a(D,null,{default:e(()=>[t.value?(V(),E("div",J,[a(G,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=i=>r.value=i),label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[i=>!!i||"Reason is required for rejection"],"error-messages":c.value},null,8,["modelValue","rules","error-messages"])])):B("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):B("",!0)]),_:1},8,["modelValue","title"])}}});export{se as _};
