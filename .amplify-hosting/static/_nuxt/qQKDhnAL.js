import{_ as T}from"./BIU2l3Eu.js";import{_ as R,a as W}from"./8q_6vN0P.js";import{c as n,n as k,dX as E,u as q,j as V,l as A,B as N,o as U,a as B,w as _,p as v,x as C,q as I,s as b,v as K,y as M,Q as O,_ as z}from"./CGQimWOm.js";import{u as Q}from"./CvtmPE-9.js";import{u as Y}from"./D5wOIWMa.js";import{u as F}from"./CiN8dqd8.js";import{V as L}from"./6HtF_owb.js";import{V as X,a as G}from"./BkTuXOR_.js";import{V as H}from"./BhN2__aY.js";import{u as J}from"./BW5EWlXk.js";import{u as Z}from"./D78L5r-E.js";import{u as ee}from"./CatCOsi_.js";import"./CMsVONS5.js";import"./C-73ZGdz.js";import"./2hEmiBig.js";import"./BSH7BhKc.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./DbQnG3uQ.js";import"./BRveoiXI.js";import"./tTgLLTve.js";import"./xvVMJZi9.js";import"./Dn0bXcU5.js";import"./BvtSni_j.js";import"./IpAEdaYr.js";import"./CW50LM9V.js";import"./DJ0NdY24.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./DsvAftJq.js";import"./GXZRJwQ4.js";/* empty css        */import"./_WrfyJOJ.js";import"./Bem91KZK.js";import"./COhe-ksk.js";import"./BcH3Kywr.js";import"./DMBY-Kaj.js";import"./DnYNupeP.js";import"./GjSan1Rr.js";import"./CS8xUUzH.js";import"./CRY4crBU.js";import"./f5lwX8SZ.js";import"./CngyuRTk.js";import"./bFKGpjcd.js";import"./D9lJKT5N.js";import"./C2h-HXtC.js";import"./jRUxZAus.js";import"./DL649WMo.js";import"./P_q-BwEt.js";import"./CiXMVmI4.js";import"./DyYnZ78z.js";import"./DVrR1Kw7.js";import"./OJq0nmAj.js";import"./CFP_OpWO.js";import"./DcSlHAeh.js";import"./CE0NNlNx.js";import"./DoIi4J9g.js";import"./SDo9db-O.js";import"./Cw5ECwNl.js";import"./Cxb8uY_z.js";import"./CMYBLF1p.js";import"./BeQTM7t9.js";import"./3ysVR2RL.js";import"./Bz9a9m5j.js";import"./C9TGCd7W.js";import"./DjbnUXUR.js";import"./DM0UXmJz.js";import"./De3D2xlH.js";import"./D4pNkYCe.js";import"./PJxxQmvY.js";import"./CIrzxJ5u.js";import"./DhC4yEL8.js";import"./CgwEN769.js";import"./BWXQ7vJw.js";import"./3SmzOII5.js";import"./BCoct7aH.js";import"./Bp2sYpJN.js";import"./B3G4pkyN.js";import"./DxtVZjZE.js";import"./CkOuN04m.js";import"./DyXR0ZQU.js";import"./Zmmmyk0F.js";import"./Rg_xdRgE.js";import"./dGPA57P0.js";import"./BxLb44po.js";import"./BEy3SeWo.js";import"./QtD4Idd3.js";import"./CYM4bMtk.js";import"./rtPmyJLL.js";import"./BHJozufe.js";const te=()=>{const d=F(),l=n(()=>{try{if(!d.currentBalance)return 0;const r=d.currentBalance.replace(/[^0-9.]/g,"");return parseFloat(r)||0}catch(r){return console.error("Error parsing wallet balance:",r),0}}),m=n(()=>{var r;return(r=d.currentCurrency)!=null&&r.code?`${d.currentCurrency.code} ${l.value.toFixed(2)}`:l.value.toFixed(2)});return{numericBalance:l,formattedBalance:m,compareWithAmount:r=>{const c=l.value;return{numericBalance:c,isSufficient:c>=r,difference:c-r,formattedBalance:m.value}},checkSufficientFunds:r=>l.value>=r,currencyCode:n(()=>{var r;return((r=d.currentCurrency)==null?void 0:r.code)||""})}},re=k({__name:"PremieringCategoryPage",setup(d){const l=E(),m=q(),t=Q(),a=Y(),r=F(),{numericBalance:c,checkSufficientFunds:h,formattedBalance:j}=te(),w=V(1),s=V({show:!1,message:"",color:"error"}),g=V(!1);n(()=>{var p,i,f,u;return{amount:((i=(p=t.requirements)==null?void 0:p.premiering_fee)==null?void 0:i.amount)||0,currency:((u=(f=t.requirements)==null?void 0:f.premiering_fee)==null?void 0:u.currency)||{id:0,code:"",name:""}}});const x=async()=>{try{await r.fetchWallet(),s.value={show:!0,message:"Payment processed successfully!",color:"success"}}catch{s.value={show:!0,message:"Failed to refresh wallet balance",color:"error"}}},e=()=>{s.value={show:!0,message:"You can now continue with your upload",color:"success"}},o=()=>{g.value=!0};n(()=>h(t.amount)),A(async()=>{var f;const p=m.params.premiering_category_slug,i=!t.selectedCategory;try{await t.fetchRequirements(p),i&&((f=t.requirements)!=null&&f.premiering_category)&&(t.selectedCategory=t.requirements.premiering_category,g.value=!0),await r.fetchWallet();const u=t.selectedCategory;u&&a.project&&a.updateProject({premiering_category_id:u.id})}catch(u){s.value={show:!0,message:"Failed to load initial data",color:"error"},console.error("Error in onMounted:",u)}}),N(()=>{t.resetState()});function P(){l.success("Project setup completed!")}function S(p){g.value=!0,p.code==="PAYMENT_REQUIRED"&&t.fetchRequirements(m.params.premiering_category_slug)}return(p,i)=>{const f=T,u=R,D=W;return U(),B(H,{fluid:"",class:"pa-0"},{default:_(()=>{var $;return[v(f,{modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=y=>g.value=y),project:C(a).project,onPaymentSuccess:x,onContinue:e},null,8,["modelValue","project"]),v(L,{modelValue:s.value.show,"onUpdate:modelValue":i[2]||(i[2]=y=>s.value.show=y),color:s.value.color,timeout:5e3,location:"top"},{actions:_(()=>[v(I,{color:"white",variant:"text",onClick:i[1]||(i[1]=y=>s.value.show=!1)},{default:_(()=>i[4]||(i[4]=[b(" Close ")])),_:1})]),default:_(()=>[b(K(s.value.message)+" ",1)]),_:1},8,["modelValue","color"]),v(X,{flat:"",class:"mb-6"},{default:_(()=>[v(G,{class:"pa-6"},{default:_(()=>[v(u,{"requirements-data":C(t).formattedRequirements,onOpenPaymentDialog:S},null,8,["requirements-data"])]),_:1})]),_:1}),($=C(a).project)!=null&&$.access_uuid?(U(),B(D,{key:0,modelValue:w.value,"onUpdate:modelValue":i[3]||(i[3]=y=>w.value=y),mode:"premiering",project:C(a).project,onFinish:P,onPaymentFailed:o},null,8,["modelValue","project"])):M("",!0)]}),_:1})}}}),oe=k({__name:"index",setup(d){const l=q(),m=J(),t=n(()=>l.params.premiering_category_slug),a=V(null);A(async()=>{await m.fetchTalaStageApp(),await r()});const r=async()=>{if(t.value){const{get:e}=ee();try{const o=await e(`/api/premiering/categories/${t.value}`);a.value=o.data}catch(o){console.error("Error fetching premiering category data:",o),a.value={name:x(t.value.replace(/-/g," ")),seo_description:null,meta_keywords:null}}}else a.value=null},c=n(()=>{var e;return((e=m.talastageApp)==null?void 0:e.name)||"TalaStage"}),h=n(()=>{var e;return(e=a.value)!=null&&e.name?`Premiere ${a.value.name} Project - ${c.value}`:`Premiere Project - ${c.value}`}),j=n(()=>{var e,o;return(e=a.value)!=null&&e.seo_description?`Upload and premiere your ${a.value.seo_description} projects on ${c.value}.`:`Upload and premiere your projects in the ${((o=t.value)==null?void 0:o.replace(/-/g," "))||"various"} category on TalaStage.`}),w=n(()=>{var S,p;const e="upload, premiere, project, TalaStage",o=(S=a.value)==null?void 0:S.meta_keywords;return[(p=t.value)==null?void 0:p.replace(/-/g,", "),o,e].filter(Boolean).join(", ")}),s=n(()=>`${O().public.frontendUrl}/premiering/${t.value}`),g=n(()=>{var e,o;return((e=m.talastageApp)==null?void 0:e.thumbnail_url)||((o=m.talastageApp)==null?void 0:o.logo_url)||"https://talastage.com/default-upload-category.png"});Z({title:h,description:j,keywords:w,image:g,type:"website",siteName:c,url:s,noIndex:!0,structured:n(()=>{var e;return{"@context":"https://schema.org","@type":"WebPage",name:h.value,description:j.value,url:s.value,publisher:{"@type":"Organization",name:c.value,logo:{"@type":"ImageObject",url:((e=m.talastageApp)==null?void 0:e.logo_url)||"https://talastage.com/default-thumbnail.png"}}}})});function x(e){return e.toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")}return(e,o)=>{const P=re;return U(),B(P)}}}),Kt=z(oe,[["__scopeId","data-v-0d0da050"]]);export{Kt as default};
