import{_ as j}from"./Cw5ECwNl.js";import{_ as x}from"./Cxb8uY_z.js";import{_ as w}from"./f6uf29Wa.js";import{_ as C}from"./DL649WMo.js";import{g as M,j as p,c as P,t as B,_ as E,aS as N,o as U,a as I,w as h,p as g,b as L,x as m}from"./CGQimWOm.js";import"./3SmzOII5.js";import"./DcSlHAeh.js";import"./BSH7BhKc.js";import"./BeQTM7t9.js";import"./xvVMJZi9.js";import"./BkTuXOR_.js";import"./FspEDv8o.js";import"./f5lwX8SZ.js";import"./Corpgyop.js";import"./BCoct7aH.js";import"./CDtnx0aA.js";import"./DyYnZ78z.js";import"./CRY4crBU.js";/* empty css        */import"./CS8xUUzH.js";import"./BhN2__aY.js";function S(c){const{$axios:f}=M(),t=p([]),r=p(1),o=p(1),s=p(0),a=p(!1),l=async e=>{if(!c.value)throw new Error("Username is required");try{a.value=!0;const n=(await f.get(`/api/user/${c.value}/user-project-credits`,{params:{page:e,per_page:12}})).data;e===1?t.value=n.projects||[]:t.value=[...t.value,...n.projects||[]],o.value=n.last_page||1,s.value=n.total||0,r.value=e}catch(i){throw console.error("Error fetching project credits:",i),i}finally{a.value=!1}},u=P(()=>r.value<o.value),_=async()=>{if(!(!u.value||a.value))try{await l(r.value+1)}catch(e){console.error("Error loading more items:",e)}},d=async()=>{t.value=[],r.value=1,o.value=1,s.value=0;try{await l(1)}catch(e){console.error("Error refreshing data:",e)}},v=()=>{t.value=[],r.value=1,o.value=1,s.value=0,a.value=!1};return B(c,e=>{e&&(v(),d())},{immediate:!0}),{projects:t,isLoading:a,hasMore:u,total:s,currentPage:r,lastPage:o,loadMoreItems:_,refresh:d,reset:v}}const b={class:"user-castings"},k={__name:"UserCredits",props:{username:{type:String,required:!0}},setup(c){const t=N(c,"username"),{projects:r,isLoading:o,hasMore:s,currentPage:a,lastPage:l,loadMoreItems:u}=S(t),_=()=>{s.value&&!o.value&&u()};return(d,v)=>{const e=j,i=x,n=w,y=C;return U(),I(y,null,{default:h(()=>[g(e,{title:"My Castings"}),L("div",b,[g(n,{projects:m(r),"current-page":m(a),"last-page":m(l),"is-loading":m(o),title:"My Castings",variant:"grid",onLoadMore:_},{"empty-state":h(()=>[g(i,{title:"No Castings",message:"No castings yet."})]),_:1},8,["projects","current-page","last-page","is-loading"])])]),_:1})}}},re=E(k,[["__scopeId","data-v-732ab37d"]]);export{re as default};
