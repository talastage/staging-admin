import{_ as X}from"./BeQTM7t9.js";import{n as U,P as H,dX as J,g as K,j as S,c as o,l as B,o as d,a as g,w as r,m as b,p as t,A as O,b as _,F as Q,G as Y,V as T,s as i,v as f,y as x,q as $,_ as L,u as Z}from"./CGQimWOm.js";import{u as ee}from"./DMBY-Kaj.js";import{u as ae}from"./BCoct7aH.js";import{d as I,b as D,a as te,V as k,e as z,c as re}from"./BkTuXOR_.js";import{V as A}from"./GXZRJwQ4.js";import{a as se}from"./DsvAftJq.js";import{V as le}from"./BRveoiXI.js";import{V as F,a as W,b as G}from"./tTgLLTve.js";import{V as ne}from"./BvtSni_j.js";import{u as oe}from"./BW5EWlXk.js";import{u as ue}from"./D78L5r-E.js";import"./xvVMJZi9.js";import"./BSH7BhKc.js";/* empty css        */import"./2hEmiBig.js";import"./Dn0bXcU5.js";const ie={key:0,class:"d-flex align-center justify-center pa-4",style:{height:"200px"}},ce={key:0,class:"error-message mx-4 pa-2"},me={class:"d-flex align-center"},pe={class:"flex-grow-1"},de={class:"text-h4 font-weight-bold text-white mb-0"},fe={class:"text-caption text-white text-medium-emphasis mt-0"},ve={class:"d-flex align-center mt-1"},_e=U({__name:"WalletTransferDetailPage",setup(P){const h=H();J();const w=ee(),{$axios:u}=K(),l=S(!0),e=S(null),a=S(null),n=S(""),m=o(()=>e.value?`status-${e.value}`:""),C=o(()=>{switch(e.value){case"completed":return"success";case"pending":return"warning";case"failed":case"cancelled":return"error";default:return"grey"}}),q=o(()=>{switch(e.value){case"completed":return"mdi-check-circle";case"pending":return"mdi-clock-outline";case"failed":return"mdi-alert-circle";case"cancelled":return"mdi-cancel";default:return"mdi-help-circle"}}),E=o(()=>{switch(e.value){case"completed":return"Transfer Successful!";case"pending":return"Transfer in Progress";case"failed":return"Transfer Failed";case"cancelled":return"Transfer Cancelled";default:return"Transfer Status"}}),{formatLocalDateTime:M}=ae(),R=(p,s)=>{try{const c=typeof p=="string"?parseFloat(p):p;return new Intl.NumberFormat("en-US",{style:"currency",currency:s||"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(c)}catch{return`${p} ${s||"USD"}`}},j=p=>M(p),V=async()=>{var p,s;try{l.value=!0;const c=h.params.referenceNumber||h.query.reference;if(!c)throw new Error("No reference number provided");const{data:v}=await u.get(`/api/wallet/transfer/${c}`);if(v.status==="success")a.value=v.data,e.value=v.data.status,v.data.status==="completed"&&w.success("Transfer completed successfully");else throw new Error(v.message||"Failed to get transfer status")}catch(c){console.error("Status check failed:",c),e.value="failed",n.value=((s=(p=c.response)==null?void 0:p.data)==null?void 0:s.message)||c.message||"Could not check transfer status",w.error(n.value)}finally{l.value=!1}};return B(()=>{V()}),(p,s)=>{const c=X;return d(),g(k,{class:"transfer-detail-card w-100",elevation:"10"},{default:r(()=>[l.value?(d(),b("div",ie,[t(O,{indeterminate:"",color:"primary",size:"48"}),s[0]||(s[0]=_("span",{class:"ml-4 text-medium-emphasis"},"Checking transfer status...",-1))])):(d(),b(Q,{key:1},[t(I,{class:Y([m.value,"d-flex align-center pa-4"])},{default:r(()=>[t(T,{icon:q.value,color:C.value,size:"36",class:"mr-4"},null,8,["icon","color"]),t(D,{tag:"h2",class:"text-h5 font-weight-bold"},{default:r(()=>[i(f(E.value),1)]),_:1}),t(A),a.value?(d(),g(se,{key:0,class:"text-capitalize",color:C.value,size:"small",variant:"elevated","text-color":"white"},{default:r(()=>[i(f(a.value.status),1)]),_:1},8,["color"])):x("",!0)]),_:1},8,["class"]),n.value?(d(),b("p",ce,f(n.value),1)):x("",!0),a.value&&e.value!=="failed"?(d(),g(te,{key:1,class:"px-4 pt-2 pb-0"},{default:r(()=>[t(k,{elevation:"10",class:"mb-4 pa-3",color:"primary",variant:"elevated"},{default:r(()=>[_("div",me,[_("div",pe,[s[1]||(s[1]=_("p",{class:"text-caption text-medium-emphasis mb-0"}," Amount Transferred ",-1)),_("h3",de,f(R(a.value.amount,a.value.currency.code)),1),_("p",fe,f(a.value.currency.code),1)]),t(T,{icon:"mdi-bank-transfer",color:"white",size:"large"})])]),_:1}),t(k,{elevation:"10",class:"mb-4"},{default:r(()=>[t(I,{class:"px-4 py-2"},{default:r(()=>{var v,N;return[t(z,{class:"pb-0 pt-0 text-caption"},{default:r(()=>s[2]||(s[2]=[i("Sent To")])),_:1}),_("div",ve,[t(c,{profile_photo:(v=a.value.receiver)==null?void 0:v.profile_photo,username:(N=a.value.receiver)==null?void 0:N.username,size:"md",class:"mr-3"},null,8,["profile_photo","username"]),_("div",null,[t(D,{class:"pa-0 text-subtitle-1"},{default:r(()=>{var y;return[i(f((y=a.value.receiver)==null?void 0:y.display_name),1)]}),_:1}),t(z,{class:"pa-0 text-caption"},{default:r(()=>{var y;return[i("@"+f((y=a.value.receiver)==null?void 0:y.username),1)]}),_:1})])])]}),_:1})]),_:1}),t(k,{elevation:"10",class:"mb-4"},{default:r(()=>[t(le,{density:"compact"},{default:r(()=>[t(F,null,{prepend:r(()=>[t(T,{icon:"mdi-identifier",color:"primary",size:"small"})]),default:r(()=>[t(W,{class:"text-caption"},{default:r(()=>s[3]||(s[3]=[i("Reference Number")])),_:1}),t(G,{class:"text-right text-caption text-truncate",style:{"max-width":"180px"}},{default:r(()=>[i(f(a.value.reference_number),1)]),_:1})]),_:1}),t(ne),t(F,null,{prepend:r(()=>[t(T,{icon:"mdi-calendar",color:"primary",size:"small"})]),default:r(()=>[t(W,{class:"text-caption"},{default:r(()=>s[4]||(s[4]=[i("Date & Time")])),_:1}),t(G,{class:"text-right text-caption"},{default:r(()=>[i(f(j(a.value.created_at)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0),t(re,{class:"px-4 py-3"},{default:r(()=>[e.value==="pending"?(d(),g($,{key:0,color:"primary",variant:"tonal","prepend-icon":"mdi-refresh",loading:l.value,onClick:V,size:"small"},{default:r(()=>s[5]||(s[5]=[i(" Check Status ")])),_:1},8,["loading"])):e.value==="failed"?(d(),g($,{key:1,color:"primary",to:"/wallet/transfer","prepend-icon":"mdi-refresh",size:"small"},{default:r(()=>s[6]||(s[6]=[i(" Try Again ")])),_:1})):x("",!0),t(A),t($,{color:"primary",variant:"tonal",to:"/wallet","prepend-icon":"mdi-wallet",size:"small"},{default:r(()=>s[7]||(s[7]=[i(" Back to Wallet ")])),_:1}),e.value==="completed"?(d(),g($,{key:2,color:"primary",to:"/wallet/transfer","prepend-icon":"mdi-bank-transfer",size:"small"},{default:r(()=>s[8]||(s[8]=[i(" New Transfer ")])),_:1})):x("",!0)]),_:1})],64))]),_:1})}}}),ge=L(_e,[["__scopeId","data-v-3406da69"]]),he=U({__name:"transfer-[referenceNumber]",setup(P){const h=oe(),w=Z();B(async()=>{await h.fetchTalaStageApp()});const u=o(()=>h.talastageApp),l=o(()=>w.query.transferId);return ue({title:o(()=>{var a;const e=((a=u.value)==null?void 0:a.name)||"TalaStage";return l.value?`Transfer Status - ${l.value} - Wallet - ${e}`:`Transfer Status - Wallet - ${e}`}),description:o(()=>{var a;const e=((a=u.value)==null?void 0:a.name)||"TalaStage";return l.value?`Check the status of your transfer with ID ${l.value} on ${e}. Get real-time updates.`:`Check the status of your transfer on ${e}. Get real-time updates.`}),keywords:o(()=>{var e;return`wallet, transfer status, check transfer, transaction status, transfer ID, ${((e=u.value)==null?void 0:e.name)||"TalaStage"}`}),image:o(()=>{var e;return((e=u.value)==null?void 0:e.logo_url)||"/default-social-image.png"}),type:"website",siteName:o(()=>{var e;return((e=u.value)==null?void 0:e.name)||"TalaStage"}),url:o(()=>{var a;const e=((a=u.value)==null?void 0:a.canonical_url)||"https://talastage.com";return l.value?`${e}/wallet/transfer/status?transferId=${l.value}`:`${e}/wallet/transfer/status`}),canonical:o(()=>{var a;const e=((a=u.value)==null?void 0:a.canonical_url)||"https://talastage.com";return l.value?`${e}/wallet/transfer/status?transferId=${l.value}`:`${e}/wallet/transfer/status`}),noIndex:!0,openGraph:o(()=>{var e,a;return{title:o(()=>{var m;const n=((m=u.value)==null?void 0:m.name)||"TalaStage";return l.value?`Transfer Status - ${l.value} - Wallet - ${n}`:`Transfer Status - Wallet - ${n}`}).value,description:o(()=>{var m;const n=((m=u.value)==null?void 0:m.name)||"TalaStage";return l.value?`Check the status of your transfer with ID ${l.value} on ${n}. Get real-time updates.`:`Check the status of your transfer on ${n}. Get real-time updates.`}).value,url:o(()=>{var m;const n=((m=u.value)==null?void 0:m.canonical_url)||"https://talastage.com";return l.value?`${n}/wallet/transfer/status?transferId=${l.value}`:`${n}/wallet/transfer/status`}).value,image:((e=u.value)==null?void 0:e.logo_url)||"/default-social-image.png",siteName:((a=u.value)==null?void 0:a.name)||"TalaStage",type:"website"}}),twitter:o(()=>{var e;return{card:"summary_large_image",title:o(()=>{var n;const a=((n=u.value)==null?void 0:n.name)||"TalaStage";return l.value?`Transfer Status - ${l.value} - Wallet - ${a}`:`Transfer Status - Wallet - ${a}`}).value,description:o(()=>{var n;const a=((n=u.value)==null?void 0:n.name)||"TalaStage";return l.value?`Check the status of your transfer with ID ${l.value} on ${a}. Get real-time updates.`:`Check the status of your transfer on ${a}. Get real-time updates.`}).value,image:((e=u.value)==null?void 0:e.logo_url)||"/default-social-image.png"}}),link:o(()=>{var e;return[{rel:"icon",href:((e=u.value)==null?void 0:e.favicon_url)||"/favicon.ico"}]})}),(e,a)=>{const n=ge;return d(),g(n)}}}),Ge=L(he,[["__scopeId","data-v-535df2b2"]]);export{Ge as default};
