import{n as M,u as D,k as E,g as w,j as n,c as h,t as Z,l as G,o as u,m as V,p as s,w as r,b as f,v as m,F as q,D as F,a as d,s as c,y as g,V as H,_ as J}from"./CGQimWOm.js";import{a as C}from"./DsvAftJq.js";import{V as K}from"./CRY4crBU.js";import{V as R}from"./CS8xUUzH.js";import{V as j,b as I,a as W,d as X,e as Y}from"./BkTuXOR_.js";import{V as x}from"./DbQnG3uQ.js";import{V as Q}from"./mDFt1xEX.js";import{V as ee}from"./dGPA57P0.js";import{V as te}from"./f5lwX8SZ.js";import{V as le}from"./xvVMJZi9.js";import{V as ae}from"./BSH7BhKc.js";import{V as re}from"./BEZsNnc4.js";import{V as se}from"./BhN2__aY.js";import"./2hEmiBig.js";/* empty css        */import"./CMsVONS5.js";import"./C-73ZGdz.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./BRveoiXI.js";import"./tTgLLTve.js";import"./Dn0bXcU5.js";import"./BvtSni_j.js";import"./IpAEdaYr.js";import"./CW50LM9V.js";import"./DJ0NdY24.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./DjbnUXUR.js";const oe={class:"search-results-page"},ue={class:"search-header mb-6"},ie={class:"text-h4 mb-2"},ne={class:"d-flex flex-wrap gap-2"},me={class:"d-flex align-center justify-space-between mb-4"},de={class:"text-body-1"},ce={class:"d-flex gap-2"},ve=M({__name:"page_search_results",setup(pe){const o=D(),k=E(),{$axios:P}=w(),y=n(!1),$=n([]),_=n(0),i=n(1),A=n(15),a=n({query:"",category:null,country:null,verified:!1,interests:[]}),v=n("relevance"),U=[{title:"Most Relevant",value:"relevance"},{title:"Newest",value:"created_at"},{title:"Name A-Z",value:"name"},{title:"Verified First",value:"verified"}],N=h(()=>Math.ceil(_.value/A.value)),B=h(()=>Object.entries(a.value).reduce((e,[l,t])=>(t&&(typeof t!="object"||t.length>0)&&(e[l]=t),e),{})),O=h(()=>a.value.query?`Search results for "${a.value.query}"`:a.value.category?`${a.value.category} Pages`:"Search Results"),S=async()=>{try{y.value=!0;const{data:e}=await P.get("/api/pages/search",{params:{...a.value,sort_by:v.value,page:i.value,per_page:A.value}});$.value=e.data,_.value=e.meta.total}catch(e){console.error("Error fetching results:",e)}finally{y.value=!1}},p=()=>{i.value=1,k.push({query:{...a.value,sort:v.value,page:i.value}})},z=e=>{Array.isArray(a.value[e])?a.value[e]=[]:a.value[e]=null,p()},T=e=>{k.push({query:{...o.query,page:e}})},L=(e,l)=>{switch(e){case"query":return`Search: ${l}`;case"category":return`Category: ${l}`;case"country":return`Country: ${l}`;case"verified":return"Verified Only";case"interests":return`Interests: ${l.join(", ")}`;default:return`${e}: ${l}`}};return Z(()=>o.query,e=>{a.value={query:e.q||"",category:e.category||null,country:e.country||null,verified:e.verified==="true",interests:Array.isArray(e.interests)?e.interests:e.interests?[e.interests]:[]},v.value=e.sort||"relevance",i.value=Number(e.page)||1,S()},{immediate:!0}),G(()=>{Object.keys(o.query).length&&(a.value={query:o.query.q||"",category:o.query.category||null,country:o.query.country||null,verified:o.query.verified==="true",interests:Array.isArray(o.query.interests)?o.query.interests:o.query.interests?[o.query.interests]:[]},v.value=o.query.sort||"relevance",i.value=Number(o.query.page)||1),S()}),(e,l)=>(u(),V("div",oe,[s(se,null,{default:r(()=>[f("div",ue,[f("h1",ie,m(O.value),1),f("div",ne,[(u(!0),V(q,null,F(B.value,(t,b)=>(u(),d(C,{key:b,closable:"","onClick:close":fe=>z(b)},{default:r(()=>[c(m(L(b,t)),1)]),_:2},1032,["onClick:close"]))),128))])]),s(K,null,{default:r(()=>[s(R,{cols:"12",md:"3"},{default:r(()=>[s(j,null,{default:r(()=>[s(I,null,{default:r(()=>l[6]||(l[6]=[c("Filters")])),_:1}),s(W,null,{default:r(()=>[s(x,{modelValue:a.value.category,"onUpdate:modelValue":[l[0]||(l[0]=t=>a.value.category=t),p],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,8,["modelValue","items"]),s(x,{modelValue:a.value.country,"onUpdate:modelValue":[l[1]||(l[1]=t=>a.value.country=t),p],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,8,["modelValue","items"]),s(Q,{modelValue:a.value.verified,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.verified=t),label:"Verified Only",onChange:p},null,8,["modelValue"]),s(ee,{modelValue:a.value.interests,"onUpdate:modelValue":[l[3]||(l[3]=t=>a.value.interests=t),p],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),s(R,{cols:"12",md:"9"},{default:r(()=>[f("div",me,[f("div",de,m(_.value)+" results found",1),s(x,{modelValue:v.value,"onUpdate:modelValue":[l[4]||(l[4]=t=>v.value=t),p],items:U,density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue"])]),y.value?(u(),d(te,{key:0,type:"card-list",loading:y.value},null,8,["loading"])):(u(),V(q,{key:1},[(u(!0),V(q,null,F($.value,t=>(u(),d(j,{key:t.id,to:`/investors/${t.slug}`,class:"mb-4"},{default:r(()=>[s(X,null,{prepend:r(()=>[s(le,{size:"60",class:"mr-4"},{default:r(()=>[s(ae,{src:t.avatar_url},null,8,["src"])]),_:2},1024)]),append:r(()=>[f("div",ce,[t.category?(u(),d(C,{key:0,size:"small",color:"primary",variant:"outlined"},{default:r(()=>[c(m(t.category.name),1)]),_:2},1024)):g("",!0),t.country?(u(),d(C,{key:1,size:"small",variant:"outlined"},{default:r(()=>[c(m(t.country.name),1)]),_:2},1024)):g("",!0)])]),default:r(()=>[s(I,null,{default:r(()=>[c(m(t.name)+" ",1),t.is_verified?(u(),d(H,{key:0,color:"primary",class:"ml-2",size:"small"},{default:r(()=>l[7]||(l[7]=[c(" mdi-check-decagram ")])),_:1})):g("",!0)]),_:2},1024),s(Y,null,{default:r(()=>[c(m(t.tagline),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"]))),128)),N.value>1?(u(),d(re,{key:0,modelValue:i.value,"onUpdate:modelValue":[l[5]||(l[5]=t=>i.value=t),T],length:N.value},null,8,["modelValue","length"])):g("",!0)],64))]),_:1})]),_:1})]),_:1})]))}}),He=J(ve,[["__scopeId","data-v-75d65dc7"]]);export{He as default};
