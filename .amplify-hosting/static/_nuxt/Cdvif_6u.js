import{_ as M}from"./Cw5ECwNl.js";import{_ as V}from"./Cxb8uY_z.js";import{_ as T}from"./f6uf29Wa.js";import{_ as D}from"./DL649WMo.js";import{f as I,g as N,n as $,k as A,j,c as m,t as O,l as R,cG as U,o as g,a as f,w as t,p as n,x as i,b as Y,v as h,V as y,s as d,m as z,F as G,D as H,_ as q}from"./CGQimWOm.js";import{u as J}from"./BRpmYQkE.js";import{a as v}from"./BkTuXOR_.js";import{a as W}from"./DsvAftJq.js";import"./3SmzOII5.js";import"./DcSlHAeh.js";import"./BSH7BhKc.js";import"./BeQTM7t9.js";import"./xvVMJZi9.js";import"./FspEDv8o.js";import"./f5lwX8SZ.js";import"./Corpgyop.js";import"./BCoct7aH.js";import"./CDtnx0aA.js";import"./DyYnZ78z.js";import"./CRY4crBU.js";/* empty css        */import"./CS8xUUzH.js";import"./BhN2__aY.js";import"./2hEmiBig.js";const K=I("userProjects",{state:()=>({projects:[],pagination:{currentPage:1,lastPage:1,total:0,perPage:12,from:1,to:12},isLoading:!1,error:null}),getters:{hasMorePages:a=>a.pagination.currentPage<a.pagination.lastPage,totalProjects:a=>a.pagination.total},actions:{resetState(){this.projects=[],this.pagination={currentPage:1,lastPage:1,total:0,perPage:12,from:1,to:12},this.isLoading=!1,this.error=null},async fetchProjects(a){var r,c;if(this.isLoading||!this.hasMorePages&&this.projects.length>0)return;this.isLoading=!0,this.error=null;const{$axios:o}=N();try{const{data:e}=await o.get(`/api/user/${a}/projects`,{params:{page:this.pagination.currentPage}});this.pagination.currentPage===1?this.projects=e.projects:this.projects=[...this.projects,...e.projects],this.pagination={currentPage:e.pagination.current_page+1,lastPage:e.pagination.last_page,total:e.pagination.total,perPage:e.pagination.per_page,from:e.pagination.from,to:e.pagination.to}}catch(e){throw console.error("Error fetching projects:",e),this.error=((c=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:c.message)||"Failed to fetch projects",e}finally{this.isLoading=!1}}}}),Q={class:"text-subtitle-1"},X=5*60*1e3,Z=$({__name:"UserProjects",props:{username:{type:String,required:!0}},setup(a){const o=a;A();const r=K(),{isProfileOwner:c}=J(o.username),e=j(null),l=j(!1),x=m(()=>c.value?"My Premieres":`${o.username}'s Premieres`),w=m(()=>`
  Ready to showcase your talent? Start by premiering your first project.
  Share your creative work with the world and build your portfolio.
`),k=m(()=>`
  ${o.username} hasn't shared any premieres yet.
  Check back later to see what they create!
`),_=m(()=>e.value?Date.now()-e.value>X:!0),S=["🎬 Share Your Work","🌟 Build Your Portfolio","🤝 Connect with Others","💡 Inspire & Get Inspired"],u=async(p=!1)=>{if(!(!p&&!_.value&&l.value))try{await r.fetchProjects(o.username),e.value=Date.now(),l.value=!0}catch(s){console.error("Error fetching projects:",s)}},C=()=>{r.resetState(),e.value=null,l.value=!1};return O(()=>o.username,(p,s)=>{p&&p!==s&&(C(),u(!0))}),R(()=>{o.username&&!l.value&&u()}),U(()=>{o.username&&_.value&&u()}),(p,s)=>{const b=M,P=V,L=T,B=D;return g(),f(B,null,{default:t(()=>[n(L,{projects:i(r).projects,"total-projects":i(r).totalProjects,"current-page":i(r).pagination.currentPage,"last-page":i(r).pagination.lastPage,"is-loading":i(r).isLoading,variant:"grid",title:"User Projects",onLoadMore:u},{header:t(()=>[n(b,{title:x.value},{subtitle:t(()=>[Y("p",Q,h(i(r).totalProjects)+" premieres",1)]),_:1},8,["title"])]),"empty-state":t(()=>[i(c)?(g(),f(P,{key:0,title:"Start Your Creative Journey",message:w.value,"action-text":"Premiere Your First Project",link:"/premiering"},{icon:t(()=>[n(y,{size:"64",color:"primary",class:"mb-4"},{default:t(()=>s[0]||(s[0]=[d(" mdi-movie-plus-outline ")])),_:1})]),"extra-content":t(()=>[n(v,{class:"text-center"},{default:t(()=>[(g(),z(G,null,H(S,(E,F)=>n(W,{key:F,class:"ma-1",color:"primary",variant:"outlined",size:"small"},{default:t(()=>[d(h(E),1)]),_:2},1024)),64))]),_:1})]),_:1},8,["message"])):(g(),f(P,{key:1,title:`${a.username}'s Premieres`,message:k.value},{icon:t(()=>[n(y,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:t(()=>s[1]||(s[1]=[d(" mdi-movie-open-outline ")])),_:1})]),"extra-content":t(()=>[n(v,{class:"text-center text-caption text-grey-darken-1"},{default:t(()=>[d(" Follow "+h(a.username)+" to get notified when they share new projects ",1)]),_:1})]),_:1},8,["title","message"]))]),_:1},8,["projects","total-projects","current-page","last-page","is-loading"])]),_:1})}}}),ke=q(Z,[["__scopeId","data-v-683d1111"]]);export{ke as default};
