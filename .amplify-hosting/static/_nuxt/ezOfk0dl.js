import{_ as M}from"./Bem91KZK.js";import{_ as Q}from"./DD4k1lXb.js";import{V as W}from"./GXZRJwQ4.js";import{n as S,o as r,m as C,p as o,w as a,q as E,V as b,s as m,dZ as Z,k as K,j as I,c as _,a as c,b as u,v as P,_ as D,F as L,D as q,g as J,l as N,t as G,x as h,A as X,y as Y,u as ee,a5 as te,Q as ae}from"./CGQimWOm.js";import{V as O}from"./D4pNkYCe.js";import{_ as se}from"./BeQTM7t9.js";import{_ as oe}from"./CMYBLF1p.js";import{_ as ne}from"./DL649WMo.js";import{V as H}from"./xvVMJZi9.js";import{a as re}from"./DsvAftJq.js";import{a as ie,b as le,V as ue}from"./tTgLLTve.js";import{V as A}from"./P_q-BwEt.js";import{V as z}from"./CS8xUUzH.js";import{V as T}from"./CRY4crBU.js";import{V as ce}from"./BRveoiXI.js";import{_ as de}from"./DPoG3AgV.js";import{V as pe}from"./BEZsNnc4.js";import{V as me}from"./BhN2__aY.js";import{u as ve}from"./istWFD0Z.js";import{u as ge}from"./BW5EWlXk.js";import{u as _e}from"./D78L5r-E.js";import"./BSH7BhKc.js";/* empty css        */import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./BkTuXOR_.js";import"./2hEmiBig.js";import"./Dn0bXcU5.js";import"./BvtSni_j.js";const fe={class:"d-flex align-center"},ye=S({__name:"BaseViewToggle",props:{modelValue:{}},emits:["update:modelValue"],setup(f){return(s,i)=>(r(),C("div",fe,[o(W),o(Z,{"model-value":s.modelValue,"onUpdate:modelValue":i[0]||(i[0]=l=>s.$emit("update:modelValue",l)),mandatory:"",density:"comfortable",color:"primary",rounded:"lg"},{default:a(()=>[o(E,{value:"grid"},{prepend:a(()=>[o(b,{icon:"mdi-view-grid-outline",size:"20"})]),default:a(()=>[o(O,{activator:"parent",location:"top"},{default:a(()=>i[1]||(i[1]=[m("Grid View")])),_:1})]),_:1}),o(E,{value:"list"},{prepend:a(()=>[o(b,{icon:"mdi-view-list-outline",size:"20"})]),default:a(()=>[o(O,{activator:"parent",location:"top"},{default:a(()=>i[2]||(i[2]=[m("List View")])),_:1})]),_:1})]),_:1},8,["model-value"])]))}}),Ve={class:"investor-header"},he={class:"avatar-container"},je={class:"investor-info"},we={class:"text-subtitle-1 font-weight-medium text-truncate"},$e={class:"earnings-details"},Pe={class:"detail-row"},Ie={class:"detail-icon"},be={class:"detail-content"},ke={class:"detail-value"},Ue={class:"detail-row"},xe={class:"detail-icon"},ze={class:"detail-content"},Te={class:"detail-value"},Ce={class:"detail-row"},Se={class:"detail-icon"},Be={class:"detail-content"},Ee={class:"detail-value"},Le=S({__name:"ProjectInvestorEarningItem",props:{investor:{},accessUuid:{},viewType:{}},setup(f){const s=f,i=K(),l=I("/images/default-user-avatar.png"),n=I("/images/default-page-avatar.png"),j=_(()=>{var t;return(t=s.investor.investor_type)==null?void 0:t.is_user}),V=_(()=>{var t,e;return j.value?((t=s.investor.investor)==null?void 0:t.display_name)||"Unnamed User":((e=s.investor.investor)==null?void 0:e.name)||"Unnamed Page"}),d=_(()=>{var t;return((t=s.investor.investor)==null?void 0:t.username)||""}),v=_(()=>{var t;return((t=s.investor.investor)==null?void 0:t.profile_photo)||l.value}),y=_(()=>s.investor.investor&&s.investor.investor.id),p=_(()=>U(s.investor.earnings.total_gross_amount)),k=_(()=>U(s.investor.earnings.total_net_amount));function U(t){var $,x;if(!((x=($=s.investor)==null?void 0:$.earnings)!=null&&x.currency))return`${t.toFixed(2)}`;const{code:e,symbol:w}=s.investor.earnings.currency;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD",currencyDisplay:"symbol"}).format(t)}catch{return`${w||"$"}${t.toFixed(2)}`}}function g(t){if(t&&t.preventDefault(),!y.value){console.warn("Cannot navigate: Invalid investor data");return}i.push(`/investments/earnings/projects/${s.accessUuid}/investor-details-${s.investor.investor.id}`)}return(t,e)=>{const w=se,$=oe,x=ne;return t.viewType==="grid"?(r(),c(x,{key:0,class:"project-investor-item",elevation:2,hover:""},{default:a(()=>[u("div",Ve,[u("div",he,[j.value?(r(),c(w,{key:0,username:d.value,profile_photo:v.value,size:"md"},null,8,["username","profile_photo"])):t.investor.investor?(r(),c($,{key:1,page:t.investor.investor,"default-image":n.value,size:"md"},null,8,["page","default-image"])):(r(),c(H,{key:2,size:"40",image:l.value},null,8,["image"]))]),u("div",je,[u("div",we,P(V.value),1),o(re,{color:t.investor.type==="creator"?"primary":"secondary",density:"compact",size:"x-small",class:"mt-1"},{default:a(()=>[m(P(t.investor.type),1)]),_:1},8,["color"])])]),u("div",$e,[u("div",Pe,[u("div",Ie,[o(b,{size:"small"},{default:a(()=>e[0]||(e[0]=[m("mdi-percent")])),_:1})]),u("div",be,[e[1]||(e[1]=u("div",{class:"detail-label"},"Share",-1)),u("div",ke,P(t.investor.share_percentage)+"%",1)])]),u("div",Ue,[u("div",xe,[o(b,{size:"small"},{default:a(()=>e[2]||(e[2]=[m("mdi-cash")])),_:1})]),u("div",ze,[e[3]||(e[3]=u("div",{class:"detail-label"},"Gross",-1)),u("div",Te,P(p.value),1)])]),u("div",Ce,[u("div",Se,[o(b,{size:"small"},{default:a(()=>e[4]||(e[4]=[m("mdi-cash-check")])),_:1})]),u("div",Be,[e[5]||(e[5]=u("div",{class:"detail-label"},"Net",-1)),u("div",Ee,P(k.value),1)])])])]),_:1})):(r(),c(ue,{key:1,class:"project-investor-item-list",rounded:"",variant:"elevated",elevation:1,active:!1,onClick:g},{prepend:a(()=>[j.value?(r(),c(w,{key:0,username:d.value,profile_photo:v.value,size:"sm"},null,8,["username","profile_photo"])):t.investor.investor?(r(),c($,{key:1,page:t.investor.investor,"default-image":n.value,size:"sm"},null,8,["page","default-image"])):(r(),c(H,{key:2,size:"32",image:l.value},null,8,["image"]))]),append:a(()=>[o(b,{size:"small",color:"primary"},{default:a(()=>e[8]||(e[8]=[m("mdi-chevron-right")])),_:1})]),default:a(()=>[o(ie,{class:"font-weight-medium text-truncate"},{default:a(()=>[m(P(V.value),1)]),_:1}),o(le,{class:"compact-info"},{default:a(()=>[o(b,{size:"x-small",class:"mr-1"},{default:a(()=>e[6]||(e[6]=[m("mdi-percent")])),_:1}),m(" "+P(t.investor.share_percentage)+"% | ",1),o(b,{size:"x-small",class:"mr-1 ml-1"},{default:a(()=>e[7]||(e[7]=[m("mdi-cash-check")])),_:1}),m(" "+P(k.value),1)]),_:1})]),_:1}))}}}),Ne=D(Le,[["__scopeId","data-v-1feb2bb2"]]),Ae=S({__name:"ProjectInvestorEarningsList",props:{investors:{},accessUuid:{},viewType:{}},setup(f){return(s,i)=>{const l=Ne;return r(),C("div",null,[s.investors.length===0?(r(),c(A,{key:0,type:"info",variant:"tonal"},{default:a(()=>i[0]||(i[0]=[m(" No investors found for this project. ")])),_:1})):s.viewType==="grid"?(r(),c(T,{key:1,class:"investor-grid"},{default:a(()=>[(r(!0),C(L,null,q(s.investors,n=>(r(),c(z,{key:n.id,cols:"12",sm:"6",md:"4",class:"mb-4"},{default:a(()=>[o(l,{investor:n,"access-uuid":s.accessUuid,"view-type":"grid"},null,8,["investor","access-uuid"])]),_:2},1024))),128))]),_:1})):(r(),c(ce,{key:2,class:"investor-list pa-0"},{default:a(()=>[(r(!0),C(L,null,q(s.investors,n=>(r(),c(l,{key:n.id,investor:n,"access-uuid":s.accessUuid,"view-type":"list"},null,8,["investor","access-uuid"]))),128))]),_:1}))])}}}),De=D(Ae,[["__scopeId","data-v-85e3304b"]]);function Fe(){const{$axios:f}=J(),s=I([]),i=I(!1),l=I(null),n=I({currentPage:1,totalPages:0,totalItems:0,perPage:10});async function j(V,d=1){var v,y;i.value=!0,l.value=null;try{const p=await f.get(`/api/projects/${V}/earnings/investors`,{params:{page:d,per_page:n.value.perPage}});s.value=p.data.data,n.value={currentPage:p.data.meta.current_page,totalPages:p.data.meta.last_page,totalItems:p.data.meta.total,perPage:p.data.meta.per_page}}catch(p){l.value=((y=(v=p.response)==null?void 0:v.data)==null?void 0:y.message)||"Failed to fetch investors"}finally{i.value=!1}}return{investors:s,loading:i,error:l,pagination:n,fetchInvestors:j}}const Re=S({__name:"ProjectInvestorEarningsPage",props:{project:{type:Object,required:!0},accessUuid:{type:String,required:!0},projectLoading:{type:Boolean,default:!1}},setup(f){const s=f,i=K(),l=I("grid");N(()=>{try{const g=localStorage.getItem("investor-earnings-view-type");(g==="list"||g==="grid")&&(l.value=g)}catch{}}),G(l,g=>{try{localStorage.setItem("investor-earnings-view-type",g)}catch{}});function n(){i.push(`/project/${s.accessUuid}/earnings`)}const{investors:j,loading:V,error:d,pagination:v,fetchInvestors:y}=Fe(),p=I(!1);N(async()=>{!s.projectLoading&&!p.value&&(await y(s.accessUuid),p.value=!0)}),G(()=>s.projectLoading,async(g,t)=>{!g&&t&&!p.value&&(await y(s.accessUuid),p.value=!0)});async function k(){await y(s.accessUuid,v.currentPage)}async function U(g){await y(s.accessUuid,g),window.scrollTo({top:0,behavior:"smooth"})}return(g,t)=>{const e=M,w=Q,$=ye,x=De,F=de;return r(),c(me,null,{default:a(()=>{var R;return[o(w,{project:f.project,loading:f.projectLoading,subtitle:"Project Investors & Earnings",elevation:10},{actions:a(()=>[o(e,{title:"Back to Earnings",color:"primary",variant:"tonal",size:"small","prepend-icon":"mdi-arrow-left",action:n})]),_:1},8,["project","loading"]),o(F,{title:"Investors & Earnings",subtitle:(R=f.project)==null?void 0:R.name},{action:a(()=>[o($,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=B=>l.value=B)},null,8,["modelValue"])]),content:a(()=>[h(V)?(r(),c(T,{key:0},{default:a(()=>[o(z,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[o(X,{indeterminate:"",color:"primary",size:"64"})]),_:1})]),_:1})):h(d)?(r(),c(T,{key:1},{default:a(()=>[o(z,{cols:"12"},{default:a(()=>[o(A,{type:"error",variant:"tonal"},{append:a(()=>[o(E,{color:"error",variant:"text",onClick:k},{default:a(()=>t[2]||(t[2]=[m(" Retry ")])),_:1})]),default:a(()=>[m(P(h(d))+" ",1)]),_:1})]),_:1})]),_:1})):h(j).length>0?(r(),C(L,{key:2},[o(x,{investors:h(j),"access-uuid":f.accessUuid,"view-type":l.value},null,8,["investors","access-uuid","view-type"]),o(T,{class:"mt-6"},{default:a(()=>[o(z,{cols:"12",class:"d-flex justify-center"},{default:a(()=>[h(v).totalPages>1?(r(),c(pe,{key:0,modelValue:h(v).currentPage,"onUpdate:modelValue":[t[1]||(t[1]=B=>h(v).currentPage=B),U],length:h(v).totalPages,"total-visible":7},null,8,["modelValue","length"])):Y("",!0)]),_:1})]),_:1})],64)):(r(),c(T,{key:3},{default:a(()=>[o(z,{cols:"12"},{default:a(()=>[o(A,{type:"info",variant:"tonal"},{default:a(()=>t[3]||(t[3]=[m(" No investors found for this project. ")])),_:1})]),_:1})]),_:1}))]),_:1},8,["subtitle"])]}),_:1})}}}),qe=D(Re,[["__scopeId","data-v-d801530c"]]),Vt=S({__name:"index",setup(f){const s=ee(),i=I(s.params.access_uuid),l=ve(),{project:n,isLoading:j}=te(l),V=ge(),d=_(()=>{var e;return((e=V.talastageApp)==null?void 0:e.name)||"TalaStage"});N(async()=>{(!n.value||n.value.access_uuid!==i.value)&&await l.fetchProject(i.value)});const v=_(()=>{var e;return(e=n.value)!=null&&e.name?`Investors & Earnings for ${n.value.name} - ${d.value}`:`Project Investors & Earnings - ${d.value}`}),y=_(()=>{var e;return(e=n.value)!=null&&e.name?`View the list of investors and their earnings for the project ${n.value.name} on ${d.value}.`:`Explore the investors and earnings associated with a project on ${d.value}.`}),p=_(()=>{var e;return(e=n.value)!=null&&e.name?`${n.value.name}, investors, earnings, project finance, ${d.value}`:`project investors, project earnings, investment details, ${d.value}`}),k=_(()=>`/earnings/project/${i.value}/investors`),U=_(()=>{var e,w;return((e=V.talastageApp)==null?void 0:e.thumbnail_url)||((w=V.talastageApp)==null?void 0:w.logo_url)||"https://talastage.com/default-project-earnings.png"}),t=ae().public.frontendUrl||"https://talastage.com";return _e({title:v,description:y,keywords:p,image:U,type:"website",siteName:d,url:_(()=>`${t}${k.value}`),noIndex:!0,structuredDataFactory:()=>{var e;return n.value?{"@context":"https://schema.org","@type":"WebPage",name:v.value,description:y.value,url:`${t}${k.value}`,publisher:{"@type":"Organization",name:d.value,logo:{"@type":"ImageObject",url:((e=V.talastageApp)==null?void 0:e.logo_url)||"https://talastage.com/default-thumbnail.png"}}}:{}}}),(e,w)=>{const $=qe;return r(),c($,{project:h(n),"access-uuid":i.value,"project-loading":h(j)},null,8,["project","access-uuid","project-loading"])}}});export{Vt as default};
