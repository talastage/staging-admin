import{a as f}from"./CDtnx0aA.js";import{j as t,l as c}from"./CGQimWOm.js";function y(i,n,s={}){const a=t(1),e=t(!1),l=t(null);async function o(){if(!(typeof n=="function"?!n():!n.value)){e.value=!0;try{a.value+=1,await i(a.value)}catch(r){console.error("Infinite loader error:",r)}finally{e.value=!1}}}async function u(){a.value=1,e.value=!0;try{await i(a.value)}catch(r){console.error("Initial load error:",r)}finally{e.value=!1}}return f(l,([r])=>{r.isIntersecting&&!e.value&&o()},{threshold:.1}),c(()=>{s.immediate!==!1&&u()}),{sentinelRef:l,page:a,isLoading:e,initLoader:u,loadNextPage:o}}export{y as u};
