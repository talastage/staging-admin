import{u as P}from"./QtD4Idd3.js";import{n as I,c as u,o as h,m as M,v,y as E,a as b,J as j,w as y,s as S,G as F,b as n,p as z,V as q,_ as B,M as T,f as R,g as L,j as w}from"./CGQimWOm.js";import{V as W}from"./P_q-BwEt.js";import{a as U,V as G}from"./BkTuXOR_.js";import{V as J}from"./xvVMJZi9.js";import{u as O}from"./CiN8dqd8.js";function H(){const p=o=>{if(o===0)return"0 Bytes";const l=1024,g=["Bytes","KB","MB","GB","TB"],x=Math.floor(Math.log(o)/Math.log(l));return parseFloat((o/Math.pow(l,x)).toFixed(2))+" "+g[x]},s=o=>o.slice((o.lastIndexOf(".")-1>>>0)+2).toLowerCase();return{formatFileSize:p,getFileExtension:s,getFileType:o=>{const l=s(o);return{jpg:"Image",jpeg:"Image",png:"Image",gif:"Image",webp:"Image",svg:"Image",pdf:"PDF Document",doc:"Word Document",docx:"Word Document",xls:"Excel Spreadsheet",xlsx:"Excel Spreadsheet",ppt:"PowerPoint",pptx:"PowerPoint",txt:"Text Document",mp3:"Audio",wav:"Audio",ogg:"Audio",mp4:"Video",mov:"Video",avi:"Video",mkv:"Video",zip:"Archive",rar:"Archive","7z":"Archive",tar:"Archive",gz:"Archive",js:"JavaScript",ts:"TypeScript",html:"HTML",css:"CSS",json:"JSON",xml:"XML",csv:"CSV File",md:"Markdown"}[l]||"Unknown File"},formatFileName:(o,l=20)=>{const g=s(o),x=o.slice(0,o.lastIndexOf("."));return x.length<=l?o:`${x.slice(0,l)}...${g}`},getFileIcon:o=>{const l=s(o);return{jpg:"🖼️",jpeg:"🖼️",png:"🖼️",gif:"🖼️",webp:"🖼️",svg:"🖼️",pdf:"📄",doc:"📝",docx:"📝",xls:"📊",xlsx:"📊",ppt:"📊",pptx:"📊",txt:"📄",mp3:"🎵",wav:"🎵",ogg:"🎵",mp4:"🎥",mov:"🎥",avi:"🎥",mkv:"🎥",zip:"📦",rar:"📦","7z":"📦",js:"📜",ts:"📜",html:"📜",css:"📜",csv:"📊",md:"📝"}[l]||"📄"},formatFileDate:o=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(o)),isImageFile:o=>["jpg","jpeg","png","gif","webp","svg"].includes(s(o)),isDocumentFile:o=>["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"].includes(s(o)),formatFilePermissions:o=>{const l={0:"---",1:"--x",2:"-w-",3:"-wx",4:"r--",5:"r-x",6:"rw-",7:"rwx"};return o.split("").map(g=>l[g]).join("")}}}const K={class:"requirements-wrapper"},X={key:0,class:"requirements-title"},Q={class:"req-item"},Y={class:"req-value"},Z={class:"req-item"},ee={class:"req-value"},te={class:"req-item"},ae={class:"req-value"},oe={class:"req-item"},re={class:"req-value"},se=I({__name:"PremieringMediaRequirements",props:{title:{default:void 0},loading:{type:Boolean,default:!1},error:{default:null},maxSize:{},resolution:{},format:{},duration:{},layout:{default:"horizontal"}},setup(p){const s=p,{formatDuration:t}=P(),{formatFileSize:c}=H(),m=u(()=>{const a=typeof s.maxSize=="string"?parseInt(s.maxSize,10):s.maxSize;return c(a)}),f=u(()=>{const a=s.duration;return typeof a!="number"||isNaN(a)?"Invalid duration":t(a,{showSeconds:!0,shortFormat:!0})});return(a,i)=>(h(),M("div",K,[a.title?(h(),M("h3",X,v(a.title),1)):E("",!0),a.loading?(h(),b(j,{key:1,indeterminate:"",color:"primary",height:"2"})):a.error?(h(),b(W,{key:2,type:"error",variant:"tonal",density:"compact",class:"mb-0"},{default:y(()=>[S(v(a.error),1)]),_:1})):(h(),M("div",{key:3,class:F([a.layout==="horizontal"?"requirements-grid":"requirements-list"])},[n("div",Q,[z(q,{size:a.layout==="horizontal"?"small":"default",color:"primary",class:"mr-2"},{default:y(()=>i[0]||(i[0]=[S(" mdi-file-size ")])),_:1},8,["size"]),n("div",{class:F(a.layout==="horizontal"?"req-content-horizontal":"req-content-vertical")},[i[1]||(i[1]=n("span",{class:"req-label"},"Maximum Size:",-1)),n("span",Y,v(m.value),1)],2)]),n("div",Z,[z(q,{size:a.layout==="horizontal"?"small":"default",color:"primary",class:"mr-2"},{default:y(()=>i[2]||(i[2]=[S(" mdi-video-high-definition ")])),_:1},8,["size"]),n("div",{class:F(a.layout==="horizontal"?"req-content-horizontal":"req-content-vertical")},[i[3]||(i[3]=n("span",{class:"req-label"},"Max Resolution:",-1)),n("span",ee,v(a.resolution),1)],2)]),n("div",te,[z(q,{size:a.layout==="horizontal"?"small":"default",color:"primary",class:"mr-2"},{default:y(()=>i[4]||(i[4]=[S(" mdi-video-input-component ")])),_:1},8,["size"]),n("div",{class:F(a.layout==="horizontal"?"req-content-horizontal":"req-content-vertical")},[i[5]||(i[5]=n("span",{class:"req-label"},"Format:",-1)),n("span",ae,v(a.format),1)],2)]),n("div",oe,[z(q,{size:a.layout==="horizontal"?"small":"default",color:"primary",class:"mr-2"},{default:y(()=>i[6]||(i[6]=[S(" mdi-clock-outline ")])),_:1},8,["size"]),n("div",{class:F(a.layout==="horizontal"?"req-content-horizontal":"req-content-vertical")},[i[7]||(i[7]=n("span",{class:"req-label"},"Duration:",-1)),n("span",re,v(f.value),1)],2)])],2))]))}}),he=B(se,[["__scopeId","data-v-2b830504"]]),ie={class:"d-flex align-center"},ne={class:"d-flex align-center"},le={class:"amount-info"},ue={class:"text-subtitle-2 text-medium-emphasis"},ce={class:"d-flex align-center"},me={class:"text-h6 font-weight-bold"},de={class:"text-caption text-medium-emphasis ml-1"},pe={class:"ml-auto",style:{"min-width":"140px"}},ve=I({__name:"PaymentConfirmationCard",props:{amount:{},currencySymbol:{},currencyCode:{},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},paymentLabel:{default:"Premiering Fee"}},setup(p){return(s,t)=>(h(),b(G,{elevation:"10",rounded:"lg"},{default:y(()=>[z(U,{class:"pa-2"},{default:y(()=>[n("div",ie,[n("div",ne,[z(J,{class:"payment-avatar mr-4",size:"48",color:"primary",variant:"tonal"},{default:y(()=>[z(q,{size:"24",color:"primary"},{default:y(()=>t[0]||(t[0]=[S(" mdi-cash-multiple ")])),_:1})]),_:1}),n("div",le,[n("div",ue,v(s.paymentLabel),1),n("div",ce,[n("span",me,v(s.currencySymbol)+" "+v(s.amount.toLocaleString()),1),n("span",de,v(s.currencyCode),1)]),t[1]||(t[1]=n("div",{class:"text-caption text-medium-emphasis mt-1"}," That amount will be deducted from your wallet balance after uploading is complete. ",-1))])]),n("div",pe,[T(s.$slots,"actions",{},void 0,!0)])])]),_:3})]),_:3}))}}),Se=B(ve,[["__scopeId","data-v-e60bd4c2"]]),Fe=R("premieringMediaUploadRequirements",()=>{const{$axios:p}=L(),s=w(null),t=w(null),c=w(!1),m=w(null),f=u(()=>{var r;if(!((r=t.value)!=null&&r.max_file_size))return"0 MB";const e=t.value.max_file_size;return e>=1024?`${(e/1024).toFixed(1)} GB`:`${e} MB`}),a=u(()=>{var e;return(e=t.value)!=null&&e.max_file_size?t.value.max_file_size*1024*1024:0}),i=u(()=>{var e,r,d;return{loading:c.value,error:m.value,maxSize:a.value,resolution:((e=t.value)==null?void 0:e.resolution_limit)||"N/A",format:((r=t.value)==null?void 0:r.encoding_format)||"N/A",duration:((d=t.value)==null?void 0:d.main_duration_limit)??0}}),_=u(()=>{var e,r,d;return{loading:c.value,error:m.value,maxSize:a.value,resolution:((e=t.value)==null?void 0:e.resolution_limit)||"N/A",format:((r=t.value)==null?void 0:r.encoding_format)||"N/A",duration:((d=t.value)==null?void 0:d.trailer_duration_limit)??0}}),o=u(()=>{var e,r;return((r=(e=t.value)==null?void 0:e.premiering_fee)==null?void 0:r.amount)||0}),l=u(()=>{var e,r;return((r=(e=t.value)==null?void 0:e.premiering_fee)==null?void 0:r.currency)||null}),g=u(()=>{var e;return((e=l.value)==null?void 0:e.code)||""}),x=u(()=>{var e;return((e=l.value)==null?void 0:e.code)||""}),V=async e=>{try{s.value=e,await C(e.slug)}catch(r){console.error("Error in selectCategory:",r),m.value="Failed to load category requirements."}},C=async e=>{c.value=!0,m.value=null;try{const r=await p.get(`/api/premiering-fees/${e}`);t.value=r.data}catch(r){throw console.error("Error fetching requirements:",r),m.value="Failed to fetch media requirements.",r}finally{c.value=!1}},A=()=>{s.value=null,localStorage.removeItem("premieringMediaUploadRequirements-selectedCategory"),c.value=!1,m.value=null},$=e=>{var d;if(!((d=t.value)!=null&&d.max_file_size))return!1;const r=t.value.max_file_size*1024*1024;return e<=r},D=e=>{var d;if(!((d=t.value)!=null&&d.encoding_format))return!1;const r=`video/${t.value.encoding_format.toLowerCase()}`;return e.toLowerCase()===r},N=(e,r)=>{if(!t.value)return!1;const d=r==="main"?t.value.main_duration_limit:t.value.trailer_duration_limit;return e<=d},k=u(()=>({main:{maxSize:i.value.maxSize,resolution:i.value.resolution,format:i.value.format,duration:i.value.duration},trailer:{maxSize:_.value.maxSize,resolution:_.value.resolution,format:_.value.format,duration:_.value.duration}}));return{selectedCategory:s,requirements:t,loading:c,error:m,mainRequirements:i,trailerRequirements:_,formattedRequirements:k,formattedMaxFileSize:f,amount:o,currency:l,currencySymbol:g,currencyCode:x,selectCategory:V,fetchRequirements:C,resetState:A,validateFileSize:$,validateFormat:D,validateDuration:N}},{persist:{paths:["selectedCategory"],storage:localStorage}});function qe(p){const s=O(),t=()=>"value"in p?p.value:p,c=u(()=>s.isWalletActive),m=u(()=>Number(s.currentBalance||0)),f=u(()=>{const o=t();return!s.currentCurrency||!o.currency?!1:s.currentCurrency.code!==o.currency.code}),a=u(()=>{const o=t();return f.value?!1:m.value<o.amount}),i=u(()=>c.value?f.value?"currencyMismatch":a.value?"insufficient":"sufficient":"inactive"),_=u(()=>c.value&&!a.value&&!f.value);return{status:i,isEligible:_,isWalletActive:c,hasInsufficientFunds:a,isCurrencyMismatch:f,availableBalance:m}}export{he as _,qe as a,Se as b,Fe as u};
