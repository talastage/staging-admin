import{_ as D}from"./tV-NkviW.js";import{u as E}from"./CiN8dqd8.js";import{u as L}from"./Bp2sYpJN.js";import{u as j}from"./DMBY-Kaj.js";import{n as q,L as G,g as U,a6 as H,a5 as J,j as h,c as s,l as I,o as S,m as C,b as n,p as l,w as i,V as x,s as p,q as F,F as K,D as O,v as $,_ as N,a as Q}from"./CGQimWOm.js";import{V as X}from"./xvVMJZi9.js";import{a as A,V as T}from"./BkTuXOR_.js";import{u as Y}from"./BW5EWlXk.js";import{u as Z}from"./D78L5r-E.js";import"./CMsVONS5.js";import"./C-73ZGdz.js";import"./2hEmiBig.js";import"./BSH7BhKc.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";const aa={class:"withdraw-content"},ea={class:"withdraw-header mb-4"},ta={class:"d-flex align-center"},sa={class:"action-buttons mb-4"},oa={class:"text-body-2 font-weight-medium mb-2 d-flex align-center"},ra={class:"info-list"},la={class:"text-caption"},na=q({__name:"WithdrawPage",setup(z){const g=G(),t=j(),{$axios:a}=U();H();const d=E(),o=L(),{wallet:w}=J(d),u=h(null),c=h(!1),v=h([]);h("withdrawal"),h(null);const W=s(()=>{var r,e;return((e=(r=w.value)==null?void 0:r.data)==null?void 0:e.balance)||"0"}),V=s(()=>u.value!==null&&u.value>0&&u.value<=parseFloat(W.value)),B=[{icon:"mdi-shield-check-outline",text:"Secure transaction with end-to-end encryption"},{icon:"mdi-cash-check",text:"Withdrawal requests are processed within 1-3 business days"},{icon:"mdi-information-outline",text:"Transaction receipt will be sent to your email"}];I(async()=>{try{o.isFetched||await o.fetchCurrencies(),await d.fetchWallet()}catch{t.error("Failed to load wallet information")}});const M=r=>r?isNaN(r)||r<=0?"Please enter a valid amount":parseFloat(r)>parseFloat(W.value)?`Withdrawal amount cannot exceed your current balance of ${W.value}`:!0:"Amount is required",P=()=>{u.value=null,v.value=[]},R=async()=>{var r,e,_,m,y,k;if(!(!V.value||!o.selectedCurrency))try{c.value=!0,v.value=[];const b={paying_amount:u.value,currency_id:o.selectedCurrency.id,payment_type:"withdrawal",payable_type:"App\\Models\\Wallet",payable_id:(e=(r=w.value)==null?void 0:r.data)==null?void 0:e.id},f=await a.post("/api/cart/items",b);if((_=f.data)!=null&&_.success)t.success("Withdrawal initiated successfully"),g.push("/checkout");else throw new Error(((m=f.data)==null?void 0:m.message)||"Failed to process withdrawal")}catch(b){console.error("Withdrawal error:",b);const f=((k=(y=b.response)==null?void 0:y.data)==null?void 0:k.message)||"Failed to process withdrawal request";v.value=[f],t.error(f)}finally{c.value=!1}};return(r,e)=>{const _=D;return S(),C("div",aa,[n("div",ea,[n("div",ta,[l(X,{size:"32",color:"warning",class:"mr-3"},{default:i(()=>[l(x,{color:"white",size:"18"},{default:i(()=>e[1]||(e[1]=[p("mdi-cash-minus")])),_:1})]),_:1}),e[2]||(e[2]=n("div",null,[n("h2",{class:"text-h5 font-weight-bold mb-0"},"Withdraw Funds"),n("p",{class:"text-caption text-medium-emphasis mb-0"},"Request a withdrawal from your wallet")],-1))])]),l(T,{class:"amount-card mb-4",elevation:"1",rounded:"lg"},{default:i(()=>[l(A,{class:"pa-3"},{default:i(()=>[e[3]||(e[3]=n("div",{class:"text-body-2 text-medium-emphasis mb-2"}," Amount to withdraw ",-1)),l(_,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),label:"0.00",rules:[M],required:"",disabled:c.value,loading:c.value,"error-messages":v.value,variant:"outlined",density:"compact",class:"withdraw-amount-input"},null,8,["modelValue","rules","disabled","loading","error-messages"])]),_:1})]),_:1}),n("div",sa,[l(F,{color:"warning",size:"large",loading:c.value,disabled:!V.value||c.value,onClick:R,class:"withdraw-button",block:"",rounded:"lg"},{default:i(()=>[l(x,{class:"mr-2"},{default:i(()=>e[4]||(e[4]=[p("mdi-cash-minus")])),_:1}),e[5]||(e[5]=p(" Continue to Withdrawal "))]),_:1},8,["loading","disabled"]),l(F,{color:"grey",variant:"outlined",disabled:c.value,onClick:P,size:"small",class:"mt-2",block:"",rounded:"lg"},{default:i(()=>e[6]||(e[6]=[p(" Reset Amount ")])),_:1},8,["disabled"])]),l(T,{class:"info-card",elevation:"1",rounded:"lg"},{default:i(()=>[l(A,{class:"pa-3"},{default:i(()=>[n("div",oa,[l(x,{size:"16",color:"warning",class:"mr-2"},{default:i(()=>e[7]||(e[7]=[p("mdi-information-outline")])),_:1}),e[8]||(e[8]=p(" Important Information "))]),n("div",ra,[(S(),C(K,null,O(B,(m,y)=>n("div",{key:y,class:"info-item d-flex align-center mb-1"},[l(x,{color:"success",size:"14",class:"mr-2"},{default:i(()=>[p($(m.icon),1)]),_:2},1024),n("span",la,$(m.text),1)])),64))])]),_:1})]),_:1})])}}}),ia=N(na,[["__scopeId","data-v-1773dc25"]]),ua=q({__name:"withdraw",setup(z){const g=Y();I(async()=>{await g.fetchTalaStageApp()});const t=s(()=>g.talastageApp);return Z({title:s(()=>{var a;return`Withdraw Funds - Wallet - ${((a=t.value)==null?void 0:a.name)||"TalaStage"}`}),description:s(()=>{var a;return`Withdraw funds from your wallet on ${(a=t.value)==null?void 0:a.name}. Choose your withdrawal method and request a payout.`}),keywords:s(()=>{var a;return`wallet, withdraw funds, payout, withdrawal method, request withdrawal, funds, ${((a=t.value)==null?void 0:a.name)||"TalaStage"}`}),image:s(()=>{var a;return((a=t.value)==null?void 0:a.logo_url)||"/default-social-image.png"}),type:"website",siteName:s(()=>{var a;return((a=t.value)==null?void 0:a.name)||"TalaStage"}),url:s(()=>{var a;return`${((a=t.value)==null?void 0:a.canonical_url)||"https://talastage.com"}/wallet/withdraw`}),canonical:s(()=>{var a;return`${((a=t.value)==null?void 0:a.canonical_url)||"https://talastage.com"}/wallet/withdraw`}),noIndex:!0,openGraph:s(()=>{var a,d,o,w,u;return{title:`Withdraw Funds - Wallet - ${((a=t.value)==null?void 0:a.name)||"TalaStage"}`,description:`Withdraw funds from your wallet on ${(d=t.value)==null?void 0:d.name}. Choose your withdrawal method and request a payout.`,url:`${((o=t.value)==null?void 0:o.canonical_url)||"https://talastage.com"}/wallet/withdraw`,image:((w=t.value)==null?void 0:w.logo_url)||"/default-social-image.png",siteName:((u=t.value)==null?void 0:u.name)||"TalaStage",type:"website"}}),twitter:s(()=>{var a,d,o;return{card:"summary_large_image",title:`Withdraw Funds - Wallet - ${((a=t.value)==null?void 0:a.name)||"TalaStage"}`,description:`Withdraw funds from your wallet on ${(d=t.value)==null?void 0:d.name}. Choose your withdrawal method and request a payout.`,image:((o=t.value)==null?void 0:o.logo_url)||"/default-social-image.png"}}),link:s(()=>{var a;return[{rel:"icon",href:((a=t.value)==null?void 0:a.favicon_url)||"/favicon.ico"}]})}),(a,d)=>{const o=ia;return S(),Q(o)}}}),Ca=N(ua,[["__scopeId","data-v-0e912278"]]);export{Ca as default};
