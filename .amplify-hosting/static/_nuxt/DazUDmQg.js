import{_ as z}from"./Cw5ECwNl.js";import{_ as I}from"./ChkTFCz_.js";import{_ as L}from"./DVEFYz_L.js";import{_ as S}from"./ePgF0Kvb.js";import{_ as Y}from"./DJ8gbgBD.js";import{_ as E}from"./DL649WMo.js";import{a as H}from"./CDtnx0aA.js";import{n as j,j as s,c as v,l as G,cG as O,t as R,o as a,a as f,w as h,b as q,p,m as l,F as k,D as x,y as u,A as J,s as K,v as Q,g as W,_ as X}from"./CGQimWOm.js";import{V as Z}from"./P_q-BwEt.js";import{V as ee}from"./BhN2__aY.js";import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./BSH7BhKc.js";import"./CkOuN04m.js";import"./BkTuXOR_.js";import"./xvVMJZi9.js";import"./f5lwX8SZ.js";import"./DyYnZ78z.js";/* empty css        */const ae={class:"user-fanning"},te={key:0,class:"following-grid"},ne={key:1,class:"following-grid"},oe={key:0,class:"following-grid mt-4"},re={key:1,class:"text-center mt-4"},se=j({__name:"UserFanning",props:{username:{}},setup(B){const F=B,t=s([]),o=s(!0),i=s(!1),d=s(null),P=s(null),y=s(null),V=s(!1),c=s({currentPage:1,lastPage:1,total:0,perPage:12}),w=v(()=>c.value.currentPage<=c.value.lastPage),T=v(()=>"medium"),N=v(()=>!o.value&&t.value.length===0?"You Havenâ€™t Followed Anyone Yet":"Following"),U=v(()=>y.value?Date.now()-y.value>5*60*1e3:!0),m=async(r=!1)=>{if(r)o.value=!0,c.value.currentPage=1,t.value=[];else{if(i.value||!w.value)return;i.value=!0}d.value=null;const{$axios:g}=W();try{const e=await g.get(`/api/fans/${F.username}/fanning`,{params:{page:c.value.currentPage,per_page:c.value.perPage}}),_=e.data.fanning;t.value=r?_:[...t.value,..._],c.value={currentPage:e.data.pagination.current_page+1,lastPage:e.data.pagination.last_page,total:e.data.pagination.total,perPage:e.data.pagination.per_page},y.value=Date.now(),V.value=!0}catch(e){d.value="Failed to fetch following users. Please try again later.",console.error("Error fetching following:",e)}finally{r?o.value=!1:i.value=!1}},b=(r,g)=>{const e=t.value.findIndex(_=>_.id===r);e!==-1&&(t.value[e].is_fanned_by_auth_user=g)};return H(P,([{isIntersecting:r}])=>{r&&!o.value&&w.value&&!i.value&&m(!1)},{threshold:.1}),G(()=>{V.value||m(!0)}),O(()=>{U.value&&m(!0)}),R(()=>F.username,()=>{m(!0)}),(r,g)=>{const e=z,_=I,A=L,C=S,D=Y,M=E;return a(),f(M,null,{default:h(()=>[q("div",ae,[p(e,{title:N.value},null,8,["title"]),p(ee,{fluid:"",class:"pa-0"},{default:h(()=>[!o.value&&t.value.length>0?(a(),l("div",te,[(a(!0),l(k,null,x(t.value,n=>(a(),f(A,{key:n.id,user:n,size:T.value},{action:h(()=>[p(_,{username:n.username,"initial-fanning-state":n.is_fanned_by_auth_user,onFanningUpdated:$=>b(n.id,$)},null,8,["username","initial-fanning-state","onFanningUpdated"])]),_:2},1032,["user","size"]))),128))])):u("",!0),o.value?(a(),l("div",ne,[(a(),l(k,null,x(6,n=>p(C,{key:"skeleton-"+n})),64))])):u("",!0),!o.value&&w.value?(a(),l("div",{key:2,ref_key:"loadMoreTrigger",ref:P,class:"scroll-trigger"},[i.value?(a(),l("div",oe,[(a(),l(k,null,x(6,n=>p(C,{key:"skeleton-more-"+n})),64))])):u("",!0),i.value?(a(),l("div",re,[p(J,{indeterminate:"",color:"primary",size:"24"})])):u("",!0)],512)):u("",!0),!o.value&&t.value.length===0?(a(),f(D,{key:3,message:"You haven't followed anyone yet! Discover new people to connect with and follow their updates."})):u("",!0),d.value?(a(),f(Z,{key:4,type:"error",variant:"tonal",class:"mt-4"},{default:h(()=>[K(Q(d.value),1)]),_:1})):u("",!0)]),_:1})])]),_:1})}}}),Ce=X(se,[["__scopeId","data-v-698b9a03"]]);export{Ce as default};
