import{_ as P}from"./3ysVR2RL.js";import{_ as z}from"./DL649WMo.js";import{u as H}from"./B3G4pkyN.js";import{u as R}from"./BCoct7aH.js";import{a as E}from"./DsvAftJq.js";import{n as S,o as i,a as b,w as o,b as s,v as _,p as n,s as y,V as B,x,_ as T,g as q,j as v,l as F,O as Y,q as j,m as p,D as I,F as C,y as L,A as M,c as d,Q as A}from"./CGQimWOm.js";import{u as Q}from"./CgCCmWi5.js";import{V as W}from"./CW50LM9V.js";import{V as G,a as J}from"./tTgLLTve.js";import{V as K}from"./BRveoiXI.js";import{V as X}from"./BkTuXOR_.js";import{V as Z}from"./6HtF_owb.js";import{V as ee}from"./BhN2__aY.js";import{u as te}from"./BW5EWlXk.js";import{u as re}from"./D78L5r-E.js";import"./2hEmiBig.js";import"./xvVMJZi9.js";import"./BSH7BhKc.js";import"./CDtnx0aA.js";import"./DyYnZ78z.js";import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./IpAEdaYr.js";import"./Dn0bXcU5.js";import"./BvtSni_j.js";/* empty css        */const ae={class:"d-flex justify-space-between"},oe={class:"flex-grow-1"},se={class:"d-flex align-center mb-2"},ne={class:"text-subtitle-1 font-weight-medium"},le={class:"d-flex align-center text-grey text-body-2"},ie={class:"mr-4"},de={class:"text-caption"},ue={class:"text-right"},ce={class:"text-h6 mb-1"},me=S({__name:"OrderHistoryItem",props:{order:{type:Object,required:!0}},setup(l){const{currencyFormatter:f}=H(),{formatRelativeDate:t,formatLocalDateTime:e}=R(),m=u=>u?u.split("_").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" "):"",g=u=>({tip:"purple",project_watching:"blue",project_tip:"deep-purple",project_promotion:"indigo",project_premiering:"red",event_promotion:"green",ticket_promotion:"orange",user_profile_promotion:"pink"})[u]||"grey";return(u,c)=>{const O=P,V=z;return i(),b(V,{to:`/orders/order-${l.order.reference}`,class:"order-history-item",elevation:2},{default:o(()=>[s("div",ae,[s("div",oe,[s("div",se,[s("div",ne," #"+_(l.order.reference),1),n(E,{size:"small",color:g(l.order.order_type),class:"ml-2",variant:"flat"},{default:o(()=>[y(_(m(l.order.order_type)),1)]),_:1},8,["color"])]),s("div",le,[n(B,{size:"small",class:"mr-1"},{default:o(()=>c[0]||(c[0]=[y("mdi-clock-outline")])),_:1}),s("span",ie,_(x(t)(l.order.created_at)),1),s("span",de,_(x(e)(l.order.created_at)),1)])]),s("div",ue,[s("div",ce,_(x(f)(l.order.total_amount,l.order.currency.symbol,l.order.currency.code)),1),n(O,{status:l.order.status},null,8,["status"])])])]),_:1},8,["to"])}}}),pe=T(me,[["__scopeId","data-v-14998bad"]]),_e={class:"d-flex justify-space-between align-center mb-6"},fe={key:0,class:"d-flex justify-center align-center",style:{"min-height":"200px"}},ge={key:1,class:"orders-list"},ve={key:2,class:"d-flex justify-center my-4"},ye=S({__name:"UserOrdersPage",setup(l){const{$axios:f}=q(),t=v([]),e=v(!0),m=v(!1),g=v(""),u=v(1),c=v("latest"),O=[{label:"Latest First",value:"latest"},{label:"Oldest First",value:"oldest"},{label:"Highest Amount",value:"amount_desc"},{label:"Lowest Amount",value:"amount_asc"}],V=async h=>{try{const r=await f.get("/api/orders/history",{params:{page:h,per_page:10,sort:c.value}}),{data:k,current_page:a,last_page:$}=r.data;h===1?t.value=k:t.value=[...t.value,...k],e.value=a<$,u.value=a}catch(r){m.value=!0,g.value="Failed to load orders. Please try again.",console.error("Error fetching orders:",r)}},{sentinelRef:N,isLoading:w,initLoader:U}=Q(V,e),D=async h=>{c.value=h,u.value=1,t.value=[],await V(1)};return F(()=>{U()}),(h,r)=>{const k=pe;return i(),b(ee,null,{default:o(()=>[s("div",_e,[r[2]||(r[2]=s("h2",{class:"text-h5"},"Order History",-1)),t.value.length?(i(),b(W,{key:0},{activator:o(({props:a})=>[n(j,Y(a,{icon:"mdi-dots-vertical",variant:"text"}),null,16)]),default:o(()=>[n(K,null,{default:o(()=>[(i(),p(C,null,I(O,(a,$)=>n(G,{key:$,value:a.value,onClick:be=>D(a.value)},{default:o(()=>[n(J,null,{default:o(()=>[y(_(a.label),1)]),_:2},1024)]),_:2},1032,["value","onClick"])),64))]),_:1})]),_:1})):L("",!0)]),x(w)&&u.value===1?(i(),p("div",fe,[n(M,{indeterminate:"",color:"primary"})])):(i(),p(C,{key:1},[!x(w)&&t.value.length===0?(i(),b(X,{key:0,class:"text-center pa-6"},{default:o(()=>[n(B,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:o(()=>r[3]||(r[3]=[y(" mdi-receipt-text-outline ")])),_:1}),r[4]||(r[4]=s("h3",{class:"text-h6 mb-2"},"No Orders Yet",-1)),r[5]||(r[5]=s("p",{class:"text-body-1 text-grey mb-4"}," Your order history will appear here once you make your first purchase. ",-1))]),_:1})):(i(),p("div",ge,[(i(!0),p(C,null,I(t.value,a=>(i(),b(k,{key:a.id,order:a},null,8,["order"]))),128))])),x(w)&&u.value>1?(i(),p("div",ve,[n(M,{indeterminate:"",color:"primary"})])):L("",!0),s("div",{ref_key:"sentinelRef",ref:N,class:"sentinel"},null,512)],64)),n(Z,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=a=>m.value=a),color:"error",timeout:"5000"},{actions:o(()=>[n(j,{color:"white",variant:"text",onClick:r[0]||(r[0]=a=>m.value=!1)},{default:o(()=>r[6]||(r[6]=[y(" Close ")])),_:1})]),default:o(()=>[y(_(g.value)+" ",1)]),_:1},8,["modelValue"])]),_:1})}}}),xe=T(ye,[["__scopeId","data-v-d43f5457"]]),he=S({__name:"index",setup(l){const f=te();F(async()=>{await f.fetchTalaStageApp()});const t=d(()=>f.talastageApp);return re({title:d(()=>{var e;return(e=t.value)!=null&&e.name?`My Orders - ${t.value.name}`:"My Orders - TalaStage"}),description:d(()=>{var e;return`View and manage your orders on ${((e=t.value)==null?void 0:e.name)||"TalaStage"}. Track order status and get updates.`}),keywords:"orders, my orders, track orders, order status, TalaStage",image:d(()=>{var e;return((e=t.value)==null?void 0:e.logo_url)||"/default-social-image.png"}),url:d(()=>`${A().public.frontendUrl}/orders`),type:"website",siteName:d(()=>{var e;return((e=t.value)==null?void 0:e.name)||"TalaStage"}),twitterUsername:"@talastage",structured:{"@context":"https://schema.org","@type":"WebPage",name:d(()=>{var e;return(e=t.value)!=null&&e.name?`My Orders - ${t.value.name}`:"My Orders - TalaStage"}),description:d(()=>{var e;return`View and manage your orders on ${((e=t.value)==null?void 0:e.name)||"TalaStage"}. Track order status and get updates.`}),url:d(()=>`${A().public.frontendUrl}/orders`),publisher:{"@type":"Organization",name:d(()=>{var e;return((e=t.value)==null?void 0:e.name)||"TalaStage"}),logo:{"@type":"ImageObject",url:d(()=>{var e;return((e=t.value)==null?void 0:e.logo_url)||"/default-social-image.png"})}}}}),(e,m)=>{const g=xe;return i(),p("div",null,[n(g)])}}}),Ge=T(he,[["__scopeId","data-v-d18fc355"]]);export{Ge as default};
