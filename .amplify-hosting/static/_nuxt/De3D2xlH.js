import{j as s,l as m,B as g}from"./CGQimWOm.js";function L(i,u={}){const t={...{threshold:100,throttle:200,direction:"vertical",initialLoadDelay:0},...u},o=s([]),l=s(!1),r=s(null),n=s(!0),a=s(1);let f=!1;const d=y(()=>{f||(window.requestAnimationFrame(()=>{if(t.direction==="vertical"){const e=window.innerHeight+window.scrollY;document.body.offsetHeight-e<t.threshold&&n.value&&!l.value&&c()}f=!1}),f=!0)},t.throttle),c=async()=>{if(!(!n.value||l.value)){l.value=!0,r.value=null;try{const e=await i(a.value);e.length>0?(o.value=[...o.value,...e],a.value++):n.value=!1}catch(e){r.value=e instanceof Error?e:new Error("An error occurred while loading more items"),console.error("Infinite scroll error:",r.value)}finally{l.value=!1}}},h=async()=>{a.value=1,o.value=[],l.value=!0,r.value=null;try{const e=await i(a.value);o.value=e,n.value=e.length>0,e.length>0&&a.value++}catch(e){r.value=e instanceof Error?e:new Error("An error occurred while refreshing items"),console.error("Error refreshing data:",r.value)}finally{l.value=!1}},w=()=>{o.value=[],a.value=1,n.value=!0,l.value=!1,r.value=null};return m(()=>{window.addEventListener("scroll",d),t.initialLoadDelay>0?setTimeout(c,t.initialLoadDelay):c()}),g(()=>{window.removeEventListener("scroll",d)}),{items:o,isLoading:l,error:r,hasMore:n,reset:w,refresh:h,loadMoreItems:c}}function y(i,u){let v,t;return function(){const o=this,l=arguments;t?(clearTimeout(v),v=setTimeout(()=>{Date.now()-t>=u&&(i.apply(o,l),t=Date.now())},u-(Date.now()-t))):(i.apply(o,l),t=Date.now())}}export{L as u};
