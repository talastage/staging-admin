import{_ as Je,u as Xe,a as Ye}from"./DUNXFIQy.js";import{n as N,j as w,c as T,t as W,o as v,m as k,b as c,cF as de,G as se,F as X,D as ie,y as U,s as F,v as x,_ as A,a7 as Ge,aa as et,b0 as tt,ae as at,p as s,O as He,a6 as ot,C as re,a as D,w as i,bL as nt,V as ae,M as Pe,B as ke,l as pe,dM as Fe,g as ce,x as V,c6 as st,L as lt,dX as it,a5 as Ce,R as Ue,bs as rt,S as ct,a2 as ge,q as J,P as Re,U as ut,Q as he,a$ as dt,f as Ie,i as pt,bH as mt,$ as vt,I as be}from"./CGQimWOm.js";import{V as fe,b as ft,a as yt}from"./BkTuXOR_.js";import{V as gt}from"./BvtSni_j.js";import{V as ht}from"./BRveoiXI.js";import{V as _t,a as bt}from"./tTgLLTve.js";import{m as wt,V as De}from"./BcH3Kywr.js";import{H as ue}from"./DcSlHAeh.js";import{_ as kt}from"./D5iXKOLd.js";import{u as Ct}from"./DMBY-Kaj.js";import{u as $t}from"./Bp2sYpJN.js";import{V as q}from"./CRY4crBU.js";import{V as I}from"./CS8xUUzH.js";import{V as ee}from"./f5lwX8SZ.js";import{V as Ne}from"./BhN2__aY.js";import{_ as Vt}from"./BeQTM7t9.js";import{_ as jt}from"./CkOuN04m.js";import{_ as Lt}from"./ChkTFCz_.js";import{_ as Ae}from"./DhC4yEL8.js";import{B as Oe}from"./COhe-ksk.js";import{u as St}from"./CLaLtAAT.js";import{V as ze}from"./GXZRJwQ4.js";import{V as xt}from"./D4pNkYCe.js";import{V as ye}from"./CMsVONS5.js";import{V as Tt}from"./6HtF_owb.js";import{V as Mt}from"./BSH7BhKc.js";import{V as Bt}from"./BvyQ73Vq.js";import{V as Et}from"./2hEmiBig.js";import{u as Pt}from"./Cptgc_jh.js";import{V as qe}from"./P_q-BwEt.js";import{a as Ut}from"./DsvAftJq.js";import{_ as Dt,a as Ht}from"./CX1ru0FI.js";import{_ as Ft}from"./Cw5ECwNl.js";import{_ as Rt}from"./DxtVZjZE.js";import{S as It,_ as Nt}from"./CWJ7n7p-.js";import{u as At}from"./CDtnx0aA.js";import{u as we}from"./BHJozufe.js";import"./BCoct7aH.js";import"./xvVMJZi9.js";import"./Dn0bXcU5.js";import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./IpAEdaYr.js";import"./QtD4Idd3.js";/* empty css        */import"./CgwEN769.js";import"./BWXQ7vJw.js";import"./3SmzOII5.js";import"./jRUxZAus.js";import"./Bem91KZK.js";import"./B3G4pkyN.js";import"./C-73ZGdz.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./rtPmyJLL.js";import"./f6uf29Wa.js";import"./FspEDv8o.js";import"./Corpgyop.js";import"./BXe4TB6q.js";import"./CS2J0rkF.js";import"./DyYnZ78z.js";const Ot={class:"progress-bar"},zt={key:0,class:"progress-chapters"},qt=["title"],Wt={key:0,class:"hover-preview"},Qt=N({__name:"ProgressBar",props:{currentTime:{type:Number,default:0},duration:{type:Number,default:0},buffered:{type:Number,default:0},chapters:{type:Array,default:()=>[]},previewEnabled:{type:Boolean,default:!1}},emits:["seek"],setup(o,{emit:l}){const e=o,r=l,n=w(0),a=w(0),d=w(!1),t=w(!1),u=T(()=>e.currentTime/e.duration*100||0),p=_=>{if(!_)return"0:00";const g=Math.floor(_/3600),f=Math.floor(_%3600/60),$=Math.floor(_%60);return g>0?`${g}:${f.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")}`:`${f}:${$.toString().padStart(2,"0")}`},m=_=>{const g=_.currentTarget.getBoundingClientRect(),f=(_.clientX-g.left)/g.width;r("seek",f*e.duration)},C=_=>{const f=_.currentTarget.getBoundingClientRect(),$=_.clientX-f.left,b=$/f.width;n.value=$,a.value=e.duration*b,d.value=!0,t.value=!0},h=()=>{d.value=!1,t.value=!1};return W(()=>e.duration,()=>{var _;if(t.value){const g=n.value/((_=event==null?void 0:event.currentTarget)==null?void 0:_.getBoundingClientRect().width);g&&(a.value=e.duration*g)}}),(_,g)=>(v(),k("div",{class:"progress-container",onClick:m,onMousemove:C,onMouseleave:h},[c("div",Ot,[c("div",{class:"buffered",style:de({width:`${o.buffered}%`})},null,4),c("div",{class:"progress",style:de({width:`${u.value}%`})},null,4),c("div",{class:se(["progress-handle",{"handle-visible":t.value}]),style:de({left:`${u.value}%`})},null,6),o.chapters&&o.chapters.length>0?(v(),k("div",zt,[(v(!0),k(X,null,ie(o.chapters,(f,$)=>(v(),k("div",{key:$,class:"chapter-marker",style:de({left:`${f.startTime/o.duration*100}%`}),title:f.title},null,12,qt))),128))])):U("",!0)]),d.value?(v(),k("div",{key:0,class:"progress-hover-time",style:de({left:n.value+"px"})},[F(x(p(a.value))+" ",1),o.previewEnabled?(v(),k("div",Wt,g[0]||(g[0]=[c("div",{class:"preview-placeholder"},null,-1)]))):U("",!0)],4)):U("",!0)],32))}}),Zt=A(Qt,[["__scopeId","data-v-ea5a66cd"]]),Kt=Ge({inset:Boolean,...wt({transition:"bottom-sheet-transition"})},"VBottomSheet"),Jt=et()({name:"VBottomSheet",props:Kt(),emits:{"update:modelValue":o=>!0},setup(o,l){let{slots:e}=l;const r=tt(o,"modelValue");return at(()=>{const n=De.filterProps(o);return s(De,He(n,{contentClass:["v-bottom-sheet__content",o.contentClass],modelValue:r.value,"onUpdate:modelValue":a=>r.value=a,class:["v-bottom-sheet",{"v-bottom-sheet--inset":o.inset},o.class],style:o.style}),e)}),{}}}),Xt={class:"quality-selector"},Yt=["aria-label"],Gt={class:"quality-label"},ea=["onClick"],ta={class:"quality-name"},aa={key:0,viewBox:"0 0 24 24",class:"check-icon"},oa=N({__name:"QualitySelector",props:{qualities:Array,current:String},emits:["change"],setup(o,{emit:l}){const e=l,{mobile:r}=ot(),n=w(!1),a=T(()=>r.value),d=()=>{n.value=!n.value},t=u=>{e("change",u),n.value=!1};return(u,p)=>(v(),k("div",Xt,[c("button",{class:"quality-button",onClick:re(d,["stop"]),"aria-label":"Current quality: "+o.current},[p[2]||(p[2]=c("svg",{viewBox:"0 0 24 24",class:"settings-icon"},[c("path",{fill:"currentColor",d:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"})],-1)),c("span",Gt,x(o.current),1)],8,Yt),n.value&&!a.value?(v(),k("div",{key:0,class:"quality-menu",onMouseleave:p[0]||(p[0]=m=>n.value=!1)},[p[4]||(p[4]=c("div",{class:"quality-menu-header"},"Video Quality",-1)),(v(!0),k(X,null,ie(o.qualities,m=>(v(),k("button",{key:m,class:se(["quality-option",{active:m===o.current}]),onClick:re(C=>t(m),["stop"])},[c("span",ta,x(m),1),m===o.current?(v(),k("svg",aa,p[3]||(p[3]=[c("path",{fill:"currentColor",d:"M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"},null,-1)]))):U("",!0)],10,ea))),128)),p[5]||(p[5]=c("div",{class:"quality-menu-footer"},"Auto-select based on connection",-1))],32)):U("",!0),a.value?(v(),D(Jt,{key:1,modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=m=>n.value=m)},{default:i(()=>[s(fe,{class:"mobile-quality-sheet"},{default:i(()=>[s(ft,{class:"text-center py-4"},{default:i(()=>p[6]||(p[6]=[F(" Video Quality ")])),_:1}),s(gt),s(ht,null,{default:i(()=>[(v(!0),k(X,null,ie(o.qualities,m=>(v(),D(_t,{key:m,onClick:C=>t(m),class:se({"v-list-item--active":m===o.current})},nt({default:i(()=>[s(bt,null,{default:i(()=>[F(x(m),1)]),_:2},1024)]),_:2},[m===o.current?{name:"append",fn:i(()=>[s(ae,{color:"primary"},{default:i(()=>p[7]||(p[7]=[F("mdi-check")])),_:1})]),key:"0"}:void 0]),1032,["onClick","class"]))),128))]),_:1}),s(yt,{class:"text-center text-caption text-medium-emphasis py-3"},{default:i(()=>p[8]||(p[8]=[F(" Auto-select based on connection ")])),_:1})]),_:1})]),_:1},8,["modelValue"])):U("",!0)]))}}),na=A(oa,[["__scopeId","data-v-47adaac8"]]),sa=["aria-label"],la={key:0,viewBox:"0 0 24 24",class:"control-icon"},ia={key:1,viewBox:"0 0 24 24",class:"control-icon"},ra={key:2,viewBox:"0 0 24 24",class:"control-icon"},ca=["value"],ua=N({__name:"VolumeControl",props:{volume:Number,isMuted:Boolean},emits:["update:volume","toggle-mute"],setup(o,{emit:l}){const e=o,r=l,n=w(e.volume),a=w(!1),d=w(!1),t=w(null),u=T(()=>e.isMuted||n.value===0?"muted":n.value<.5?"low":"high");W(()=>e.volume,g=>{n.value=g});const p=g=>{const f=g.target;r("update:volume",parseFloat(f.value))},m=()=>{t.value&&(clearTimeout(t.value),t.value=null),d.value=!0},C=()=>{a.value||(t.value=setTimeout(()=>{d.value=!1,t.value=null},800))},h=()=>{a.value=!1},_=()=>{a.value||(t.value=setTimeout(()=>{d.value=!1,t.value=null},800))};return(g,f)=>(v(),k("div",{class:"volume-control",onMouseenter:m,onMouseleave:C},[c("button",{class:"control-button",onClick:f[0]||(f[0]=re($=>r("toggle-mute"),["stop"])),"aria-label":o.isMuted?"Unmute":"Mute"},[u.value==="muted"?(v(),k("svg",la,f[2]||(f[2]=[c("path",{fill:"currentColor",d:"M3,9H7L12,4V20L7,15H3V9M16.59,12L14,9.41L15.41,8L18,10.59L20.59,8L22,9.41L19.41,12L22,14.59L20.59,16L18,13.41L15.41,16L14,14.59L16.59,12Z"},null,-1)]))):u.value==="low"?(v(),k("svg",ia,f[3]||(f[3]=[c("path",{fill:"currentColor",d:"M5,9V15H9L14,20V4L9,9M18.5,12C18.5,10.23 17.5,8.71 16,7.97V16C17.5,15.29 18.5,13.76 18.5,12Z"},null,-1)]))):(v(),k("svg",ra,f[4]||(f[4]=[c("path",{fill:"currentColor",d:"M3,9H7L12,4V20L7,15H3V9M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12Z"},null,-1)])))],8,sa),c("div",{class:se(["volume-slider-container",{"slider-visible":d.value||a.value}])},[c("input",{type:"range",class:"volume-slider",min:0,max:1,step:.05,value:n.value,onInput:p,onMousedown:f[1]||(f[1]=$=>a.value=!0),onMouseup:h,onMouseleave:_,"aria-label":"Volume slider"},null,40,ca),c("div",{class:"volume-level",style:de({width:`${n.value*100}%`})},null,4)],2)],32))}}),da=A(ua,[["__scopeId","data-v-5aea2d5e"]]),pa={class:"controls-main"},ma={class:"controls-left"},va=["aria-label"],fa={key:0,viewBox:"0 0 24 24",class:"control-icon"},ya={key:1,viewBox:"0 0 24 24",class:"control-icon"},ga={class:"time-display"},ha={class:"controls-right"},_a=["aria-label"],ba={key:0,viewBox:"0 0 24 24",class:"control-icon"},wa={key:1,viewBox:"0 0 24 24",class:"control-icon"},ka=N({__name:"MediaControls",props:{isPlaying:{type:Boolean},currentTime:{},duration:{},isFullscreen:{type:Boolean},hideControls:{type:Boolean,default:!1}},emits:["play-pause","fullscreen","seek"],setup(o,{emit:l}){const e=l,r=n=>{if(!n)return"00:00";const a=Math.floor(n/3600),d=Math.floor(n%3600/60),t=Math.floor(n%60);return a>0?`${String(a).padStart(2,"0")}:${String(d).padStart(2,"0")}:${String(t).padStart(2,"0")}`:`${String(d).padStart(2,"0")}:${String(t).padStart(2,"0")}`};return(n,a)=>(v(),k("div",{class:se(["video-controls",{"controls-hidden":n.hideControls}])},[Pe(n.$slots,"progress",{},void 0,!0),c("div",pa,[c("div",ma,[c("button",{class:"control-button",onClick:a[0]||(a[0]=re(d=>e("play-pause"),["stop"])),"aria-label":n.isPlaying?"Pause":"Play"},[n.isPlaying?(v(),k("svg",fa,a[2]||(a[2]=[c("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)]))):(v(),k("svg",ya,a[3]||(a[3]=[c("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)])))],8,va),c("div",ga,x(r(n.currentTime||0))+" / "+x(r(n.duration||0)),1)]),a[6]||(a[6]=c("div",{class:"spacer"},null,-1)),c("div",ha,[Pe(n.$slots,"controls-right",{},void 0,!0),c("button",{class:"control-button",onClick:a[1]||(a[1]=re(d=>e("fullscreen"),["stop"])),"aria-label":n.isFullscreen?"Exit fullscreen":"Enter fullscreen"},[n.isFullscreen?(v(),k("svg",ba,a[4]||(a[4]=[c("path",{fill:"currentColor",d:"M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z"},null,-1)]))):(v(),k("svg",wa,a[5]||(a[5]=[c("path",{fill:"currentColor",d:"M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z"},null,-1)])))],8,_a)])])],2))}}),Ca=A(ka,[["__scopeId","data-v-6be90b3e"]]),$a=(o,l)=>{const e=w(null),r=w([]),n=w("auto"),a=w(""),d=()=>{o.value&&(ue.isSupported()?(e.value=new ue({autoStartLoad:!0}),e.value.attachMedia(o.value),e.value.loadSource(l),e.value.on(ue.Events.MANIFEST_PARSED,(u,p)=>{r.value=["auto",...p.levels.map(m=>`${m.height}p`)]}),e.value.on(ue.Events.ERROR,(u,p)=>{var m,C,h;if(p.fatal)switch(p.type){case ue.ErrorTypes.NETWORK_ERROR:a.value="Network error",(m=e.value)==null||m.startLoad();break;case ue.ErrorTypes.MEDIA_ERROR:a.value="Media error",(C=e.value)==null||C.recoverMediaError();break;default:a.value="Unknown error",(h=e.value)==null||h.destroy()}})):o.value.canPlayType("application/vnd.apple.mpegurl")&&(o.value.src=l))},t=u=>{if(e.value)if(n.value=u,u==="auto")e.value.currentLevel=-1;else{const p=e.value.levels.findIndex(m=>`${m.height}p`===u);p>-1&&(e.value.currentLevel=p)}};return ke(()=>{var u;(u=e.value)==null||u.destroy()}),{hls:e,availableQualities:r,currentQuality:n,error:a,initialize:d,changeQuality:t}},Va=o=>{const l=w(!1),e=async()=>{if(o.value)try{document.fullscreenElement?(await document.exitFullscreen(),l.value=!1):(await o.value.requestFullscreen(),l.value=!0)}catch(n){console.error("Fullscreen error:",n)}},r=()=>{l.value=!!document.fullscreenElement};return pe(()=>{document.addEventListener("fullscreenchange",r)}),ke(()=>{document.removeEventListener("fullscreenchange",r)}),{isFullscreen:l,toggle:e}},ja=(o,l,e,r,n,a)=>{const d=t=>{if(o.value&&!(document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLSelectElement))switch(t.key.toLowerCase()){case" ":case"k":t.preventDefault(),l.value=!l.value,l.value?o.value.play():o.value.pause();break;case"f":t.preventDefault();const u=new CustomEvent("requestfullscreen");o.value.dispatchEvent(u);break;case"m":t.preventDefault(),a?a.value=!a.value:o.value.muted=!o.value.muted;break;case"arrowleft":case"j":t.preventDefault(),o.value.currentTime=Math.max(e.value-10,0);break;case"arrowright":case"l":t.preventDefault(),o.value.currentTime=Math.min(e.value+10,r.value);break;case"arrowup":t.preventDefault(),n.value=Math.min(n.value+.05,1),o.value.volume=n.value,a&&a.value&&n.value>0&&(a.value=!1);break;case"arrowdown":t.preventDefault(),n.value=Math.max(n.value-.05,0),o.value.volume=n.value,a&&n.value===0&&(a.value=!0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.preventDefault();const p=parseInt(t.key)*.1;o.value.currentTime=r.value*p;break}};pe(()=>{document.addEventListener("keydown",d)}),ke(()=>{document.removeEventListener("keydown",d)})},La=["poster"],Sa={key:1,class:"loading-spinner"},xa={key:2,class:"error-message"},Ta={class:"shortcuts-header"},Ma=N({__name:"MediaPlayer",props:{project:{type:Object,required:!0},setCurrentTime:{type:Function,default:()=>{}},setDuration:{type:Function,default:()=>{}}},emits:["timeupdate","qualitychange","fullscreenchange","video-ended","trailer-end"],setup(o,{expose:l,emit:e}){var K;const r=o,n=e,a=w(null),d=w(null),t=w(!1),u=w(0),p=w(0),m=w(1),C=w(!1),h=w(!1),_=w(!1),g=w(null),f=w(!1),{isFullscreen:$,toggle:b}=Va(d),{availableQualities:y,currentQuality:M,error:B,initialize:O,changeQuality:z}=$a(a,(K=r.project)==null?void 0:K.video_url);ja(a,t,u,p,m,C),T(()=>u.value/p.value*100||0);const P=T(()=>{if(!a.value)return 0;const S=a.value.buffered;return S.length?S.end(S.length-1)/p.value*100:0}),j=Fe(),{$protectedAction:Y}=ce(),R=async()=>{var S,H;!((S=r.project)!=null&&S.id)||!((H=r.project)!=null&&H.access_uuid)||await Y(async()=>{try{await j.toggleNotification(r.project)}catch(_e){console.error("Failed to toggle notification:",_e)}},{requiresAuth:!0})},Q=()=>{a.value&&(t.value=!t.value,t.value?a.value.play():a.value.pause())},oe=()=>{a.value&&(u.value=a.value.currentTime,r.setCurrentTime(u.value),n("timeupdate",u.value))},E=()=>{a.value&&(p.value=a.value.duration,r.setDuration(p.value),n("timeupdate",0))},L=S=>{a.value&&(m.value=S,a.value.volume=S,C.value=S===0)},te=()=>{C.value=!C.value,a.value&&(C.value?a.value.volume=0:(a.value.volume=m.value>0?m.value:.5,m.value===0&&(m.value=.5)))},le=S=>{z(S),n("qualitychange",S)},G=S=>{a.value&&(a.value.currentTime=S)},Z=()=>{b(),n("fullscreenchange",!$.value)},ne=()=>{_.value=!1,g.value&&window.clearTimeout(g.value),t.value&&(g.value=window.setTimeout(()=>{_.value=!0},3e3))},me=S=>{(S.key==="?"||S.key==="/"&&S.shiftKey)&&(S.preventDefault(),f.value=!f.value)};return pe(()=>{O(),a.value&&(a.value.volume=m.value,a.value.onwaiting=()=>h.value=!0,a.value.onplaying=()=>h.value=!1,a.value.onended=()=>{t.value=!1,n("video-ended")}),document.addEventListener("keydown",me)}),W(()=>{var S;return(S=r.project)==null?void 0:S.video_url},S=>{S&&O()}),W($,S=>{n("fullscreenchange",S)}),l({startTrailer:()=>{a.value&&(a.value.currentTime=0,a.value.play(),t.value=!0)}}),(S,H)=>{var Ve,je,Le,Se,xe,Te,Me,Be,Ee;const _e=Je,We=Zt,Qe=na,Ze=da,Ke=Ca;return v(),k("div",{class:"video-player-container",onMousemove:ne,onMouseleave:H[5]||(H[5]=ve=>_.value=t.value)},[c("div",{ref_key:"videoWrapper",ref:d,class:"video-wrapper"},[c("video",{ref_key:"videoElement",ref:a,class:"video-element",poster:(Ve=o.project)==null?void 0:Ve.thumbnail_url,onTimeupdate:oe,onLoadedmetadata:E,onClick:Q,onDblclick:Z,onWaiting:H[0]||(H[0]=ve=>h.value=!0),onPlaying:H[1]||(H[1]=ve=>h.value=!1),onRequestfullscreen:Z},null,40,La),(Le=(je=o.project)==null?void 0:je.premiering)!=null&&Le.is_future&&((Se=o.project)==null?void 0:Se.status)==="published"?(v(),D(_e,{key:0,premiereDate:(Te=(xe=o.project)==null?void 0:xe.premiering)==null?void 0:Te.localized,showNotifyButton:((Me=o.project)==null?void 0:Me.payment_status)==="completed",isNotified:V(j).isNotified((Be=o.project)==null?void 0:Be.id),notifyLoading:V(j).isLoading((Ee=o.project)==null?void 0:Ee.id),position:"top-right",useCountdown:!1,onNotifyToggle:R,class:"media-player-premiere-notification"},null,8,["premiereDate","showNotifyButton","isNotified","notifyLoading"])):U("",!0),s(Ke,{"is-playing":t.value,"current-time":u.value,duration:p.value,"is-fullscreen":V($),"hide-controls":_.value,onPlayPause:Q,onFullscreen:Z,onSeek:G},{progress:i(()=>[s(We,{"current-time":u.value,duration:p.value,buffered:P.value,onSeek:G},null,8,["current-time","duration","buffered"])]),"controls-right":i(()=>[s(Qe,{qualities:V(y),current:V(M),onChange:le},null,8,["qualities","current"]),s(Ze,{volume:m.value,"is-muted":C.value,"onUpdate:volume":L,onToggleMute:te},null,8,["volume","is-muted"])]),_:1},8,["is-playing","current-time","duration","is-fullscreen","hide-controls"]),h.value?(v(),k("div",Sa,H[6]||(H[6]=[c("div",{class:"spinner"},null,-1)]))):U("",!0),V(B)?(v(),k("div",xa,x(V(B)),1)):U("",!0),f.value?(v(),k("div",{key:3,class:"keyboard-shortcuts-overlay",onClick:H[4]||(H[4]=ve=>f.value=!1)},[c("div",{class:"keyboard-shortcuts-panel",onClick:H[3]||(H[3]=re(()=>{},["stop"]))},[c("div",Ta,[H[8]||(H[8]=c("h3",null,"Keyboard Shortcuts",-1)),c("button",{class:"close-button",onClick:H[2]||(H[2]=ve=>f.value=!1)},H[7]||(H[7]=[c("svg",{viewBox:"0 0 24 24",width:"24",height:"24"},[c("path",{fill:"currentColor",d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})],-1)]))]),H[9]||(H[9]=st('<div class="shortcuts-content" data-v-1d9bcaf1><div class="shortcuts-column" data-v-1d9bcaf1><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>Space</span> or <span class="key" data-v-1d9bcaf1>K</span><span class="description" data-v-1d9bcaf1>Play/Pause</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>M</span><span class="description" data-v-1d9bcaf1>Mute/Unmute</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>F</span><span class="description" data-v-1d9bcaf1>Fullscreen</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>↑</span><span class="description" data-v-1d9bcaf1>Volume Up</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>↓</span><span class="description" data-v-1d9bcaf1>Volume Down</span></div></div><div class="shortcuts-column" data-v-1d9bcaf1><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>←</span> or <span class="key" data-v-1d9bcaf1>J</span><span class="description" data-v-1d9bcaf1>Rewind 10s</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>→</span> or <span class="key" data-v-1d9bcaf1>L</span><span class="description" data-v-1d9bcaf1>Forward 10s</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>0-9</span><span class="description" data-v-1d9bcaf1>Jump to position</span></div><div class="shortcut-item" data-v-1d9bcaf1><span class="key" data-v-1d9bcaf1>?</span><span class="description" data-v-1d9bcaf1>Show this help</span></div></div></div>',1))])])):U("",!0)],512)],32)}}}),Ba=A(Ma,[["__scopeId","data-v-1d9bcaf1"]]),Ea={key:0,class:"video-overlay"},Pa={class:"overlay-content"},Ua={class:"overlay-card"},Da={class:"countdown-container"},Ha={class:"overlay-actions"},Fa=["disabled"],Ra={key:1,class:"overlay-actions"},Ia={key:0,class:"watch-fee-display"},Na=["disabled"],Aa=["disabled"],Oa={class:"overlay-content-modal"},za={class:"overlay-card-modal"},qa={class:"countdown-container"},Wa={class:"overlay-actions"},Qa=["disabled"],Za={key:1,class:"overlay-actions"},Ka={key:0,class:"watch-fee-display"},Ja=["disabled"],Xa=["disabled"],Ya=N({__name:"MediaOverlay",props:{showOverlay:{type:Boolean,default:!1},isCreator:{type:Boolean,default:!1},videoEnded:{type:Boolean,default:!1},isFuture:{type:Boolean,default:!1},premiereDate:{default:""},premiereTimezone:{default:""},projectId:{default:0},accessUuid:{default:""},isNotified:{type:Boolean,default:!1},status:{default:"published"},paymentStatus:{default:"completed"},isTrailerPlaying:{type:Boolean,default:!1},project:{}},emits:["watchFullVideo","startTrailer","update:showOverlay","countdownFinished"],setup(o,{emit:l}){const e=o,r=l,{$protectedAction:n,$axios:a}=ce(),d=lt(),t=it(),u=w(!1),p=w(!1),m=w(!1),C=$t(),{selectedCurrency:h}=Ce(C),_=()=>{m.value=!!(document.fullscreenElement||document.webkitFullscreenElement)};W(()=>e.showOverlay,async E=>{if(E&&!h.value)try{await C.fetchCurrencies()}catch(L){console.error("Error fetching currency:",L)}E?(_(),document.addEventListener("fullscreenchange",_),document.addEventListener("webkitfullscreenchange",_)):(document.removeEventListener("fullscreenchange",_),document.removeEventListener("webkitfullscreenchange",_))},{immediate:!0});const g=Fe(),f=Ct(),{isUpdatePending:$,toggleNotification:b}=Xe(),y=w(e.isNotified),M=T(()=>e.projectId?$(String(e.projectId)):!1);W(()=>e.isNotified,E=>{y.value=E}),W(y,E=>{e.projectId&&g.isNotified(e.projectId)});const B=T(()=>e.isFuture?e.showOverlay&&!e.isTrailerPlaying:e.showOverlay&&e.videoEnded);function O(){!e.isFuture&&!e.videoEnded&&r("update:showOverlay",!1)}const z=T(()=>!!(e.isFuture&&e.status==="published"&&e.paymentStatus==="completed"));T(()=>e.projectId?g.isNotified(e.projectId):e.isNotified||!1);const P=T(()=>"Watch Full Video");async function j(){await n(async()=>{await Y()},{requiresAuth:!0})}async function Y(){var E,L,te,le,G,Z,ne,me;if(!((E=e.project)!=null&&E.watch_fee)||!h.value){t.error("Payment information not available. Please try again later.");return}try{p.value=!0;const K={paying_amount:e.project.watch_fee.amount,currency_id:h.value.id,payment_type:"project_watching",payable_type:"App\\Models\\Project",payable_id:e.project.id},S=await a.post("/api/cart/items",K);if((L=S.data)!=null&&L.success)t.success(S.data.message||"Watch fee added to cart successfully!"),d.push("/checkout");else throw new Error(((te=S.data)==null?void 0:te.message)||"Transaction failed")}catch(K){((le=K.response)==null?void 0:le.status)===422?t.error(K.response.data.message||"Invalid transaction data"):((G=K.response)==null?void 0:G.status)===403?t.error("You are not authorized to perform this transaction"):((Z=K.response)==null?void 0:Z.status)===429?t.error("Too many attempts. Please try again later"):(console.error("Error processing payment:",K),t.error(((me=(ne=K.response)==null?void 0:ne.data)==null?void 0:me.message)||K.message||"Failed to process payment. Please try again."))}finally{p.value=!1}}async function R(){!e.projectId||!e.accessUuid||await n(async()=>{try{const E=async L=>{await g.toggleNotification({id:e.projectId,access_uuid:e.accessUuid,status:e.status,payment_status:e.paymentStatus}),f.success(L?"You will be notified when this premiere starts":"Notification removed successfully")};await b(String(e.projectId),y.value,E)}catch(E){f.error("Failed to update notification settings"),console.error("Notification toggle error:",E)}},{requiresAuth:!0})}async function Q(){u.value=!0;try{r("startTrailer")}finally{u.value=!1}}function oe(){r("countdownFinished")}return(E,L)=>{const te=kt,le=Ye;return v(),k(X,null,[s(Ue,{name:"overlay-fade",appear:""},{default:i(()=>{var G,Z;return[B.value&&!m.value?(v(),k("div",Ea,[c("div",Pa,[c("div",Ua,[E.isFuture?(v(),k(X,{key:0},[L[2]||(L[2]=c("div",{class:"overlay-icon"},[c("svg",{viewBox:"0 0 24 24",width:"48",height:"48"},[c("path",{fill:"currentColor",d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"})])],-1)),L[3]||(L[3]=c("h2",{class:"overlay-title"},"Coming Soon",-1)),L[4]||(L[4]=c("p",{class:"overlay-subtitle"},"Premiering on:",-1)),c("div",Da,[s(te,{"target-date":E.premiereDate,onFinished:oe},null,8,["target-date"])]),L[5]||(L[5]=c("p",{class:"overlay-description"}," Watch the trailer while you wait and get notified when this video premieres. ",-1)),c("div",Ha,[z.value&&!y.value?(v(),D(le,{key:0,isNotified:y.value,"onUpdate:isNotified":L[0]||(L[0]=ne=>y.value=ne),"is-pending":M.value,onToggle:R,class:"action-button primary"},null,8,["isNotified","is-pending"])):U("",!0),c("button",{onClick:Q,disabled:u.value,class:"action-button secondary"},x(E.isTrailerPlaying?"Restart Trailer":"Watch Trailer"),9,Fa)])],64)):(v(),k("div",Ra,[(Z=(G=E.project)==null?void 0:G.watch_fee)!=null&&Z.formatted?(v(),k("div",Ia,x(E.project.watch_fee.formatted),1)):U("",!0),c("button",{onClick:j,disabled:u.value||p.value,class:"action-button primary"},x(p.value?"Processing Payment...":P.value),9,Na),c("button",{onClick:Q,disabled:u.value,class:"action-button secondary"}," Watch Again ",8,Aa)]))])])])):U("",!0)]}),_:1}),(v(),D(rt,{to:"body"},[s(Ue,{name:"overlay-fade",appear:""},{default:i(()=>{var G,Z;return[B.value&&m.value?(v(),k("div",{key:0,class:"video-overlay-modal",onClick:re(O,["self"])},[c("div",Oa,[c("div",za,[E.isFuture?(v(),k(X,{key:0},[L[6]||(L[6]=c("div",{class:"overlay-icon"},[c("svg",{viewBox:"0 0 24 24",width:"48",height:"48"},[c("path",{fill:"currentColor",d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"})])],-1)),L[7]||(L[7]=c("h2",{class:"overlay-title"},"Coming Soon",-1)),L[8]||(L[8]=c("p",{class:"overlay-subtitle"},"Premiering on:",-1)),c("div",qa,[s(te,{"target-date":E.premiereDate,onFinished:oe},null,8,["target-date"])]),L[9]||(L[9]=c("p",{class:"overlay-description"}," Watch the trailer while you wait and get notified when this video premieres. ",-1)),c("div",Wa,[z.value&&!y.value?(v(),D(le,{key:0,isNotified:y.value,"onUpdate:isNotified":L[1]||(L[1]=ne=>y.value=ne),"is-pending":M.value,onToggle:R,class:"action-button primary"},null,8,["isNotified","is-pending"])):U("",!0),c("button",{onClick:Q,disabled:u.value,class:"action-button secondary"},x(E.isTrailerPlaying?"Restart Trailer":"Watch Trailer"),9,Qa)])],64)):(v(),k("div",Za,[(Z=(G=E.project)==null?void 0:G.watch_fee)!=null&&Z.formatted?(v(),k("div",Ka,x(E.project.watch_fee.formatted),1)):U("",!0),c("button",{onClick:j,disabled:u.value||p.value,class:"action-button primary"},x(p.value?"Processing Payment...":P.value),9,Ja),c("button",{onClick:Q,disabled:u.value,class:"action-button secondary"}," Watch Again ",8,Xa)]))])])])):U("",!0)]}),_:1})]))],64)}}}),Ga=A(Ya,[["__scopeId","data-v-c28f7baa"]]),eo={class:"media-overlay-container"},to=N({__name:"Media",props:{project:{},isCreator:{type:Boolean,default:!1}},setup(o){const l=o,e=w(!1),r=w(0),n=w(0),a=w(!1),d=w(!1),t=w(null);function u(f){r.value=f,m()}function p(f){n.value=f,m()}function m(){var f,$,b;if(l.isCreator||(f=l.project)!=null&&f.has_paid_watch_fee){e.value=!1;return}if((b=($=l.project)==null?void 0:$.premiering)!=null&&b.is_future){e.value=!a.value;return}e.value=d.value}async function C(){}function h(){t.value&&(a.value=!0,d.value=!1,e.value=!1,t.value.startTrailer())}function _(){a.value=!1,m()}function g(){d.value=!0,m()}return(f,$)=>{const b=Ba,y=ge,M=Ga;return v(),D(Ne,{fluid:"",class:"pa-0"},{default:i(()=>[s(q,{"no-gutters":""},{default:i(()=>[s(I,{cols:"12"},{default:i(()=>{var B,O,z,P,j,Y,R,Q,oe,E,L;return[c("div",eo,[s(y,null,{fallback:i(()=>[s(ee,{type:"image",height:"500"})]),default:i(()=>[(v(),D(ct,null,{default:i(()=>[s(b,{project:f.project,"set-current-time":u,"set-duration":p,onTrailerEnd:_,onVideoEnded:g,ref_key:"mediaPlayerRef",ref:t},null,8,["project"])]),_:1}))]),_:1}),s(M,{showOverlay:e.value,"onUpdate:showOverlay":$[0]||($[0]=te=>e.value=te),"is-creator":f.isCreator,"video-ended":d.value,"is-future":(O=(B=f.project)==null?void 0:B.premiering)==null?void 0:O.is_future,"premiere-date":(P=(z=f.project)==null?void 0:z.premiering)==null?void 0:P.utc,"premiere-timezone":(Y=(j=f.project)==null?void 0:j.premiering)==null?void 0:Y.timezone,"project-id":(R=f.project)==null?void 0:R.id,"access-uuid":(Q=f.project)==null?void 0:Q.access_uuid,"is-notified":(oe=f.project)==null?void 0:oe.is_notified,status:(E=f.project)==null?void 0:E.status,"payment-status":(L=f.project)==null?void 0:L.payment_status,"is-trailer-playing":a.value,project:f.project,onWatchFullVideo:C,onStartTrailer:h},null,8,["showOverlay","is-creator","video-ended","is-future","premiere-date","premiere-timezone","project-id","access-uuid","is-notified","status","payment-status","is-trailer-playing","project"])])]}),_:1})]),_:1})]),_:1})}}}),ao=A(to,[["__scopeId","data-v-29104905"]]),oo=N({__name:"ProjectEditButton",props:{project:{type:Object,required:!0}},setup(o){return(l,e)=>{const r=jt;return v(),D(r,{to:`/studio/projects/${o.project.access_uuid}/detail`},{default:i(()=>[s(J,{color:"primary",class:"custom-btn",variant:"tonal"},{default:i(()=>[s(ae,{start:""},{default:i(()=>e[0]||(e[0]=[F("mdi-pencil")])),_:1}),e[1]||(e[1]=F(" Edit "))]),_:1})]),_:1},8,["to"])}}}),no=A(oo,[["__scopeId","data-v-c1ea953e"]]),so={class:"share-section"},lo={class:"text-caption mt-1"},io={class:"copy-section mt-6"},ro={class:"copy-link-container"},co=N({__name:"ShareProjectDialog",props:{modelValue:{type:Boolean,required:!0},shareUrl:{type:String,required:!0},shareText:{type:String,required:!0},entityType:{type:String,required:!0},entityId:{type:String,default:""},entity:{type:Object,required:!0}},emits:["update:modelValue","share-error","share-success","open-embed"],setup(o,{emit:l}){const e=o,r=l,{sharePlatforms:n,shareTo:a,copyLink:d}=St(),t=Re(),u=T({get:()=>e.modelValue,set:P=>r("update:modelValue",P)}),p=w(!1),m=w(!1),C=w(""),h=w(!1),_=w(""),g=w("success"),f=T(()=>n),$=T(()=>e.shareUrl?typeof window<"u"?window.location.href:t.params.access_uuid?`${window.location.origin}/watch/${t.params.access_uuid}`:e.shareUrl:"Loading..."),b=(P,j="success")=>{_.value=P,g.value=j,h.value=!0},y=P=>{r("update:modelValue",P)},M=()=>{r("update:modelValue",!1),ut(()=>{p.value=!1,C.value="",m.value=!1})},B=()=>{r("open-embed")},O=async P=>{if(!$.value||$.value==="Loading..."){b("Share URL is not available","error");return}try{C.value=P,await a(P,$.value,e.shareText||"",e.entityType,e.entityId||""),r("share-success",P),b(`Successfully shared to ${P}`)}catch(j){console.error("Error sharing:",j),r("share-error",j),b(`Failed to share to ${P}`,"error")}finally{C.value=""}},z=async()=>{if(!$.value||$.value==="Loading..."){b("Share URL is not available","error");return}try{m.value=!0,await d($.value),p.value=!0,b("Link copied to clipboard!"),setTimeout(()=>{p.value=!1},2e3)}catch(P){console.error("Failed to copy link:",P),b("Failed to copy link","error")}finally{m.value=!1}};return pe(()=>{(!e.entity||typeof e.entity!="object")&&console.warn("ShareProjectDialog received invalid entity:",e.entity)}),(P,j)=>{const Y=Oe;return v(),k(X,null,[s(Y,{modelValue:u.value,"onUpdate:modelValue":[j[0]||(j[0]=R=>u.value=R),y],"max-width":"600px","show-close-button":!0},{title:i(()=>j[2]||(j[2]=[c("div",{class:"d-flex align-center title-container"},[c("span",{class:"text-h6"},"Share Content")],-1)])),actions:i(()=>[s(ze),s(J,{color:"primary",class:"mr-2",onClick:B,variant:"text"},{default:i(()=>j[5]||(j[5]=[F(" Embed ")])),_:1}),s(J,{color:"secondary",onClick:M,variant:"tonal"},{default:i(()=>j[6]||(j[6]=[F(" Close ")])),_:1})]),default:i(()=>[c("div",so,[j[3]||(j[3]=c("p",{class:"text-body-1 mb-4"},"Share this content with others via your favorite platform",-1)),s(q,{justify:"center",class:"my-2"},{default:i(()=>[(v(!0),k(X,null,ie(f.value,R=>(v(),D(I,{key:R.name,cols:"auto",class:"text-center share-platform-col"},{default:i(()=>[s(xt,{text:R.name,location:"top"},{activator:i(({props:Q})=>[s(J,He({ref_for:!0},Q,{icon:"",color:R.color,loading:C.value===R.name,disabled:C.value!==""||!o.shareUrl,onClick:oe=>O(R.name),class:"share-btn",elevation:"2"}),{default:i(()=>[s(ae,null,{default:i(()=>[F(x(R.icon),1)]),_:2},1024)]),_:2},1040,["color","loading","disabled","onClick"])]),_:2},1032,["text"]),c("div",lo,x(R.name),1)]),_:2},1024))),128))]),_:1})]),c("div",io,[j[4]||(j[4]=c("p",{class:"text-body-1 mb-2"},"Or copy the direct link",-1)),c("div",ro,[s(ye,{"model-value":$.value,readonly:"","hide-details":"",density:"compact",variant:"outlined",class:"copy-link-field","append-inner-icon":"mdi-content-copy","onClick:appendInner":z,placeholder:"Loading URL...",loading:!o.shareUrl,width:"100%"},null,8,["model-value","loading"]),s(J,{color:p.value?"success":"primary",loading:m.value,disabled:!o.shareUrl,class:"copy-btn",onClick:z},{default:i(()=>[F(x(p.value?"Copied!":"Copy"),1)]),_:1},8,["color","loading","disabled"])])])]),_:1},8,["modelValue"]),s(Tt,{modelValue:h.value,"onUpdate:modelValue":j[1]||(j[1]=R=>h.value=R),color:g.value,timeout:"3000",location:"bottom"},{default:i(()=>[F(x(_.value),1)]),_:1},8,["modelValue","color"])],64)}}}),uo=A(co,[["__scopeId","data-v-352184b5"]]),po=N({__name:"EmbedDialog",props:{modelValue:{type:Boolean,required:!0},entity:{type:Object,required:!0}},emits:["update:modelValue","close"],setup(o,{emit:l}){const e=o,r=l,n=he(),a=T({get:()=>e.modelValue,set:b=>r("update:modelValue",b)}),d=w(560),t=w(315),u=w(!1),p=w(""),m=w(!1),C=T(()=>e.entity&&e.entity.name?e.entity.name:""),h=T(()=>e.entity&&e.entity.thumbnail_url?e.entity.thumbnail_url:"/placeholder-thumbnail.jpg"),_=b=>{r("update:modelValue",b),b||r("close")},g=()=>{r("update:modelValue",!1),r("close")},f=()=>{var B;if(!e.entity||!e.entity.access_uuid){p.value="";return}const y=`${((B=n.public)==null?void 0:B.appUrl)||window.location.origin}/embed/${e.entity.access_uuid}`,M=u.value?"?autoplay=1":"";p.value=`<iframe width="${d.value}" height="${t.value}" src="${y}${M}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`},$=async()=>{if(p.value)try{await navigator.clipboard.writeText(p.value),m.value=!0,setTimeout(()=>{m.value=!1},2e3)}catch(b){console.error("Failed to copy embed code:",b);const y=document.createElement("textarea");y.value=p.value,document.body.appendChild(y),y.select();try{document.execCommand("copy"),m.value=!0}catch(M){console.error("Fallback copy failed:",M)}document.body.removeChild(y)}};return W(()=>e.entity,b=>{b&&f()},{immediate:!0,deep:!0}),pe(()=>{if(!e.entity){console.warn("EmbedDialog received no entity");return}e.entity.access_uuid||console.warn("EmbedDialog entity missing access_uuid"),f()}),(b,y)=>{const M=Oe;return v(),D(M,{modelValue:a.value,"onUpdate:modelValue":[y[4]||(y[4]=B=>a.value=B),_],title:`Embed ${C.value}`,"max-width":"800px","show-close-button":!0},{actions:i(()=>[s(ze),s(J,{color:"secondary",onClick:g,variant:"tonal"},{default:i(()=>y[5]||(y[5]=[F(" Close ")])),_:1})]),default:i(()=>[s(q,null,{default:i(()=>[s(I,{cols:"12",md:"5"},{default:i(()=>[s(Mt,{src:h.value,"aspect-ratio":16/9,cover:"",class:"rounded-lg"},null,8,["src"])]),_:1}),s(I,{cols:"12",md:"7"},{default:i(()=>[s(ye,{modelValue:p.value,"onUpdate:modelValue":y[0]||(y[0]=B=>p.value=B),readonly:"",label:"Embed Code",variant:"outlined",density:"comfortable","hide-details":"",class:"mb-4"},{append:i(()=>[s(J,{icon:"",variant:"text",onClick:$,color:m.value?"success":"primary"},{default:i(()=>[s(ae,null,{default:i(()=>[F(x(m.value?"mdi-check":"mdi-content-copy"),1)]),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"]),s(q,{dense:""},{default:i(()=>[s(I,{cols:"6"},{default:i(()=>[s(ye,{modelValue:d.value,"onUpdate:modelValue":[y[1]||(y[1]=B=>d.value=B),f],label:"Width",type:"number",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1}),s(I,{cols:"6"},{default:i(()=>[s(ye,{modelValue:t.value,"onUpdate:modelValue":[y[2]||(y[2]=B=>t.value=B),f],label:"Height",type:"number",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),s(Bt,{modelValue:u.value,"onUpdate:modelValue":[y[3]||(y[3]=B=>u.value=B),f],label:"Autoplay","hide-details":"",class:"mt-4"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}}),mo=A(po,[["__scopeId","data-v-96193a0e"]]),vo=N({__name:"ShareProjectButton",props:{entityType:{},entity:{},customShareUrl:{},customShareText:{}},setup(o){const l=o,e=he(),r=w(!1),n=w(!1),a=T(()=>{if(!l.entity)return{};try{const g=dt(l.entity);return{id:g.id,name:g.name,description:g.description,access_uuid:g.access_uuid,thumbnail_url:g.thumbnail_url}}catch(g){return console.warn("Error cleaning entity:",g),{id:l.entity.id||"",name:l.entity.name||"",description:l.entity.description||"",access_uuid:l.entity.access_uuid||"",thumbnail_url:l.entity.thumbnail_url||""}}}),d=T(()=>a.value.id?String(a.value.id):""),t=T(()=>l.customShareUrl?l.customShareUrl:a.value.id?`${e.public.frontendUrl||(typeof window<"u"?window.location.origin:"")}/${l.entityType}/${a.value.id}`:""),u=T(()=>l.customShareText?l.customShareText:a.value.name?`Check out this ${l.entityType}: ${a.value.name}`:""),p=()=>{r.value=!0},m=()=>{r.value=!1,n.value=!0},C=()=>{n.value=!1},h=g=>{r.value=g},_=g=>{n.value=g};return W(()=>l.entity,g=>{(!g||typeof g!="object")&&console.warn("ShareProjectButton received invalid entity:",g)},{immediate:!0,deep:!1}),(g,f)=>{const $=uo,b=mo,y=ge;return v(),k("div",null,[s(J,{onClick:p,class:"custom-btn",variant:"tonal"},{default:i(()=>[s(ae,{start:""},{default:i(()=>f[2]||(f[2]=[F("mdi-share-variant")])),_:1}),f[3]||(f[3]=F(" Share "))]),_:1}),s(y,null,{default:i(()=>[s($,{modelValue:r.value,"onUpdate:modelValue":[f[0]||(f[0]=M=>r.value=M),h],"share-url":t.value,"share-text":u.value,"entity-type":g.entityType,"entity-id":d.value,entity:a.value,onOpenEmbed:m},null,8,["modelValue","share-url","share-text","entity-type","entity-id","entity"]),s(b,{modelValue:n.value,"onUpdate:modelValue":[f[1]||(f[1]=M=>n.value=M),_],entity:a.value,onClose:C},null,8,["modelValue","entity"])]),_:1})])}}}),fo=A(vo,[["__scopeId","data-v-3c063ddb"]]),yo={class:"text-body-1"},go=N({__name:"LikeButton",props:{isLiked:{type:Boolean,default:!1},count:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},emits:["reaction"],setup(o,{emit:l}){const e=o,r=l;function n(){e.isLoading||r("reaction","like")}return(a,d)=>(v(),D(J,{variant:"text",size:"large",disabled:o.isLoading,color:o.isLiked?"primary":void 0,onClick:n,class:"like-button"},{default:i(()=>[s(ae,{color:o.isLiked?"primary":void 0,size:"24",class:"mr-2"},{default:i(()=>d[0]||(d[0]=[F(" mdi-thumb-up ")])),_:1},8,["color"]),c("span",yo,x(o.count),1)]),_:1},8,["disabled","color"]))}}),ho=A(go,[["__scopeId","data-v-faf128ea"]]),_o={class:"text-body-1"},bo=N({__name:"DislikeButton",props:{isDisliked:{type:Boolean,default:!1},count:{type:Number,required:!0},isLoading:{type:Boolean,default:!1}},emits:["reaction"],setup(o,{emit:l}){const e=o,r=l;function n(){e.isLoading||r("reaction","dislike")}return(a,d)=>(v(),D(J,{variant:"text",size:"large",disabled:o.isLoading,color:o.isDisliked?"primary":void 0,onClick:n,class:"dislike-button"},{default:i(()=>[s(ae,{color:o.isDisliked?"primary":void 0,size:"24",class:"mr-2"},{default:i(()=>d[0]||(d[0]=[F(" mdi-thumb-down ")])),_:1},8,["color"]),c("span",_o,x(o.count),1)]),_:1},8,["disabled","color"]))}}),wo=A(bo,[["__scopeId","data-v-c9ea8fc4"]]),ko={class:"description-display"},Co=["innerHTML"],$o=N({__name:"DescriptionDisplay",props:{description:{type:String,required:!0},initiallyExpanded:{type:Boolean,default:!1},toggleable:{type:Boolean,default:!0},showText:{type:String,default:"Show description"},hideText:{type:String,default:"Hide description"},bgColor:{type:String,default:"grey-lighten-4"},textClass:{type:String,default:"text-body-1 text-medium-emphasis"},buttonColor:{type:String,default:"primary"},withBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"primary"},useHtml:{type:Boolean,default:!1}},setup(o){const l=o,e=w(l.initiallyExpanded),r=()=>{e.value=!e.value},n=T(()=>`bg-${l.bgColor}`),a=T(()=>l.withBorder?`description-border-${l.borderColor}`:""),d=T(()=>l.useHtml?l.description.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+="[^"]*"/g,"").replace(/javascript:/g,""):"");return(t,u)=>(v(),k("div",ko,[s(Et,null,{default:i(()=>[e.value?(v(),k("div",{key:0,class:se(["description-content pa-4 rounded-xl",n.value,a.value])},[o.useHtml?(v(),k("div",{key:1,class:se(o.textClass),innerHTML:d.value},null,10,Co)):(v(),k("p",{key:0,class:se(["mb-0",o.textClass])},x(o.description),3))],2)):U("",!0)]),_:1}),o.toggleable?(v(),D(J,{key:0,variant:"text",size:"small",color:o.buttonColor,class:"mt-2 px-0",onClick:r},{default:i(()=>[F(x(e.value?o.hideText:o.showText)+" ",1),s(ae,{icon:e.value?"mdi-chevron-up":"mdi-chevron-down",class:"ml-1",size:"small"},null,8,["icon"])]),_:1},8,["color"])):U("",!0)]))}}),Vo=A($o,[["__scopeId","data-v-7abafb1f"]]),$e=Ie("projectMetadata",()=>{const o=ce(),l=w(null),e=w(!1),r=w(null);return{metadata:l,isLoading:e,error:r,fetchProjectMetadata:async a=>{var d,t;if(!o.$api){r.value="API plugin not available",console.error("$api plugin not available in useProjectMetadataStore");return}e.value=!0,r.value=null;try{const u=await o.$api.get(`/api/projects/${a}/metadata`);(d=u==null?void 0:u.data)!=null&&d.metadata?l.value=u.data.metadata:u!=null&&u.metadata?l.value=u.metadata:u!=null&&u.data?l.value=u.data:(console.warn("Unexpected response structure:",u),l.value=u)}catch(u){const p=(u==null?void 0:u.message)||((t=u==null?void 0:u.data)==null?void 0:t.message)||"An error occurred while fetching project metadata";r.value=p,console.error("Error fetching project metadata:",p,u)}finally{e.value=!1}}}}),jo=Ie("projectReactions",{state:()=>({likesCount:0,dislikesCount:0,userReaction:null,isLoading:!1,projectId:null}),getters:{hasReacted:o=>o.userReaction!==null},actions:{initializeFromMetadata(o){o&&(this.likesCount=o.stats.likes_count,this.dislikesCount=o.stats.dislikes_count,this.userReaction=o.user_interaction.user_reaction,this.projectId=o.project.id)},async toggleReaction(o,l){if(!this.isLoading)try{this.isLoading=!0;const{$axios:e}=ce(),r=await e.post(`/api/projects/${o}/reaction`,{reaction_type:l});this.likesCount=r.data.likes_count,this.dislikesCount=r.data.dislikes_count,this.userReaction=r.data.user_reaction;const n=$e();return n.metadata&&(n.metadata.stats.likes_count=r.data.likes_count,n.metadata.stats.dislikes_count=r.data.dislikes_count,n.metadata.user_interaction.user_reaction=r.data.user_reaction),r.data}catch(e){throw console.error("Error toggling reaction:",e),e}finally{this.isLoading=!1}},reset(){this.likesCount=0,this.dislikesCount=0,this.userReaction=null,this.isLoading=!1,this.projectId=null}}});function Lo(){const o=ce(),l=$e(),e=pt(),{metadata:r}=Ce(l),n=w(0),a=w(!1);return W(()=>r.value,t=>{(t==null?void 0:t.views_count)!==void 0&&(n.value=t.views_count)},{immediate:!0}),{viewsCount:n,recordProjectView:async t=>{var u,p;if(!o.$api)return console.log("View recording skipped - API not available"),{views_count:n.value};if(!e.isLoggedIn)return console.log("View recording skipped - user not authenticated"),{views_count:n.value};if(!a.value){a.value=!0;try{const m=await o.$api.post(`/api/projects/${t}/view`,{}),C=((u=m==null?void 0:m.data)==null?void 0:u.views_count)??(m==null?void 0:m.views_count)??n.value;return n.value=C,r.value&&(r.value.views_count=C),{views_count:C}}catch(m){return(m==null?void 0:m.status)===401||((p=m==null?void 0:m.response)==null?void 0:p.status)===401?(console.log("View not recorded - authentication required"),{views_count:n.value}):(console.warn("Error recording project view:",(m==null?void 0:m.message)||m),{views_count:n.value})}finally{a.value=!1}}}}}const So={class:"d-flex align-center"},xo={class:"project-title text-h4 font-weight-bold mb-2"},To={class:"d-flex flex-column"},Mo={class:"text-subtitle-1 font-weight-medium"},Bo={class:"d-flex reaction-buttons"},Eo={class:"d-flex flex-wrap gap-2"},Po=N({__name:"ProjectMetadata",props:{project:{type:Object,required:!0}},setup(o){const l=o,e=w(!1),r=he(),n=ce(),a=$e(),d=jo(),{metadata:t,isLoading:u,error:p}=Ce(a),{viewsCount:m,recordProjectView:C}=Lo(),{formatViewCount:h}=Pt();T(()=>h(m.value)),T(()=>`${r.public.frontendUrl}/watch/${l.project.access_uuid}`),T(()=>`Check out this awesome project: ${l.project.name}`);function _(b,y){t.value&&(t.value.fanning_status.is_fanned_by_auth_user=b)}function g(b){console.log(`Tip of ${b} completed`)}function f(b){mt(`/project/${b.access_uuid}/earnings/`)}async function $(b){n.$protectedAction(async()=>{const y=d.userReaction,M=d.likesCount,B=d.dislikesCount;b==="like"?y==="like"?(d.likesCount--,d.userReaction=null):(d.likesCount++,y==="dislike"&&d.dislikesCount--,d.userReaction="like"):b==="dislike"&&(y==="dislike"?(d.dislikesCount--,d.userReaction=null):(d.dislikesCount++,y==="like"&&d.likesCount--,d.userReaction="dislike"));try{return await d.toggleReaction(l.project.access_uuid,b)}catch(O){throw d.likesCount=M,d.dislikesCount=B,d.userReaction=y,O}},{requiresAuth:!0,onError:y=>{console.error("Error handling reaction:",y)}})}return W(()=>t.value,b=>{if(b)try{d.initializeFromMetadata(b)}catch(y){console.warn("Error initializing reaction store:",y)}},{immediate:!0}),pe(async()=>{try{await a.fetchProjectMetadata(l.project.access_uuid)}catch(b){console.error("Error fetching project metadata:",b)}try{await C(l.project.access_uuid)}catch(b){console.warn("Error recording project view:",b)}}),W(()=>l.project.access_uuid,async b=>{if(b){try{await a.fetchProjectMetadata(b)}catch(y){console.error("Error fetching project metadata:",y)}try{await C(b)}catch(y){console.warn("Error recording project view:",y)}}}),(b,y)=>{const M=Vt,B=no,O=Lt,z=Ae,P=fo;return V(u)?(v(),D(fe,{key:0,class:"project-metadata-card bg-white pa-4 mb-4",flat:"",elevation:"0"},{default:i(()=>[s(q,null,{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[s(ee,{type:"text",class:"mb-3 skeleton-loader",height:"24"})]),_:1})]),_:1}),s(q,{align:"center","no-gutters":""},{default:i(()=>[s(I,{cols:"auto",class:"mr-3"},{default:i(()=>[s(ee,{type:"avatar",width:"40",height:"40",class:"skeleton-loader"})]),_:1}),s(I,{cols:"5",sm:"4"},{default:i(()=>[s(ee,{type:"text",class:"mb-1 skeleton-loader",height:"16"}),s(ee,{type:"text",width:"60%",class:"skeleton-loader",height:"14"})]),_:1}),s(I,{cols:"6",sm:"7",class:"d-flex justify-end"},{default:i(()=>[s(ee,{type:"button",width:"80",height:"32",class:"skeleton-loader"})]),_:1})]),_:1})]),_:1})):V(p)?(v(),D(fe,{key:1,class:"project-metadata-card pa-4 mb-4",flat:"",elevation:"0"},{default:i(()=>[s(q,{justify:"center",align:"center"},{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[s(qe,{type:"error",variant:"tonal",border:"start",class:"mb-0",closable:""},{default:i(()=>[c("div",So,[s(ae,{class:"mr-2"},{default:i(()=>y[2]||(y[2]=[F("mdi-alert-circle")])),_:1}),c("span",null,x(V(p)),1)])]),_:1})]),_:1})]),_:1})]),_:1})):V(t)?(v(),D(fe,{key:2,class:"project-metadata-card bg-white pa-4 mb-4",flat:"",elevation:"0"},{default:i(()=>[s(q,null,{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[c("h1",xo,x(V(t).project.name),1)]),_:1})]),_:1}),s(q,{align:"center",class:"mb-2"},{default:i(()=>[s(I,{cols:"12",sm:"auto",class:"d-flex align-center"},{default:i(()=>[s(M,{username:V(t).creator.username,profile_photo:V(t).creator.profile_photo,size:48,elevation:"2",class:"mr-3"},null,8,["username","profile_photo"]),c("div",To,[c("div",Mo,x(V(t).creator.display_name),1)])]),_:1}),s(I,{cols:"12",sm:"",class:"d-flex flex-wrap justify-sm-end align-center gap-2 mt-3 mt-sm-0"},{default:i(()=>[c("div",Bo,[s(ho,{isLiked:V(d).userReaction==="like",count:V(d).likesCount,isLoading:V(d).isLoading,onReaction:$,class:"mr-2"},null,8,["isLiked","count","isLoading"]),s(wo,{isDisliked:V(d).userReaction==="dislike",count:V(d).dislikesCount,isLoading:V(d).isLoading,onReaction:$},null,8,["isDisliked","count","isLoading"])]),V(t).user_interaction.is_creator?(v(),k(X,{key:0},[s(J,{color:"primary",variant:"tonal",class:"action-btn","prepend-icon":"mdi-cash",onClick:y[0]||(y[0]=j=>f(V(t).project))},{default:i(()=>y[3]||(y[3]=[F(" Earnings ")])),_:1}),s(B,{project:V(t).project,class:"action-btn"},null,8,["project"])],64)):U("",!0),V(t).user_interaction.is_creator?U("",!0):(v(),D(O,{key:1,username:V(t).creator.username,onFanningUpdated:_,class:"action-btn",size:"medium"},null,8,["username"])),s(z,{entity:V(t).creator,entityType:"user",onTransactionComplete:g,class:"action-btn"},null,8,["entity"]),s(P,{entityType:"project",entity:V(t).project,isLoading:V(u),class:"action-btn"},null,8,["entity","isLoading"])]),_:1})]),_:1}),V(t).project.description?(v(),D(q,{key:0,class:"mt-2"},{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[s(Vo,{description:V(t).project.description,"initially-expanded":e.value,"onUpdate:expanded":y[1]||(y[1]=j=>e.value=j)},null,8,["description","initially-expanded"])]),_:1})]),_:1})):U("",!0),V(t).project.categories&&V(t).project.categories.length?(v(),D(q,{key:1,class:"mt-2"},{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[c("div",Eo,[(v(!0),k(X,null,ie(V(t).project.categories,j=>(v(),D(Ut,{key:j.id,size:"small",color:"primary",variant:"flat",class:"category-chip"},{default:i(()=>[F(x(j.name),1)]),_:2},1024))),128))])]),_:1})]),_:1})):U("",!0)]),_:1})):U("",!0)}}}),Uo=A(Po,[["__scopeId","data-v-6dc1ff03"]]),Do={class:"project-credits"},Ho={key:0,class:"loading-container"},Fo={class:"d-flex align-center gap-4"},Ro={class:"flex-grow-1"},Io={key:3,class:"empty-state"},No=N({__name:"ProjectCreditCarousel",props:{accessUuid:{},credits:{},loading:{type:Boolean},error:{},totalMembers:{}},emits:["reachEnd"],setup(o,{emit:l}){const e=o,r=l,n=w(null),{width:a}=At(),d={320:{slidesPerView:2,spaceBetween:12},640:{slidesPerView:3,spaceBetween:15},768:{slidesPerView:4,spaceBetween:18},1024:{slidesPerView:5,spaceBetween:20},1280:{slidesPerView:6,spaceBetween:20}},t=T(()=>a.value<640?2:a.value<768?3:a.value<1024?4:a.value<1280?5:6),u=T(()=>a.value<640?8:a.value<768?12:a.value<1024?15:a.value<1280?18:20),p=T(()=>a.value<640?"sm":a.value<1024?"md":"lg"),m=h=>{if(!h||e.credits.length===0)return;h.activeIndex/(e.credits.length-1)>.75&&r("reachEnd")};W(a,()=>{setTimeout(()=>{var h,_;(_=(h=n.value)==null?void 0:h.update)==null||_.call(h)},100)});function C(){}return(h,_)=>{const g=Dt,f=Ft,$=Ae,b=Rt,y=Nt;return v(),k("div",Do,[s(f,{title:"Cast and Crew",class:"mb-3"},{actionable:i(()=>[s(g,{route:`/project/${h.accessUuid}/cast-crew`,"prepend-icon":"mdi-chevron-right",height:"36"},null,8,["route"])]),_:1}),h.loading?(v(),k("div",Ho,[(v(!0),k(X,null,ie(h.skeletonCount,M=>(v(),k("div",{key:M,class:"skeleton-card"},[s(ee,{type:"image, list-item-two-line",class:"skeleton-loader"},{default:i(()=>[c("div",Fo,[s(ee,{type:"avatar",width:"56",height:"56"}),c("div",Ro,[s(ee,{type:"text",class:"mb-1"}),s(ee,{type:"text",width:"60%"})])])]),_:1})]))),128))])):h.error?(v(),D(qe,{key:1,type:"error",class:"mb-4"},{default:i(()=>[F(x(h.error),1)]),_:1})):h.credits.length?(v(),D(y,{key:2,ref_key:"carouselRef",ref:n,"slides-per-view":t.value,"space-between":u.value,autoplay:!1,navigation:!0,pagination:!1,breakpoints:d,onSlideChange:m,onReachEnd:_[0]||(_[0]=M=>h.$emit("reachEnd"))},{default:i(()=>[(v(!0),k(X,null,ie(h.credits,M=>(v(),D(V(It),{key:M.id,class:"swiper-slide"},{default:i(()=>[s(b,{credit:M,size:p.value},{action:i(()=>[s($,{entity:M.user,"entity-type":"user",size:"small",onTransactionComplete:C},null,8,["entity"])]),_:2},1032,["credit","size"])]),_:2},1024))),128))]),_:1},8,["slides-per-view","space-between"])):(v(),k("div",Io,_[1]||(_[1]=[c("p",{class:"text-body-1 text-center"},"No cast and crew found",-1)])))])}}}),Ao=A(No,[["__scopeId","data-v-181bff70"]]),Oo={class:"media-container mb-4"},zo={class:"video-placeholder"},qo=["src","alt"],Wo={class:"project-metadata"},Qo={key:0},Zo={class:"metadata-details"},Ko={key:0},Jo={key:1},Xo=N({__name:"WatchProjectPage",props:{accessUuid:{type:String,required:!0},project:{type:Object,required:!0},credits:{type:Array,required:!0},recommendedProjects:{type:Array,required:!0}},setup(o){const l=o,e=T(()=>l.credits&&l.credits.length>0),r=n=>{const a=Math.floor(n/60),d=n%60;return`${a}:${d.toString().padStart(2,"0")}`};return(n,a)=>{const d=ao,t=ge,u=Uo,p=Ao,m=Ht;return v(),D(Ne,{fluid:"",class:"watch-project-container"},{default:i(()=>[s(q,null,{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[c("div",Oo,[s(t,null,{fallback:i(()=>[c("div",zo,[o.project.thumbnail_url?(v(),k("img",{key:0,src:o.project.thumbnail_url,alt:o.project.name},null,8,qo)):U("",!0),a[0]||(a[0]=c("div",{class:"play-button"},"▶",-1))])]),default:i(()=>[s(d,{project:o.project},null,8,["project"])]),_:1})]),s(q,null,{default:i(()=>[s(I,{cols:"12"},{default:i(()=>[c("div",Wo,[c("h1",null,x(o.project.name),1),o.project.description?(v(),k("p",Qo,x(o.project.description),1)):U("",!0),c("div",Zo,[o.project.creator?(v(),k("span",Ko,"By "+x(o.project.creator.display_name),1)):U("",!0),o.project.duration?(v(),k("span",Jo,x(r(o.project.duration)),1)):U("",!0)])]),s(t,null,{default:i(()=>[s(u,{project:o.project},null,8,["project"])]),_:1})]),_:1}),V(e)?(v(),D(I,{key:0,cols:"12",class:"mb-4"},{default:i(()=>[s(t,null,{default:i(()=>[s(p,{"access-uuid":o.accessUuid,credits:o.credits,loading:!1,error:null,totalMembers:o.credits.length},null,8,["access-uuid","credits","totalMembers"])]),_:1})]),_:1})):U("",!0)]),_:1}),s(t,null,{default:i(()=>[s(m,{projects:o.recommendedProjects},null,8,["projects"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Yo=A(Xo,[["__scopeId","data-v-e00da642"]]),Go=(o,l)=>{const r=he().public.frontendUrl||"https://talastage.com",n="TalaStage",a=`${r}/talastage_logo.png`,d=T(()=>{var z,P,j,Y;const t=o.value,u=(t==null?void 0:t.name)||"Watch Video on TalaStage",p=((z=t==null?void 0:t.creator)==null?void 0:z.display_name)||((P=t==null?void 0:t.creator)==null?void 0:P.username)||"TalaStage Creator",m=((j=t==null?void 0:t.creator)==null?void 0:j.username)||"",C=m?`${r}/${m}`:r,h=t!=null&&t.description?`${t.description.slice(0,155)}...`:`Watch "${u}" by ${p} on TalaStage. Your Stage to the World of Entertainment.`,_=t!=null&&t.thumbnail_url?t.thumbnail_url.startsWith("http")?t.thumbnail_url:`${r}${t.thumbnail_url}`:a,g=(t==null?void 0:t.video_url)||"",f=g&&g.startsWith("http"),$=(t==null?void 0:t.duration)||0,b=g.includes(".m3u8")?"application/x-mpegURL":"video/mp4",y=`${r}/watch/${(t==null?void 0:t.access_uuid)||l}`,B=(t?[t.type||"video",p,"entertainment","streaming",n].filter(Boolean):["video","entertainment",n]).join(", "),O=((Y=t==null?void 0:t.premiering)==null?void 0:Y.utc)||new Date().toISOString();return{title:u,htmlAttrs:{lang:"en"},meta:[{name:"description",content:h},{name:"keywords",content:B},{name:"robots",content:"index, follow"},{name:"author",content:p},{property:"og:type",content:"video.other"},{property:"og:site_name",content:n},{property:"og:title",content:u},{property:"og:description",content:h},{property:"og:url",content:y},{property:"og:image",content:_},{property:"og:image:secure_url",content:_},{property:"og:image:type",content:"image/jpeg"},{property:"og:image:width",content:"1200"},{property:"og:image:height",content:"630"},{property:"og:image:alt",content:u},...f?[{property:"og:video",content:g},{property:"og:video:secure_url",content:g},{property:"og:video:type",content:b},{property:"og:video:width",content:"1920"},{property:"og:video:height",content:"1080"},{property:"video:duration",content:$.toString()},{property:"video:release_date",content:O}]:[],{name:"twitter:card",content:f?"player":"summary_large_image"},{name:"twitter:site",content:"@talastage"},{name:"twitter:creator",content:"@talastage"},{name:"twitter:title",content:u},{name:"twitter:description",content:h},{name:"twitter:image",content:_},{name:"twitter:image:alt",content:u},...f?[{name:"twitter:player",content:y},{name:"twitter:player:width",content:"1920"},{name:"twitter:player:height",content:"1080"},{name:"twitter:player:stream",content:g},{name:"twitter:player:stream:content_type",content:b}]:[],{property:"og:locale",content:"en_US"}],link:[{rel:"canonical",href:y}],script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Organization",name:n,url:r,logo:a,sameAs:["https://twitter.com/talastage","https://facebook.com/talastage"]})},...f?[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"VideoObject",name:u,description:h,thumbnailUrl:_,uploadDate:O,duration:$?`PT${$}S`:void 0,contentUrl:g,embedUrl:y,author:{"@type":"Person",name:p,url:C},publisher:{"@type":"Organization",name:n,logo:{"@type":"ImageObject",url:a}},keywords:B})}]:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebPage",name:u,description:h,image:_,url:y,author:{"@type":"Person",name:p,url:C}})}],{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:r},{"@type":"ListItem",position:2,name:"Watch",item:`${r}/watch`},{"@type":"ListItem",position:3,name:u,item:y}]})}]}});vt(d)},en={class:"watch-page-container"},tn={key:0,class:"loading-container"},an={key:1,class:"error-container"},on=N({__name:"index",async setup(o){let l,e;const r=Re(),{$api:n}=ce(),a=r.params.access_uuid,{data:d,pending:t,error:u}=([l,e]=be(()=>we(`watch-project-${a}`,()=>n.get(`/api/projects/${a}/watch`,{params:{timezone:"UTC"}}).then(C=>C.data),{server:!0,lazy:!1})),l=await l,e(),l),{data:p}=([l,e]=be(()=>we(`watch-credits-${a}`,()=>n.get(`/guest/projects/${a}/credits`,{params:{limit:10}}).then(C=>{var h;return((h=C.data)==null?void 0:h.flatMap(_=>_.credits))||[]}),{server:!0,lazy:!0})),l=await l,e(),l),{data:m}=([l,e]=be(()=>we("recommended-projects",()=>n.get("/api/recommended/projects",{params:{page:1}}).then(C=>C.projects||[]),{server:!0,lazy:!0})),l=await l,e(),l);return Go(d,a),(C,h)=>{const _=Yo,g=ge;return v(),k("div",en,[V(t)?(v(),k("div",tn,h[0]||(h[0]=[c("p",null,"Loading...",-1)]))):V(d)?(v(),D(g,{key:2},{default:i(()=>[s(_,{"access-uuid":V(a),project:V(d),credits:V(p)||[],"recommended-projects":V(m)||[]},null,8,["access-uuid","project","credits","recommended-projects"])]),_:1})):(v(),k("div",an,h[1]||(h[1]=[c("p",null,"Failed to load project data.",-1)])))])}}}),fs=A(on,[["__scopeId","data-v-695c409b"]]);export{fs as default};
