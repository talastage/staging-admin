import{j as $,E as u,g as C}from"./CGQimWOm.js";const f=Object.freeze([{name:"WhatsApp",icon:"mdi-whatsapp",color:"#25D366",shareUrl:(n,t)=>`https://api.whatsapp.com/send?text=${encodeURIComponent(`${n}

${t}`)}`},{name:"X",icon:"mdi-twitter",color:"#1DA1F2",shareUrl:(n,t)=>`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(t)}`},{name:"Facebook",icon:"mdi-facebook",color:"#1877F2",shareUrl:(n,t)=>`https://www.facebook.com/share.php?u=${encodeURIComponent(t)}`},{name:"LinkedIn",icon:"mdi-linkedin",color:"#0A66C2",shareUrl:(n,t)=>`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(t)}&title=${encodeURIComponent(n)}`},{name:"Telegram",icon:"mdi-telegram",color:"#0088cc",shareUrl:(n,t)=>`https://t.me/share/url?url=${encodeURIComponent(t)}&text=${encodeURIComponent(n)}`},{name:"Email",icon:"mdi-email",color:"#D44638",shareUrl:(n,t)=>`mailto:?subject=${encodeURIComponent("Check this out!")}&body=${encodeURIComponent(`${n}

${t}`)}`}]);let d=null,p=null;const h=()=>typeof window>"u"?!1:(d===null&&(d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),d),g=()=>typeof window>"u"?!1:(p===null&&(p=!!(navigator.clipboard&&window.isSecureContext)),p),y=Object.entries({width:550,height:400,menubar:"no",toolbar:"no",status:"no",resizable:"yes",scrollbars:"yes"}).map(([t,l])=>`${t}=${l}`).join(",");function x(){const n=$(!1),t=()=>f.filter(o=>!o.mobileOnly||h()),l=(o,r)=>{if(!(typeof window>"u"))try{const a=Math.max(0,(window.screen.width-550)/2),e=Math.max(0,(window.screen.height-400)/2),i=`${y},left=${a},top=${e}`,s=window.open(o,`share_${r}`,i);s&&s.focus()}catch(a){console.warn("Failed to open share popup:",a),window.open(o,"_blank")}},w=async(o,r,a,e,i)=>{if(n.value||!r)return;const s=f.find(c=>c.name===o);if(!s)throw new Error(`Platform ${o} not supported`);n.value=!0;try{const c=s.shareUrl(a,r);e&&i&&m(e,i,o).catch(console.warn),o==="Email"?window.location.href=c:l(c,o)}finally{setTimeout(()=>{n.value=!1},500)}},b=async o=>{if(!o)throw new Error("No URL to copy");if(g())try{await navigator.clipboard.writeText(o);return}catch(r){console.warn("Clipboard API failed, trying fallback:",r)}return new Promise((r,a)=>{try{const e=document.createElement("textarea");e.value=o,e.style.cssText="position:fixed;left:-9999px;top:-9999px;opacity:0",document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length);const i=document.execCommand("copy");document.body.removeChild(e),i?r():a(new Error("Copy command failed"))}catch(e){a(e)}})},m=async(o,r,a)=>{if(!(!o||!r||!a))try{const{$axios:e}=C();if(!e)return;e.post(`/api/share/${o}/${r}/track`,{platform:a,timestamp:Date.now(),userAgent:navigator.userAgent,isMobile:h()}).catch(console.warn)}catch(e){console.warn("Share tracking failed:",e)}};return{sharePlatforms:u(t()),shareTo:w,copyLink:b,trackShare:m,isMobileDevice:h,isSharing:u(n)}}export{x as u};
