import{u as j}from"./DXjoE66g.js";import{n as q,j as C,c as v,l as U,t as A,o as l,m as r,p as a,w as s,q as b,O as E,x as w,b as n,v as c,V as g,G as y,s as p,A as G,a as S,F as P,D as L,y as O,_ as Q}from"./CGQimWOm.js";import{V as z}from"./GXZRJwQ4.js";import{V as $}from"./BkTuXOR_.js";import{V as H}from"./CMsVONS5.js";import{V as J}from"./BvtSni_j.js";import{V as K}from"./BRveoiXI.js";import{V as R,a as W}from"./tTgLLTve.js";import{V as X}from"./CW50LM9V.js";const Y={class:"phone-code-select-container"},Z={key:0,class:"d-flex align-center w-100"},ee={class:"flag-container mr-3"},te=["src","alt"],oe={class:"d-flex flex-column align-start"},ae={class:"phone-code text-body-1 font-weight-medium"},se={class:"country-name text-caption text-grey-darken-1"},le={key:1,class:"d-flex align-center w-100"},ne={class:"placeholder text-body-1"},re={class:"search-container pa-4"},de={key:0,class:"d-flex justify-center align-center pa-8"},ce={key:1,class:"codes-container"},ie={class:"flag-container"},ue=["src","alt"],me={class:"phone-code text-body-1 font-weight-medium"},fe={class:"country-name text-caption text-grey-darken-1 ml-3"},pe={key:1,class:"no-results pa-8 d-flex flex-column align-center"},ve={class:"text-body-1 text-grey-darken-1"},ge={key:0,class:"error-container mt-1"},he=q({__name:"SelectPhoneCode",props:{modelValue:{},label:{default:"Select Phone Code"},errorMessages:{default:()=>[]},rules:{default:()=>[]}},emits:["update:modelValue"],setup(B,{emit:M}){const N=B,I=M,{countries:h,loading:_,fetchCountries:T}=j(),i=C(!1),d=C(""),u=v({get:()=>N.modelValue,set:t=>I("update:modelValue",t)}),m=v(()=>{var t;return(t=h.value)!=null&&t.length?h.value.map(e=>({id:e.id,code:e.phone_code,country:e.name,flag:e.flag})):[]}),f=v(()=>!u.value||!m.value.length?null:m.value.find(t=>t.code===u.value)||null),V=v(()=>{if(!m.value.length)return[];const t=d.value.toLowerCase().trim();return t?m.value.filter(e=>e.country.toLowerCase().includes(t)||e.code.includes(t)):m.value});U(async()=>{h.value.length||await T()});function D(t){u.value=t,i.value=!1,d.value=""}function F(){d.value=""}return A(i,t=>{t||setTimeout(()=>{d.value=""},300)}),(t,e)=>{var x;return l(),r("div",Y,[a(X,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o),"close-on-content-click":!1,location:"bottom",transition:"scale-transition","max-width":"360"},{activator:s(({props:o})=>[a(b,E(o,{variant:"outlined",class:"phone-code-selector",rounded:"lg",block:"",height:"56",disabled:w(_)}),{default:s(()=>[f.value?(l(),r("div",Z,[n("div",ee,[n("img",{src:f.value.flag,alt:f.value.country,class:"country-flag",loading:"lazy"},null,8,te)]),n("div",oe,[n("div",ae," +"+c(f.value.code),1),n("div",se,c(f.value.country),1)]),a(z),a(g,{class:y(["transition-transform",i.value?"rotate-icon":""]),color:"grey-darken-1"},{default:s(()=>e[2]||(e[2]=[p(" mdi-chevron-down ")])),_:1},8,["class"])])):(l(),r("div",le,[a(g,{size:"24",class:"mr-3",color:"grey-darken-1"},{default:s(()=>e[3]||(e[3]=[p(" mdi-phone ")])),_:1}),n("div",ne,c(t.label),1),a(z),a(g,{class:y(["transition-transform",i.value?"rotate-icon":""]),color:"grey-darken-1"},{default:s(()=>e[4]||(e[4]=[p(" mdi-chevron-down ")])),_:1},8,["class"])]))]),_:2},1040,["disabled"])]),default:s(()=>[a($,{class:"phone-code-menu pa-0",elevation:"8",rounded:"lg"},{default:s(()=>[n("div",re,[a(H,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=o=>d.value=o),"prepend-inner-icon":"mdi-magnify",placeholder:"Search country or code",variant:"outlined",density:"comfortable","bg-color":"grey-lighten-5","hide-details":"",rounded:"lg",clearable:""},null,8,["modelValue"])]),a(J),w(_)?(l(),r("div",de,[a(G,{indeterminate:"",color:"primary"})])):(l(),r("div",ce,[V.value.length>0?(l(),S(K,{key:0,class:"code-list pa-0",height:"320"},{default:s(()=>[(l(!0),r(P,null,L(V.value,o=>(l(),S(R,{key:o.id,onClick:k=>D(o.code),class:y(["code-list-item py-2",{"selected-item":u.value===o.code}]),active:u.value===o.code,color:"primary"},{prepend:s(()=>[n("div",ie,[n("img",{src:o.flag,alt:o.country,class:"country-flag",loading:"lazy"},null,8,ue)])]),default:s(()=>[a(W,{class:"d-flex align-center"},{default:s(()=>[n("span",me," +"+c(o.code),1),n("span",fe,c(o.country),1)]),_:2},1024)]),_:2},1032,["onClick","class","active"]))),128))]),_:1})):(l(),r("div",pe,[a(g,{color:"grey-lighten-1",size:"40",class:"mb-3"},{default:s(()=>e[5]||(e[5]=[p(" mdi-magnify-close ")])),_:1}),n("span",ve,' No phone codes found matching "'+c(d.value)+'" ',1),a(b,{variant:"text",color:"primary",class:"mt-2",onClick:F},{default:s(()=>e[6]||(e[6]=[p(" Clear search ")])),_:1})]))]))]),_:1})]),_:1},8,["modelValue"]),(x=t.errorMessages)!=null&&x.length?(l(),r("div",ge,[(l(!0),r(P,null,L(t.errorMessages,(o,k)=>(l(),r("p",{key:k,class:"text-error text-caption"},c(o),1))),128))])):O("",!0)])}}}),Pe=Q(he,[["__scopeId","data-v-8b27cdfa"]]);export{Pe as S};
