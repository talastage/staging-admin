import{_ as Ue}from"./Bem91KZK.js";import{_ as dt}from"./DJ8gbgBD.js";import{n as G,c as b,o as g,a as N,w as u,p as o,V as Q,s as F,v as D,m as S,b as y,y as O,G as ce,q as te,_ as z,t as Y,F as re,D as he,T as mt,k as xe,j as C,C as Ee,i as qe,l as Pe,g as de,f as pt,A as Ae,x as B,L as ft,H as yt}from"./CGQimWOm.js";import{_ as vt}from"./3SmzOII5.js";import{_ as _t}from"./BeQTM7t9.js";import{V as me}from"./CRY4crBU.js";import{V as H}from"./CS8xUUzH.js";import{V as Me}from"./xvVMJZi9.js";import{a as ee,V as oe}from"./BkTuXOR_.js";import{a as ht}from"./DsvAftJq.js";import{a as bt,V as gt}from"./2hEmiBig.js";import{V as Oe}from"./f5lwX8SZ.js";import{V as $e}from"./P_q-BwEt.js";import{V as wt}from"./tTgLLTve.js";import{V as kt}from"./BRveoiXI.js";import{_ as Vt}from"./GjSan1Rr.js";import{_ as Ct}from"./2t2MeGir.js";import{u as je}from"./CiN8dqd8.js";import{u as De}from"./DMBY-Kaj.js";import{V as Z}from"./CMsVONS5.js";import{V as Re}from"./CiXMVmI4.js";import{u as ze}from"./DXjoE66g.js";import{S as $t}from"./CsQhYM7t.js";import{B as Le}from"./COhe-ksk.js";import{u as xt}from"./B3G4pkyN.js";import{V as Pt}from"./BvtSni_j.js";import{V as Be}from"./DbQnG3uQ.js";import{V as Mt}from"./BcH3Kywr.js";import{_ as Dt}from"./CYmCD8gk.js";import{u as St}from"./BW5EWlXk.js";import{u as Tt}from"./D78L5r-E.js";import{V as Ft}from"./BhN2__aY.js";import"./DcSlHAeh.js";import"./BSH7BhKc.js";/* empty css        */import"./Dn0bXcU5.js";import"./M9aAkXy6.js";import"./rtPmyJLL.js";import"./DX-6Wr-O.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./DJ0NdY24.js";import"./C-73ZGdz.js";import"./C-GTDzx5.js";import"./IpAEdaYr.js";import"./CW50LM9V.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";const It={key:2,class:"user-tip-container"},Nt={class:"text-center"},At={class:"font-weight-medium"},Bt={class:"text-caption"},Wt={class:"d-flex flex-column flex-sm-row justify-space-between align-sm-center mb-3"},Ut={class:"text-h6 font-weight-medium text-truncate mb-2 mb-sm-0"},Et={class:"text-subtitle-2 text-medium-emphasis mb-3"},qt={class:"text-body-2"},Ot={class:"d-flex flex-column flex-sm-row justify-space-between align-sm-center"},jt={class:"amount-display mb-3 mb-sm-0"},Rt={class:"text-h6 font-weight-bold"},zt=G({__name:"CartItem",props:{item:{}},emits:["remove"],setup(p,{emit:c}){const m=p,n=c,e=b(()=>m.item.payable_type==="App\\Models\\Project"),i=b(()=>m.item.payable_type==="App\\Models\\User"),d=b(()=>["deposit","withdrawal"].includes(m.item.payment_type)),h=l=>{const w={pending:"warning",paid:"success",failed:"error",canceled:"grey",default:"primary"};return w[l]||w.default},v=l=>{const w={project_watching:"Project Purchase",tip:"User Tip",deposit:"Wallet Deposit",withdrawal:"Wallet Withdrawal",default:"Payment"};return w[l]||w.default},a=l=>l==="withdrawal"?"Funds will be transferred to your linked account or mobile number provided.":"Funds will be added to your wallet balance",$=(l,w="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:w,minimumFractionDigits:2}).format(Number(l)),k=b(()=>{var l,w,s;return d.value?m.item.payment_type==="withdrawal"?"Wallet Withdrawal":"Wallet Deposit":i.value?`Tip for ${((l=m.item.payable)==null?void 0:l.display_name)||((w=m.item.payable)==null?void 0:w.username)||"User"}`:((s=m.item.payable)==null?void 0:s.name)||"Unknown Item"}),f=l=>{n("remove",l)};return(l,w)=>{const s=vt,_=_t;return g(),N(oe,{class:"cart-item",flat:"",rounded:"lg"},{default:u(()=>[o(me,{"no-gutters":"",align:"center"},{default:u(()=>[o(H,{cols:"12",sm:"3",class:"d-flex justify-center align-center pa-4"},{default:u(()=>{var V,P,U,A,M,j,X;return[d.value?(g(),N(Me,{key:0,size:"72",color:l.item.payment_type==="withdrawal"?"error":"primary",class:"elevation-1"},{default:u(()=>[o(Q,{size:"42",color:"white"},{default:u(()=>[F(D(l.item.payment_type==="withdrawal"?"mdi-cash-minus":"mdi-cash-plus"),1)]),_:1})]),_:1},8,["color"])):e.value?(g(),N(s,{key:1,thumbnailUrl:(V=l.item.payable)==null?void 0:V.thumbnail_url,videoUrl:(P=l.item.payable)==null?void 0:P.video_url,access_uuid:(U=l.item.payable)==null?void 0:U.access_uuid,class:"project-thumbnail rounded-lg overflow-hidden"},null,8,["thumbnailUrl","videoUrl","access_uuid"])):i.value?(g(),S("div",It,[o(_,{username:(A=l.item.payable)==null?void 0:A.username,profile_photo:(M=l.item.payable)==null?void 0:M.profile_photo,size:"lg",class:"mb-2"},null,8,["username","profile_photo"]),y("div",Nt,[y("div",At,D((j=l.item.payable)==null?void 0:j.display_name),1),y("div",Bt,"@"+D((X=l.item.payable)==null?void 0:X.username),1)])])):O("",!0)]}),_:1}),o(H,{cols:"12",sm:"9"},{default:u(()=>[o(ee,null,{default:u(()=>{var V;return[y("div",Wt,[y("h3",Ut,D(k.value),1),o(ht,{size:"small",color:h(l.item.status),"text-color":"white",class:"status-chip"},{default:u(()=>[F(D(l.item.status),1)]),_:1},8,["color"])]),y("p",Et,D(v(l.item.payment_type)),1),d.value?(g(),S("div",{key:0,class:ce(["transaction-info pa-3 mb-4",l.item.payment_type])},[o(Q,{color:l.item.payment_type==="withdrawal"?"error":"info",class:"mr-2",size:"18"},{default:u(()=>w[1]||(w[1]=[F(" mdi-information ")])),_:1},8,["color"]),y("span",qt,D(a(l.item.payment_type)),1)],2)):O("",!0),y("div",Ot,[y("div",jt,[w[2]||(w[2]=y("div",{class:"text-body-2 text-medium-emphasis mb-1"},"Amount",-1)),y("div",Rt,D($(l.item.paying_amount,((V=l.item.currency)==null?void 0:V.code)||"USD")),1)]),o(te,{color:"error",variant:"outlined",size:"small",onClick:w[0]||(w[0]=P=>f(l.item.id)),"prepend-icon":"mdi-delete",rounded:"lg",class:"remove-btn"},{default:u(()=>w[3]||(w[3]=[F(" Remove ")])),_:1})])]}),_:1})]),_:1})]),_:1})]),_:1})}}}),Lt=z(zt,[["__scopeId","data-v-e77c7c43"]]),Yt={class:"cart-items-list"},Ht={class:"text-body-1"},Gt={__name:"CartItemsList",props:{items:{type:Array,required:!0,default:()=>[],validator:p=>p.every(c=>c.id&&c.payment_type&&c.payable)},loading:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["remove","clear","browse"],setup(p,{emit:c}){const m=p,n=c,e=d=>{n("remove",d)},i=()=>{n("clear")};return Y(()=>m.items,(d,h)=>{(d==null?void 0:d.length)<(h==null?void 0:h.length)},{deep:!0}),(d,h)=>{var v;return g(),S("div",Yt,[p.loading?(g(),S(re,{key:0},he(3,a=>o(Oe,{key:a,type:"list-item-avatar-three-line",class:"mb-4"})),64)):p.error?(g(),N($e,{key:1,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:u(()=>[F(D(p.error),1)]),_:1})):(v=p.items)!=null&&v.length?(g(),N(kt,{key:3,class:"pa-0"},{default:u(()=>[o(mt,{name:"cart-item"},{default:u(()=>[(g(!0),S(re,null,he(p.items,a=>(g(),N(wt,{key:a.id,class:"mb-3 px-4"},{default:u(()=>[o(Lt,{item:a,onRemove:e},null,8,["item"])]),_:2},1024))),128))]),_:1})]),_:1})):(g(),N($e,{key:2,type:"info",variant:"tonal",class:"mb-4"},{title:u(()=>h[1]||(h[1]=[F(" Your cart is empty ")])),text:u(()=>h[2]||(h[2]=[F(" Add items to your cart to see them here. ")])),append:u(()=>[o(te,{color:"info",variant:"text",onClick:h[0]||(h[0]=a=>d.$emit("browse"))},{default:u(()=>h[3]||(h[3]=[F(" Browse Items ")])),_:1})]),_:1})),o(bt,null,{default:u(()=>{var a;return[((a=p.items)==null?void 0:a.length)>1?(g(),N(oe,{key:0,class:"bulk-actions mt-6",variant:"flat",color:"surface-variant",rounded:"lg"},{default:u(()=>[o(ee,{class:"d-flex justify-space-between align-center py-3"},{default:u(()=>[y("span",Ht,D(p.items.length)+" items in cart",1),o(te,{color:"error",variant:"text",onClick:i,"prepend-icon":"mdi-delete-sweep",class:"clear-btn"},{default:u(()=>h[4]||(h[4]=[F(" Clear Cart ")])),_:1})]),_:1})]),_:1})):O("",!0)]}),_:1})])}}},Kt=z(Gt,[["__scopeId","data-v-90b6322e"]]),Jt={class:"wallet-payment-form"},Qt={class:"wallet-payment-compact"},Xt={class:"payment-header-compact mb-3"},Zt={class:"d-flex align-center"},ea=G({__name:"WalletPaymentForm",props:{amount:{type:Number,required:!0},currency:{type:Object,required:!0}},emits:["validate","processing","payment-complete"],setup(p,{expose:c,emit:m}){const n=m,e=xe();je();const i=De(),d=C(!1),h=C(!1),v=C(!1),a=C({valid:!1,status:"",data:{}});function $(V){a.value=V,n("validate",V)}Y(()=>h.value,V=>{V&&n("validate",{...a.value,isPinVerified:!0})});function k(){e.push("/wallet/deposit")}function f(){e.push("/wallet/activate")}function l(){d.value=!0}function w(){h.value=!0,v.value=!1,n("payment-complete")}function s(V){h.value=!1,v.value=!1,i.error((V==null?void 0:V.message)||"PIN verification failed")}function _(){e.push("/wallet/reset-pin")}return c({showPinVerification:l}),(V,P)=>{const U=Vt,A=Ct;return g(),S("div",Jt,[y("div",Qt,[y("div",Xt,[y("div",Zt,[o(Me,{size:"32",class:"mr-3",color:"primary"},{default:u(()=>[o(Q,{color:"white",size:"18"},{default:u(()=>P[1]||(P[1]=[F("mdi-wallet")])),_:1})]),_:1}),P[2]||(P[2]=y("div",null,[y("h4",{class:"text-h6 font-weight-bold mb-0"},"Pay with your wallet"),y("p",{class:"text-caption text-medium-emphasis mb-0"}," Use your wallet balance ")],-1))])]),o(U,{amount:p.amount,currency:p.currency,onValidate:$,onDepositClick:k,onActivateClick:f},null,8,["amount","currency"])]),o(A,{modelValue:d.value,"onUpdate:modelValue":P[0]||(P[0]=M=>d.value=M),onVerified:w,onError:s,onForgotPin:_},null,8,["modelValue"])])}}}),ta=z(ea,[["__scopeId","data-v-15014e71"]]),aa={class:"card-payment-form"},la={key:0,class:"text-subtitle-1 mb-4"},oa=G({__name:"CardPaymentForm",props:{gateway:{}},emits:["validate"],setup(p,{emit:c}){const m=p,n=c,e=C(null),i=C(""),d=C(""),h=C(""),v=C(""),a={required:s=>!!s||"This field is required",cardNumber:s=>{const _=s.replace(/\s/g,"");return/^[0-9]{16}$/.test(_)||"Invalid card number"},expiryDate:s=>{if(!s)return"Required";const[_,V]=s.split("/"),P=new Date().getFullYear()%100,U=new Date().getMonth()+1;return/^\d{2}\/\d{2}$/.test(s)?parseInt(_)<1||parseInt(_)>12?"Invalid month":parseInt(V)<P||parseInt(V)===P&&parseInt(_)<U?"Card expired":!0:"Invalid format (MM/YY)"},cvv:s=>/^[0-9]{3,4}$/.test(s)||"Invalid CVV"};function $(s){var P;const V=((P=s.target.value.replace(/\D/g,"").match(/.{1,4}/g))==null?void 0:P.join(" "))||"";i.value=V.substring(0,19),w()}function k(s){const _=s.target.value.replace(/\D/g,"");_.length>=2?d.value=`${_.substring(0,2)}/${_.substring(2,4)}`:d.value=_,w()}function f(s){v.value=s.target.value.toUpperCase(),w()}function l(s){/[\d]/.test(s.key)||s.preventDefault()}function w(){if(!e.value)return;e.value.validate()?n("validate",{valid:!0,data:{card_number:i.value.replace(/\s/g,""),expiry_month:d.value.split("/")[0],expiry_year:`20${d.value.split("/")[1]}`,cvv:h.value,card_holder:v.value}}):n("validate",{valid:!1,data:null})}return Y(()=>m.gateway,()=>{m.gateway.slug==="flutterwave"?n("validate",{valid:!0,data:null}):w()},{immediate:!0}),(s,_)=>(g(),S("div",aa,[s.gateway.slug==="flutterwave"?(g(),S("div",la," You'll be redirected to a secure payment page ")):(g(),N(Re,{key:1,ref_key:"form",ref:e,onSubmit:_[4]||(_[4]=Ee(()=>{},["prevent"]))},{default:u(()=>[o(Z,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=V=>i.value=V),label:"Card Number",rules:[a.required,a.cardNumber],placeholder:"1234 5678 9012 3456",onInput:$,onKeypress:l,maxlength:"19",class:"mb-4"},null,8,["modelValue","rules"]),o(me,null,{default:u(()=>[o(H,{cols:"6"},{default:u(()=>[o(Z,{modelValue:d.value,"onUpdate:modelValue":_[1]||(_[1]=V=>d.value=V),label:"Expiry Date",rules:[a.required,a.expiryDate],placeholder:"MM/YY",onInput:k,onKeypress:l,maxlength:"5"},null,8,["modelValue","rules"])]),_:1}),o(H,{cols:"6"},{default:u(()=>[o(Z,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=V=>h.value=V),label:"CVV",rules:[a.required,a.cvv],placeholder:"123",onKeypress:l,maxlength:"4",type:"password"},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(Z,{modelValue:v.value,"onUpdate:modelValue":_[3]||(_[3]=V=>v.value=V),label:"Card Holder Name",rules:[a.required],placeholder:"JOHN DOE",class:"mb-4",onInput:f},null,8,["modelValue","rules"])]),_:1},512))]))}}),na=z(oa,[["__scopeId","data-v-9cba9471"]]);function ra(p,c){if(!p||!c)return"";const m=p.replace(/^0+/,"");return`${c}${m}`}function We(p,c=16){return p?/^\d+$/.test(p)?p.length>c?{isValid:!1,error:`Phone number cannot exceed ${c} digits`}:{isValid:!0}:{isValid:!1,error:"Phone number must contain only digits"}:{isValid:!1,error:"Phone number is required"}}const sa={class:"d-flex align-center pa-3 border rounded-s"},ia=["src","alt"],ua={key:1,class:"flag-emoji mr-2"},ca={class:"text-caption"},da=G({__name:"CountryDisplay",props:{country:{}},setup(p){return(c,m)=>{var n,e;return g(),S("div",sa,[(n=c.country)!=null&&n.flag?(g(),S("img",{key:0,src:c.country.flag,alt:c.country.name+" flag",class:"flag-image mr-2"},null,8,ia)):(g(),S("span",ua,"ðŸŒ")),y("span",ca,"+"+D(((e=c.country)==null?void 0:e.phone_code)||"000"),1)])}}}),ma=z(da,[["__scopeId","data-v-7ddf9d08"]]),pa={class:"phone-input-container"},fa={class:"country-display"},ya=G({__name:"PhoneNumberInput",props:{modelValue:{},label:{default:"Phone Number"},hint:{default:"Enter your phone number"},persistentHint:{type:Boolean,default:!1},required:{type:Boolean,default:!0},maxLength:{default:16}},emits:["update:modelValue","validate"],setup(p,{emit:c}){const m=p,n=c,e=qe(),{countries:i,loading:d,fetchCountries:h}=ze(),v=C(""),a=b(()=>{var s;return(s=e.user)!=null&&s.country_id?i.value.find(_=>_.id===e.user.country_id):null}),$=b(()=>{const s=[];return m.required&&s.push(_=>!!_||"Phone number is required"),s.push(_=>{if(!_)return!0;const V=We(_,m.maxLength);return V.isValid||V.error}),s}),k=b(()=>!v.value&&m.required?!1:We(v.value,m.maxLength).isValid),f=b(()=>!a.value||!v.value?"":ra(v.value,a.value.phone_code)),l=()=>{n("update:modelValue",f.value),n("validate",k.value)},w=()=>{n("validate",k.value)};return Pe(async()=>{i.value.length===0&&await h()}),Y(v,()=>{l()}),Y(()=>m.modelValue,s=>{if(s&&s!==f.value&&a.value){const _=s.match(/^(\d{1,4})(\d+)$/);if(_){const[,V,P]=_;V===a.value.phone_code&&(v.value=P)}}}),(s,_)=>(g(),S("div",pa,[o(me,{"no-gutters":""},{default:u(()=>[o(H,{cols:"4",sm:"3"},{default:u(()=>[y("div",fa,[o(ma,{country:a.value},null,8,["country"])])]),_:1}),o(H,{cols:"8",sm:"9"},{default:u(()=>[o(Z,{modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=V=>v.value=V),label:s.label,hint:s.hint,"persistent-hint":s.persistentHint,rules:$.value,variant:"outlined",density:"comfortable","hide-details":"auto",onInput:l,onBlur:w},null,8,["modelValue","label","hint","persistent-hint","rules"])]),_:1})]),_:1})]))}}),va=z(ya,[["__scopeId","data-v-8cb6337a"]]),_a={class:"mobile-money-form"},ha=G({__name:"MobileMoneyForm",props:{provider:{type:Object,required:!0}},emits:["validate"],setup(p,{emit:c}){const m=c,n=C(""),e=C(!1);function i(d){e.value=d,m("validate",{valid:e.value,data:{phone_number:n.value}})}return(d,h)=>(g(),S("div",_a,[o(va,{modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=v=>n.value=v),label:`Enter your ${p.provider.name} number`,hint:"Enter a valid mobile number (maximum 16 digits)","persistent-hint":"",onValidate:i},null,8,["modelValue","label"])]))}}),ba={class:"bank-transfer-form"},ga={class:"text-body-2"},wa=G({__name:"BankTransferForm",props:{bank:{}},emits:["validate"],setup(p,{emit:c}){const m=p,n=c,e=C(null),i=C(""),d=C(""),h=C(""),v={required:f=>!!f||"This field is required",accountNumber:f=>/^\d{8,20}$/.test(f)||"Invalid account number"};function a(f){d.value=f.target.value.toUpperCase(),k()}function $(f){/[\d]/.test(f.key)||f.preventDefault()}function k(){if(!e.value)return;e.value.validate()?n("validate",{valid:!0,data:{account_number:i.value,account_name:d.value,branch_code:h.value||void 0,bank_id:m.bank.id}}):n("validate",{valid:!1,data:null})}return Y([i,d,h],()=>k(),{deep:!0}),(f,l)=>(g(),S("div",ba,[o($e,{type:"info",class:"mb-4",border:"left","colored-border":"",elevation:"2"},{default:u(()=>[l[9]||(l[9]=y("div",{class:"text-subtitle-1 mb-2"},"Bank Details",-1)),y("div",ga,[l[5]||(l[5]=y("strong",null,"Bank Name:",-1)),F(" "+D(f.bank.name),1),l[6]||(l[6]=y("br",null,null,-1)),l[7]||(l[7]=y("strong",null,"Bank Code:",-1)),F(" "+D(f.bank.bank_code),1),l[8]||(l[8]=y("br",null,null,-1)),f.bank.swift_code?(g(),S(re,{key:0},[l[4]||(l[4]=y("strong",null,"SWIFT Code:",-1)),F(" "+D(f.bank.swift_code),1)],64)):O("",!0)])]),_:1}),o(Re,{ref_key:"form",ref:e,onSubmit:l[3]||(l[3]=Ee(()=>{},["prevent"]))},{default:u(()=>[o(Z,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=w=>i.value=w),label:"Account Number",rules:[v.required,v.accountNumber],placeholder:"Enter your account number",onKeypress:$,maxlength:"20",class:"mb-4"},null,8,["modelValue","rules"]),o(Z,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=w=>d.value=w),label:"Account Name",rules:[v.required],placeholder:"Enter account holder name",class:"mb-4",onInput:a},null,8,["modelValue","rules"]),f.bank.requires_branch_code?(g(),N(Z,{key:0,modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=w=>h.value=w),label:"Branch Code",rules:[v.required],placeholder:"Enter branch code",class:"mb-4"},null,8,["modelValue","rules"])):O("",!0)]),_:1},512)]))}}),ka=z(wa,[["__scopeId","data-v-93070612"]]);function Ye(p){const c=C([]),m=C(!1),n=C(""),e=C(null),i=C(p),{$axios:d}=de();async function h(k){var l,w;k&&(i.value=k);const f=i.value||"payment";m.value=!0,n.value="";try{const s=await d.get(`/api/payment/methods/by-country/${f}`);c.value=s.data.country_payment_methods||[],e.value=s.data.selected_country_id||null,v()}catch(s){console.error("Error fetching payment methods:",s),n.value=((w=(l=s.response)==null?void 0:l.data)==null?void 0:w.message)||"Failed to load payment methods.",c.value=[]}finally{m.value=!1}}function v(){const k={wallet:1,card:2,mobile_money:3,bank_transfer:4};c.value.sort((f,l)=>{const w=k[f.type]||99,s=k[l.type]||99;return w-s})}function a(k){return c.value.filter(f=>f.type===k)}function $(k){return c.value.some(f=>f.type===k)}return{paymentMethods:c,loading:m,error:n,selectedCountryId:e,fetchPaymentMethods:h,getMethodsByType:a,hasMethodType:$,transactionType:i}}const He=pt("checkout",{state:()=>({cart:{},cartItems:[],totalAmount:0,currency:{},loading:!1,selectedPaymentMethod:null,availablePaymentMethods:[],showPaymentMethodsDialog:!1}),actions:{async fetchCartItems(){var c,m;const{$axios:p}=de();this.loading=!0;try{const n=await p.get("/api/cart");n.data.success&&(this.cart=n.data.cart||{},this.cartItems=n.data.items||[],this.totalAmount=parseFloat(((c=n.data.cart)==null?void 0:c.total_amount)||0),this.currency=((m=n.data.cart)==null?void 0:m.currency)||{},!this.selectedPaymentMethod&&this.currency&&(this.selectedPaymentMethod={payment_method:{id:this.currency.id,name:this.currency.name}}))}catch(n){console.error("Error fetching cart items:",n)}finally{this.loading=!1}},async fetchAvailablePaymentMethods(){this.loading=!0;try{const{paymentMethods:p,fetchPaymentMethods:c}=Ye("payment");await c(),this.availablePaymentMethods=p.value}catch(p){console.error("Error fetching payment methods:",p)}finally{this.loading=!1}},selectPaymentMethod(p){this.selectedPaymentMethod=p,this.showPaymentMethodsDialog=!1},async processPayment(){const{$axios:p}=de();return await p.post("/api/cart/checkout")},clearCart(){this.cart={},this.cartItems=[],this.totalAmount=0,this.currency={}}}}),Va={class:"amount-display-compact pa-4 rounded-lg mb-4"},Ca={class:"text-center"},$a={class:"text-caption text-medium-emphasis mb-1"},xa={class:"text-h4 font-weight-bold"},Pa={key:0,class:"pa-4 text-center"},Ma={key:1,class:"pa-4 text-center"},Da={class:"text-body-1 font-weight-medium mb-2"},Sa={class:"text-body-2 text-medium-emphasis mb-3"},Ta={key:2,class:"px-2"},Fa={class:"flex-grow-1"},Ia={class:"text-body-1 font-weight-medium"},Na={class:"text-caption text-medium-emphasis"},Aa={key:0,class:"mt-4 px-2"},Ba={key:1},Wa={key:2},Ua={key:3},Ea={class:"mt-4 text-body-1"},qa=G({__name:"PaymentMethodsDialog",props:{transactionType:{},isWalletOnly:{type:Boolean}},setup(p){const c=p,{$axios:m}=de(),n=xe(),e=He(),i=je(),d=De(),h=qe(),{currencyFormatter:v}=xt(),a=C(null),$=C(null),k=C(null),f=C(null),l=C(!1),w=C(!1),s=C(!1),_=C(null),V=C(null),P=C(!1);C(0);const{paymentMethods:U,fetchPaymentMethods:A}=Ye(),{countries:M}=ze(),j=b(()=>{const t=Number(e.totalAmount);return isNaN(t)?0:t}),X=b(()=>!a.value||ue.value?0:ve.value&&$.value?parseFloat($.value.gateway_fee_percentage||"0"):a.value.depositables&&a.value.depositables.length>0?parseFloat(a.value.depositables[0].gateway_fee_percentage||"0"):0),ae=b(()=>X.value===0?0:j.value*X.value/100),K=b(()=>ue.value?j.value:j.value+ae.value);b(()=>j.value?T.value&&T.value.symbol&&T.value.code?v(j.value,T.value.symbol,T.value.code):`${j.value.toFixed(2)}`:`${T.value.symbol||""}0.00`),b(()=>ae.value?T.value&&T.value.symbol&&T.value.code?v(ae.value,T.value.symbol,T.value.code):`${ae.value.toFixed(2)}`:`${T.value.symbol||""}0.00`);const T=b(()=>e.currency||{});b(()=>a.value&&!ue.value&&X.value>0);const be=b(()=>{if(c.isWalletOnly)return"Pay with your wallet";switch(c.transactionType){case"withdrawal":return"Select Withdrawal Method";case"deposit":return"Select Deposit Method";default:return"Select Payment Method"}}),pe=b(()=>{if(c.isWalletOnly)return"Amount to Pay";switch(c.transactionType){case"withdrawal":return"Withdrawal Amount";case"deposit":return"Deposit Amount";default:return"Payment Amount"}}),fe=b(()=>{switch(c.transactionType){case"withdrawal":return"Withdraw Now";case"deposit":return"Deposit Now";default:return"Pay Now"}}),se=b(()=>{switch(c.transactionType){case"withdrawal":return"mdi-cash-minus";case"deposit":return"mdi-cash-plus";default:return"mdi-cash-multiple"}}),Ge=b(()=>{switch(c.transactionType){case"withdrawal":return"Processing your withdrawal...";case"deposit":return"Processing your deposit...";default:return"Processing your payment..."}}),Se=b(()=>{const t=U.value.find(r=>r.type==="bank_transfer");return!t||!t.depositables?[]:t.depositables.map(r=>({...r.depositable,method_id:r.id,gateway:r.gateway,gateway_fee_percentage:r.gateway_fee_percentage}))}),ye=b(()=>{const t=U.value.find(r=>r.type==="card");return!t||!t.depositables?[]:t.depositables.map(r=>({...r.depositable,id:r.depositable.id,method_id:r.id,gateway:r.gateway,gateway_fee_percentage:r.gateway_fee_percentage}))}),ie=b(()=>{const t=U.value.find(r=>r.type==="mobile_money");return!t||!t.depositables?[]:t.depositables.map(r=>({...r.depositable,id:r.depositable.id,method_id:r.id,gateway:r.gateway,depositable:r.depositable,gateway_fee_percentage:r.gateway_fee_percentage}))});Y(()=>e.showPaymentMethodsDialog,async t=>{if(t){P.value=!0,$.value=null,k.value=null,f.value=null;try{if(i.wallet||await i.fetchWallet(),await A(c.transactionType),!a.value||c.isWalletOnly){const r=U.value.find(x=>x.type==="wallet");r&&Ve(r)}}catch(r){console.error("Error initializing payment dialog:",r),d.error("Failed to load payment methods")}finally{P.value=!1}}else t||(a.value=null,$.value=null,k.value=null,f.value=null,s.value=!1,_.value=null)}),Y(()=>c.transactionType,async(t,r)=>{if(t!==r&&e.showPaymentMethodsDialog){P.value=!0,a.value=null,$.value=null,k.value=null,f.value=null;try{await A(t);const x=U.value.find(E=>E.type==="wallet");x&&Ve(x)}catch(x){console.error("Error updating payment methods:",x),d.error("Failed to update payment methods")}finally{P.value=!1}}});const Ke=b(()=>K.value?T.value&&T.value.symbol&&T.value.code?v(K.value,T.value.symbol,T.value.code)||`${T.value.symbol}${K.value.toFixed(2)}`:`${K.value.toFixed(2)}`:`${T.value.symbol||""}0.00`),ge=b(()=>{let t=U.value;return c.isWalletOnly&&(t=t.filter(r=>r.type==="wallet")),t.sort((r,x)=>{const E={wallet:1,card:2,mobile_money:3,bank_transfer:4};return E[r.type]-E[x.type]})});b(()=>ge.value);const ue=b(()=>{var t;return((t=a.value)==null?void 0:t.type)==="wallet"}),we=b(()=>{var t;return((t=a.value)==null?void 0:t.type)==="card"}),ke=b(()=>{var t;return((t=a.value)==null?void 0:t.type)==="mobile_money"}),ve=b(()=>{var t;return((t=a.value)==null?void 0:t.type)==="bank_transfer"}),Je=b(()=>a.value?ve.value?s.value&&$.value:ke.value?s.value&&f.value:we.value?s.value&&k.value:s.value:!1),Qe=b(()=>{var t,r,x,E;return i.currentBalance?v(Number(i.currentBalance),((r=i.currentCurrency)==null?void 0:r.symbol)||((x=i.currentCurrency)==null?void 0:x.code)||"RWF",((E=i.currentCurrency)==null?void 0:E.code)||"RWF"):(((t=i.currentCurrency)==null?void 0:t.code)||"RWF")+"0.00"});function Xe(t){switch(t.type){case"wallet":return`Balance: ${Qe.value}`;case"mobile_money":return t.depositables&&t.depositables.length>0?`Mobile Operators: ${t.depositables.map(x=>x.depositable.name).join(", ")||"N/A"}`:"Mobile Money";case"bank_transfer":return`Select from ${Se.value.length} banks`;case"card":return t.depositables&&t.depositables.length>0?`Cards: ${t.depositables.map(x=>x.depositable.name).join(", ")||"N/A"}`:"Card Payment";default:return t.name}}function Ve(t){a.value=t,s.value=!1,_.value=null,t.type!=="bank_transfer"&&($.value=null),t.type!=="card"&&(k.value=null),t.type!=="mobile_money"&&(f.value=null),t.type==="card"&&ye.value.length===1&&(k.value=ye.value[0]),t.type==="mobile_money"&&ie.value.length===1&&(f.value=ie.value[0]),t.type==="mobile_money"&&ie.value.length>1}function Ze(t){if(!t)return;const r=U.value.find(x=>x.type==="bank_transfer");r&&(a.value=r)}function et(t){if(!t){k.value=null,s.value=!1;return}const r=ye.value.find(x=>x.id===t);r&&(k.value=r,s.value=!1)}function tt(t){if(!t){f.value=null,s.value=!1;return}const r=ie.value.find(x=>x.id===t);r&&(f.value=r,s.value=!1)}function at(t){s.value=t.valid,_.value=t.data}function lt(t){s.value=t.valid,_.value=t.data}function ot(t){var r,x;if(s.value=t.valid,(r=t.data)!=null&&r.phone_number){const E=(x=h.user)==null?void 0:x.country_id,L=M.value.find(J=>J.id===E),R=(L==null?void 0:L.phone_code)||"250";_.value={phone_number:t.data.phone_number,country_code:R}}else _.value=t.data}function nt(t){s.value=t.valid,_.value=t.data}function rt(){Te()}async function st(){if(!(!a.value||!s.value))if(ue.value&&V.value){V.value.showPinVerification();return}else l.value=!0,w.value=!0,await Te()}async function Te(){var t,r,x,E;if(!(!a.value||!s.value)){l.value=!0,w.value=!0;try{const L=e.cartItems.map(W=>{var Fe,Ie,Ne;const q=typeof W.paying_amount=="string"?parseFloat(W.paying_amount):W.paying_amount;let _e=(Fe=W.payable)==null?void 0:Fe.id;return(W.payment_type==="deposit"||W.payment_type==="withdrawal")&&(_e=(Ne=(Ie=i.wallet)==null?void 0:Ie.data)==null?void 0:Ne.id),{id:W.id,payment_type:W.payment_type,payable_id:_e,paying_amount:q}});let R,J,le;if(ve.value&&$.value)R=$.value.gateway.id,J=$.value.id,le="App\\Models\\Bank";else if(we.value&&k.value)R=k.value.gateway.id,J=k.value.id,le="App\\Models\\CardBrand";else if(ke.value&&f.value)R=f.value.gateway.id,J=f.value.id,le="App\\Models\\MobileMoneyProvider";else if(a.value.depositables&&a.value.depositables.length>0){const W=a.value.depositables[0];R=W.gateway.id,J=W.depositable.id,le=W.depositable_type}const Ce={payment_method_id:a.value.id,gateway_id:R,depositable_id:J,depositable_type:le,currency_id:T.value.id,country_id:(t=h.user)==null?void 0:t.country_id,total_amount:K.value,base_amount:j.value,fee_amount:ae.value,cart_items:L,cart_id:(r=e.cart)==null?void 0:r.id,payment_data:{payment_type:a.value.type,..._.value,currency_code:T.value.code,currency_symbol:T.value.symbol,total_amount:K.value}},ne=(await m.post("/api/orders",Ce)).data;if(ne.status==="success"){const{order:W,payment:q}=ne.data;if(q!=null&&q.redirect_url)window.location.href=q.redirect_url;else if((q==null?void 0:q.status)==="completed"&&(q==null?void 0:q.payment_method)==="wallet"&&q.redirect_url)d.success("Wallet payment successful! Redirecting..."),setTimeout(()=>{window.location.href=q.redirect_url},1500);else{const _e=it();d.success(_e),e.clearCart(),e.showPaymentMethodsDialog=!1,n.push(`/orders/order-${W.reference}`)}}else d.error(ne.message||"Order creation failed.")}catch(L){console.error("Payment processing error:",L);const R=((E=(x=L.response)==null?void 0:x.data)==null?void 0:E.message)||ut();d.error(R)}finally{l.value=!1,w.value=!1}}}function it(){switch(c.transactionType){case"withdrawal":return"Withdrawal processed successfully!";case"deposit":return"Deposit processed successfully!";default:return"Payment processed successfully!"}}function ut(){switch(c.transactionType){case"withdrawal":return"Withdrawal processing failed";case"deposit":return"Deposit processing failed";default:return"Payment processing failed"}}function ct(){e.showPaymentMethodsDialog=!1,n.push("/help")}return(t,r)=>{const x=ta,E=na,L=ha,R=$t,J=ka,le=Ue,Ce=Le;return g(),N(Ce,{modelValue:B(e).showPaymentMethodsDialog,"onUpdate:modelValue":r[5]||(r[5]=I=>B(e).showPaymentMethodsDialog=I),title:be.value,"max-width":c.isWalletOnly?500:600,fullscreen:!1,persistent:"",scrollable:""},{actions:u(()=>[o(oe,{class:"payment-footer-compact w-100 px-3 py-2"},{default:u(()=>[o(le,{title:fe.value,action:st,loading:l.value,disabled:!Je.value||P.value,color:"primary",variant:"elevated",height:"44","prepend-icon":se.value,"custom-class":"action-button-compact","full-width":""},null,8,["title","loading","disabled","prepend-icon"])]),_:1})]),default:u(()=>[o(ee,{class:ce(["pa-0",{"wallet-only-mode":c.isWalletOnly}])},{default:u(()=>[y("div",Va,[y("div",Ca,[y("div",$a,D(pe.value),1),y("div",xa,D(Ke.value),1)])]),P.value?(g(),S("div",Pa,[o(Ae,{indeterminate:"",color:"primary",size:"32"}),r[6]||(r[6]=y("div",{class:"mt-2 text-body-2"},"Loading...",-1))])):ge.value.length===0?(g(),S("div",Ma,[o(Q,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:u(()=>r[7]||(r[7]=[F("mdi-wallet-outline")])),_:1}),y("div",Da,D(c.isWalletOnly?"Wallet Not Available":"No Payment Methods"),1),y("div",Sa,D(c.isWalletOnly?"Please activate your wallet first.":"No methods available for your region."),1),o(te,{size:"small",color:"primary",variant:"outlined",onClick:ct},{default:u(()=>r[8]||(r[8]=[F(" Get Help ")])),_:1})])):(g(),S("div",Ta,[(g(!0),S(re,null,he(ge.value,I=>{var ne;return g(),N(oe,{key:I.id,class:ce(["payment-method-card-compact mb-2",{"payment-selected":((ne=a.value)==null?void 0:ne.id)===I.id}]),elevation:"1",onClick:W=>Ve(I)},{default:u(()=>[o(ee,{class:"d-flex align-center py-3"},{default:u(()=>{var W;return[o(Me,{size:"36",class:"mr-3"},{default:u(()=>[o(Q,{color:"primary"},{default:u(()=>r[9]||(r[9]=[F("mdi-wallet")])),_:1})]),_:1}),y("div",Fa,[y("div",Ia,D(I.name),1),y("div",Na,D(Xe(I)),1)]),((W=a.value)==null?void 0:W.id)===I.id?(g(),N(Q,{key:0,color:"primary",size:"20"},{default:u(()=>r[10]||(r[10]=[F("mdi-check-circle")])),_:1})):O("",!0)]}),_:2},1024)]),_:2},1032,["class","onClick"])}),128))])),o(gt,null,{default:u(()=>[a.value?(g(),S("div",Aa,[o(Pt,{class:"mb-3"}),ue.value?(g(),N(x,{key:0,amount:K.value,currency:T.value,onValidate:at,onProcessing:r[0]||(r[0]=I=>l.value=I),onPaymentComplete:rt,ref_key:"walletPaymentForm",ref:V},null,8,["amount","currency"])):we.value?(g(),S("div",Ba,[a.value.depositables&&a.value.depositables.length>1?(g(),N(Be,{key:0,modelValue:k.value,"onUpdate:modelValue":[r[1]||(r[1]=I=>k.value=I),et],items:ye.value,"item-title":"name","item-value":"id",label:"Select Card Type",class:"mb-4",rules:[I=>!!I||"Please select a card type"]},null,8,["modelValue","items","rules"])):O("",!0),a.value.depositables&&a.value.depositables.length===1||k.value?(g(),N(E,{key:1,gateway:k.value?k.value.gateway:a.value.depositables&&a.value.depositables.length>0?a.value.depositables[0].gateway:null,onValidate:lt},null,8,["gateway"])):O("",!0)])):ke.value?(g(),S("div",Wa,[o(Be,{modelValue:f.value,"onUpdate:modelValue":[r[2]||(r[2]=I=>f.value=I),tt],items:ie.value,"item-title":"name","item-value":"id",label:"Select Mobile Money Provider",class:"mb-4",rules:[I=>!!I||"Please select a mobile money provider"]},null,8,["modelValue","items","rules"]),f.value?(g(),N(L,{key:0,provider:f.value.depositable,onValidate:ot},null,8,["provider"])):O("",!0)])):ve.value?(g(),S("div",Ua,[o(R,{modelValue:$.value,"onUpdate:modelValue":[r[3]||(r[3]=I=>$.value=I),Ze],banks:Se.value,label:"Select Bank"},null,8,["modelValue","banks"]),$.value?(g(),N(J,{key:0,bank:$.value,onValidate:nt,class:"mt-4"},null,8,["bank"])):O("",!0)])):O("",!0)])):O("",!0)]),_:1})]),_:1},8,["class"]),o(Mt,{modelValue:w.value,"onUpdate:modelValue":r[4]||(r[4]=I=>w.value=I),persistent:"",width:"300"},{default:u(()=>[o(oe,null,{default:u(()=>[o(ee,{class:"text-center pa-6"},{default:u(()=>[o(Ae,{indeterminate:"",color:"primary",size:"64"}),y("div",Ea,D(Ge.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","title","max-width"])}}}),Oa=z(qa,[["__scopeId","data-v-6bfefacb"]]),ja={class:"error-message"},Ra={__name:"PaymentErrorDialog",props:{errorMessage:{type:String,required:!0},visible:{type:Boolean,required:!0}},emits:["close"],setup(p,{emit:c}){const m=p,n=c,e=ft(),i=C(m.visible);Y(()=>m.visible,v=>{i.value=v}),Y(i,v=>{v||n("close")});const d=()=>{i.value=!1},h=()=>{i.value=!1,e.push("/wallet/deposit")};return(v,a)=>{const $=Le;return g(),N($,{modelValue:B(i),"onUpdate:modelValue":a[0]||(a[0]=k=>yt(i)?i.value=k:null),title:"Payment Error","max-width":"400px"},{actions:u(()=>[o(me,{justify:"center",align:"center",class:"flex-column"},{default:u(()=>[o(H,{cols:"12",class:"text-center"},{default:u(()=>[o(te,{color:"primary",variant:"elevated",onClick:h,class:"add-money-btn"},{default:u(()=>[o(Q,{left:""},{default:u(()=>a[1]||(a[1]=[F("mdi-wallet-plus")])),_:1}),a[2]||(a[2]=F(" Add Money to Wallet "))]),_:1})]),_:1}),o(H,{cols:"12",class:"text-center mt-2"},{default:u(()=>[o(te,{color:"secondary",variant:"text",onClick:d,class:"close-btn"},{default:u(()=>a[3]||(a[3]=[F(" Close ")])),_:1})]),_:1})]),_:1})]),default:u(()=>[o(ee,null,{default:u(()=>[y("p",ja,D(p.errorMessage),1)]),_:1})]),_:1},8,["modelValue"])}}},za=z(Ra,[["__scopeId","data-v-a09dd4e3"]]),La=()=>{const p=(i,d,h={})=>{const{decimals:v=2,showCurrency:a=!0,compact:$=!1}=h,k=typeof i=="string"?parseFloat(i):i;try{const l=new Intl.NumberFormat("en-US",{minimumFractionDigits:v,maximumFractionDigits:v,notation:$?"compact":"standard"}).format(k);return a?`${d.symbol} ${l}`:l}catch{const l=k.toFixed(v);return a?`${d.symbol} ${l}`:l}};return{formatAmount:p,formatNumeric:(i,d=2)=>{const h=typeof i=="string"?parseFloat(i):i;try{return new Intl.NumberFormat("en-US",{minimumFractionDigits:d,maximumFractionDigits:d}).format(h)}catch{return h.toFixed(d)}},formatCompact:(i,d)=>p(i,d,{compact:!0}),formatPrecise:(i,d)=>p(i,d,{decimals:4}),formatWalletBalance:i=>!(i!=null&&i.balance)||!(i!=null&&i.currency)?"":p(i.balance,i.currency)}},Ya={class:"checkout-content"},Ha={class:"checkout-header mb-4"},Ga={class:"text-center"},Ka={class:"text-h5 font-weight-bold mb-2"},Ja={class:"text-body-2 text-medium-emphasis mb-0"},Qa={class:"total-section mb-4"},Xa={class:"d-flex justify-space-between align-center"},Za={class:"text-h6 font-weight-bold text-primary"},el={class:"action-buttons"},tl=G({__name:"CheckOutPage",setup(p){const{$axios:c}=de(),m=xe(),n=De(),e=He(),{formatAmount:i}=La(),d=C(""),h=C(!1),v=C(!1),a=C(null),$=b(()=>{const A=e.totalAmount;return!A&&A!==0?"0.00":e.currency&&Object.keys(e.currency).length>0?i(A,e.currency):`$${parseFloat(A.toString()).toFixed(2)}`}),k=b(()=>"Checkout"),f=b(()=>e.cartItems.length?"Review your cart and complete your purchase":"Your cart is empty"),l=b(()=>{var M;switch((M=e.cart)==null?void 0:M.transaction_type){case"deposit":return"Choose Deposit Method";case"withdrawal":return"Choose Withdrawal Method";case"transfer":return"Choose Transfer Method";default:return"Choose Payment Method"}});Pe(async()=>{await e.fetchCartItems()});function w(A){a.value=A,v.value=!0}async function s(){a.value&&(await _(a.value),v.value=!1,a.value=null)}async function _(A){try{e.loading=!0,await c.delete(`/api/cart/items/${A}`),n.success("Item removed successfully"),await e.fetchCartItems()}catch(M){console.error("Error removing item from cart:",M),n.error("Failed to remove item from cart")}finally{e.loading=!1}}async function V(){try{e.loading=!0,await c.delete("/api/cart/clear"),n.success("Cart cleared successfully"),e.clearCart()}catch(A){console.error("Error clearing cart:",A),n.error("Failed to clear cart")}finally{e.loading=!1}}function P(){e.showPaymentMethodsDialog=!0}function U(){d.value="",h.value=!1}return(A,M)=>{var pe,fe;const j=Ue,X=dt,ae=Kt,K=Oa,T=za,be=Dt;return g(),S(re,null,[y("div",Ya,[y("div",Ha,[y("div",Ga,[y("h2",Ka,D(k.value),1),y("p",Ja,D(f.value),1)])]),o(me,{class:ce(["checkout-row",{"justify-center":B(e).cartItems.length===0}])},{default:u(()=>[o(H,{cols:"12",md:(B(e).cartItems.length===0,8),class:ce({"mx-auto":B(e).cartItems.length===0})},{default:u(()=>[o(oe,{class:"cart-items-card",elevation:"1",rounded:"lg"},{default:u(()=>[o(ee,{class:"pa-3"},{default:u(()=>[B(e).loading?(g(),S(re,{key:0},he(3,se=>o(Oe,{key:se,type:"article, actions",class:"mb-4"})),64)):B(e).cartItems.length===0?(g(),N(X,{key:1,message:"Your cart is empty",icon:"mdi-cart-outline",class:"py-8"},{action:u(()=>[o(j,{title:"Browse Items",color:"primary","prepend-icon":"mdi-shopping",action:()=>B(m).push("/browse"),elevation:"0",variant:"elevated",class:"mt-4"},null,8,["action"])]),_:1})):(g(),N(ae,{key:2,items:B(e).cartItems,loading:B(e).loading,onRemove:w,onClear:V},null,8,["items","loading"]))]),_:1})]),_:1})]),_:1},8,["md","class"]),B(e).cartItems.length>0?(g(),N(H,{key:0,cols:"12",md:"4"},{default:u(()=>[o(oe,{class:"summary-card",elevation:"1",rounded:"lg"},{default:u(()=>[o(ee,{class:"pa-4"},{default:u(()=>[M[5]||(M[5]=y("div",{class:"summary-header mb-3"},[y("h3",{class:"text-h6 font-weight-bold mb-2"},"Order Summary")],-1)),y("div",Qa,[y("div",Xa,[M[1]||(M[1]=y("span",{class:"text-body-1 font-weight-medium"},"Total Amount",-1)),y("span",Za,D($.value),1)])]),y("div",el,[o(te,{color:"primary",size:"large",loading:B(e).loading,disabled:B(e).loading||B(e).cartItems.length===0,onClick:P,class:"checkout-button",block:"",rounded:"lg"},{default:u(()=>[o(Q,{class:"mr-2"},{default:u(()=>M[2]||(M[2]=[F("mdi-credit-card-outline")])),_:1}),F(" "+D(l.value),1)]),_:1},8,["loading","disabled"]),o(te,{color:"grey",variant:"outlined",disabled:B(e).loading,loading:B(e).loading,onClick:V,size:"small",class:"mt-2",block:"",rounded:"lg"},{default:u(()=>[o(Q,{size:"16",class:"mr-2"},{default:u(()=>M[3]||(M[3]=[F("mdi-cart-remove")])),_:1}),M[4]||(M[4]=F(" Clear Cart "))]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1})):O("",!0)]),_:1},8,["class"])]),o(K,{transactionType:((pe=B(e).cart)==null?void 0:pe.transaction_type)||"payment",isWalletOnly:((fe=B(e).cart)==null?void 0:fe.transaction_type)==="payment"},null,8,["transactionType","isWalletOnly"]),o(T,{"error-message":d.value,visible:h.value,onClose:U},null,8,["error-message","visible"]),o(be,{modelValue:v.value,"onUpdate:modelValue":M[0]||(M[0]=se=>v.value=se),title:"Remove Item",onConfirm:s},{default:u(()=>M[6]||(M[6]=[y("p",null,"Are you sure you want to remove this item from your cart?",-1)])),_:1},8,["modelValue"])],64)}}}),al=z(tl,[["__scopeId","data-v-994a81bc"]]),ll={class:"checkout-page-wrapper"},ol=G({__name:"checkout",setup(p){const c=St();Pe(async()=>{await c.fetchTalaStageApp()});const m=b(()=>c.talastageApp);return Tt({title:b(()=>{var n;return`Checkout - ${((n=m.value)==null?void 0:n.name)||"TalaStage"}`}),description:b(()=>"Complete your transaction securely and conveniently with our checkout system."),keywords:b(()=>{var n;return`checkout, transaction, payment, secure payment, complete order, ${((n=m.value)==null?void 0:n.name)||"TalaStage"}`}),image:b(()=>{var n;return((n=m.value)==null?void 0:n.logo_url)||"/default-social-image.png"}),type:"website",siteName:b(()=>{var n;return((n=m.value)==null?void 0:n.name)||"TalaStage"}),url:b(()=>{var n;return`${((n=m.value)==null?void 0:n.canonical_url)||"https://talastage.com"}/checkout`}),canonical:b(()=>{var n;return`${((n=m.value)==null?void 0:n.canonical_url)||"https://talastage.com"}/checkout`}),noIndex:!0,openGraph:b(()=>{var n,e,i,d;return{title:`Checkout - ${((n=m.value)==null?void 0:n.name)||"TalaStage"}`,description:"Complete your transaction securely and conveniently with our checkout system.",url:`${((e=m.value)==null?void 0:e.canonical_url)||"https://talastage.com"}/checkout`,image:((i=m.value)==null?void 0:i.logo_url)||"/default-social-image.png",type:"website",siteName:((d=m.value)==null?void 0:d.name)||"TalaStage"}}),twitter:b(()=>{var n,e;return{card:"summary_large_image",title:`Checkout - ${((n=m.value)==null?void 0:n.name)||"TalaStage"}`,description:"Complete your transaction securely and conveniently with our checkout system.",image:((e=m.value)==null?void 0:e.logo_url)||"/default-social-image.png"}}),link:b(()=>{var n,e;return[{rel:"icon",type:"image/png",href:((n=m.value)==null?void 0:n.favicon_url)||"/favicon.png"},{rel:"canonical",href:`${((e=m.value)==null?void 0:e.canonical_url)||"https://talastage.com"}/checkout`}]})}),(n,e)=>{const i=al;return g(),S("div",ll,[o(Ft,{class:"checkout-container"},{default:u(()=>[o(i)]),_:1})])}}}),eo=z(ol,[["__scopeId","data-v-7cdaf26b"]]);export{eo as default};
