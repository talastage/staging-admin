import{_ as ie}from"./Cw5ECwNl.js";import{_ as X}from"./3SmzOII5.js";import{B as ce}from"./COhe-ksk.js";import{u as Z}from"./BCoct7aH.js";import{n as I,j as k,t as O,o as i,a as P,w as d,b as l,m as V,p as _,v as C,x as F,V as R,s as w,y as S,q as B,_ as z,f as ue,g as de,O as ee,F as N,D as U,c as y,G as te,a6 as pe,bH as me,k as Y,l as q,cG as ae,u as fe,K as ve,r as _e,I as ge}from"./CGQimWOm.js";import{V as W}from"./BvtSni_j.js";import{V as je}from"./BvyQ73Vq.js";import{u as he}from"./DMBY-Kaj.js";import{V as ye}from"./BRveoiXI.js";import{V as Pe,a as be}from"./tTgLLTve.js";import{V as we}from"./CW50LM9V.js";import{V as ke}from"./D4pNkYCe.js";import{V as De}from"./BkTuXOR_.js";import{_ as oe}from"./Cxb8uY_z.js";import{a as se}from"./CDtnx0aA.js";import{V as re}from"./P_q-BwEt.js";import{V as ne}from"./f5lwX8SZ.js";import{a as J,V as $e}from"./bFKGpjcd.js";import{V as Q}from"./BhN2__aY.js";import{u as Ve}from"./BW5EWlXk.js";import{u as Se}from"./D78L5r-E.js";import"./DcSlHAeh.js";import"./BSH7BhKc.js";import"./BcH3Kywr.js";import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./IpAEdaYr.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./Dg4qVXYX.js";import"./2hEmiBig.js";import"./Dn0bXcU5.js";import"./xvVMJZi9.js";import"./DyYnZ78z.js";/* empty css        */const Te={class:"delete-project-dialog"},Ce={key:0,class:"project-preview pa-4"},xe={class:"d-flex"},Le={class:"thumbnail-wrapper"},Ee={class:"project-info ml-4"},Me={class:"text-h6 font-weight-medium mb-1"},Ae={class:"text-body-2 text-medium-emphasis"},Be={class:"d-flex align-center mt-1"},Ie={class:"text-body-2 text-medium-emphasis"},ze={class:"warning-section pa-4"},Re={class:"dialog-actions pa-4"},Ne=I({__name:"ProjectDeleteDialog",props:{show:{type:Boolean},project:{}},emits:["update:show","confirm","cancel"],setup(j,{emit:a}){const t=j,r=a,{formatRelativeDate:s}=Z(),m=k(!1),p=k(!1),e=k(t.show);O(()=>t.show,v=>{e.value=v,v||(m.value=!1,p.value=!1)}),O(e,v=>{r("update:show",v)});const f=async()=>{if(m.value){p.value=!0;try{r("confirm")}finally{p.value=!1}}},u=()=>{e.value=!1,r("cancel")};return(v,o)=>{const g=X,b=ce;return i(),P(b,{modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=D=>e.value=D),title:"Delete Project","max-width":"550px"},{default:d(()=>[l("div",Te,[v.project?(i(),V("div",Ce,[l("div",xe,[l("div",Le,[_(g,{"thumbnail-url":v.project.thumbnail_url,video_url:v.project.project_url,access_uuid:v.project.access_uuid,size:"sm",class:"rounded-lg"},null,8,["thumbnail-url","video_url","access_uuid"])]),l("div",Ee,[l("h3",Me,C(v.project.name),1),l("div",Ae," Published "+C(F(s)(v.project.created_at)),1),l("div",Be,[_(R,{size:"small",class:"mr-1"},{default:d(()=>o[2]||(o[2]=[w("mdi-eye")])),_:1}),l("span",Ie,C(v.project.views_count||0)+" views ",1)])])])])):S("",!0),_(W,{class:"my-4"}),l("div",ze,[o[4]||(o[4]=l("div",{class:"text-h6 text-error mb-4"}," Are you sure you want to delete this project? ",-1)),o[5]||(o[5]=l("div",{class:"text-body-1 mb-4"},[w(" This action cannot be undone. You will permanently lose: "),l("ul",{class:"mt-2"},[l("li",null,"Project content and data"),l("li",null,"Audience analytics"),l("li",null,"Video statistics"),l("li",null,"Associated comments and engagement")])],-1)),_(je,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=D=>m.value=D),color:"error",class:"confirmation-checkbox"},{label:d(()=>o[3]||(o[3]=[l("span",{class:"text-body-2"}," I understand that this action is permanent and cannot be reversed ",-1)])),_:1},8,["modelValue"])]),_(W),l("div",Re,[_(B,{variant:"tonal",color:"grey-darken-1",onClick:u,class:"mr-3"},{default:d(()=>o[6]||(o[6]=[w(" Cancel ")])),_:1}),_(B,{color:"error",disabled:!m.value,onClick:f,loading:p.value},{default:d(()=>[o[8]||(o[8]=w(" Delete Forever ")),_(R,{right:"",class:"ml-2"},{default:d(()=>o[7]||(o[7]=[w("mdi-delete-forever")])),_:1})]),_:1},8,["disabled","loading"])])])]),_:1},8,["modelValue"])}}}),Ue=z(Ne,[["__scopeId","data-v-724a7d9d"]]),G=ue("studioProjects",()=>{const{$axios:j}=de(),a=k({published:{data:[],currentPage:0,lastPage:1,isLoading:!1,isLoaded:!1},draft:{data:[],currentPage:0,lastPage:1,isLoading:!1,isLoaded:!1}});return{projects:a,fetchProjects:async e=>{if(!(a.value[e].isLoading||a.value[e].currentPage>=a.value[e].lastPage)){a.value[e].isLoading=!0;try{const u=(await j.get(`/api/studio/projects?type=${e}&page=${a.value[e].currentPage+1}`)).data;u!=null&&u.data&&Array.isArray(u.data)&&(a.value[e].data=[...a.value[e].data,...u.data],a.value[e].currentPage=u.meta.current_page,a.value[e].lastPage=u.meta.last_page),a.value[e].isLoaded=!0}catch(f){throw console.error(`Error fetching ${e} projects:`,f),f}finally{a.value[e].isLoading=!1}}},getProjectsByType:e=>a.value[e].data,resetProjects:e=>{a.value[e]={data:[],currentPage:0,lastPage:1,isLoading:!1,isLoaded:!1}},hasMore:e=>a.value[e].currentPage<a.value[e].lastPage,deleteProject:async e=>{try{await j.delete(`/api/studio/projects/${e}`);for(const f in a.value)a.value[f].data=a.value[f].data.filter(u=>u.access_uuid!==e)}catch(f){throw console.error("Error deleting project:",f),f}}}}),Fe={__name:"MoreBtn",props:{menuList:{type:Array,default:()=>[]}},emits:["select"],setup(j,{emit:a}){const t=a,r=s=>{t("select",s)};return(s,m)=>(i(),P(we,null,{activator:d(({props:p})=>[_(B,ee({icon:""},p),{default:d(()=>[_(R,null,{default:d(()=>m[0]||(m[0]=[w("mdi-dots-vertical")])),_:1})]),_:2},1040)]),default:d(()=>[_(ye,null,{default:d(()=>[(i(!0),V(N,null,U(j.menuList,(p,e)=>(i(),P(Pe,{key:e,onClick:f=>r(p)},{default:d(()=>[_(be,null,{default:d(()=>[w(C(p.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}))}};function He(){return{truncateText:(a,t=100,r=!0)=>a?a.length<=t?a:a.substring(0,t)+(r?"...":""):""}}const Oe=I({__name:"ProjectStatusBadge",props:{status:{type:String,default:"draft",validator:j=>["draft","published"].includes(j.toLowerCase())},size:{type:String,default:"md",validator:j=>["sm","md","lg"].includes(j)},uppercase:{type:Boolean,default:!0}},setup(j){const a=j,t=y(()=>{const r=a.status;return a.uppercase?r.toUpperCase():r});return(r,s)=>(i(),V("span",{class:te(["status-badge",[`status-${j.status.toLowerCase()}`,`size-${j.size}`]])},C(F(t)),3))}}),Ye=z(Oe,[["__scopeId","data-v-cc448830"]]),qe={class:"card-layout"},Ge={class:"thumbnail-wrapper"},Ke={class:"content-section"},We={class:"header-section"},Je={class:"title-status-wrapper"},Qe={class:"more-actions"},Xe={key:0,class:"project-description"},Ze={class:"date-info"},et={key:1,class:"price-info"},tt={class:"action-buttons"},at=I({__name:"StudioProjectCard",props:{project:{}},emits:["edit-project","edit-draft","delete-project","view-details","view-earnings"],setup(j,{emit:a}){const t=j,r=a,{formatRelativeDate:s,formatLocalDateTime:m}=Z(),{truncateText:p}=He(),{mobile:e,smAndDown:f,mdAndDown:u}=pe(),v=y(()=>!!(t.project.premiering_start_date&&t.project.premiering_time)),o=y(()=>!!(t.project.watch_fee&&t.project.currency)),g=y(()=>{if(v.value&&t.project.premiering_start_date&&t.project.premiering_time){const c=new Date(t.project.premiering_start_date),[h,$]=t.project.premiering_time.split(":");return c.setHours(parseInt(h),parseInt($)),m(c.toISOString())}return s(t.project.created_at)}),b=y(()=>{var c;return o.value?`${((c=t.project.currency)==null?void 0:c.symbol)||""} ${t.project.watch_fee||""}`:""}),D=y(()=>{const c=t.project.name||"",h=f.value?30:50;return p(c,h)}),T=y(()=>{const c=t.project.description||"";return p(c,f.value?80:120)}),L=()=>{r("edit-project",t.project)},E=()=>{r("edit-draft",t.project)},M=()=>{r("view-details",t.project)},A=()=>{r("view-earnings",t.project)},n=c=>{c.action==="delete"&&r("delete-project",t.project)},x=c=>{c&&(c.stopPropagation(),c.preventDefault()),me(`/watch/${t.project.access_uuid}`)};return(c,h)=>{const $=X,K=Fe;return i(),P(De,{class:"studio-card",elevation:"2"},{default:d(()=>[l("div",qe,[l("div",Ge,[_($,{thumbnailUrl:c.project.thumbnail_url,videoUrl:c.project.video_url,showViews:!1,showDuration:!0,size:"lg",class:"project-card__thumbnail",onClick:x},null,8,["thumbnailUrl","videoUrl"])]),l("div",Ke,[l("div",We,[l("div",Je,[_(ke,{location:"bottom"},{activator:d(({props:H})=>[l("h3",ee({class:"project-title"},H),C(D.value),17)]),default:d(()=>[l("span",null,C(c.project.name),1)]),_:1}),_(Ye,{status:c.project.status,size:"sm"},null,8,["status"])]),l("div",Qe,[_(K,{menuList:[{title:"Delete",action:"delete"}],onSelect:n})])]),c.project.description?(i(),V("p",Xe,C(T.value),1)):S("",!0),l("div",Ze,[_(R,{icon:"mdi-calendar-clock",color:v.value?"error":void 0,size:"small"},null,8,["color"]),l("span",{class:te({"premiere-text":v.value})},C(g.value),3)]),o.value?(i(),V("div",et,[_(R,{icon:"mdi-ticket",size:"small"}),l("span",null,"Watch Fee: "+C(b.value),1)])):S("",!0),l("div",tt,[c.project.status==="published"?(i(),P(B,{key:0,color:"primary",variant:"outlined",size:"small",onClick:L,class:"action-btn"},{default:d(()=>h[0]||(h[0]=[w(" Edit ")])),_:1})):(i(),P(B,{key:1,color:"warning",variant:"outlined",size:"small",onClick:E,class:"action-btn"},{default:d(()=>h[1]||(h[1]=[w(" Edit Draft ")])),_:1})),c.project.status!=="draft"?(i(),P(B,{key:2,color:"info",variant:"outlined",size:"small",onClick:M,class:"action-btn"},{default:d(()=>h[2]||(h[2]=[w(" Details ")])),_:1})):S("",!0),c.project.status!=="draft"?(i(),P(B,{key:3,color:"success",variant:"outlined",size:"small",onClick:A,class:"action-btn"},{default:d(()=>h[3]||(h[3]=[w(" Project Earnings ")])),_:1})):S("",!0)])])])]),_:1})}}}),le=z(at,[["__scopeId","data-v-f28b1be1"]]),ot={class:"draft-projects"},st=5*60*1e3,rt=I({__name:"StudioDraftProjects",emits:["delete-project"],setup(j,{emit:a}){const t=Y(),r=G(),s=k(""),m=k(null),p=k(null),e=k(null),f=y(()=>r.getProjectsByType("draft")),u=y(()=>r.projects.draft.isLoading),v=y(()=>r.projects.draft.isLoaded),o=y(()=>r.hasMore("draft")),g=y(()=>e.value?Date.now()-e.value>st:!0),b=async(n=!1)=>{if(!(!n&&!g.value&&v.value))try{o.value&&!u.value&&(await r.fetchProjects("draft"),e.value=Date.now())}catch(x){s.value=x instanceof Error?x.message:"Failed to load draft projects. Please try again.",console.error("Error loading draft projects:",x)}},D=n=>{t.push(`/studio/projects/${n.access_uuid}/detail`)},T=n=>{t.push(`/studio/projects/${n.access_uuid}/edit_draft`)},L=n=>{t.push(`/studio/projects/${n.access_uuid}/detail`)},E=n=>{t.push(`/project/${n.access_uuid}/earnings`)},M=n=>{A("delete-project",n)};se(p,([{isIntersecting:n}])=>{n&&!u.value&&o.value&&b()},{threshold:.5}),q(()=>{(!v.value||g.value)&&b()}),ae(()=>{g.value&&b(!0)});const A=a;return(n,x)=>{const c=le,h=oe;return i(),V("div",ot,[s.value?(i(),P(re,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:d(()=>[w(C(s.value),1)]),_:1})):S("",!0),l("div",{class:"projects-grid",ref_key:"projectsListRef",ref:m},[f.value.length?(i(!0),V(N,{key:0},U(f.value,$=>(i(),P(c,{key:$.id,project:$,onEditProject:D,onEditDraft:T,onDeleteProject:M,onViewDetails:L,onViewEarnings:E},null,8,["project"]))),128)):u.value?S("",!0):(i(),P(h,{key:1,title:"No Projects Yet",message:"You haven't premiered any projects yet. Start by premiering your first project!",icon:"mdi-file-document-outline","action-text":"Premiere a Project","on-action-click":()=>F(t).push("/premiering")},null,8,["on-action-click"])),u.value?(i(),V(N,{key:2},U(3,$=>_(ne,{key:$,type:"article",loading:!0,class:"skeleton-loader"})),64)):S("",!0)],512),o.value&&!u.value?(i(),V("div",{key:1,ref_key:"loadTrigger",ref:p,class:"load-trigger"},null,512)):S("",!0)])}}}),nt=z(rt,[["__scopeId","data-v-59966199"]]),lt={class:"published-projects"},it=5*60*1e3,ct=I({__name:"StudioPublishedProjects",emits:["delete-project"],setup(j,{emit:a}){const t=Y(),r=G(),s=k(""),m=k(null),p=k(null),e=k(null),f=y(()=>r.getProjectsByType("published")),u=y(()=>r.projects.published.isLoading),v=y(()=>r.projects.published.isLoaded),o=y(()=>r.hasMore("published")),g=y(()=>e.value?Date.now()-e.value>it:!0),b=async()=>{try{o.value&&!u.value&&(await r.fetchProjects("published"),e.value=Date.now())}catch(n){s.value=n instanceof Error?n.message:"Failed to load projects. Please try again."}},D=n=>{t.push(`/studio/projects/${n.access_uuid}/detail`)},T=n=>{t.push(`/premiering/${n.premiering_category_slug}/edit_draft`)},L=n=>{t.push(`/studio/projects/${n.access_uuid}/detail`)},E=n=>{t.push(`/project/${n.access_uuid}/earnings`)},M=n=>{A("delete-project",n)};se(p,([{isIntersecting:n}])=>{n&&!u.value&&o.value&&b()},{threshold:.5}),q(()=>{(!v.value||g.value)&&b()}),ae(()=>{g.value&&b()});const A=a;return(n,x)=>{const c=le,h=oe;return i(),V("div",lt,[s.value?(i(),P(re,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:d(()=>[w(C(s.value),1)]),_:1})):S("",!0),l("div",{class:"projects-grid",ref_key:"projectsListRef",ref:m},[f.value.length?(i(!0),V(N,{key:0},U(f.value,$=>(i(),P(c,{key:$.id,project:$,onEditProject:D,onEditDraft:T,onDeleteProject:M,onViewDetails:L,onViewEarnings:E},null,8,["project"]))),128)):u.value?S("",!0):(i(),P(h,{key:1,title:"No Published Projects",message:"You haven't published any projects yet. Start by premiering your first project!",icon:"mdi-video-off-outline","action-text":"Premiere a Project","on-action-click":()=>F(t).push("/premiering")},null,8,["on-action-click"])),u.value?(i(),V(N,{key:2},U(3,$=>_(ne,{key:$,type:"article",loading:!0,class:"skeleton-loader"})),64)):S("",!0)],512),o.value&&!u.value?(i(),V("div",{key:1,ref_key:"loadTrigger",ref:p,class:"load-trigger"},null,512)):S("",!0)])}}}),ut=z(ct,[["__scopeId","data-v-7187b1f4"]]),dt=I({__name:"ManageProjectsPage",setup(j){const a=G(),t=he(),r=fe(),s=Y(),m=k("published"),p=k(!1),e=k(null),f=y(()=>m.value==="published"?ut:nt);q(()=>{r.query.tab==="draft"?m.value="draft":m.value="published"}),O(m,o=>{s.push({query:{tab:o}})});const u=o=>{e.value=o,p.value=!0},v=async()=>{if(e.value)try{await a.deleteProject(e.value.access_uuid),t.success(`Project "${e.value.title||"Untitled"}" has been deleted successfully`),p.value=!1,e.value=null}catch(o){console.error("Error deleting project:",o),t.error("Failed to delete project. Please try again.")}};return(o,g)=>{const b=ie,D=Ue;return i(),P(Q,{class:"pa-0 mt-4 mx-auto","max-width":"1200"},{default:d(()=>[_(b,{title:"Manage your projects"},{subtitle:d(()=>g[2]||(g[2]=[l("span",{class:"text-subtitle-1 text-medium-emphasis"}," View and manage your projects across different stages ",-1)])),_:1}),_($e,{modelValue:m.value,"onUpdate:modelValue":g[0]||(g[0]=T=>m.value=T),color:"primary",class:"mb-6 custom-tabs",grow:""},{default:d(()=>[_(J,{value:"published"},{default:d(()=>g[3]||(g[3]=[w("Published Projects")])),_:1}),_(J,{value:"draft"},{default:d(()=>g[4]||(g[4]=[w("Draft Projects")])),_:1})]),_:1},8,["modelValue"]),_(Q,{class:"pa-0 mt-4"},{default:d(()=>[(i(),P(ve,null,[(i(),P(_e(f.value),{key:m.value,onDeleteProject:u},null,32))],1024))]),_:1}),e.value?(i(),P(D,{key:0,show:p.value,"onUpdate:show":g[1]||(g[1]=T=>p.value=T),project:e.value,onConfirm:v},null,8,["show","project"])):S("",!0)]),_:1})}}}),pt=I({__name:"manage-projects",async setup(j){var m,p,e,f,u,v,o,g,b,D,T,L,E,M,A,n,x,c,h;let a,t;const r=Ve();[a,t]=ge(()=>r.fetchTalaStageApp()),await a,t();const s=y(()=>r.talastageApp);return Se({title:`Manage Projects - ${((m=s.value)==null?void 0:m.name)||"TalaStage"}`,description:((p=s.value)==null?void 0:p.seo_description)||`Manage all your projects effectively on ${((e=s.value)==null?void 0:e.name)||"TalaStage"}.`,keywords:`manage projects, project dashboard, project settings, ${((f=s.value)==null?void 0:f.name)||"TalaStage"}`,image:((u=s.value)==null?void 0:u.logo_url)||"/default-social-image.png",type:"website",siteName:((v=s.value)==null?void 0:v.name)||"TalaStage",url:`${((o=s.value)==null?void 0:o.canonical_url)||"https://talastage.com"}/studio/projects/manage-projects`,noIndex:!0,robots:"noindex, nofollow",canonical:`${((g=s.value)==null?void 0:g.canonical_url)||"https://talastage.com"}/studio/projects/manage-projects`,openGraph:{title:`Manage Projects - ${((b=s.value)==null?void 0:b.name)||"TalaStage"}`,description:((D=s.value)==null?void 0:D.seo_description)||`Manage all your projects effectively on ${((T=s.value)==null?void 0:T.name)||"TalaStage"}.`,url:`${((L=s.value)==null?void 0:L.canonical_url)||"https://talastage.com"}/studio/projects/manage-projects`,image:((E=s.value)==null?void 0:E.logo_url)||"/default-social-image.png",siteName:((M=s.value)==null?void 0:M.name)||"TalaStage",type:"website"},twitter:{card:"summary_large_image",title:`Manage Projects - ${((A=s.value)==null?void 0:A.name)||"TalaStage"}`,description:((n=s.value)==null?void 0:n.seo_description)||`Manage all your projects effectively on ${((x=s.value)==null?void 0:x.name)||"TalaStage"}.`,image:((c=s.value)==null?void 0:c.logo_url)||"/default-social-image.png"},link:[{rel:"icon",type:"image/png",href:((h=s.value)==null?void 0:h.favicon_url)||"/favicon.png"}]}),($,K)=>{const H=dt;return i(),V("div",null,[_(H)])}}}),Wt=z(pt,[["__scopeId","data-v-e21ac66d"]]);export{Wt as default};
