import{_ as M}from"./Cw5ECwNl.js";import{_ as H}from"./ChkTFCz_.js";import{_ as L}from"./DVEFYz_L.js";import{_ as R}from"./ePgF0Kvb.js";import{_ as O}from"./DJ8gbgBD.js";import{_ as j}from"./DL649WMo.js";import{n as G,j as s,c as g,l as q,cG as J,t as K,o as e,a as h,w as y,b as U,p as _,m as l,F as C,D as T,y as m,a0 as Q,a1 as W,A as X,s as Y,v as Z,g as ee,_ as te}from"./CGQimWOm.js";import{a as ae}from"./CDtnx0aA.js";import{V as ne}from"./P_q-BwEt.js";import{V as se}from"./BhN2__aY.js";import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./BSH7BhKc.js";import"./CkOuN04m.js";import"./BkTuXOR_.js";import"./xvVMJZi9.js";import"./f5lwX8SZ.js";import"./DyYnZ78z.js";/* empty css        */const oe={class:"user-fans"},re={key:0,class:"fans-grid"},le={key:1,class:"fans-grid"},ue={key:0,class:"fans-grid mt-4"},ie={key:1,class:"text-center mt-4"},ce=12,_e=5*60*1e3,me=G({__name:"UserFans",props:{username:{}},setup(A){const N=A,t=s([]),o=s(!0),u=s(!1),v=s(null),V=s(null),k=s(1),p=s(1),d=s(null),x=s(!1),D=g(()=>"medium"),F=g(()=>p.value<k.value),E=g(()=>d.value?Date.now()-d.value>_e:!0),P=g(()=>!o.value&&t.value.length===0?"No followers yet.":"Followers"),f=async(a=!1)=>{if(a)o.value=!0,p.value=1,t.value=[];else{if(u.value||!F.value)return;u.value=!0}try{const{$axios:r}=ee(),i=await r.get(`/api/fans/${N.username}/fans`,{params:{page:p.value,per_page:ce}}),{fans:c,pagination:w}=i.data;t.value=a?c:[...t.value,...c],k.value=w.last_page,p.value++,d.value=Date.now(),x.value=!0}catch(r){v.value="Failed to fetch fans. Please try again later.",console.error("Error fetching fans:",r)}finally{o.value=!1,u.value=!1}},S=()=>{t.value=[],p.value=1,k.value=1,v.value=null,d.value=null,x.value=!1},b=(a,r)=>{const i=t.value.find(c=>c.id===a);i&&(i.is_fanned_by_auth_user=r)};return ae(V,([{isIntersecting:a}])=>{a&&!o.value&&F.value&&!u.value&&f(!1)},{threshold:.1}),q(()=>{x.value||f(!0)}),J(()=>{E.value&&f(!0)}),K(()=>N.username,(a,r)=>{a!==r&&(S(),f(!0))}),(a,r)=>{const i=M,c=H,w=L,B=R,$=O,z=j;return e(),h(z,null,{default:y(()=>[U("div",oe,[_(i,{title:P.value},null,8,["title"]),_(se,{fluid:"",class:"pa-0"},{default:y(()=>[!o.value&&t.value.length>0?(e(),l("div",re,[(e(!0),l(C,null,T(t.value,n=>(e(),h(w,{key:n.id,user:n,size:D.value},{action:y(()=>[_(c,{username:n.username,"initial-fanning-state":n.is_fanned_by_auth_user,onFanningUpdated:I=>b(n.id,I)},null,8,["username","initial-fanning-state","onFanningUpdated"])]),_:2},1032,["user","size"]))),128))])):m("",!0),o.value?(e(),l("div",le,[(e(),l(C,null,T(6,n=>_(B,{key:"skeleton-"+n})),64))])):m("",!0),Q(U("div",{ref_key:"scrollTrigger",ref:V,class:"scroll-trigger"},[u.value?(e(),l("div",ue,[(e(),l(C,null,T(6,n=>_(B,{key:"skeleton-more-"+n})),64))])):m("",!0),u.value?(e(),l("div",ie,[_(X,{indeterminate:"",color:"primary",size:"24"})])):m("",!0)],512),[[W,!o.value&&F.value]]),!o.value&&t.value.length===0?(e(),h($,{key:2,message:"No followers yet!"})):m("",!0),v.value?(e(),h(ne,{key:3,type:"error",variant:"tonal",class:"mt-4"},{default:y(()=>[Y(Z(v.value),1)]),_:1})):m("",!0)]),_:1})])]),_:1})}}}),Ee=te(me,[["__scopeId","data-v-6b721530"]]);export{Ee as default};
