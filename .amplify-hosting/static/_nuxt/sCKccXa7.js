import{n as L,o as i,m,_ as B,j as y,l as j,c as z,t as D,p as o,w as n,b as l,q as I,O as E,v as f,V as _,G as x,s as g,a as C,F as R,D as $,y as J}from"./CGQimWOm.js";import{u as M}from"./DMLzsDc7.js";import{V as U}from"./GXZRJwQ4.js";import{V as G}from"./BkTuXOR_.js";import{V as P}from"./CMsVONS5.js";import{V as N}from"./BvtSni_j.js";import{V as Q}from"./BRveoiXI.js";import{V as A,a as H}from"./tTgLLTve.js";import{V as K}from"./CW50LM9V.js";const W=["src","alt"],X=L({__name:"CountryFlag",props:{flag:{type:String,required:!0},countryName:{type:String,required:!0}},setup(r){return(S,h)=>(i(),m("img",{src:r.flag,alt:r.countryName,class:"country-flag"},null,8,W))}}),Y=B(X,[["__scopeId","data-v-54b0c106"]]),Z={class:"country-select-container"},ee={class:"select-field-wrapper"},te={key:0,class:"d-flex align-center w-100"},ae={class:"flag-container mr-3"},oe={class:"d-flex flex-column align-start flex-grow-1"},ne={class:"country-name text-body-1 font-weight-medium"},le={class:"country-code text-caption text-primary"},se={key:1,class:"d-flex align-center w-100"},re={class:"search-container pa-4"},ie={class:"countries-container"},ce={class:"flag-container"},de={class:"country-name text-body-1"},ue={class:"country-code text-caption text-primary font-weight-medium"},me={key:1,class:"no-results pa-8 d-flex flex-column align-center"},fe={class:"text-body-1 text-grey-darken-1"},ge=L({__name:"SelectCountry",props:{modelValue:{type:Object,default:null},placeholder:{type:String,default:"Select Country"}},emits:["update:modelValue","country-selected"],setup(r,{emit:S}){const h=S,V=M(),d=y(!1),c=y(""),s=y([]),k=y(!0);j(async()=>{k.value=!0;try{await V.fetchCountries(),F()}catch(t){console.error("Error loading countries:",t)}finally{k.value=!1}});const v=z(()=>{const t=c.value.toLowerCase().trim();if(!t){const e=[...V.countries];if(s.value.length>0){const u=e.filter(a=>!s.value.some(p=>p.id===a.id));return[...s.value,...u]}return e}return V.countries.filter(e=>e.name.toLowerCase().includes(t)||e.phone_code.includes(t))});function F(){const t=localStorage.getItem("recentCountries");if(t)try{s.value=JSON.parse(t).slice(0,3)}catch(e){console.error("Error loading recent countries",e)}}function O(t){const e=s.value.findIndex(u=>u.id===t.id);e!==-1&&s.value.splice(e,1),s.value.unshift(t),s.value.length>3&&(s.value=s.value.slice(0,3)),localStorage.setItem("recentCountries",JSON.stringify(s.value))}function q(t){h("update:modelValue",t),h("country-selected",t),O(t),d.value=!1,c.value=""}function w(){c.value=""}function T(){}return D(()=>d.value,t=>{t||setTimeout(()=>{c.value=""},300)}),(t,e)=>{const u=Y;return i(),m("div",Z,[o(K,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value=a),"close-on-content-click":!1,location:"bottom",transition:"scale-transition","max-width":"400","content-class":"country-dropdown"},{activator:n(({props:a})=>[l("div",ee,[o(I,E(a,{variant:"outlined",class:"country-selector",rounded:"lg",block:"",height:"56"}),{default:n(()=>[r.modelValue?(i(),m("div",te,[l("div",ae,[o(u,{flag:r.modelValue.flag,"country-name":r.modelValue.name},null,8,["flag","country-name"])]),l("div",oe,[l("div",ne,f(r.modelValue.name),1),l("div",le," +"+f(r.modelValue.phone_code),1)]),o(_,{class:x(["transition-transform",d.value?"rotate-icon":""]),color:"grey-darken-1"},{default:n(()=>e[2]||(e[2]=[g(" mdi-chevron-down ")])),_:1},8,["class"])])):(i(),m("div",se,[o(_,{size:"24",class:"globe-icon mr-3",color:"grey-darken-1"},{default:n(()=>e[3]||(e[3]=[g("mdi-earth")])),_:1}),e[5]||(e[5]=l("div",{class:"placeholder text-body-1"},"Select Country",-1)),o(U),o(_,{class:x(["transition-transform",d.value?"rotate-icon":""]),color:"grey-darken-1"},{default:n(()=>e[4]||(e[4]=[g(" mdi-chevron-down ")])),_:1},8,["class"])]))]),_:2},1040)])]),default:n(()=>[o(G,{class:"country-menu pa-0",elevation:"8",rounded:"lg"},{default:n(()=>[l("div",re,[o(P,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),"prepend-inner-icon":"mdi-magnify",placeholder:"Search country or dial code",variant:"outlined",density:"comfortable","bg-color":"grey-lighten-5","hide-details":"",rounded:"lg",class:"search-field",clearable:"","onClick:clear":w,onInput:T},null,8,["modelValue"])]),o(N),l("div",ie,[v.value.length>0?(i(),C(Q,{key:0,class:"country-list pa-0",height:"320"},{default:n(()=>[(i(!0),m(R,null,$(v.value,a=>{var p,b;return i(),C(A,{key:a.id,onClick:ve=>q(a),class:x(["country-list-item py-2",((p=r.modelValue)==null?void 0:p.id)===a.id?"selected-item":""]),active:((b=r.modelValue)==null?void 0:b.id)===a.id,"active-color":"primary-lighten-4"},{prepend:n(()=>[l("div",ce,[o(u,{flag:a.flag,"country-name":a.name},null,8,["flag","country-name"])])]),default:n(()=>[o(H,{class:"d-flex align-center justify-space-between"},{default:n(()=>[l("span",de,f(a.name),1),l("span",ue,"+"+f(a.phone_code),1)]),_:2},1024),v.value.indexOf(a)<v.value.length-1?(i(),C(N,{key:0})):J("",!0)]),_:2},1032,["onClick","class","active"])}),128))]),_:1})):(i(),m("div",me,[o(_,{color:"grey-lighten-1",size:"40",class:"mb-3"},{default:n(()=>e[6]||(e[6]=[g("mdi-magnify-close")])),_:1}),l("span",fe,'No countries found matching "'+f(c.value)+'"',1),o(I,{variant:"text",color:"primary",class:"mt-2",onClick:w},{default:n(()=>e[7]||(e[7]=[g(" Clear search ")])),_:1})]))])]),_:1})]),_:1},8,["modelValue"])])}}}),we=B(ge,[["__scopeId","data-v-01d2aab2"]]);export{we as _};
