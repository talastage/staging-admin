import{n as V,k as z,l as M,c as d,t as R,o as m,m as T,a as w,w as l,p as n,b as a,V as f,s as o,q as p,v,J as P,y as q,_ as I}from"./CGQimWOm.js";import{u as L}from"./CiN8dqd8.js";import{a as b,V as x}from"./BkTuXOR_.js";import{a as D}from"./DsvAftJq.js";const $={class:"wallet-status-compact"},H={class:"d-flex align-center mb-2"},j={class:"d-flex gap-2"},E={class:"d-flex align-center justify-space-between mb-2"},U={class:"d-flex align-center"},Y={class:"balance-row mb-2"},G={class:"balance-item"},J={class:"text-body-2 font-weight-bold text-success"},O={class:"balance-item"},K={class:"text-body-2 font-weight-bold text-error"},Q={class:"d-flex gap-2"},X={class:"d-flex align-center"},Z={class:"text-caption text-medium-emphasis"},ee={class:"d-flex align-center mb-2"},te={class:"text-caption text-medium-emphasis mb-3"},ae=V({__name:"WalletStatusAlert",props:{amount:{type:Number,required:!0},currency:{type:Object,required:!0,default:()=>({id:0,code:"RWF",symbol:"RWF"})},useCompactLayout:{type:Boolean,default:!1},hideCompactLayout:{type:Boolean,default:!1},showSuccessAlert:{type:Boolean,default:!0},inactiveMessage:{type:String,default:"Your wallet is inactive. Please activate it to continue."},insufficientFundsMessage:{type:String,default:"Insufficient wallet balance"},successMessage:{type:String,default:"Your wallet has sufficient funds for this payment"},currencyMismatchMessage:{type:String,default:"Currency mismatch between wallet and payment"},errorMessage:{type:String,default:"Unable to verify wallet status. Please try again later."},balanceLabel:{type:String,default:"Available Balance"},paymentLabel:{type:String,default:"Payment Amount"},activateButtonText:{type:String,default:"Activate Wallet"},depositButtonText:{type:String,default:"Deposit Funds"},walletStatus:{type:String,default:"",validator:c=>["","active","inactive","insufficient","sufficient","currencyMismatch","error"].includes(c)}},emits:["validate","deposit-click","activate-click"],setup(c,{emit:A}){const t=c,S=A,_=z(),r=L();M(async()=>{r.wallet||await r.fetchWallet()});function B(s,e,i){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:i||"RWF",currencyDisplay:"symbol"}).format(s).replace(i,e||i)}catch{return`${e||i}${s.toFixed(2)}`}}const u=d(()=>r.currentCurrency||{code:"RWF",symbol:"RWF"}),k=d(()=>{var s;return r.currentBalance?B(Number(r.currentBalance),u.value.symbol||u.value.code,u.value.code):(s=u.value)!=null&&s.code?`${u.value.symbol||u.value.code}0.00`:"RWF0.00"}),F=d(()=>{var s;return t.amount?B(t.amount,t.currency.symbol||t.currency.code,t.currency.code):(s=t.currency)!=null&&s.code?`${t.currency.symbol||t.currency.code}0.00`:"RWF0.00"}),y=d(()=>t.walletStatus==="inactive"?!1:t.walletStatus==="active"||t.walletStatus==="sufficient"||t.walletStatus==="insufficient"?!0:r.isWalletActive),g=d(()=>{var e,i;if(t.walletStatus==="insufficient")return!0;if(t.walletStatus==="sufficient")return!1;const s=Number(r.currentBalance||0);return((e=u.value)==null?void 0:e.code)===((i=t.currency)==null?void 0:i.code),s<t.amount}),W=d(()=>{const s=Number(r.currentBalance||0),e=t.amount||1;if(e===0)return 100;const i=s/e*100;return Math.min(i,100)}),h=()=>{_.push("/help/wallet/wallet-deposits/how-to-deposit-funds-to-your-wallet")},C=()=>{_.push("/wallet/activate"),S("activate-click")},N=()=>{_.push("/wallet/deposit"),S("deposit-click")};return R([()=>r.currentBalance,()=>t.amount,()=>{var s;return(s=u.value)==null?void 0:s.code},()=>{var s;return(s=t.currency)==null?void 0:s.code},()=>y.value,()=>g.value,()=>t.walletStatus],()=>{var e,i;const s=t.walletStatus||(y.value?g.value?"insufficient":"sufficient":"inactive");S("validate",{valid:y.value&&!g.value&&t.walletStatus!=="currencyMismatch"&&t.walletStatus!=="error",status:s,data:{wallet_id:(i=(e=r.wallet)==null?void 0:e.data)==null?void 0:i.id}})},{immediate:!0}),(s,e)=>(m(),T("div",$,[y.value?g.value?(m(),w(x,{key:1,class:"insufficient-card",elevation:"2",rounded:"lg"},{default:l(()=>[n(b,{class:"pa-3"},{default:l(()=>[a("div",E,[a("div",U,[n(f,{color:"warning",size:"20",class:"mr-2"},{default:l(()=>e[5]||(e[5]=[o("mdi-cash-remove")])),_:1}),e[6]||(e[6]=a("span",{class:"text-body-2 font-weight-medium"},"Insufficient Balance",-1))]),n(D,{size:"small",color:"warning",variant:"tonal"},{default:l(()=>[o(v(W.value.toFixed(0))+"% available ",1)]),_:1})]),a("div",Y,[a("div",G,[e[7]||(e[7]=a("span",{class:"text-caption text-medium-emphasis"},"Balance:",-1)),a("span",J,v(k.value),1)]),n(f,{size:"16",color:"grey"},{default:l(()=>e[8]||(e[8]=[o("mdi-arrow-right")])),_:1}),a("div",O,[e[9]||(e[9]=a("span",{class:"text-caption text-medium-emphasis"},"Required:",-1)),a("span",K,v(F.value),1)])]),n(P,{"model-value":W.value,color:"warning","bg-color":"grey-lighten-4",height:"4",rounded:"",class:"mb-3"},null,8,["model-value"]),e[12]||(e[12]=a("p",{class:"text-caption text-medium-emphasis mb-3"}," Please deposit funds to your wallet to complete this payment. ",-1)),a("div",Q,[n(p,{size:"small",color:"primary",variant:"elevated",onClick:N},{default:l(()=>e[10]||(e[10]=[o(" Add Funds ")])),_:1}),n(p,{size:"small",color:"grey",variant:"outlined",onClick:h},{default:l(()=>e[11]||(e[11]=[o(" Need Help? ")])),_:1})])]),_:1})]),_:1})):c.showSuccessAlert?(m(),w(x,{key:2,class:"success-card",elevation:"1",rounded:"lg"},{default:l(()=>[n(b,{class:"pa-3"},{default:l(()=>[a("div",X,[n(f,{color:"success",size:"20",class:"mr-2"},{default:l(()=>e[13]||(e[13]=[o("mdi-check-circle")])),_:1}),a("div",null,[e[14]||(e[14]=a("span",{class:"text-body-2 font-weight-medium text-success"},"Ready to Pay",-1)),a("div",Z," Balance: "+v(k.value),1)])])]),_:1})]),_:1})):c.walletStatus==="error"?(m(),w(x,{key:3,class:"error-card",elevation:"2",rounded:"lg"},{default:l(()=>[n(b,{class:"pa-3"},{default:l(()=>[a("div",ee,[n(f,{color:"error",size:"20",class:"mr-2"},{default:l(()=>e[15]||(e[15]=[o("mdi-alert")])),_:1}),e[16]||(e[16]=a("span",{class:"text-body-2 font-weight-medium"},"Wallet Error",-1))]),a("p",te,v(c.errorMessage),1),n(p,{size:"small",color:"grey",variant:"outlined",onClick:h},{default:l(()=>e[17]||(e[17]=[o(" Get Support ")])),_:1})]),_:1})]),_:1})):q("",!0):(m(),w(x,{key:0,class:"inactive-card",elevation:"2",rounded:"lg"},{default:l(()=>[n(b,{class:"pa-3"},{default:l(()=>[a("div",H,[n(f,{color:"warning",size:"20",class:"mr-2"},{default:l(()=>e[0]||(e[0]=[o("mdi-wallet-outline")])),_:1}),e[1]||(e[1]=a("span",{class:"text-body-2 font-weight-medium"},"Wallet Activation Required",-1))]),e[4]||(e[4]=a("p",{class:"text-caption text-medium-emphasis mb-3"}," To complete this payment, please activate your wallet first. ",-1)),a("div",j,[n(p,{size:"small",color:"warning",variant:"elevated",onClick:C},{default:l(()=>e[2]||(e[2]=[o(" Activate Now ")])),_:1}),n(p,{size:"small",color:"grey",variant:"outlined",onClick:h},{default:l(()=>e[3]||(e[3]=[o(" Need Help? ")])),_:1})])]),_:1})]),_:1}))]))}}),re=I(ae,[["__scopeId","data-v-65822250"]]);export{re as _};
