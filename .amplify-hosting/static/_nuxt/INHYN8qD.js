import{_ as F}from"./CT8473XM.js";import{n as q,g as I,j as p,c as C,l as z,o as S,m as $,b as o,p as t,V as A,a as T,w as s,s as y,v as E,y as L,x as h,q as N,C as W,A as Y,_ as U,W as H,I as O,Q}from"./CGQimWOm.js";import{u as G}from"./BZRTckJ6.js";import{u as J}from"./DMBY-Kaj.js";import{V as j}from"./P_q-BwEt.js";import{V as x}from"./CRY4crBU.js";import{V as _}from"./CS8xUUzH.js";import{V as K}from"./DoIi4J9g.js";import{V as X}from"./BvtSni_j.js";import{V as Z}from"./CiXMVmI4.js";import{V as ee}from"./DJ0NdY24.js";import{u as te}from"./D78L5r-E.js";import{u as se}from"./BW5EWlXk.js";import{V as ae,a as oe}from"./BkTuXOR_.js";import{V as re}from"./BhN2__aY.js";import"./xvVMJZi9.js";import"./BSH7BhKc.js";import"./tTgLLTve.js";import"./DbQnG3uQ.js";import"./CMsVONS5.js";import"./C-73ZGdz.js";import"./2hEmiBig.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./BRveoiXI.js";import"./Dn0bXcU5.js";import"./IpAEdaYr.js";import"./CW50LM9V.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./DsvAftJq.js";/* empty css        */const le={key:0,class:"report-problem mx-auto text-center pa-6"},ie={class:"mb-6"},ne={key:1,class:"report-problem mx-auto pa-6",style:{"box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)"}},ue={class:"d-flex align-center"},me=q({__name:"SendReportMessage",setup(B){const{$axios:V}=I(),c=J(),m=G(),R=p(null),f=p(!1),n=p(!1),g=p(!1),d=p({}),r=p(""),l=p({category_id:null,message:""}),k=[u=>!!u||"Message is required",u=>u&&u.length>=10||"Message must be at least 10 characters"],P=C(()=>f.value&&l.value.category_id&&l.value.message.trim().length>=10&&!n.value),a=C(()=>l.value.category_id?"Please provide as much detail as possible about your issue...":"Please select a category first"),b=()=>{d.value={},r.value=""},D=async()=>{var u,e,w,i,M;if(P.value){n.value=!0,b();try{await V.post("/api/support/tickets",l.value),c.success("Your problem report has been submitted successfully"),g.value=!0}catch(v){console.error("Submit error:",(u=v.response)==null?void 0:u.data),(w=(e=v.response)==null?void 0:e.data)!=null&&w.errors?d.value=v.response.data.errors:(M=(i=v.response)==null?void 0:i.data)!=null&&M.message?r.value=v.response.data.message:r.value="An unexpected error occurred. Please try again.",c.error(r.value||"Failed to submit report")}finally{n.value=!1}}};return z(async()=>{try{await m.fetchCategories()}catch{r.value="Failed to load categories. Please refresh the page.",c.error("Failed to load categories")}}),(u,e)=>{const w=F;return g.value?(S(),$("div",le,[o("div",ie,[t(A,{icon:"mdi-check-circle-outline",color:"success",size:"64",class:"mb-4"}),e[5]||(e[5]=o("h2",{class:"text-h5 mb-4"},"Thank You for Reporting!",-1)),e[6]||(e[6]=o("p",{class:"text-body-1"}," We've received your report and will get back to you as soon as possible. ",-1))])])):(S(),$("div",ne,[e[10]||(e[10]=o("div",{class:"text-h6 pb-0 mb-2"},"Report a Problem",-1)),e[11]||(e[11]=o("div",{class:"text-body-2 mb-4"}," Please fill out the form below and we'll respond as soon as we can. ",-1)),r.value?(S(),T(j,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":e[0]||(e[0]=i=>r.value="")},{default:s(()=>[y(E(r.value),1)]),_:1})):L("",!0),t(Z,{ref_key:"form",ref:R,modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=i=>f.value=i),onSubmit:W(D,["prevent"])},{default:s(()=>[t(x,null,{default:s(()=>[t(_,{cols:"12"},{default:s(()=>[t(w,{modelValue:l.value.category_id,"onUpdate:modelValue":e[1]||(e[1]=i=>l.value.category_id=i),categories:h(m).categories,"is-loading":h(m).isLoading,"error-messages":d.value.category_id,label:"Category of the Problem",required:"",onChange:b},null,8,["modelValue","categories","is-loading","error-messages"]),e[7]||(e[7]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Select the category that best matches your issue ",-1))]),_:1})]),_:1}),t(x,{class:"mt-4"},{default:s(()=>[t(_,{cols:"12"},{default:s(()=>[t(K,{modelValue:l.value.message,"onUpdate:modelValue":e[2]||(e[2]=i=>l.value.message=i),label:"Describe your problem","error-messages":d.value.message,rules:k,variant:"outlined",maxlength:1e3,counter:!0,rows:"4","auto-grow":"",required:"",onInput:b,placeholder:a.value},null,8,["modelValue","error-messages","placeholder"])]),_:1})]),_:1}),t(X,{class:"my-4"}),o("div",ue,[e[9]||(e[9]=o("div",{class:"text-caption text-medium-emphasis flex-grow-1"}," * Required fields ",-1)),t(N,{color:"primary",size:"large",type:"submit",loading:n.value,disabled:!P.value},{default:s(()=>e[8]||(e[8]=[y(" Submit Report ")])),_:1},8,["loading","disabled"])])]),_:1},8,["modelValue"]),t(ee,{modelValue:h(m).isLoading,"onUpdate:modelValue":e[4]||(e[4]=i=>h(m).isLoading=i),class:"align-center justify-center",persistent:""},{default:s(()=>[t(Y,{indeterminate:"",color:"primary"})]),_:1},8,["modelValue"])]))}}}),de=U(me,[["__scopeId","data-v-2ce2239e"]]),pe={class:"d-flex align-center justify-center mb-4"},ce={class:"d-flex flex-column"},fe={class:"text-body-2"},ge=q({__name:"report",async setup(B){var g,d,r,l,k;let V,c;const m=H(),R=C(()=>m.global.current.value.dark),f=se();[V,c]=O(()=>f.fetchTalaStageApp()),await V,c();const n=C(()=>f.talastageApp);return te({title:`Report a Problem - ${((g=n.value)==null?void 0:g.name)||"TalaStage"}`,description:((d=n.value)==null?void 0:d.seo_description)||"Report any issues you are experiencing, and our team will address them as quickly as possible.",keywords:((r=n.value)==null?void 0:r.meta_keywords)||"report, problem, feedback, support, help, assistance",image:((l=n.value)==null?void 0:l.logo_url)||"/default-social-image.png",url:`${Q().public.frontendUrl}/feedback/report`,type:"website",siteName:((k=n.value)==null?void 0:k.name)||"TalaStage",twitterUsername:"@talastage"}),(P,a)=>{const b=de;return S(),T(re,{class:"report-page py-8"},{default:s(()=>[t(x,{class:"mb-8"},{default:s(()=>[t(_,{cols:"12",class:"text-center"},{default:s(()=>[o("div",pe,[t(A,{icon:"mdi-alert-circle-outline",color:"primary",size:"40",class:"mr-3"}),a[0]||(a[0]=o("h1",{class:"text-h4 font-weight-medium mb-0"},"Report a Problem",-1))]),a[1]||(a[1]=o("p",{class:"text-body-1 text-medium-emphasis max-width-md mx-auto"}," We're here to help! Please let us know about any issues you're experiencing, and our team will address them as quickly as possible. ",-1))]),_:1})]),_:1}),t(x,{justify:"center"},{default:s(()=>[t(_,{cols:"12",md:"10",lg:"8"},{default:s(()=>[t(ae,{class:"report-card",elevation:2,theme:R.value?"dark":"light"},{default:s(()=>[t(oe,null,{default:s(()=>[t(b)]),_:1})]),_:1},8,["theme"])]),_:1})]),_:1}),t(x,{class:"mt-8",justify:"center"},{default:s(()=>[t(_,{cols:"12",md:"10",lg:"8"},{default:s(()=>[t(j,{color:"info",variant:"tonal",border:"start",class:"help-alert"},{prepend:s(()=>[t(A,{icon:"mdi-information"})]),default:s(()=>[o("div",ce,[a[5]||(a[5]=o("span",{class:"text-subtitle-1 font-weight-medium mb-1"}," Need immediate assistance? ",-1)),o("span",fe,[a[3]||(a[3]=y(" Check our ")),t(N,{variant:"text",to:"/help",class:"px-1"},{default:s(()=>a[2]||(a[2]=[y("Help Center")])),_:1}),a[4]||(a[4]=y(" for quick solutions to common problems. "))])])]),_:1})]),_:1})]),_:1})]),_:1})}}}),Je=U(ge,[["__scopeId","data-v-5f2b986e"]]);export{Je as default};
