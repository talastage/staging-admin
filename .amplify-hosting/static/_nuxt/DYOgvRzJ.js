import{f as P,g as Q}from"./CGQimWOm.js";var w=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,C=typeof self=="object"&&self&&self.Object===Object&&self,$=w||C||Function("return this")(),m=$.Symbol,k=Object.prototype,F=k.hasOwnProperty,M=k.toString,g=m?m.toStringTag:void 0;function B(e){var t=F.call(e,g),n=e[g];try{e[g]=void 0;var a=!0}catch{}var r=M.call(e);return a&&(t?e[g]=n:delete e[g]),r}var G=Object.prototype,U=G.toString;function q(e){return U.call(e)}var D="[object Null]",H="[object Undefined]",x=m?m.toStringTag:void 0;function X(e){return e==null?e===void 0?H:D:x&&x in Object(e)?B(e):q(e)}function z(e){return e!=null&&typeof e=="object"}var J="[object Symbol]";function K(e){return typeof e=="symbol"||z(e)&&X(e)==J}var V=/\s/;function Y(e){for(var t=e.length;t--&&V.test(e.charAt(t)););return t}var Z=/^\s+/;function ee(e){return e&&e.slice(0,Y(e)+1).replace(Z,"")}function _(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var I=NaN,te=/^[-+]0x[0-9a-f]+$/i,re=/^0b[01]+$/i,se=/^0o[0-7]+$/i,ne=parseInt;function E(e){if(typeof e=="number")return e;if(K(e))return I;if(_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ee(e);var n=re.test(e);return n||se.test(e)?ne(e.slice(2),n?2:8):te.test(e)?I:+e}var T=function(){return $.Date.now()},ae="Expected a function",ie=Math.max,oe=Math.min;function ue(e,t,n){var a,r,l,c,i,u,f=0,S=!1,p=!1,b=!0;if(typeof e!="function")throw new TypeError(ae);t=E(t)||0,_(n)&&(S=!!n.leading,p="maxWait"in n,l=p?ie(E(n.maxWait)||0,t):l,b="trailing"in n?!!n.trailing:b);function y(s){var o=a,d=r;return a=r=void 0,f=s,c=e.apply(d,o),c}function A(s){return f=s,i=setTimeout(h,t),S?y(s):c}function N(s){var o=s-u,d=s-f,R=t-o;return p?oe(R,l-d):R}function O(s){var o=s-u,d=s-f;return u===void 0||o>=t||o<0||p&&d>=l}function h(){var s=T();if(O(s))return v(s);i=setTimeout(h,N(s))}function v(s){return i=void 0,b&&a?y(s):(a=r=void 0,c)}function W(){i!==void 0&&clearTimeout(i),f=0,a=u=r=i=void 0}function L(){return i===void 0?c:v(T())}function j(){var s=T(),o=O(s);if(a=arguments,r=this,u=s,o){if(i===void 0)return A(u);if(p)return clearTimeout(i),i=setTimeout(h,t),y(u)}return i===void 0&&(i=setTimeout(h,t)),c}return j.cancel=W,j.flush=L,j}const le=P("searchApp",{state:()=>({searchResults:{projects:{results:[],total:0,current_page:1,per_page:18,last_page:1},users:{results:[],total:0,current_page:1,per_page:18,last_page:1}},loading:!1,error:null,lastQuery:""}),actions:{async search(e,t=1){const n=e.trim();if(n){if(t===1&&this.lastQuery===n&&this.searchResults.users.results.length>0)return this.searchResults;this.loading=!0,this.error=null,this.lastQuery=n;try{const{$axios:a}=Q(),r=await a.get("/api/search/app",{params:{query:n,page:t}});return t===1?this.searchResults={projects:{results:r.data.projects.results||[],total:r.data.projects.total,current_page:r.data.projects.current_page,per_page:r.data.projects.per_page,last_page:r.data.projects.last_page},users:{results:r.data.users.results||[],total:r.data.users.total,current_page:r.data.users.current_page,per_page:r.data.users.per_page,last_page:r.data.users.last_page}}:this.searchResults={projects:{...this.searchResults.projects,results:[...this.searchResults.projects.results,...r.data.projects.results||[]]},users:{...this.searchResults.users,results:[...this.searchResults.users.results,...r.data.users.results||[]]}},this.searchResults}catch(a){throw console.error("Search error:",a),this.error="Failed to perform search",a}finally{this.loading=!1}}},debouncedSearch:ue(function(e,t=1){return this.search(e,t)},300),clearResults(){this.searchResults={projects:{results:[],total:0,current_page:1,per_page:18,last_page:1},users:{results:[],total:0,current_page:1,per_page:18,last_page:1}},this.error=null,this.lastQuery=""}}});export{le as u};
