import{_ as R}from"./B573ycck.js";import{_ as I}from"./pIdhy95N.js";import{g as T,f as j,n as q,P as E,L as M,c as p,l as U,t as F,$ as W,o as n,a as y,w as r,p as o,A as H,b,V as L,s as _,q as G,v as J,m as x,y as C,F as A,D as K}from"./CGQimWOm.js";import{V as m}from"./CRY4crBU.js";import{V as h}from"./CS8xUUzH.js";import{V as O}from"./BEZsNnc4.js";import{V as Q}from"./BhN2__aY.js";import"./DL649WMo.js";import"./BkTuXOR_.js";import"./xvVMJZi9.js";import"./BSH7BhKc.js";import"./DsvAftJq.js";import"./2hEmiBig.js";/* empty css        */const X=()=>{const{$axios:u}=T();return{fetchSubCategory:async(i,a,S,d)=>(await u.get(`/api/help/categories/${i}/subcategories/${a}`,{params:{page:S,per_page:d}})).data}},Y=j("helpSubCategoryArticles",{state:()=>({subCategory:null,articles:[],pagination:null,isLoading:!1,error:null,currentPage:1,perPage:10,currentCategorySlug:null,currentSubCategorySlug:null,isFetching:!1}),actions:{setCurrentPage(u){this.currentPage=u,this.currentCategorySlug&&this.currentSubCategorySlug&&this.fetchSubCategory(this.currentCategorySlug,this.currentSubCategorySlug)},async loadSubCategoryData(u,l){this.currentCategorySlug=u,this.currentSubCategorySlug=l,!this.isFetching&&await this.fetchSubCategory(u,l)},async fetchSubCategory(u,l){if(!this.isFetching){this.isFetching=!0,this.isLoading=!0,this.error=null;try{const{fetchSubCategory:i}=X(),a=await i(u,l,this.currentPage,this.perPage);this.subCategory=a.subcategory,this.articles=a.helps,this.pagination=a.pagination}catch{this.error="Failed to load subcategory articles"}finally{this.isLoading=!1,this.isFetching=!1}}}}}),Z={key:0,class:"overlay-loading"},de=q({__name:"index",setup(u){const l=E(),i=M(),a=Y(),S=()=>{let t=l.params.categorySlug,e=l.params.subCategorySlug;if(!t||!e){const s=window.location.pathname.split("/").filter(Boolean);s.length>=3&&s[0]==="help"&&(t=s[1],e=s[2])}return{categorySlug:t,subCategorySlug:e}},d=p(()=>a.isLoading),k=p(()=>a.error),f=p(()=>a.subCategory),g=p(()=>a.parentCategory),v=p(()=>a.articles),V=p(()=>a.pagination),P=p({get:()=>a.currentPage,set:t=>a.setCurrentPage(t)}),$=async()=>{const{categorySlug:t,subCategorySlug:e}=S();if(!t||!e){a.error="Invalid subcategory path";return}try{await a.loadSubCategoryData(t,e)}catch(s){console.error("Failed to load subcategory:",s),a.error="Failed to load subcategory data"}};U(()=>{$()}),F(()=>l.fullPath,(t,e)=>{t!==e&&l.name==="help-category-slug-subCategorySlug"&&$()}),F(()=>a.currentPage,(t,e)=>{t!==e&&window.scrollTo({top:0,behavior:"smooth"})});const B=t=>{a.setCurrentPage(t)},N=t=>{const{categorySlug:e,subCategorySlug:s}=S();i.push(`/help/${e}/${s}/${t.slug}`)},D=t=>{var e;i.push(`/help/${(e=g.value)==null?void 0:e.slug}/${t.slug}`)};return W(()=>{var t,e,s;return{title:f.value?`${f.value.name} - ${((t=g.value)==null?void 0:t.name)||"Help Center"}`:"Help Center",meta:[{name:"description",content:((e=f.value)==null?void 0:e.description)||`Help articles for ${((s=g.value)==null?void 0:s.name)||"this category"} subcategory`}]}}),(t,e)=>{const s=R,z=I;return n(),y(Q,{class:"help-subcategory-page py-8"},{default:r(()=>{var w;return[d.value&&!v.value.length?(n(),y(m,{key:0},{default:r(()=>[o(h,{cols:"12",class:"text-center py-12"},{default:r(()=>[o(H,{indeterminate:"",size:"64",color:"primary"}),e[1]||(e[1]=b("p",{class:"text-body-2 text-grey mt-4"},"Loading...",-1))]),_:1})]),_:1})):k.value?(n(),y(m,{key:1},{default:r(()=>[o(h,{cols:"12",class:"text-center py-12"},{default:r(()=>[o(L,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:r(()=>e[2]||(e[2]=[_("mdi-alert-circle-outline")])),_:1}),e[3]||(e[3]=b("h3",{class:"text-h6 text-grey-darken-1"},"Subcategory Not Found",-1)),e[4]||(e[4]=b("p",{class:"text-body-2 text-grey"}," The subcategory you are looking for does not exist or has been removed. ",-1)),o(G,{color:"primary",to:g.value?`/help/${g.value.slug}`:"/help","prepend-icon":"mdi-arrow-left"},{default:r(()=>{var c;return[_(" Return to "+J(((c=g.value)==null?void 0:c.name)||"Help Center"),1)]}),_:1},8,["to"])]),_:1})]),_:1})):f.value?(n(),x(A,{key:2},[o(m,null,{default:r(()=>[o(h,{cols:"12"},{default:r(()=>[o(s,{category:f.value,"parent-category":g.value},null,8,["category","parent-category"])]),_:1})]),_:1}),v.value.length>0?(n(),y(m,{key:0},{default:r(()=>[o(h,{cols:"12",class:"position-relative"},{default:r(()=>[d.value?(n(),x("div",Z,[o(H,{indeterminate:"",size:"36",color:"primary"})])):C("",!0),(n(!0),x(A,null,K(v.value,c=>(n(),y(z,{key:c.id,article:c,onSelect:N,onSubCategoryClicked:D},null,8,["article"]))),128))]),_:1})]),_:1})):C("",!0),((w=V.value)==null?void 0:w.last_page)>1?(n(),y(m,{key:1},{default:r(()=>[o(h,{cols:"12",class:"d-flex justify-center"},{default:r(()=>[o(O,{modelValue:P.value,"onUpdate:modelValue":[e[0]||(e[0]=c=>P.value=c),B],length:V.value.last_page,"total-visible":7,disabled:d.value},null,8,["modelValue","length","disabled"])]),_:1})]),_:1})):C("",!0),!d.value&&v.value.length===0?(n(),y(m,{key:2},{default:r(()=>[o(h,{cols:"12",class:"text-center py-12"},{default:r(()=>[o(L,{size:"64",color:"primary",class:"mb-4"},{default:r(()=>e[5]||(e[5]=[_("mdi-clock-outline")])),_:1}),e[6]||(e[6]=b("h3",{class:"text-h6 text-grey-darken-1"},"We're still adding content",-1)),e[7]||(e[7]=b("p",{class:"text-body-2 text-grey"}," Articles for this subcategory are coming soon. Check back later! ",-1))]),_:1})]),_:1})):C("",!0)],64)):C("",!0)]}),_:1})}}});export{de as default};
