import{_ as P}from"./sCKccXa7.js";import{n as R,k as Y,i as z,j as u,z as V,c as v,l as T,o as f,m as j,p as o,w as i,a as N,b as m,V as _,v as k,y as h,s as c,q as E,C as G,_ as H}from"./CGQimWOm.js";import{V as S}from"./P_q-BwEt.js";import{V as p}from"./CMsVONS5.js";import{V as $}from"./C9TGCd7W.js";import{V as J}from"./CiXMVmI4.js";const K={class:"social-personal-info-form"},Q={class:"d-flex align-center"},W={class:"gender-birthday-fields"},X=R({__name:"SocialPersonalInfoForm",props:{userId:{},socialData:{}},emits:["submit"],setup(D,{emit:C}){const n=D,I=C,w=Y(),F=z(),x=u(null),d=u(!1),s=u(""),y=u(null),q=["Male","Female","Other"],a=V({firstName:"",lastName:"",displayName:"",gender:"",birthday:"",countryId:null}),g=V({hasSubmitted:!1}),U=v(()=>{const e=new Date;return e.setFullYear(e.getFullYear()-18),e.toISOString().split("T")[0]}),b=v(()=>!!(a.firstName&&a.lastName&&a.gender&&a.birthday&&a.countryId)),r={required:e=>!!e||"Required",ageLimit:e=>e?new Date().getFullYear()-new Date(e).getFullYear()>=18||"Must be at least 18 years old":!0},B=e=>({google:"mdi-google",facebook:"mdi-facebook",twitter:"mdi-twitter",instagram:"mdi-instagram",tiktok:"mdi-music-note",linkedin:"mdi-linkedin"})[e]||"mdi-account",A=e=>e.charAt(0).toUpperCase()+e.slice(1),L=e=>{a.countryId=(e==null?void 0:e.id)||null},M=async()=>{try{if(d.value=!0,g.hasSubmitted=!0,s.value="",!b.value){s.value="Please fill in all required fields correctly";return}const e=await F.completeSocialRegistration({user_id:n.userId,first_name:a.firstName,last_name:a.lastName,display_name:a.displayName||null,gender:a.gender,country_id:a.countryId,birthday:a.birthday});I("submit"),e.user&&e.token&&w.push("/")}catch(e){s.value=e.message||"An error occurred during registration"}finally{d.value=!1}};return T(()=>{n.socialData&&(a.firstName=n.socialData.first_name||"",a.lastName=n.socialData.last_name||"")}),(e,t)=>{const O=P;return f(),j("div",K,[o(J,{ref_key:"form",ref:x,onSubmit:G(M,["prevent"]),class:"form-wrapper"},{default:i(()=>[e.socialData?(f(),N(S,{key:0,type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:i(()=>[m("div",Q,[o(_,{icon:B(e.socialData.provider),class:"mr-2"},null,8,["icon"]),m("span",null,"Connected with "+k(A(e.socialData.provider)),1)])]),_:1})):h("",!0),s.value?(f(),N(S,{key:1,type:"error",variant:"tonal",class:"mb-4",density:"compact",border:"",closable:"","onClick:close":t[0]||(t[0]=l=>s.value="")},{default:i(()=>[c(k(s.value),1)]),_:1})):h("",!0),o(p,{modelValue:a.firstName,"onUpdate:modelValue":t[1]||(t[1]=l=>a.firstName=l),label:"First Name",rules:[r.required],variant:"outlined",density:"compact",placeholder:"First name","prepend-inner-icon":"mdi-account",class:"field","hide-details":"auto"},null,8,["modelValue","rules"]),o(p,{modelValue:a.lastName,"onUpdate:modelValue":t[2]||(t[2]=l=>a.lastName=l),label:"Last Name",rules:[r.required],variant:"outlined",density:"compact",placeholder:"Last name",class:"field","hide-details":"auto"},null,8,["modelValue","rules"]),o(p,{modelValue:a.displayName,"onUpdate:modelValue":t[3]||(t[3]=l=>a.displayName=l),variant:"outlined",density:"compact",placeholder:"Choose display name (optional)","prepend-inner-icon":"mdi-account-badge",class:"field","hide-details":"auto"},{label:i(()=>t[7]||(t[7]=[c(" Display Name "),m("span",{class:"optional-label"},"(Optional)",-1)])),_:1},8,["modelValue"]),m("div",W,[o($,{modelValue:a.gender,"onUpdate:modelValue":t[4]||(t[4]=l=>a.gender=l),items:q,label:"Gender",rules:[r.required],variant:"outlined",density:"compact","prepend-inner-icon":"mdi-gender-male-female",class:"field gender-field","hide-details":"auto","menu-props":{maxHeight:200},"no-filter":"","auto-select-first":""},null,8,["modelValue","rules"]),o(p,{modelValue:a.birthday,"onUpdate:modelValue":t[5]||(t[5]=l=>a.birthday=l),label:"Birthday",type:"date",rules:[r.required,r.ageLimit],variant:"outlined",density:"compact",max:U.value,class:"field","hide-details":"auto"},null,8,["modelValue","rules","max"])]),o(O,{modelValue:y.value,"onUpdate:modelValue":t[6]||(t[6]=l=>y.value=l),onCountrySelected:L,rules:[r.required],error:g.hasSubmitted&&!a.countryId,density:"compact",class:"field"},null,8,["modelValue","rules","error"]),o(E,{type:"submit",color:"primary",block:"",loading:d.value,disabled:!b.value||d.value,class:"submit-btn",elevation:"1"},{default:i(()=>[o(_,{left:"",class:"mr-2",size:"small"},{default:i(()=>t[8]||(t[8]=[c("mdi-account-plus")])),_:1}),t[9]||(t[9]=c(" Complete Registration "))]),_:1},8,["loading","disabled"])]),_:1},512)])}}}),se=H(X,[["__scopeId","data-v-7bd3a14d"]]);export{se as _};
