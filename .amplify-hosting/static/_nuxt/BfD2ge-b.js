import{s as me}from"./rtPmyJLL.js";import{_ as X,j as _,c as G,l as J,B as fe,o as d,m as y,F as Z,s,v as i,n as pe,p as t,w as a,b as o,q as C,bH as O,dX as ve,u as _e,k as ge,g as ye,a as q,A as we,V as f,y as R,x as D}from"./CGQimWOm.js";import{_ as he}from"./DPoG3AgV.js";import{u as ee}from"./DMBY-Kaj.js";import{V as z}from"./CRY4crBU.js";import{V as N}from"./CS8xUUzH.js";import{V as te}from"./BhN2__aY.js";import{u as be}from"./BCoct7aH.js";import{V as xe}from"./P_q-BwEt.js";import{V,a as k,b as B,c as Ve}from"./BkTuXOR_.js";import{V as K}from"./xvVMJZi9.js";import{V as Q}from"./GXZRJwQ4.js";import{V as ke}from"./BRveoiXI.js";import{V as $,a as I,b as M}from"./tTgLLTve.js";import{V as Ce}from"./BSH7BhKc.js";import{V as Te,a as L}from"./71zKpFhk.js";import{V as qe}from"./BcH3Kywr.js";const $e={class:"countdown-timer"},Ie={key:1,class:"countdown-value"},Me={__name:"CountdownTimer",props:{endTime:{type:String,required:!0}},emits:["time-expired"],setup(j,{emit:T}){const c=j,w=T,h=_({days:0,hours:0,minutes:0,seconds:0}),m=_(!1),l=_(null),A=G(()=>{const{days:p,hours:g,minutes:u,seconds:v}=h.value;return p>0?`${p}d ${g}h ${u}m ${v}s remaining`:g>0?`${g}h ${u}m ${v}s remaining`:u>0?`${u}m ${v}s remaining`:`${v}s remaining`}),x=()=>{const p=new Date().getTime(),u=new Date(c.endTime).getTime()-p;if(u<=0){m.value=!0,h.value={days:0,hours:0,minutes:0,seconds:0},l.value&&(clearInterval(l.value),w("time-expired"));return}const v=Math.floor(u/(1e3*60*60*24)),F=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),P=Math.floor(u%(1e3*60*60)/(1e3*60)),Y=Math.floor(u%(1e3*60)/1e3);h.value={days:v,hours:F,minutes:P,seconds:Y}};return J(()=>{x(),l.value=me(x,1e3)}),fe(()=>{l.value&&clearInterval(l.value)}),(p,g)=>(d(),y("div",$e,[m.value?(d(),y(Z,{key:0},[s(" Time expired ")],64)):(d(),y("span",Ie,i(A.value),1))]))}},Ae=X(Me,[["__scopeId","data-v-728b6411"]]),Re={class:"contact-footer-wrapper"},De={class:"contact-footer-card"},Ne={class:"contact-footer-content text-center"},je={class:"text-h4 font-weight-bold mb-3"},Fe={class:"text-subtitle-1 text-medium-emphasis mb-6 mx-auto"},Pe={class:"contact-actions d-flex flex-column flex-sm-row justify-center"},Ye=pe({__name:"ContactFooter",props:{title:{default:"Need Help? We're Here For You"},description:{default:"Our dedicated support team is ready to assist you with any questions or concerns you may have."}},setup(j){const T=ee(),c=_(!1),w=async()=>{if(!c.value){c.value=!0;try{await O("/contacts")}catch(m){console.error("Navigation error:",m),T.error("Failed to navigate to contact page")}finally{c.value=!1}}},h=async()=>{if(!c.value){c.value=!0;try{await O("/help")}catch(m){console.error("Navigation error:",m),T.error("Failed to navigate to FAQ page")}finally{c.value=!1}}};return(m,l)=>(d(),y("div",Re,[t(te,null,{default:a(()=>[t(z,{justify:"center"},{default:a(()=>[t(N,{cols:"12",md:"10",lg:"8"},{default:a(()=>[o("div",De,[o("div",Ne,[o("h2",je,i(m.title),1),o("p",Fe,i(m.description),1),o("div",Pe,[t(C,{color:"primary",size:"x-large",class:"px-8","prepend-icon":"mdi-message-text-outline",loading:c.value,disabled:c.value,onClick:w},{default:a(()=>l[0]||(l[0]=[s(" Contact Support ")])),_:1},8,["loading","disabled"]),t(C,{variant:"outlined",size:"x-large",class:"mt-3 mt-sm-0 ms-sm-4 px-6","prepend-icon":"mdi-help-circle-outline",disabled:c.value,onClick:h},{default:a(()=>l[1]||(l[1]=[s(" View help articles ")])),_:1},8,["disabled"])])])])]),_:1})]),_:1})]),_:1})]))}}),Be=X(Ye,[["__scopeId","data-v-66508716"]]),Le={key:0,class:"d-flex justify-center my-10"},ze={key:1,class:"text-center my-10"},Ee={class:"d-flex align-center"},We={class:"text-h6"},Ue={class:"text-body-2"},He={class:"d-flex align-center"},Se={class:"d-flex align-center"},Oe={class:"d-flex flex-column"},Ke={class:"text-h6"},Qe={key:0,class:"text-subtitle-2 font-weight-bold"},Xe={key:1,class:"text-error text-subtitle-2 font-weight-bold"},Ge={class:"d-flex justify-space-between"},Je={class:"text-caption"},Ze={class:"d-flex justify-space-between"},et={class:"text-caption"},tt={class:"d-flex justify-space-between"},at={class:"text-caption"},lt={class:"d-flex align-center"},nt={class:"d-flex align-center"},xt={__name:"WithdrawalRequestDetailPage",setup(j){ve();const T=_e();ge();const{$axios:c}=ye(),w=be(),h=ee(),m=G(()=>T.params.reference),l=_(null),A=_(!0),x=_(null),p=_(!1),g=_(!1),u=_(!1),v=async()=>{var n,e;if(!u.value){A.value=!0,u.value=!0,x.value=null;try{const r=await c.get(`/api/withdrawal-requests/${m.value}`);if(r.data.success)l.value=r.data.data;else throw new Error(r.data.message||"Failed to fetch withdrawal request")}catch(r){x.value=((e=(n=r.response)==null?void 0:n.data)==null?void 0:e.message)||"An error occurred while fetching the withdrawal request",console.error("Error fetching withdrawal request:",r)}finally{A.value=!1,u.value=!1}}},F=()=>{u.value||v()},P=(n,e="USD")=>n==null?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:e||"USD"}).format(n),Y=n=>({pending:"warning",processing:"info",completed:"success",rejected:"error",cancelled:"grey",failed:"error"})[n]||"grey",ae=n=>({pending:"warning-lighten-4",processing:"info-lighten-4",completed:"success-lighten-4",rejected:"error-lighten-4",cancelled:"grey-lighten-4",failed:"error-lighten-4"})[n]||"grey-lighten-4",le=n=>({pending:"mdi-clock-outline",processing:"mdi-sync",completed:"mdi-check-circle",rejected:"mdi-close-circle",cancelled:"mdi-cancel",failed:"mdi-alert-circle"})[n]||"mdi-help-circle",ne=n=>({pending:"Your withdrawal request is awaiting admin approval.",processing:"Your withdrawal request has been approved and is being processed.",completed:"Your withdrawal has been approved and successfully processed.",rejected:"Your withdrawal request has been rejected by admin.",cancelled:"You have cancelled this withdrawal request.",failed:"Your withdrawal request has failed to process."})[n]||"Status information unavailable",oe=n=>{var e;return n?(e=n.payment_method)!=null&&e.name?n.payment_method.name:n.paymentable?n.paymentable.name||"Payment Method":"Unknown":"-"},E=n=>{var e,r;return n?(e=n.payment_method)!=null&&e.logo_url?n.payment_method.logo_url:(r=n.paymentable)!=null&&r.logo_url?n.paymentable.logo_url:null:null},se=n=>{var e;return n&&((e=n.paymentable)==null?void 0:e.type)==="MobileMoneyProvider"?"mdi-cellphone":"mdi-bank"},re=n=>{var e;return n?((e=n.paymentable)==null?void 0:e.type)==="MobileMoneyProvider"?"Mobile Number":"Account Number":"Account"},W=(n,e)=>n==="rejected"||n==="cancelled"?n===e?"error":"grey":n==="completed"&&e==="completed"||n==="completed"&&e==="processing"?"success":n==="processing"&&e==="processing"?"info":"grey",U=(n,e)=>n==="rejected"&&e==="rejected"||n==="cancelled"&&e==="cancelled"?"mdi-close-circle":n==="completed"&&(e==="completed"||e==="processing")||n==="processing"&&e==="processing"?"mdi-check-circle":"mdi-clock-outline",ie=()=>{p.value=!0},ue=async()=>{var n,e;if(l.value){g.value=!0;try{const r=await c.delete(`/api/withdrawal-requests/${l.value.id}`);if(r.data.success)h.success("Withdrawal request cancelled successfully"),p.value=!1,u.value||v();else throw new Error(r.data.message||"Failed to cancel withdrawal request")}catch(r){h.error(((e=(n=r.response)==null?void 0:n.data)==null?void 0:e.message)||"An error occurred while cancelling the withdrawal request"),console.error("Error cancelling withdrawal request:",r)}finally{g.value=!1}}};return J(()=>{setTimeout(()=>{v()},100)}),(n,e)=>{const r=Ae,de=he,ce=Be;return d(),q(te,null,{default:a(()=>[t(z,null,{default:a(()=>[t(N,{cols:"12"},{default:a(()=>[t(de,{title:"Withdrawal Request Details",subtitle:`Reference: ${m.value}`},{action:a(()=>[t(C,{color:"primary",variant:"flat","prepend-icon":"mdi-arrow-left",to:"/wallet/transactions/withdrawal-requests",class:"mr-2"},{default:a(()=>e[2]||(e[2]=[s(" Back to Requests ")])),_:1})]),content:a(()=>[A.value?(d(),y("div",Le,[t(we,{indeterminate:"",color:"primary",size:"64"})])):x.value?(d(),y("div",ze,[t(xe,{type:"error",variant:"tonal"},{default:a(()=>[s(i(x.value),1)]),_:1}),t(C,{color:"primary",class:"mt-4",onClick:F},{default:a(()=>e[3]||(e[3]=[s(" Try Again ")])),_:1})])):l.value?(d(),y(Z,{key:2},[t(V,{class:"mb-6",color:ae(l.value.status),variant:"flat",elevation:"10"},{default:a(()=>[t(k,null,{default:a(()=>[o("div",Ee,[t(K,{color:Y(l.value.status),size:"42",class:"mr-4"},{default:a(()=>[t(f,{icon:le(l.value.status),color:"white"},null,8,["icon"])]),_:1},8,["color"]),o("div",null,[o("div",We,i(l.value.formattedStatus),1),o("div",Ue,i(ne(l.value.status)),1)]),t(Q),l.value.canBeCancelled?(d(),q(C,{key:0,color:"error",variant:"tonal",onClick:ie},{default:a(()=>e[4]||(e[4]=[s(" Cancel Request ")])),_:1})):R("",!0)])]),_:1})]),_:1},8,["color"]),t(z,null,{default:a(()=>[t(N,{cols:"12",md:"6"},{default:a(()=>[t(V,{class:"mb-6",elevation:"10"},{default:a(()=>[t(B,{class:"text-subtitle-1"},{default:a(()=>[t(f,{start:"",icon:"mdi-information-outline",color:"primary"}),e[5]||(e[5]=s(" Request Information "))]),_:1}),t(k,null,{default:a(()=>[t(ke,null,{default:a(()=>[t($,null,{prepend:a(()=>[t(f,{icon:"mdi-identifier"})]),default:a(()=>[t(I,null,{default:a(()=>e[6]||(e[6]=[s("Reference")])),_:1}),t(M,null,{default:a(()=>[s(i(l.value.reference_number),1)]),_:1})]),_:1}),t($,null,{prepend:a(()=>[t(f,{icon:"mdi-calendar"})]),default:a(()=>[t(I,null,{default:a(()=>e[7]||(e[7]=[s("Date")])),_:1}),t(M,null,{default:a(()=>[s(i(D(w).formatLocalDateTime(l.value.created_at)),1)]),_:1})]),_:1}),t($,null,{prepend:a(()=>[t(f,{icon:"mdi-cash"})]),default:a(()=>[t(I,null,{default:a(()=>e[8]||(e[8]=[s("Amount")])),_:1}),t(M,null,{default:a(()=>{var b;return[s(i(P(l.value.amount,(b=l.value.currency)==null?void 0:b.code)),1)]}),_:1})]),_:1}),t($,null,{prepend:a(()=>[t(f,{icon:"mdi-bank"})]),default:a(()=>[t(I,null,{default:a(()=>e[9]||(e[9]=[s("Payment Method")])),_:1}),t(M,null,{default:a(()=>[o("div",He,[E(l.value)?(d(),q(K,{key:0,size:"24",class:"mr-2"},{default:a(()=>[t(Ce,{src:E(l.value)},null,8,["src"])]),_:1})):R("",!0),s(" "+i(oe(l.value)),1)])]),_:1})]),_:1}),t($,null,{prepend:a(()=>[t(f,{icon:se(l.value)},null,8,["icon"])]),default:a(()=>[t(I,null,{default:a(()=>[s(i(re(l.value)),1)]),_:1}),t(M,null,{default:a(()=>[s(i(l.value.account_number),1)]),_:1})]),_:1}),t($,null,{prepend:a(()=>[t(f,{icon:"mdi-account"})]),default:a(()=>[t(I,null,{default:a(()=>e[10]||(e[10]=[s("Account Holder")])),_:1}),t(M,null,{default:a(()=>[s(i(l.value.account_holder_name),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(N,{cols:"12",md:"6"},{default:a(()=>[t(V,{elevation:"10"},{default:a(()=>[t(B,{class:"text-subtitle-1"},{default:a(()=>[t(f,{start:"",icon:"mdi-clock-time-eight-outline",color:"primary"}),e[11]||(e[11]=s(" Estimated Timeline "))]),_:1}),t(k,null,{default:a(()=>{var b,H;return[l.value.timeline&&l.value.status==="pending"?(d(),q(V,{key:0,class:"mb-4",color:"primary",variant:"outlined"},{default:a(()=>[t(k,null,{default:a(()=>{var S;return[o("div",Se,[t(f,{icon:"mdi-clock-outline",class:"mr-2",color:"primary"}),o("div",Oe,[e[12]||(e[12]=o("div",{class:"text-subtitle-1 font-weight-medium"}," Estimated Approval Time ",-1)),o("div",Ke,i(l.value.timeline.formatted_local_time),1),(S=l.value.timeline.remaining)!=null&&S.is_overdue?(d(),y("div",Xe," Approval is taking longer than expected ")):(d(),y("div",Qe,[t(r,{"end-time":l.value.timeline.utc_completion_time},null,8,["end-time"])]))])])]}),_:1})]),_:1})):R("",!0),t(Te,{align:"start"},{default:a(()=>[t(L,{"dot-color":"success",size:"small",icon:"mdi-check-circle"},{default:a(()=>[o("div",Ge,[e[13]||(e[13]=o("div",null,[o("strong",null,"Request Submitted"),o("div",{class:"text-caption"}," Your withdrawal request has been received ")],-1)),o("div",Je,i(D(w).formatLocalDateTime(l.value.created_at)),1)])]),_:1}),t(L,{"dot-color":W(l.value.status,"processing"),size:"small",icon:U(l.value.status,"processing")},{default:a(()=>[o("div",Ze,[e[14]||(e[14]=o("div",null,[o("strong",null,"Admin Review"),o("div",{class:"text-caption"}," Your request is being reviewed by our admin team ")],-1)),o("div",et,i(l.value.processed_at?D(w).formatLocalDateTime(l.value.processed_at):"Pending"),1)])]),_:1},8,["dot-color","icon"]),t(L,{"dot-color":W(l.value.status,"completed"),size:"small",icon:U(l.value.status,"completed")},{default:a(()=>[o("div",tt,[e[15]||(e[15]=o("div",null,[o("strong",null,"Approved & Processed"),o("div",{class:"text-caption"}," Request approved and funds sent to your account ")],-1)),o("div",at,i(l.value.completed_at?D(w).formatLocalDateTime(l.value.completed_at):l.value.timeline?l.value.timeline.formatted_local_time:"Pending"),1)])]),_:1},8,["dot-color","icon"])]),_:1}),l.value.timeline&&!((b=l.value.timeline.remaining)!=null&&b.is_overdue)&&l.value.status==="pending"?(d(),q(V,{key:1,class:"mt-4",variant:"tonal",color:"info"},{default:a(()=>[t(k,null,{default:a(()=>[o("div",lt,[t(f,{icon:"mdi-information",class:"mr-2"}),e[16]||(e[16]=o("div",null," Your request is under review. You will receive an update once admin approves your withdrawal. ",-1))])]),_:1})]),_:1})):l.value.timeline&&((H=l.value.timeline.remaining)!=null&&H.is_overdue)&&l.value.status==="pending"?(d(),q(V,{key:2,class:"mt-4",variant:"tonal",color:"warning"},{default:a(()=>[t(k,null,{default:a(()=>[o("div",nt,[t(f,{icon:"mdi-clock-alert",class:"mr-2"}),e[17]||(e[17]=o("div",null," Admin review is taking longer than expected. Our team has been notified and will review your request as soon as possible. ",-1))])]),_:1})]),_:1})):R("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})],64)):R("",!0)]),_:1},8,["subtitle"])]),_:1})]),_:1}),t(qe,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=b=>p.value=b),"max-width":"400"},{default:a(()=>[t(V,{elevation:"10"},{default:a(()=>[t(B,null,{default:a(()=>e[18]||(e[18]=[s("Cancel Withdrawal Request?")])),_:1}),t(k,null,{default:a(()=>e[19]||(e[19]=[s(" Are you sure you want to cancel this withdrawal request? The funds will be returned to your wallet. ")])),_:1}),t(Ve,null,{default:a(()=>[t(Q),t(C,{color:"grey",variant:"text",onClick:e[0]||(e[0]=b=>p.value=!1)},{default:a(()=>e[20]||(e[20]=[s("No, Keep It")])),_:1}),t(C,{color:"error",loading:g.value,onClick:ue},{default:a(()=>e[21]||(e[21]=[s(" Yes, Cancel ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce)]),_:1})}}};export{xt as _};
