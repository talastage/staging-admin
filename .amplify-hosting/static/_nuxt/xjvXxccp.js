import{_ as x}from"./Cw5ECwNl.js";import{_ as y}from"./Cxb8uY_z.js";import{_ as j}from"./f6uf29Wa.js";import{_ as P}from"./DL649WMo.js";import{g as M,j as p,c as B,t as E,_ as W,aS as N,o as C,a as I,w as h,p as v,b as L,x as m}from"./CGQimWOm.js";import"./3SmzOII5.js";import"./DcSlHAeh.js";import"./BSH7BhKc.js";import"./BeQTM7t9.js";import"./xvVMJZi9.js";import"./BkTuXOR_.js";import"./FspEDv8o.js";import"./f5lwX8SZ.js";import"./Corpgyop.js";import"./BCoct7aH.js";import"./CDtnx0aA.js";import"./DyYnZ78z.js";import"./CRY4crBU.js";/* empty css        */import"./CS8xUUzH.js";import"./BhN2__aY.js";function S(c){const{$axios:f}=M(),t=p([]),o=p(1),a=p(1),s=p(0),r=p(!1),l=async e=>{if(!c.value)throw new Error("Username is required");try{r.value=!0;const n=(await f.get(`/api/user/${c.value}/watching`,{params:{page:e,per_page:12}})).data;e===1?t.value=n.projects||[]:t.value=[...t.value,...n.projects||[]],a.value=n.last_page||1,s.value=n.total||0,o.value=e}catch(i){throw console.error("Error fetching watching projects:",i),i}finally{r.value=!1}},u=B(()=>o.value<a.value),_=async()=>{if(!(!u.value||r.value))try{await l(o.value+1)}catch(e){console.error("Error loading more items:",e)}},d=async()=>{t.value=[],o.value=1,a.value=1,s.value=0;try{await l(1)}catch(e){console.error("Error refreshing data:",e)}},g=()=>{t.value=[],o.value=1,a.value=1,s.value=0,r.value=!1};return E(c,e=>{e&&(g(),d())},{immediate:!0}),{projects:t,isLoading:r,hasMore:u,total:s,currentPage:o,lastPage:a,loadMoreItems:_,refresh:d,reset:g}}const U={class:"user-watching"},$={__name:"UserWatching",props:{username:{type:String,required:!0}},setup(c){const t=N(c,"username"),{projects:o,isLoading:a,hasMore:s,currentPage:r,lastPage:l,loadMoreItems:u}=S(t),_=()=>{s.value&&!a.value&&u()};return(d,g)=>{const e=x,i=y,n=j,w=P;return C(),I(w,null,{default:h(()=>[v(e,{title:"Watching"}),L("div",U,[v(n,{projects:m(o),"current-page":m(r),"last-page":m(l),"is-loading":m(a),title:"Watching",variant:"grid",onLoadMore:_},{"empty-state":h(()=>[v(i,{title:"No Watchings",message:"This user isn't watching any projects yet."})]),_:1},8,["projects","current-page","last-page","is-loading"])])]),_:1})}}},oe=W($,[["__scopeId","data-v-fd2e97d0"]]);export{oe as default};
