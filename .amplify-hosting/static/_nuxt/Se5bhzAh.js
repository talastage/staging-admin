import{u as T}from"./CYM4bMtk.js";import{j as g,a4 as V,l as x,o as p,m,b as l,p as n,w as o,v as c,x as s,q as f,s as i,F as D,D as w,Q as P}from"./CGQimWOm.js";import{V as b}from"./BkTuXOR_.js";import{a as _}from"./DsvAftJq.js";import"./OJq0nmAj.js";import"./xvVMJZi9.js";import"./BSH7BhKc.js";import"./2hEmiBig.js";const B={class:"pa-4"},$={__name:"pusher",setup(F){const{connectionStatus:a,initializePusher:k,subscribeTo:S,disconnect:v}=T(),r=P(),C=g([]),h=g({}),u=t=>{C.value.push({id:Date.now(),timestamp:new Date().toLocaleTimeString(),text:t})},y=()=>{try{const t=S("test-channel");t&&(t.bind("test-event",e=>{u(`Received: ${JSON.stringify(e)}`)}),u("Subscribed to test-channel"))}catch(t){u(`Error: ${t.message}`)}};return V(()=>{h.value={connectionStatus:a.value,pusherKey:r.public.pusherKey,pusherCluster:r.public.pusherCluster,pusherForceTLS:r.public.pusherForceTLS,frontendUrl:r.public.frontendUrl,backendUrl:r.public.backendUrl}}),x(()=>{u("Page loaded")}),(t,e)=>(p(),m("div",B,[e[5]||(e[5]=l("h1",null,"Pusher Connection Test",-1)),n(b,{class:"ma-4 pa-4"},{default:o(()=>[l("h2",null,"Connection Status: "+c(s(a)),1),n(f,{onClick:s(k),disabled:s(a)==="connected",color:"primary",class:"mr-2"},{default:o(()=>e[0]||(e[0]=[i(" Connect to Pusher ")])),_:1},8,["onClick","disabled"]),n(f,{onClick:s(v),disabled:s(a)==="disconnected",color:"error",class:"mr-2"},{default:o(()=>e[1]||(e[1]=[i(" Disconnect ")])),_:1},8,["onClick","disabled"]),n(f,{onClick:y,disabled:s(a)!=="connected",color:"success"},{default:o(()=>e[2]||(e[2]=[i(" Test Channel ")])),_:1},8,["disabled"])]),_:1}),n(b,{class:"ma-4 pa-4"},{default:o(()=>[e[3]||(e[3]=l("h3",null,"Debug Info",-1)),l("pre",null,c(s(h)),1)]),_:1}),n(b,{class:"ma-4 pa-4"},{default:o(()=>[e[4]||(e[4]=l("h3",null,"Messages",-1)),(p(!0),m(D,null,w(s(C),d=>(p(),m("div",{key:d.id,class:"mb-2"},[n(_,null,{default:o(()=>[i(c(d.timestamp),1)]),_:2},1024),i(" "+c(d.text),1)]))),128))]),_:1})]))}};export{$ as default};
