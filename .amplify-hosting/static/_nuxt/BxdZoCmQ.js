import{_ as k}from"./CkOuN04m.js";import{A as L}from"./DnYNupeP.js";import{a as P}from"./hNLxBYxu.js";import{n as B,i as F,j as m,z as A,o as C,a as I,w as d,p as t,b as N,s as p,x as f,q,C as M,_ as U}from"./CGQimWOm.js";import{V as g}from"./CMsVONS5.js";import{V as j}from"./CiXMVmI4.js";const R={class:"d-flex justify-end mb-3"},T=B({__name:"LoginForm",emits:["login-success"],setup($,{emit:_}){const s=F(),n=m(null),r=m(!1),i=m(!1),a=A({email:"",password:""}),w=[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Invalid email format"],x=[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"],v=()=>{r.value=!r.value},y=async()=>{var o;if((o=n.value)!=null&&o.validate()){i.value=!0,s.loginError=null;try{await s.login(a),await s.fetchUser(),V(),u("login-success")}catch(l){console.error("Login error:",l),s.loginError=l.message||"Login failed"}finally{i.value=!1}}},V=()=>{var e;a.email="",a.password="",(e=n.value)==null||e.reset()},u=_,b=e=>{u("login-success")},h=e=>{s.loginError=e};return(e,o)=>{const l=k,E=L,S=P;return C(),I(j,{onSubmit:M(y,["prevent"]),ref_key:"form",ref:n,class:"login-form"},{default:d(()=>[t(g,{modelValue:a.email,"onUpdate:modelValue":o[0]||(o[0]=c=>a.email=c),label:"Email",placeholder:"email@example.com",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-email","persistent-placeholder":!0,"single-line":!0,class:"custom-text-field mb-3",autocomplete:"email",type:"email",name:"email",rules:w},null,8,["modelValue"]),t(g,{modelValue:a.password,"onUpdate:modelValue":o[1]||(o[1]=c=>a.password=c),label:"Password",placeholder:"Enter your password",type:r.value?"text":"password",variant:"outlined",density:"compact","append-inner-icon":r.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":v,"prepend-inner-icon":"mdi-lock","persistent-placeholder":!0,"single-line":!0,class:"custom-text-field mb-3",autocomplete:"current-password",name:"password",rules:x},null,8,["modelValue","type","append-inner-icon"]),N("div",R,[t(l,{to:"/password/reset",class:"text-decoration-none text-caption text-primary forgot-link"},{default:d(()=>o[2]||(o[2]=[p(" Forgot Password? ")])),_:1})]),t(E,{message:f(s).loginError,type:"error",visible:!!f(s).loginError,class:"mb-3"},null,8,["message","visible"]),t(q,{type:"submit",color:"primary",block:"",loading:i.value,class:"text-body-1 login-btn",height:"42"},{default:d(()=>o[3]||(o[3]=[p(" Log In ")])),_:1},8,["loading"]),t(S,{mode:"login",onSocialSuccess:b,onSocialError:h,class:"mt-3"})]),_:1},512)}}}),O=U(T,[["__scopeId","data-v-72a1de7f"]]);export{O as _};
