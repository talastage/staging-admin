import{g as j,u as v,j as n,c as _}from"./CGQimWOm.js";function S(){const{$axios:i}=j(),l=v(),c=n([]),s=n(null),a=n(!1),r=n(null),o=n(!0),m=e=>({pending:"warning",processing:"info",completed:"success",failed:"error",cancelled:"error",refunded:"error"})[e]||"grey",y=e=>({pending:"mdi-clock-outline",processing:"mdi-progress-clock",completed:"mdi-check-circle",failed:"mdi-alert-circle",cancelled:"mdi-cancel",refunded:"mdi-cash-refund"})[e]||"mdi-help-circle",d=e=>({tip:"Tip Payment",project_tip:"Project Tip",project_watching:"Project Purchase",project_premiering:"Project Premiere"})[e]||"Payment",f=e=>({tip:"Tipped User",project_tip:"Tipped Project",project_watching:"Purchased Projects",project_premiering:"Premiering Projects"})[e]||"Details",g=e=>e.charAt(0).toUpperCase()+e.slice(1),P=_(()=>["project_tip","project_watching","project_premiering"]),h=async(e=1)=>{try{a.value=!0;const{data:t}=await i.get("/api/user/payments",{params:{page:e}});e===1?c.value=t.payments.data:c.value=[...c.value,...t.payments.data],o.value=e<t.meta.last_page,r.value=null}catch(t){console.error("Error fetching payments:",t),r.value="Unable to fetch payment history. Please try again later.",o.value=!1}finally{a.value=!1}},p=async e=>{try{a.value=!0,r.value=null;const t=e.toString().replace("payment-",""),{data:u}=await i.get(`/api/user/payments/${t}`);u.success?s.value=u.payment:r.value="Payment not found"}catch(t){console.error("Error fetching payment details:",t),r.value="Unable to fetch payment details. Please try again later.",s.value=null}finally{a.value=!1}};return{payments:c,currentPayment:s,loading:a,error:r,hasMore:o,fetchPayments:h,fetchPaymentDetail:p,initPaymentDetail:()=>{l.params.reference&&p(l.params.reference.toString())},getStatusColor:m,getStatusIcon:y,getPaymentTypeTitle:d,getRecipientTitle:f,formatStatus:g,projectPaymentTypes:P}}export{S as u};
