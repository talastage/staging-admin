import{_ as C}from"./pIdhy95N.js";import{g as B,j as n,n as E,l as F,t as N,o as r,m as v,b as Q,x as u,a as y,w as t,F as k,D as A,p as g,s as _,q as H,v as L}from"./CGQimWOm.js";import{V as b}from"./f5lwX8SZ.js";import{V as x}from"./CS8xUUzH.js";import{V as w}from"./CRY4crBU.js";import{V as P}from"./P_q-BwEt.js";function q(){const{$axios:p}=B(),c=n([]),f=n([]),h=n(""),a=n(!1),o=n([]),d=n(!1),i=n(null);return{categories:c,articles:f,searchQuery:h,loading:a,fetchCategories:async()=>{a.value=!0;try{const s=await p.get("/api/help/categories");c.value=s.data}catch(s){console.error("Error fetching categories:",s)}finally{a.value=!1}},searchArticles:async s=>{a.value=!0;try{const e=await p.get(`/api/help/search?q=${s}`);f.value=e.data}catch(e){console.error("Error searching articles:",e)}finally{a.value=!1}},popularArticles:o,isLoadingPopular:d,popularError:i,fetchPopularArticles:async(s="")=>{d.value=!0,i.value=null;try{const e=await p.get("/api/help/popular",{params:{search:s}});e.data&&e.data.data?o.value=e.data.data:o.value=[]}catch(e){console.error("Failed to fetch popular articles:",e),i.value="Failed to load popular articles"}finally{d.value=!1}}}}const M=E({__name:"HelpPopularArticles",props:{searchQuery:{}},setup(p){const c=p,{popularArticles:f,isLoadingPopular:h,popularError:a,fetchPopularArticles:o}=q();F(()=>{o(c.searchQuery||"")}),N(()=>c.searchQuery,i=>{o(i||"")});function d(){o(c.searchQuery||"")}return(i,l)=>{const V=C;return r(),v("div",null,[l[2]||(l[2]=Q("h2",{class:"text-h5 font-weight-medium mb-4"},"Popular Help Articles",-1)),u(h)?(r(),y(w,{key:0},{default:t(()=>[(r(),v(k,null,A(2,m=>g(x,{key:m,cols:"12",md:"6"},{default:t(()=>[g(b,{type:"article"})]),_:2},1024)),64))]),_:1})):u(a)?(r(),y(P,{key:1,type:"error",variant:"tonal",class:"my-4"},{append:t(()=>[g(H,{color:"error",variant:"text",onClick:d,loading:u(h)},{default:t(()=>l[0]||(l[0]=[_(" Retry ")])),_:1},8,["loading"])]),default:t(()=>[_(L(u(a))+" ",1)]),_:1})):u(f).length?(r(),y(w,{key:2},{default:t(()=>[(r(!0),v(k,null,A(u(f),m=>(r(),y(x,{key:m.id,cols:"12",md:"6"},{default:t(()=>[g(V,{article:m},null,8,["article"])]),_:2},1024))),128))]),_:1})):(r(),y(P,{key:3,type:"info",variant:"tonal",class:"my-4"},{default:t(()=>l[1]||(l[1]=[_(" No popular articles available at the moment. ")])),_:1}))])}}});export{M as _,q as u};
