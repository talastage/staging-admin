import{e0 as f,g as h,e1 as o,bH as s}from"./CGQimWOm.js";import{u as p}from"./M9aAkXy6.js";import{u as w}from"./CiN8dqd8.js";import"./rtPmyJLL.js";const x=f(async(a,d)=>{let t,r;const i=p(),l=w(),{$axios:c}=h(),n=["/wallet/verify-pin","/wallet/activate","/wallet/reset-pin"],u=["/wallet/deposit"];if(!n.includes(a.path)){if(!l.wallet)try{[t,r]=o(()=>l.fetchWallet()),await t,r()}catch(e){console.error("Failed to fetch wallet data:",e)}if(l.wallet&&l.wallet.data.status!=="active")return s("/wallet/activate");if(!u.includes(a.path)&&!i.isAuthenticated)try{if(([t,r]=o(()=>c.get("/api/wallet/auth/check-session")),t=await t,r(),t).data.authenticated)i.setAuthenticated(!0);else return s("/wallet/verify-pin",{query:{redirect:a.fullPath}})}catch(e){return console.error("Failed to check wallet session:",e),s("/wallet/verify-pin",{query:{redirect:a.fullPath}})}}});export{x as default};
