import{B as I}from"./COhe-ksk.js";import{n as M,g as P,i as $,j as u,l as G,o as r,m as p,p as l,w as a,F as R,D as h,a as _,q as b,s as o,v as V,G as L,b as c,V as B,y as Y,_ as D}from"./CGQimWOm.js";import{V as j}from"./CS8xUUzH.js";import{V as q}from"./f5lwX8SZ.js";import{V as H}from"./CRY4crBU.js";import{V as N}from"./P_q-BwEt.js";import{a as J,V as K}from"./DsvAftJq.js";import{V as O}from"./GXZRJwQ4.js";import{V as Q}from"./6HtF_owb.js";import"./BkTuXOR_.js";import"./xvVMJZi9.js";import"./BSH7BhKc.js";import"./BcH3Kywr.js";import"./DJ0NdY24.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./IpAEdaYr.js";/* empty css        */import"./2hEmiBig.js";const W={class:"popular-talent-selector"},X={key:0,class:"loading-container"},Z={key:2,class:"talents-grid"},ee={key:0,class:"confirmation-content"},te={class:"text-center mb-4"},ae={class:"text-body-1"},le=M({__name:"PopularTalentSelector",emits:["talentRegistered","error"],setup(F,{emit:w}){const{$axios:g}=P(),z=$(),k=u(!1),y=u(!1),f=u(null),x=u([]),s=u(null),d=u(null),v=u(!1),C=u(!1),S=w,T=async()=>{var i,e;k.value=!0,f.value=null;try{const t=await g.get("/api/talents/popular");if(t.data.success)x.value=t.data.data;else throw new Error(t.data.message||"Failed to fetch popular talents")}catch(t){console.error("Error fetching popular talents:",t),f.value=((e=(i=t.response)==null?void 0:i.data)==null?void 0:e.message)||t.message||"Failed to load popular talents"}finally{k.value=!1}},E=(i,e)=>{s.value=i,d.value=e,v.value=!0},U=()=>{s.value=null,d.value=null,v.value=!1},A=async()=>{var i,e;if(s.value){y.value=!0;try{const t={talent_category_id:s.value.category_id,talent_id:s.value.id},n=await g.post("/api/user/talent",t);if(n.status===201){const m=n.data.user_talent;z.updateUser({has_talent:"yes",talent:m.name,talent_details:{category:m.category.name,talent:m.name,talent_id:m.talent_id,category_id:m.category_id}}),C.value=!0,v.value=!1,S("talentRegistered",s.value),s.value=null,d.value=null}}catch(t){console.error("Error registering talent:",t);const n=((e=(i=t.response)==null?void 0:i.data)==null?void 0:e.message)||"Failed to register talent";f.value=n,S("error",n)}finally{y.value=!1}}};return G(()=>{T()}),(i,e)=>(r(),p("div",W,[k.value?(r(),p("div",X,[l(H,null,{default:a(()=>[(r(),p(R,null,h(8,t=>l(j,{key:t,cols:"6",sm:"4",md:"3"},{default:a(()=>[l(q,{type:"chip",class:"mb-2"})]),_:2},1024)),64))]),_:1})])):f.value?(r(),_(N,{key:1,type:"error",class:"mb-4"},{append:a(()=>[l(b,{size:"small",variant:"text",onClick:T},{default:a(()=>e[3]||(e[3]=[o(" Retry ")])),_:1})]),default:a(()=>[o(V(f.value)+" ",1)]),_:1})):x.value.length>0?(r(),p("div",Z,[l(K,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),column:"",mandatory:"{false}",class:"talent-chips"},{default:a(()=>[(r(!0),p(R,null,h(x.value,(t,n)=>(r(),_(J,{key:t.id,value:n,variant:"outlined",size:"default",class:L(["talent-chip",{"talent-chip--selected":d.value===n}]),onClick:m=>E(t,n)},{default:a(()=>[o(V(t.name),1)]),_:2},1032,["value","class","onClick"]))),128))]),_:1},8,["modelValue"])])):(r(),_(N,{key:3,type:"info",variant:"tonal"},{default:a(()=>e[4]||(e[4]=[o(" No popular talents available at the moment. ")])),_:1})),l(I,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),title:"Confirm Talent Registration","max-width":"450px"},{actions:a(()=>[l(O),l(b,{variant:"text",onClick:U,disabled:y.value},{default:a(()=>e[11]||(e[11]=[o(" Cancel ")])),_:1},8,["disabled"]),l(b,{color:"primary",variant:"flat",onClick:A,loading:y.value},{default:a(()=>e[12]||(e[12]=[o(" Confirm Registration ")])),_:1},8,["loading"])]),default:a(()=>{var t;return[s.value?(r(),p("div",ee,[c("div",te,[l(B,{size:"48",color:"primary",class:"mb-2"},{default:a(()=>e[5]||(e[5]=[o("mdi-star")])),_:1}),e[9]||(e[9]=c("h3",{class:"text-h6 mb-2"},"Register Your Talent",-1)),c("p",ae,[e[6]||(e[6]=o(" You're about to register ")),c("strong",null,V(s.value.name),1),e[7]||(e[7]=o(" in the ")),c("strong",null,V((t=s.value.category)==null?void 0:t.name),1),e[8]||(e[8]=o(" category. "))]),e[10]||(e[10]=c("p",{class:"text-body-2 text-medium-emphasis mt-2"}," This will be added to your profile and help others discover your skills. ",-1))])])):Y("",!0)]}),_:1},8,["modelValue"]),l(Q,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=t=>C.value=t),color:"success",timeout:"4000",location:"top"},{default:a(()=>[l(B,null,{default:a(()=>e[13]||(e[13]=[o("mdi-check-circle")])),_:1}),e[14]||(e[14]=o(" Talent registered successfully! "))]),_:1},8,["modelValue"])]))}}),oe=D(le,[["__scopeId","data-v-1e02a67d"]]),se={};function re(F,w){const g=oe;return r(),_(g)}const Te=D(se,[["render",re]]);export{Te as default};
