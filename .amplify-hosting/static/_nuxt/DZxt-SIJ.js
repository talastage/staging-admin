import{e0 as y,i as P,e1 as j,bH as c,e2 as m}from"./CGQimWOm.js";import{u as w}from"./istWFD0Z.js";const g=y(async o=>{var n,d,f,l,p,_;let e,s;const u=w(),a=P(),i=`project_creator_${o.params.access_uuid}`;try{if(!((n=a.user)!=null&&n.value))try{[e,s]=j(()=>a.fetchUser()),await e,s()}catch(v){return console.error("Authentication error:",v),c("/login")}const r=m(i,"$yxfnoHWCWn");if(r.value!==void 0)return r.value?void 0:c("/404");let t=u.currentProject;if((!t||t.access_uuid!==o.params.access_uuid)&&(t=([e,s]=j(()=>u.fetchProject(o.params.access_uuid)),e=await e,s(),e)),!t)throw new Error("Project not found");const h=((d=t.creator)==null?void 0:d.id)===((l=(f=a.user)==null?void 0:f.value)==null?void 0:l.id);if(m(i,()=>h),!h)return c("/404")}catch(r){return console.error("Project creator check error:",{error:r,access_uuid:o.params.access_uuid,user:(_=(p=a.user)==null?void 0:p.value)==null?void 0:_.id}),r instanceof Response&&r.status===401?c("/login"):c("/404")}});export{g as default};
