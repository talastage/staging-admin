import{f as w,j as r,c as A,g as y}from"./CGQimWOm.js";const N=w("apps",()=>{const e=r(null),i=r(!1),p=r(null),c=r(0),n=r(null),u="talastageApp",v="1.1",m=1*60*60*1e3,d=5*60*1e3,C=A(()=>e.value?{title:e.value.name||"TalaStage",description:e.value.seo_description||"Connecting talents across the globe with opportunities to shine and thrive âœ¨",keywords:e.value.meta_keywords||"",image:e.value.thumbnail_url||e.value.logo_url||"https://talastage.com/app-logo.png",canonical:e.value.canonical_url||"https://talastage.com",schemaMarkup:e.value.schema_markup||null}:null),D=a=>a.version===v&&Date.now()-a.timestamp<m,h=()=>{try{{const a=localStorage.getItem(u);if(!a)return null;const s=JSON.parse(a);return D(s)?s:null}return null}catch(a){return console.error("Cache parsing error:",a),localStorage.removeItem(u),null}},S=(a,s)=>{try{{const l={data:a,timestamp:Date.now(),version:v,etag:s};localStorage.setItem(u,JSON.stringify(l))}}catch(l){console.error("Cache setting error:",l)}};async function f(a=!1){const{$axios:s}=y(),l=Date.now()-c.value>d;if(!a&&!l){const t=h();if(t){e.value=t.data,n.value=t.etag||null;return}}i.value=!0,p.value=null;try{const t={"Cache-Control":"no-cache",Pragma:"no-cache"};n.value&&(t["If-None-Match"]=n.value);const o=await s.get("/api/apps/talastage",{headers:t}),g=o.headers.etag;e.value=o.data,S(o.data,g),c.value=Date.now(),g&&(n.value=g)}catch(t){if(t.response&&t.response.status===304){const o=h();o&&(e.value=o.data,c.value=Date.now())}else{p.value=t.message;const o=h();o&&!e.value&&(e.value=o.data)}}finally{i.value=!1}}function E(){localStorage.removeItem(u),e.value=null,c.value=0,n.value=null}async function _(){await f(!0)}return{talastageApp:e,loading:i,error:p,seoData:C,fetchTalaStageApp:f,clearCache:E,refreshData:_}});export{N as u};
