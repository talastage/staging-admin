import{_ as De}from"./DSMnxYIt.js";import{_ as Ie}from"./Bem91KZK.js";import{B as Ne}from"./COhe-ksk.js";import{_ as qe}from"./CYmCD8gk.js";import{c as A,_ as ae,g as oe,i as ie,j as v,t as W,l as ye,o as k,m as T,b as _,p as e,v as N,w as a,s as w,q as F,x as H,y as j,n as ne,z as se,a as L,A as _e,f as we,B as be,V as X,C as he,F as ee,D as re,E as ze,G as Ve,H as Te,r as Me,I as Be}from"./CGQimWOm.js";import{u as Fe}from"./Bz9a9m5j.js";import{V as Z}from"./CMsVONS5.js";import{u as Ce}from"./DMBY-Kaj.js";import{V as ue}from"./CiXMVmI4.js";import{V as de}from"./CRY4crBU.js";import{V as le}from"./CS8xUUzH.js";import{V as Oe}from"./DJ0NdY24.js";import{V as ce}from"./BhN2__aY.js";import{_ as Re}from"./CkOuN04m.js";import{V as je}from"./2hEmiBig.js";import{b as me,a as Q,V as K,c as ke}from"./BkTuXOR_.js";import{V as xe}from"./BvtSni_j.js";import{V as Le,a as Se}from"./DsvAftJq.js";import{V as Pe}from"./BcH3Kywr.js";import{V as Ye}from"./DX-6Wr-O.js";import{V as Je}from"./P_q-BwEt.js";import{V as Ue}from"./GXZRJwQ4.js";import{V as Ze}from"./6HtF_owb.js";import{_ as Ge}from"./8BkkiHqN.js";import{V as Ee}from"./BRveoiXI.js";import{V as $e,a as Ae}from"./tTgLLTve.js";import{V as We,a as He}from"./D9lJKT5N.js";import{u as Ke}from"./BW5EWlXk.js";import{u as Qe}from"./D78L5r-E.js";import"./DVrR1Kw7.js";import"./OJq0nmAj.js";import"./BSH7BhKc.js";import"./xvVMJZi9.js";import"./BRpmYQkE.js";import"./CE0NNlNx.js";import"./C-73ZGdz.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";/* empty css        */import"./IpAEdaYr.js";import"./DMnQvTR4.js";import"./Rg_xdRgE.js";import"./C9TGCd7W.js";import"./DbQnG3uQ.js";import"./CW50LM9V.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./DjbnUXUR.js";import"./DXm3zw6l.js";import"./DoIi4J9g.js";import"./Zmmmyk0F.js";import"./DPoG3AgV.js";import"./Cxb8uY_z.js";import"./f5lwX8SZ.js";import"./Dn0bXcU5.js";function Xe(D,o){const n=t=>!!t||"Required.",g=t=>/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(t)||"Invalid email.",u=t=>/^[0-9]{10,15}$/.test(t)||"Invalid phone number.",l=t=>s=>s.length>=t||`Minimum length is ${t} characters.`,f=t=>s=>s.length<=t||`Maximum length is ${t} characters.`,r=t=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*#?&]).{8,}$/.test(t)||"Password must include upper, lower, number, and special character.",d=t=>s=>s===t||"Passwords do not match.",b=t=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/.test(t)||"Invalid URL.",m=t=>/^[0-9]*$/.test(t)||"Only numbers are allowed.",S=t=>/^[A-Za-z]+$/.test(t)||"Only alphabetic characters are allowed.",x=t=>/^[A-Za-z0-9]+$/.test(t)||"Only alphanumeric characters are allowed.",h=(t,s)=>$=>t.test($)||s,V=t=>/^\d{4}-\d{2}-\d{2}$/.test(t)||"Invalid date. Format should be YYYY-MM-DD.",i=t=>/^[a-zA-Z0-9_]+$/.test(t)||"Username can only contain letters, numbers, and underscores.",U=A(()=>[t=>n(t),t=>m(t),t=>t>0||"Amount must be greater than 0",t=>t<=0||"Insufficient balance"]),E=A(()=>U.value.every(t=>t(D.value)===!0));return{required:n,email:g,phone:u,minLength:l,maxLength:f,passwordStrength:r,matchPassword:d,url:b,numeric:m,alpha:S,alphanumeric:x,customPattern:h,date:V,amountRules:U,isValid:E,username:i}}const ea={class:"user-profile-settings-card mb-3"},aa={class:"profile-section"},ta={class:"profile-info"},sa={class:"user-details"},ra={key:0,class:"warning-text"},la={key:1,class:"info-text"},oa={key:2,class:"success-text"},na={key:3,class:"error-text"},ia={__name:"UserProfileSettingsCard",setup(D){const{$axios:o,$toast:n}=oe(),g=ie(),{required:u,username:l}=Xe(),{debounce:f}=Fe(),r=A(()=>{var C;return(C=g.user)==null?void 0:C.value}),d=v(!1),b=v(!1),m=v(""),S=v(!1),x=v([]),h=v(null),V=v(!1),i=A(()=>`www.talaconnect.com/@${r.value.username}`),U=A(()=>m.value&&l(m.value)===!0),E=()=>{r.value.can_change_username&&(m.value=r.value.username,h.value=null,x.value=[],d.value=!0)},s=f(async()=>{var C,p;if(!U.value||m.value===r.value.username){h.value=null;return}V.value=!0,h.value=null;try{const q=await o.get(`/api/user/check-username/${m.value}`);h.value=q.data.available}catch(q){console.error("Error checking username:",q),h.value=!1,(p=(C=q.response)==null?void 0:C.data)!=null&&p.errors&&(x.value=Object.values(q.response.data.errors).flat())}finally{V.value=!1}},300),$=()=>{x.value=[],h.value=null,m.value!==r.value.username&&U.value&&s()},I=()=>{!U.value||!r.value.can_change_username||!h.value||m.value===r.value.username||(b.value=!0)},B=async()=>{var C,p,q,P,O,Y,R,J;S.value=!0,x.value=[];try{const M=await o.post("/api/user/change-username",{username:m.value});M.data&&M.data.username&&(g.updateUsername(M.data.username),n.success(M.data.message||"Username changed successfully!"),d.value=!1,b.value=!1,h.value=null,x.value=[])}catch(M){console.error("Username change error:",M),(p=(C=M.response)==null?void 0:C.data)!=null&&p.errors?x.value=Object.values(M.response.data.errors).flat():(P=(q=M.response)==null?void 0:q.data)!=null&&P.error?x.value=[M.response.data.error]:x.value=["An error occurred while changing the username."];const te=((Y=(O=M.response)==null?void 0:O.data)==null?void 0:Y.message)||((J=(R=M.response)==null?void 0:R.data)==null?void 0:J.error)||"Failed to change username. Please try again.";n.error(te)}finally{S.value=!1}};return W(m,C=>{C!==r.value.username&&(h.value=null)}),ye(()=>{r.value||g.fetchUser()}),(C,p)=>{const q=De,P=Ie,O=Ne,Y=qe;return k(),T("div",ea,[_("div",aa,[_("div",ta,[e(q,{user:r.value},null,8,["user"]),_("div",sa,[_("h3",null,"@"+N(r.value.username),1),_("p",null,N(i.value),1)])]),e(F,{onClick:E,color:"primary",disabled:!r.value.can_change_username},{default:a(()=>p[3]||(p[3]=[w(" Change Username ")])),_:1},8,["disabled"])]),e(O,{modelValue:d.value,"onUpdate:modelValue":p[1]||(p[1]=R=>d.value=R),title:"Change Username","max-width":"400px"},{actions:a(()=>[e(P,{title:"Save",onClick:I,disabled:!U.value||!r.value.can_change_username||!h.value,loading:S.value,color:"primary","full-width":""},null,8,["disabled","loading"])]),default:a(()=>[e(Z,{modelValue:m.value,"onUpdate:modelValue":p[0]||(p[0]=R=>m.value=R),label:"New Username","error-messages":x.value,disabled:!r.value.can_change_username,rules:[H(u),H(l)],onInput:$},null,8,["modelValue","error-messages","disabled","rules"]),r.value.can_change_username?j("",!0):(k(),T("p",ra," Your username can be changed once every 30 days. You can change it again after "+N(r.value.next_username_change_date)+". ",1)),V.value?(k(),T("p",la," Checking username availability... ")):h.value?(k(),T("p",oa,"Username is available!")):h.value===!1?(k(),T("p",na," Username is not available. ")):j("",!0)]),_:1},8,["modelValue"]),e(Y,{modelValue:b.value,"onUpdate:modelValue":p[2]||(p[2]=R=>b.value=R),title:"Confirm Username Change",onConfirm:B},{default:a(()=>[_("p",null," Are you sure you want to change your username to @"+N(m.value)+"? ",1)]),_:1},8,["modelValue"])])}}},ua=ae(ia,[["__scopeId","data-v-33f39908"]]),da=ne({__name:"PersonalDetailSettings",setup(D){const o=v(!0),n=v(!1),g=v(!1),u=se({id:0,first_name:"",last_name:"",display_name:"",birthday:"",gender:"",phone:"",username:"",profile_photo:"",last_username_change:""}),l=se({...u}),f=["January","February","March","April","May","June","July","August","September","October","November","December"];Array.from({length:31},(t,s)=>s+1),Array.from({length:100},(t,s)=>new Date().getFullYear()-s);function r(t){const s=new Date(t);return{month:f[s.getMonth()],day:s.getDate(),year:s.getFullYear()}}function d(t,s,$){const I=f.indexOf(s);l.birthday=`${t}-${I+1}-${$}`}const b=new Date().toISOString(),m=se(r(b)),S=[t=>!!t||"Name is required"],x=[t=>!!t||"Display name is required"],h=A(()=>JSON.stringify(l)!==JSON.stringify(u));W([h,o],()=>{g.value=h.value&&o.value},{immediate:!0}),W(()=>m.month,t=>d(m.year,t,m.day)),W(()=>m.day,t=>d(m.year,m.month,t)),W(()=>m.year,t=>d(t,m.month,m.day));const{$axios:V}=oe(),i=Ce();ye(async()=>{var t,s;n.value=!0;try{await V.get("/sanctum/csrf-cookie",{withCredentials:!0});const{data:$}=await V.get("/api/user/personal-details",{withCredentials:!0});if($&&$.personalDetails){Object.assign(u,$.personalDetails),Object.assign(l,$.personalDetails);const I=l.birthday||b;Object.assign(m,r(I))}else i.error("Invalid data received from the server.")}catch($){i.error(((s=(t=$.response)==null?void 0:t.data)==null?void 0:s.message)||$.message||"Failed to load user details.")}finally{n.value=!1}});async function U(){var t,s,$,I;if(!(!o.value||!g.value)){n.value=!0;try{await V.get("/sanctum/csrf-cookie",{withCredentials:!0});const{data:B}=await V.put("/api/user/personal-details",l,{withCredentials:!0});Object.assign(u,l),g.value=!1,i.success((B==null?void 0:B.message)||"Personal details updated successfully.")}catch(B){if((s=(t=B.response)==null?void 0:t.data)!=null&&s.errors){const C=Object.values(B.response.data.errors).join(", ");i.error(C)}else i.error(((I=($=B.response)==null?void 0:$.data)==null?void 0:I.error)||B.message||"Failed to save user details.")}finally{n.value=!1}}}function E(){Object.assign(l,u),Object.assign(m,r(l.birthday)),g.value=!1}return(t,s)=>{const $=ua;return k(),L(ce,null,{default:a(()=>[e($),e(ue,{ref:"form",modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=I=>o.value=I),"lazy-validation":""},{default:a(()=>[e(Z,{modelValue:l.first_name,"onUpdate:modelValue":s[0]||(s[0]=I=>l.first_name=I),rules:S,label:"First Name",required:"",outlined:"",color:"primary"},null,8,["modelValue"]),e(Z,{modelValue:l.last_name,"onUpdate:modelValue":s[1]||(s[1]=I=>l.last_name=I),rules:S,label:"Last Name",required:"",outlined:"",color:"primary"},null,8,["modelValue"]),e(Z,{modelValue:l.display_name,"onUpdate:modelValue":s[2]||(s[2]=I=>l.display_name=I),rules:x,label:"Display Name",required:"",outlined:"",color:"primary"},null,8,["modelValue"]),e(de,null,{default:a(()=>[e(le,null,{default:a(()=>[e(F,{color:"primary",class:"mr-3",onClick:U,disabled:!g.value||n.value,flat:""},{default:a(()=>s[4]||(s[4]=[w(" Save Changes ")])),_:1},8,["disabled"]),e(F,{color:"error",onClick:E,flat:""},{default:a(()=>s[5]||(s[5]=[w("Cancel")])),_:1})]),_:1})]),_:1}),e(Oe,{value:n.value},{default:a(()=>[e(_e,{indeterminate:"",size:"64"})]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1})}}}),ca=we("passwordChange",()=>{const{$axios:D}=oe();return{changePassword:async(n,g,u)=>{try{return(await D.put("/auth/change-password",{current_password:n,new_password:g,confirm_password:u})).data}catch(l){throw l}}}});function ma(D){const o=A(()=>/[A-Z]/.test(D.value)),n=A(()=>/[a-z]/.test(D.value)),g=A(()=>/[0-9]/.test(D.value)),u=A(()=>/[@$!%*#?&]/.test(D.value)),l=A(()=>D.value.length>=8),f=A(()=>[{label:"Uppercase",passes:o.value},{label:"Lowercase",passes:n.value},{label:"Number",passes:g.value},{label:"Special",passes:u.value},{label:"8+ chars",passes:l.value}]),r=A(()=>f.value.every(d=>d.passes));return{passwordChecks:f,meetsAllRequirements:r,hasUpperCase:o,hasLowerCase:n,hasNumber:g,hasSpecialChar:u,isLongEnough:l}}const pa={key:0,class:"mt-3"},va={class:"d-flex gap-4 mt-6"},fa=ne({__name:"PasswordAndSecuritySettings",setup(D){const o=ca(),n=Ce(),g=v(null),u=v(!1),l=v(!1),f=v(""),r=v(""),d=v(""),b=v(""),m=v(""),S=v(""),x=v(!1),h=v(!1),V=v(!1),{passwordChecks:i,meetsAllRequirements:U}=ma(r),E={required:C=>!!C||"This field is required",passwordStrength:C=>U.value||"Password must meet all requirements",passwordMatch:C=>C===r.value||"Passwords do not match"},t=C=>{switch(C){case"current":x.value=!x.value;break;case"new":h.value=!h.value;break;case"confirm":V.value=!V.value;break}},s=()=>{b.value="",m.value="",S.value=""},$=()=>{g.value&&g.value.reset(),f.value="",r.value="",d.value="",s()},I=async()=>{if(u.value){l.value=!0,s();try{await o.changePassword(f.value,r.value,d.value),n.success("Password updated successfully"),$()}catch(C){B(C)}finally{l.value=!1}}},B=C=>{if(C.response){const{status:p,data:q}=C.response;if(p===422&&q.errors){s(),Object.entries(q.errors).forEach(([P,O])=>{const Y=Array.isArray(O)?O[0]:O;switch(P){case"current_password":b.value=Y;break;case"new_password":m.value=Y;break;case"confirm_password":S.value=Y;break}}),n.error(q.message||"Please check the form for errors");return}switch(p){case 401:b.value="Current password is incorrect",n.error("Current password is incorrect");break;case 403:n.error("You are not authorized to perform this action");break;case 429:n.error("Too many attempts. Please wait a moment before trying again");break;case 500:n.error("An unexpected error occurred. Please try again later");break;default:n.error(q.message||"An unexpected error occurred. Please try again later")}}else C.request?n.error("Network error. Please check your connection and try again"):n.error("An unexpected error occurred. Please try again later")};return W(f,()=>{b.value=""}),W(r,()=>{m.value="",d.value&&(d.value="")}),W(d,()=>{S.value=""}),be(()=>{$()}),(C,p)=>{const q=Re;return k(),L(K,{class:"elevation-1"},{default:a(()=>[e(me,{class:"d-flex align-center py-4 px-6"},{default:a(()=>[e(X,{icon:"mdi-shield-lock",class:"me-2"}),p[7]||(p[7]=w(" Password & Security "))]),_:1}),e(xe),e(Q,{class:"pa-6"},{default:a(()=>[e(ue,{ref_key:"form",ref:g,modelValue:u.value,"onUpdate:modelValue":p[6]||(p[6]=P=>u.value=P),onSubmit:he(I,["prevent"])},{default:a(()=>[e(de,null,{default:a(()=>[e(le,{cols:"12",md:"8"},{default:a(()=>[e(Z,{modelValue:f.value,"onUpdate:modelValue":p[0]||(p[0]=P=>f.value=P),type:x.value?"text":"password",label:"Current Password",placeholder:"Enter your current password",rules:[E.required],"error-messages":b.value,variant:"outlined","append-inner-icon":x.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":p[1]||(p[1]=P=>t("current")),onInput:s,"prepend-inner-icon":"mdi-lock",density:"comfortable"},null,8,["modelValue","type","rules","error-messages","append-inner-icon"]),e(Z,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=P=>r.value=P),type:h.value?"text":"password",label:"New Password",placeholder:"Enter your new password",rules:[E.required,E.passwordStrength],"error-messages":m.value,variant:"outlined","append-inner-icon":h.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":p[3]||(p[3]=P=>t("new")),onInput:s,"prepend-inner-icon":"mdi-lock-plus",density:"comfortable"},null,8,["modelValue","type","rules","error-messages","append-inner-icon"]),e(Z,{modelValue:d.value,"onUpdate:modelValue":p[4]||(p[4]=P=>d.value=P),type:V.value?"text":"password",label:"Confirm New Password",placeholder:"Confirm your new password",rules:[E.required,E.passwordMatch],"error-messages":S.value,variant:"outlined","append-inner-icon":V.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":p[5]||(p[5]=P=>t("confirm")),onInput:s,"prepend-inner-icon":"mdi-lock-check",density:"comfortable"},null,8,["modelValue","type","rules","error-messages","append-inner-icon"]),e(je,null,{default:a(()=>[r.value?(k(),T("div",pa,[p[8]||(p[8]=_("p",{class:"text-caption text-medium-emphasis mb-2"}," Password requirements: ",-1)),e(Le,null,{default:a(()=>[(k(!0),T(ee,null,re(H(i),(P,O)=>(k(),L(Se,{key:O,size:"small",color:P.passes?"success":"error",variant:"tonal",density:"comfortable"},{prepend:a(()=>[e(X,{icon:P.passes?"mdi-check-circle":"mdi-alert-circle",size:"small"},null,8,["icon"])]),default:a(()=>[w(" "+N(P.label),1)]),_:2},1032,["color"]))),128))]),_:1})])):j("",!0)]),_:1}),_("div",va,[e(F,{type:"submit",color:"primary",size:"large",loading:l.value,disabled:!u.value||l.value,"min-width":"150"},{default:a(()=>p[9]||(p[9]=[w(" Update Password ")])),_:1},8,["loading","disabled"]),e(q,{to:"/password/reset",style:{"text-decoration":"none"}},{default:a(()=>[e(F,{color:"secondary",size:"large","min-width":"150"},{default:a(()=>p[10]||(p[10]=[w(" Forgot Password? ")])),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),ga=ae(fa,[["__scopeId","data-v-08c3660a"]]),ya=we("emailVerification",()=>{const{$axios:D}=oe(),o=se({isProcessing:!1,verificationStep:"idle",error:null}),n=async r=>{o.isProcessing=!0,o.error=null,o.verificationStep="sending";try{const d=await D.post("/auth/email/send-verification",{email:r});return o.verificationStep="codeSent",d.data}catch(d){throw o.verificationStep="idle",l(d),d}finally{o.isProcessing=!1}},g=async(r,d)=>{o.isProcessing=!0,o.error=null;try{const b=await D.post("/auth/email/verify-current",{email:r,code:d});return o.verificationStep="completed",b.data}catch(b){throw l(b),b}finally{o.isProcessing=!1}},u=async r=>{o.isProcessing=!0,o.error=null;try{const d=await D.post("/auth/email/update",{email:r});return o.verificationStep="completed",d.data}catch(d){throw l(d),d}finally{o.isProcessing=!1}},l=r=>{var d,b;console.error("API Error:",r.response||r),o.error=((b=(d=r.response)==null?void 0:d.data)==null?void 0:b.message)||"An unexpected error occurred"},f=()=>{o.verificationStep="idle",o.error=null};return{state:ze(o),sendVerificationCode:n,verifyCurrentEmail:g,updateEmail:u,resetState:f}}),_a={class:"d-flex align-center justify-space-between"},wa={class:"text-body-1"},ba={class:"text-body-2 mb-4"},ha={key:0,class:"d-flex align-center mt-2"},Va={key:1,class:"mt-2"},Ca={__name:"EmailSettings",setup(D){const o=ya(),n=ie(),g=v(null),u=v(!1),l=v(!0),f=v(!1),r=v("verify"),d=v(!1),b=v(""),m=v(""),S=v(""),x=v(""),h=v(""),V=v(""),i=v(""),U=A(()=>{var y;return(y=n.user)==null?void 0:y.email}),E=A(()=>{var y;return(y=n.user)==null?void 0:y.email_verified_at}),t=A(()=>E.value?"success":"warning"),s=A(()=>o.state.isProcessing),$=A(()=>{switch(r.value){case"verify":return"Verify Current Email";case"newEmail":return"Enter New Email";default:return"Change Email Address"}}),I=A(()=>{switch(r.value){case"verify":return"Verify";case"newEmail":return"Update Email";default:return"Continue"}}),B=[y=>!!y||"Email is required",y=>/.+@.+\..+/.test(y)||"Please enter a valid email address",y=>y!==U.value||"New email must be different from current email",y=>y.length<=255||"Email must not exceed 255 characters"],C=[y=>!!y||"Please confirm your email",y=>y===S.value||"Email addresses do not match"],p=async()=>{try{u.value=!0,r.value="verify",J(),f.value=!0,await o.sendVerificationCode(U.value),O("Verification code sent to your current email")}catch(y){P(y),u.value=!1}finally{f.value=!1}},q=async()=>{var y;try{if(!await((y=g.value)==null?void 0:y.validate()))return;if(J(),r.value==="verify")await o.verifyCurrentEmail(U.value,m.value),r.value="newEmail",M();else if(r.value==="newEmail"){const z=await o.updateEmail(S.value);z.user&&n.updateUser(z.user),Y()}}catch(c){P(c)}},P=y=>{var c,z,pe,ve,fe,ge;if(console.error("Component Error:",y.response||y),(z=(c=y.response)==null?void 0:c.data)!=null&&z.errors){const G=y.response.data.errors;G.email&&(h.value=Array.isArray(G.email)?G.email[0]:G.email),G.code&&(V.value=Array.isArray(G.code)?G.code[0]:G.code,i.value=V.value)}else(ve=(pe=y.response)==null?void 0:pe.data)!=null&&ve.message&&!((ge=(fe=y.response)==null?void 0:fe.data)!=null&&ge.errors)?i.value=y.response.data.message:i.value="An unexpected error occurred. Please try again."},O=y=>{b.value=y,d.value=!0},Y=()=>{u.value=!1,te(),O("Email updated successfully")},R=()=>{s.value||(u.value=!1,te())},J=()=>{var y;h.value="",V.value="",i.value="",(y=g.value)==null||y.resetValidation()},M=()=>{m.value="",S.value="",x.value="",J()},te=()=>{M(),r.value="verify",l.value=!0,o.resetState()};return be(()=>{te()}),(y,c)=>(k(),L(ce,null,{default:a(()=>[c[18]||(c[18]=_("div",{class:"mb-6"},[_("h2",{class:"text-h6 mb-2"},"Email Address"),_("p",{class:"text-body-2 text-medium-emphasis"}," Manage your email address. This email is used for account security and notifications. ")],-1)),e(K,{class:"mb-6",variant:"outlined"},{default:a(()=>[e(Q,null,{default:a(()=>[_("div",_a,[_("div",null,[c[7]||(c[7]=_("div",{class:"text-subtitle-2 mb-1"},"Current Email",-1)),_("div",wa,N(U.value),1),_("div",{class:Ve(["text-caption",t.value])},[e(X,{color:t.value,size:"small",class:"mr-1"},{default:a(()=>[w(N(E.value?"mdi-check-circle":"mdi-alert-circle"),1)]),_:1},8,["color"]),w(" "+N(E.value?"Verified":"Not verified"),1)],2)]),e(F,{color:"primary",variant:"tonal",onClick:p},{default:a(()=>c[8]||(c[8]=[w(" Change Email ")])),_:1})])]),_:1})]),_:1}),e(Pe,{modelValue:u.value,"onUpdate:modelValue":c[5]||(c[5]=z=>u.value=z),"max-width":"500",persistent:""},{default:a(()=>[e(K,null,{default:a(()=>[e(me,{class:"text-h6 pa-4"},{default:a(()=>[w(N($.value)+" ",1),e(F,{icon:"",variant:"text",onClick:R,class:"float-right",disabled:s.value},{default:a(()=>[e(X,null,{default:a(()=>c[9]||(c[9]=[w("mdi-close")])),_:1})]),_:1},8,["disabled"])]),_:1}),e(xe),e(Q,{class:"pa-4"},{default:a(()=>[e(ue,{ref_key:"form",ref:g,modelValue:l.value,"onUpdate:modelValue":c[4]||(c[4]=z=>l.value=z),onSubmit:he(q,["prevent"]),"lazy-validation":""},{default:a(()=>[r.value==="verify"?(k(),T(ee,{key:0},[_("div",ba,[c[13]||(c[13]=w(" To change your email address, first verify your current email. ")),f.value?(k(),T("div",ha,[e(_e,{indeterminate:"",size:"20",width:"2",color:"primary",class:"mr-2"}),_("span",null,[c[10]||(c[10]=w("Sending verification code to ")),_("strong",null,N(U.value),1),c[11]||(c[11]=w("..."))])])):(k(),T("div",Va,[c[12]||(c[12]=w(" We've sent a verification code to ")),_("strong",null,N(U.value),1)]))]),!f.value&&H(o).state.verificationStep==="codeSent"?(k(),L(Ye,{key:0,modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=z=>m.value=z),length:6,type:"number","error-messages":V.value,onInput:J,class:"mb-4"},null,8,["modelValue","error-messages"])):j("",!0)],64)):j("",!0),r.value==="newEmail"?(k(),T(ee,{key:1},[c[16]||(c[16]=_("div",{class:"text-body-2 mb-4"}," Enter your new email address. Make sure to enter it correctly. ",-1)),e(Z,{modelValue:S.value,"onUpdate:modelValue":c[1]||(c[1]=z=>S.value=z),type:"email",rules:B,"error-messages":h.value,variant:"outlined",required:"","validate-on":"blur",onInput:J,class:"mb-4","hide-details":"auto","persistent-placeholder":""},{label:a(()=>c[14]||(c[14]=[_("span",{class:"text-no-wrap"},"New Email Address",-1)])),_:1},8,["modelValue","error-messages"]),e(Z,{modelValue:x.value,"onUpdate:modelValue":c[2]||(c[2]=z=>x.value=z),type:"email",rules:C,variant:"outlined",required:"","validate-on":"blur",onInput:J,class:"mb-4","hide-details":"auto","persistent-placeholder":""},{label:a(()=>c[15]||(c[15]=[_("span",{class:"text-no-wrap"},"Confirm New Email Address",-1)])),_:1},8,["modelValue"])],64)):j("",!0),i.value?(k(),L(Je,{key:2,type:"error",variant:"tonal",class:"mt-4",closable:"","onClick:close":c[3]||(c[3]=z=>i.value="")},{default:a(()=>[w(N(i.value),1)]),_:1})):j("",!0),e(ke,{class:"pa-0 mt-6"},{default:a(()=>[e(Ue),e(F,{variant:"tonal",onClick:R,disabled:s.value},{default:a(()=>c[17]||(c[17]=[w(" Cancel ")])),_:1},8,["disabled"]),e(F,{color:"primary",type:"submit",loading:s.value,disabled:!l.value||s.value},{default:a(()=>[w(N(I.value),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Ze,{modelValue:d.value,"onUpdate:modelValue":c[6]||(c[6]=z=>d.value=z),color:"success",timeout:"3000"},{default:a(()=>[w(N(b.value),1)]),_:1},8,["modelValue"])]),_:1}))}},ka=ae(Ca,[["__scopeId","data-v-3deb8c25"]]),xa={class:"talent-settings"},Sa={class:"d-flex align-center mb-4"},Pa={class:"text-h6 mb-1"},Ua={class:"text-body-2 text-medium-emphasis mb-0"},Ea={key:0,class:"current-creator mb-4"},$a={class:"creator-actions"},Aa={class:"text-h6 mb-3 d-flex align-center"},Da=ne({__name:"TalentSettings",setup(D){const o=ie(),n=v(!1),g=v(!1),u=v("create"),l=A(()=>{var V;return((V=o.user)==null?void 0:V.has_talent)==="yes"}),f=A(()=>{var V,i,U;return((i=(V=o.user)==null?void 0:V.talent_details)==null?void 0:i.talent)||((U=o.user)==null?void 0:U.talent)||""}),r=A(()=>l.value?`You're verified as a ${f.value}`:"Become a creator to access exclusive features and opportunities"),d=["Create and manage entertainment projects","Receive bookings and collaboration requests","Get tips and donations from fans","Access to creator-specific networking features","Enhanced profile visibility","Priority support and resources"],b=()=>{u.value="update",n.value=!0},m=()=>{u.value="create",n.value=!0},S=()=>{g.value=!0},x=async()=>{try{g.value=!1,o.fetchUser()}catch(V){console.error("Failed to remove creator status:",V)}},h=()=>{n.value=!1,o.fetchUser()};return(V,i)=>{const U=Ge;return k(),T("div",xa,[i[12]||(i[12]=_("div",{class:"settings-header mb-6"},[_("h3",{class:"text-h5 font-weight-bold mb-2"},"Creator Profile"),_("p",{class:"text-body-2 text-medium-emphasis"}," Manage your creator profile and showcase your skills in the entertainment industry ")],-1)),e(K,{class:"creator-status-card mb-6",variant:"outlined"},{default:a(()=>[e(Q,{class:"pa-6"},{default:a(()=>[_("div",Sa,[e(X,{color:l.value?"success":"warning",size:"24",class:"mr-3"},{default:a(()=>[w(N(l.value?"mdi-star":"mdi-star-outline"),1)]),_:1},8,["color"]),_("div",null,[_("h4",Pa,N(l.value?"Verified Creator":"Creator Registration"),1),_("p",Ua,N(r.value),1)])]),l.value?(k(),T("div",Ea,[e(Se,{color:"primary",variant:"elevated",size:"large","prepend-icon":"mdi-star"},{default:a(()=>[w(N(f.value),1)]),_:1})])):j("",!0),_("div",$a,[l.value?(k(),L(F,{key:0,color:"primary",variant:"outlined","prepend-icon":"mdi-pencil",onClick:b,class:"mr-3"},{default:a(()=>i[3]||(i[3]=[w(" Change Category ")])),_:1})):j("",!0),l.value?j("",!0):(k(),L(F,{key:1,color:"primary",variant:"elevated","prepend-icon":"mdi-star-plus",onClick:m,size:"large"},{default:a(()=>i[4]||(i[4]=[w(" Become a Creator ")])),_:1})),l.value?(k(),L(F,{key:2,color:"error",variant:"text","prepend-icon":"mdi-delete",onClick:S},{default:a(()=>i[5]||(i[5]=[w(" Remove Creator Status ")])),_:1})):j("",!0)])]),_:1})]),_:1}),e(K,{class:"benefits-card",variant:"tonal",color:"primary"},{default:a(()=>[e(Q,{class:"pa-6"},{default:a(()=>[_("h4",Aa,[e(X,{class:"mr-2"},{default:a(()=>i[6]||(i[6]=[w("mdi-information")])),_:1}),i[7]||(i[7]=w(" Creator Benefits "))]),e(Ee,{class:"benefits-list",density:"compact"},{default:a(()=>[(k(),T(ee,null,re(d,E=>e($e,{key:E,"prepend-icon":"mdi-check-circle",class:"px-0"},{default:a(()=>[e(Ae,{class:"text-body-2"},{default:a(()=>[w(N(E),1)]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1}),e(U,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=E=>n.value=E),mode:u.value,onTalentUpdated:h},null,8,["modelValue","mode"]),e(Pe,{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=E=>g.value=E),"max-width":"400"},{default:a(()=>[e(K,null,{default:a(()=>[e(me,{class:"text-h6"},{default:a(()=>i[8]||(i[8]=[w("Remove Creator Status")])),_:1}),e(Q,null,{default:a(()=>i[9]||(i[9]=[w(" Are you sure you want to remove your creator status? This action cannot be undone and you'll lose access to creator-specific features. ")])),_:1}),e(ke,null,{default:a(()=>[e(Ue),e(F,{color:"grey",variant:"text",onClick:i[1]||(i[1]=E=>g.value=!1)},{default:a(()=>i[10]||(i[10]=[w(" Cancel ")])),_:1}),e(F,{color:"error",variant:"elevated",onClick:x},{default:a(()=>i[11]||(i[11]=[w(" Remove ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Ia=ae(Da,[["__scopeId","data-v-24417a11"]]),Na=ne({__name:"AccountSettingsPage",setup(D){const o=[{icon:"mdi-card-account-details",title:"Personal Details",component:da},{icon:"mdi-star",title:"Creator Profile",component:Ia},{icon:"mdi-email-outline",title:"Email Settings",component:ka},{icon:"mdi-lock",title:"Password & Security",component:ga}],n=v(0);return(g,u)=>(k(),L(ce,{fluid:""},{default:a(()=>[e(de,null,{default:a(()=>[e(le,{cols:"12",md:"3"},{default:a(()=>[u[1]||(u[1]=_("h2",{class:"text-h6 mb-4"},"Getting Started",-1)),e(Ee,{"bg-color":"grey-lighten-4",rounded:"lg",class:"settings-list"},{default:a(()=>[(k(),T(ee,null,re(o,(l,f)=>e($e,{key:f,value:f,onClick:r=>n.value=f,active:H(n)===f,"prepend-icon":l.icon,class:Ve(["mb-2",{"v-list-item--active":H(n)===f}]),rounded:"lg"},{default:a(()=>[e(Ae,null,{default:a(()=>[w(N(l.title),1)]),_:2},1024)]),_:2},1032,["value","onClick","active","prepend-icon","class"])),64))]),_:1})]),_:1}),e(le,{cols:"12",md:"9"},{default:a(()=>[e(K,{class:"pa-6",elevation:"1",rounded:"lg"},{default:a(()=>[e(We,{modelValue:H(n),"onUpdate:modelValue":u[0]||(u[0]=l=>Te(n)?n.value=l:null)},{default:a(()=>[(k(),T(ee,null,re(o,(l,f)=>e(He,{key:f,value:f},{default:a(()=>[(k(),L(Me(l.component)))]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),qa=ae(Na,[["__scopeId","data-v-cf9b7b98"]]),za={__name:"settings",async setup(D){var l,f,r,d,b,m,S;let o,n;const g=Ke();[o,n]=Be(()=>g.fetchTalaStageApp()),await o,n();const u=A(()=>g.talastageApp);return Qe({title:`Account Settings - ${((l=u.value)==null?void 0:l.seo_title)||((f=u.value)==null?void 0:f.name)}`,description:((r=u.value)==null?void 0:r.seo_description)||"Manage your account settings, update your preferences, and configure your account on TalaStage.",keywords:((d=u.value)==null?void 0:d.meta_keywords)||"account, settings, user preferences",image:((b=u.value)==null?void 0:b.logo_url)||"/default-social-image.png",url:((m=u.value)==null?void 0:m.canonical_url)||"https://talastage.com",type:"website",siteName:((S=u.value)==null?void 0:S.name)||"TalaStage",twitterUsername:"@talastage"}),(x,h)=>(k(),T("div",null,[e(qa)]))}},Ft=ae(za,[["__scopeId","data-v-d33f1b26"]]);export{Ft as default};
