import{_ as x,j as c,c as h,o as V,m as w,p as s,w as u,q as g,s as v,C as B,a as P,v as N,y as I,t as y,b}from"./CGQimWOm.js";import{u as k}from"./M9aAkXy6.js";import{V as D}from"./DX-6Wr-O.js";import{V as F}from"./CiXMVmI4.js";import{V as W}from"./P_q-BwEt.js";import{B as C}from"./COhe-ksk.js";const E={class:"wallet-pin-verification"},S={__name:"WalletPinVerification",emits:["verified","error","forgot-pin"],setup(_,{emit:p}){const r=p,l=k(),e=c(""),o=c(!1),i=c(""),d=h(()=>e.value.length===6),t=async()=>{if(d.value){o.value=!0,i.value="";try{await l.verifyPin(e.value),r("verified"),e.value=""}catch(m){i.value=l.authError||"Invalid PIN. Please try again.",r("error",m)}finally{o.value=!1}}},n=()=>{r("forgot-pin")};return(m,a)=>(V(),w("div",E,[s(F,{onSubmit:B(t,["prevent"])},{default:u(()=>[s(D,{modelValue:e.value,"onUpdate:modelValue":a[0]||(a[0]=f=>e.value=f),length:6,type:"number",onFinish:t,class:"mb-4",disabled:o.value,placeholder:"â€¢",autofocus:""},null,8,["modelValue","disabled"]),s(g,{color:"primary",type:"submit",loading:o.value,disabled:!d.value||o.value,block:"",elevation:"0"},{default:u(()=>a[1]||(a[1]=[v(" Verify PIN ")])),_:1},8,["loading","disabled"])]),_:1}),s(g,{variant:"text",color:"primary",onClick:n,disabled:o.value,class:"mt-2"},{default:u(()=>a[2]||(a[2]=[v(" Forgot PIN? ")])),_:1},8,["disabled"]),i.value?(V(),P(W,{key:0,type:"error",class:"mt-4",density:"compact"},{default:u(()=>[v(N(i.value),1)]),_:1})):I("",!0)]))}},A=x(S,[["__scopeId","data-v-5efbac82"]]),U={class:"pa-4"},T={__name:"WalletPinVerificationDialog",props:{modelValue:Boolean},emits:["update:modelValue","verified","error","forgot-pin"],setup(_,{emit:p}){const r=_,l=p,e=c(r.modelValue);y(()=>r.modelValue,t=>{e.value=t}),y(e,t=>{l("update:modelValue",t)});const o=()=>{l("verified"),e.value=!1},i=t=>{l("error",t)},d=()=>{l("forgot-pin"),e.value=!1};return(t,n)=>{const m=A,a=C;return V(),P(a,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=f=>e.value=f),title:"Verify Wallet PIN","max-width":"450px","show-close-button":!0},{default:u(()=>[b("div",U,[n[1]||(n[1]=b("p",{class:"text-body-1 text-center mb-6"}," Please enter your 6-digit wallet PIN to confirm this action ",-1)),s(m,{onVerified:o,onError:i,onForgotPin:d})])]),_:1},8,["modelValue"])}}};export{T as _};
