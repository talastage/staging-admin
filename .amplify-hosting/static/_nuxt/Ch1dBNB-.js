import{a as Z,_ as K}from"./hNLxBYxu.js";import{n as q,j as x,c as b,t as Y,o as $,m as P,p as o,w as c,G as O,a as N,s as V,v as F,y as B,b as m,q as h,V as G,C as W,_ as E,l as J,aM as Q,x as i,k as M,i as ee,z as te,J as ae,P as se,I as re}from"./CGQimWOm.js";import{u as j}from"./Cnu3A9hV.js";import{V as oe}from"./2hEmiBig.js";import{V as T}from"./CMsVONS5.js";import{V as z}from"./P_q-BwEt.js";import{V as H}from"./CiXMVmI4.js";import{s as le}from"./rtPmyJLL.js";import{V as ne}from"./DX-6Wr-O.js";import{_ as ie}from"./sCKccXa7.js";import{V as ue}from"./C9TGCd7W.js";import{_ as de}from"./CLKcOYKN.js";import{u as me}from"./DMBY-Kaj.js";import{a as D,V as ce}from"./D9lJKT5N.js";import{_ as pe}from"./CkOuN04m.js";import{u as X}from"./BW5EWlXk.js";import{V as fe}from"./BvtSni_j.js";import{V as ve}from"./6HtF_owb.js";import{u as ge}from"./D78L5r-E.js";import"./f5lwX8SZ.js";import"./CRY4crBU.js";/* empty css        */import"./BSH7BhKc.js";import"./Bd-Y0pe4.js";import"./C-73ZGdz.js";import"./BFmCCZJK.js";import"./Dg4qVXYX.js";import"./CjukEv2V.js";import"./C-GTDzx5.js";import"./xvVMJZi9.js";import"./DJ0NdY24.js";import"./DMLzsDc7.js";import"./GXZRJwQ4.js";import"./BkTuXOR_.js";import"./BRveoiXI.js";import"./tTgLLTve.js";import"./Dn0bXcU5.js";import"./CW50LM9V.js";import"./IpAEdaYr.js";import"./DbQnG3uQ.js";import"./ClFbrGXS.js";import"./D0h0WEJV.js";import"./DsvAftJq.js";import"./DjbnUXUR.js";const ye={class:"contact-info-form"},_e={class:"mt-4"},be={key:0,class:"mt-4"},Ve=q({__name:"ContactInfoForm",emits:["next"],setup(A,{emit:v}){const y=v,S=j(),e=x(null),t=x(S.email||""),p=x(!1),n=x(!1),u=x(""),_=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,a=b(()=>_.test(t.value)),d=b(()=>t.value&&!a.value?"Please enter a valid email address":S.errors.email);Y(t,g=>{g&&!n.value&&(n.value=!0),u.value&&(u.value="")});const k=async()=>{if(a.value){p.value=!0,u.value="";try{if(S.email=t.value,!S.validateContactInfo()){p.value=!1;return}(await S.registerEmail()).incomplete_registration,y("next")}catch(g){console.error("Error submitting form:",g),g.response&&g.response.data&&g.response.data.error?u.value=g.response.data.error:g.message&&!g.message.includes("status code")?u.value=g.message:S.errors.email?u.value=S.errors.email:u.value="Failed to proceed. Please try again."}finally{p.value=!1}}};return(g,f)=>($(),P("div",ye,[o(H,{onSubmit:W(k,["prevent"]),ref_key:"form",ref:e,class:"form-content"},{default:c(()=>[o(T,{modelValue:t.value,"onUpdate:modelValue":f[0]||(f[0]=I=>t.value=I),"error-messages":d.value,"prepend-inner-icon":"mdi-email-outline",variant:"outlined",autocomplete:"email","hide-details":"false",class:O(["mb-3",{"error-field":d.value}]),placeholder:"Email address",density:"comfortable",autofocus:"",loading:p.value},null,8,["modelValue","error-messages","loading","class"]),u.value?($(),N(z,{key:0,type:"error",variant:"tonal",class:"mt-2 mb-3",density:"compact",border:"",closable:"","onClick:close":f[1]||(f[1]=I=>u.value="")},{default:c(()=>[V(F(u.value),1)]),_:1})):B("",!0),m("div",_e,[o(h,{type:"submit",color:"primary",block:"",loading:p.value,disabled:!a.value||p.value,class:"rounded-lg",elevation:"1",height:"44"},{default:c(()=>[f[3]||(f[3]=m("span",{class:"font-weight-medium"},"Continue",-1)),o(G,{right:"",class:"ml-1"},{default:c(()=>f[2]||(f[2]=[V("mdi-arrow-right")])),_:1})]),_:1},8,["loading","disabled"])]),o(oe,null,{default:c(()=>[n.value?($(),P("div",be,[o(z,{type:"info",variant:"tonal",density:"compact",border:"",class:"text-body-2"},{default:c(()=>f[4]||(f[4]=[m("strong",null,"Tips:",-1),m("ul",{class:"mt-1 pl-4"},[m("li",null,"Use a valid email address you have access to"),m("li",null,"We'll send a verification code to this email")],-1)])),_:1})])):B("",!0)]),_:1})]),_:1},512)]))}}),Se=E(Ve,[["__scopeId","data-v-656686f3"]]),xe={class:"verification-form"},we={class:"mb-3 d-flex justify-space-between align-center"},$e={class:"text-caption text-medium-emphasis"},Ce={class:"text-center mb-3"},ke={class:"text-center resend-container"},he={class:"d-flex align-center justify-center"},L=5*60,Ie={__name:"VerificationForm",emits:["verified","back"],setup(A,{emit:v}){const y=j(),S=v,e=x(""),t=x(!1),p=x(!1),n=x(""),u=x(!1),_=()=>{S("back"),y.setStep("contact-info")},a=x(L);let d=null;const k=b(()=>{const w=Math.floor(a.value/60),r=a.value%60;return`${w}:${r.toString().padStart(2,"0")}`}),g=b(()=>a.value<60),f=()=>{a.value=L,d=le(()=>{a.value>0?a.value--:(clearInterval(d),n.value="Code expired. Please request a new one.",u.value=!0)},1e3)},I=async()=>{var w,r,s,R,l;if(a.value===0){n.value="Code has expired. Please request a new one.",u.value=!0;return}t.value=!0,n.value="";try{await y.verifyCode(e.value),S("verified")}catch(U){u.value=!0,(r=(w=U.response)==null?void 0:w.data)!=null&&r.error?n.value=U.response.data.error:(l=(R=(s=U.response)==null?void 0:s.data)==null?void 0:R.errors)!=null&&l.code?n.value=U.response.data.errors.code[0]:n.value="Invalid verification code. Please try again.",e.value=""}finally{t.value=!1}},C=async()=>{var w,r;p.value=!0,n.value="";try{await y.resendVerificationCode(),u.value=!1,n.value="New code sent to your email",f()}catch(s){u.value=!0,n.value=((r=(w=s.response)==null?void 0:w.data)==null?void 0:r.error)||"Couldn't send verification code."}finally{p.value=!1}};return J(()=>{f()}),Q(()=>{d&&clearInterval(d)}),(w,r)=>($(),P("div",xe,[m("div",we,[m("div",null,[r[2]||(r[2]=m("h3",{class:"text-subtitle-1 font-weight-medium mb-1"},"Verify Email",-1)),m("p",$e,[r[1]||(r[1]=V(" Code sent to ")),m("strong",null,F(i(y).email),1)])]),o(h,{variant:"text",density:"comfortable",size:"small","prepend-icon":"mdi-arrow-left",onClick:_},{default:c(()=>r[3]||(r[3]=[V(" Back ")])),_:1})]),m("div",Ce,[r[4]||(r[4]=m("div",{class:"text-subtitle-1 font-weight-medium"}," Enter Verification Code ",-1)),m("div",{class:O(["text-caption mb-1",{"text-error":g.value}])}," Code expires in: "+F(k.value),3)]),o(ne,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=s=>e.value=s),length:6,density:"comfortable","error-messages":i(y).errors.verification_code,class:"mb-4"},null,8,["modelValue","error-messages"]),o(h,{onClick:I,color:"primary",block:"",class:"mb-4",loading:t.value,disabled:t.value||e.value.length!==6,height:"48"},{default:c(()=>r[5]||(r[5]=[V(" Verify Code ")])),_:1},8,["loading","disabled"]),m("div",ke,[m("div",he,[r[7]||(r[7]=m("span",{class:"text-body-2 me-2"},"Didn't receive the code?",-1)),o(h,{onClick:C,variant:"text",color:"primary",class:"text-body-2 font-weight-medium pa-0",loading:p.value,disabled:p.value},{default:c(()=>r[6]||(r[6]=[V(" Resend ")])),_:1},8,["loading","disabled"])])]),n.value?($(),N(z,{key:0,type:u.value?"error":"success",class:"mt-4",variant:"tonal",density:"compact"},{default:c(()=>[V(F(n.value),1)]),_:1},8,["type"])):B("",!0)]))}},Re=E(Ie,[["__scopeId","data-v-98071860"]]),Fe={class:"personal-info-form"},Pe={class:"gender-birthday-fields"},Te=q({__name:"PersonalInfoForm",emits:["submit"],setup(A,{emit:v}){const y=v,S=M(),e=j();ee();const t=x(null),p=x(!1),n=x(!1),u=x(""),_=x(null),a=["Male","Female","Custom"],d=te({hasSubmitted:!1,fieldsTouched:new Set}),k=b(()=>{const r=new Date;return r.setFullYear(r.getFullYear()-18),r.toISOString().split("T")[0]}),g=b(()=>!!(e.firstName&&e.lastName&&e.gender&&e.birthday&&e.country&&e.password&&!Object.values(e.errors).some(r=>r))),f={required:r=>!!r||"Required",passwordStrength:r=>{if(!r)return"Password is required";const R=[{test:l=>l.length>=8,message:"8 characters"},{test:l=>/[A-Z]/.test(l),message:"uppercase letter"},{test:l=>/[a-z]/.test(l),message:"lowercase letter"},{test:l=>/\d/.test(l),message:"number"},{test:l=>/[!@#$%^&*(),.?":{}|<>]/.test(l),message:"special character"}].filter(l=>!l.test(r));return R.length===0||`Need: ${R.map(l=>l.message).join(", ")}`},ageLimit:r=>r?new Date().getFullYear()-new Date(r).getFullYear()>=18||"Must be at least 18 years old":!0},I=r=>{e.country=r},C=r=>{d.fieldsTouched.add(r)},w=async()=>{try{if(n.value=!0,d.hasSubmitted=!0,u.value="",!await e.validatePersonalInfo()){u.value="Please fill in all required fields correctly";return}const s=await e.registerPersonalInfo();y("submit"),s.user&&s.token&&S.push("/")}catch(r){u.value=r.message||"An error occurred during registration"}finally{n.value=!1}};return(r,s)=>{const R=ie;return $(),P("div",Fe,[o(H,{ref_key:"form",ref:t,onSubmit:W(w,["prevent"]),class:"form-wrapper"},{default:c(()=>[u.value?($(),N(z,{key:0,type:"error",variant:"tonal",class:"mb-4",density:"compact",border:"",closable:"","onClick:close":s[0]||(s[0]=l=>u.value="")},{default:c(()=>[V(F(u.value),1)]),_:1})):B("",!0),o(T,{modelValue:i(e).firstName,"onUpdate:modelValue":s[1]||(s[1]=l=>i(e).firstName=l),label:"First Name",rules:[f.required],"error-messages":i(e).errors.first_name,error:d.hasSubmitted&&!!i(e).errors.first_name,onBlur:s[2]||(s[2]=l=>C("firstName")),variant:"outlined",density:"compact",placeholder:"First name","prepend-inner-icon":"mdi-account",class:"field","hide-details":"auto"},null,8,["modelValue","rules","error-messages","error"]),o(T,{modelValue:i(e).lastName,"onUpdate:modelValue":s[3]||(s[3]=l=>i(e).lastName=l),label:"Last Name",rules:[f.required],"error-messages":i(e).errors.last_name,error:d.hasSubmitted&&!!i(e).errors.last_name,onBlur:s[4]||(s[4]=l=>C("lastName")),variant:"outlined",density:"compact",placeholder:"Last name",class:"field","hide-details":"auto"},null,8,["modelValue","rules","error-messages","error"]),o(T,{modelValue:i(e).displayName,"onUpdate:modelValue":s[5]||(s[5]=l=>i(e).displayName=l),"error-messages":i(e).errors.display_name,variant:"outlined",density:"compact",placeholder:"Choose display name (optional)","prepend-inner-icon":"mdi-account-badge",class:"field","hide-details":"auto"},{label:c(()=>s[15]||(s[15]=[V(" Display Name "),m("span",{class:"optional-label"},"(Optional)",-1)])),_:1},8,["modelValue","error-messages"]),m("div",Pe,[o(ue,{modelValue:i(e).gender,"onUpdate:modelValue":s[6]||(s[6]=l=>i(e).gender=l),items:a,label:"Gender",rules:[f.required],"error-messages":i(e).errors.gender,error:d.hasSubmitted&&!!i(e).errors.gender,onBlur:s[7]||(s[7]=l=>C("gender")),variant:"outlined",density:"compact","prepend-inner-icon":"mdi-gender-male-female",class:"field gender-field","hide-details":"auto","menu-props":{maxHeight:200},"no-filter":"","auto-select-first":""},null,8,["modelValue","rules","error-messages","error"]),o(T,{modelValue:i(e).birthday,"onUpdate:modelValue":s[8]||(s[8]=l=>i(e).birthday=l),label:"Birthday",type:"date",rules:[f.required,f.ageLimit],"error-messages":i(e).errors.birthday,error:d.hasSubmitted&&!!i(e).errors.birthday,onBlur:s[9]||(s[9]=l=>C("birthday")),variant:"outlined",density:"compact",max:k.value,class:"field","hide-details":"auto"},null,8,["modelValue","rules","error-messages","error","max"])]),o(R,{modelValue:_.value,"onUpdate:modelValue":s[10]||(s[10]=l=>_.value=l),onCountrySelected:I,rules:[f.required],error:d.hasSubmitted&&!i(e).country,"error-messages":i(e).errors.country_id,onBlur:s[11]||(s[11]=l=>C("country")),density:"compact",class:"field"},null,8,["modelValue","rules","error","error-messages"]),o(T,{modelValue:i(e).password,"onUpdate:modelValue":s[12]||(s[12]=l=>i(e).password=l),label:"Password",type:p.value?"text":"password","append-inner-icon":p.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":s[13]||(s[13]=l=>p.value=!p.value),rules:[f.required,f.passwordStrength],"error-messages":i(e).errors.password,error:d.hasSubmitted&&!!i(e).errors.password,onBlur:s[14]||(s[14]=l=>C("password")),variant:"outlined",density:"compact",placeholder:"Create a strong password","prepend-inner-icon":"mdi-lock",class:"field","hide-details":"auto"},null,8,["modelValue","type","append-inner-icon","rules","error-messages","error"]),o(h,{type:"submit",color:"primary",block:"",loading:n.value,disabled:!g.value||n.value,class:"submit-btn",elevation:"1"},{default:c(()=>[o(G,{left:"",class:"mr-2",size:"small"},{default:c(()=>s[16]||(s[16]=[V("mdi-account-plus")])),_:1}),s[17]||(s[17]=V(" Create Account "))]),_:1},8,["loading","disabled"])]),_:1},512)])}}}),Ne=E(Te,[["__scopeId","data-v-507bafe1"]]),Ae={class:"register-form"},Be={class:"mb-3 d-flex justify-space-between align-center"},qe=q({__name:"RegisterForm",setup(A){const v=j(),y=me(),S=M(),e=a=>{v.setStep(a)},t=(a="contact-info")=>{v.setStep(a)},p=async()=>{try{await v.resendVerificationCode(),y.success("Verification code resent successfully")}catch{y.error("Failed to resend verification code")}},n=async()=>{try{y.success("Registration completed successfully")}catch(a){y.error(a.message||"Registration failed. Please try again.")}},u=a=>{a.requires_personal_info?(v.setSocialRegistration({userId:a.user_id,socialData:a.social_data,isSocial:!0}),e("personal-info")):S.push("/")},_=a=>{y.error(a)};return(a,d)=>{const k=Se,g=Z,f=Re,I=Ne,C=de;return $(),P("div",Ae,[o(ce,{modelValue:i(v).step,"onUpdate:modelValue":d[3]||(d[3]=w=>i(v).step=w),class:"register-window",touch:!1},{default:c(()=>[o(D,{value:"contact-info"},{default:c(()=>[o(k,{onNext:d[0]||(d[0]=w=>e("verification")),class:"step-form"}),o(g,{mode:"register",onSocialSuccess:u,onSocialError:_,class:"mt-3"})]),_:1}),o(D,{value:"verification"},{default:c(()=>[o(f,{onVerified:d[1]||(d[1]=w=>e("personal-info")),onResend:p,class:"step-form"})]),_:1}),o(D,{value:"personal-info"},{default:c(()=>[m("div",Be,[d[5]||(d[5]=m("div",null,[m("h3",{class:"text-subtitle-1 font-weight-medium mb-1"}," Complete Profile "),m("p",{class:"text-caption text-medium-emphasis"}," Final step to create your account ")],-1)),i(v).isSocialRegistration?B("",!0):($(),N(h,{key:0,variant:"text",density:"comfortable",size:"small","prepend-icon":"mdi-arrow-left",onClick:d[2]||(d[2]=w=>t("verification"))},{default:c(()=>d[4]||(d[4]=[V(" Back ")])),_:1}))]),i(v).isSocialRegistration?($(),N(C,{key:1,"user-id":i(v).socialUserId,"social-data":i(v).socialData,onSubmit:n,class:"step-form"},null,8,["user-id","social-data"])):($(),N(I,{key:0,onSubmit:n,class:"step-form"}))]),_:1})]),_:1},8,["modelValue"])])}}}),Ee=E(qe,[["__scopeId","data-v-7d1a6265"]]),je={class:"register-container"},Ue={class:"text-center welcome-section"},ze={class:"register-subtitle"},De={class:"form-container"},Me={class:"login-section"},Le={class:"terms-footer"},Ye={class:"text-caption text-medium-emphasis"},Oe=q({__name:"RegisterPage",setup(A){M();const v=X(),y=j(),S=b(()=>v.talastageApp),e=x(!1),t=x(""),p=b(()=>{var _;return((_=S.value)==null?void 0:_.name)||"TalaStage"}),n=b(()=>{switch(y.step){case"contact-info":return 33.33;case"verification":return 66.66;case"personal-info":return 100;default:return 33.33}}),u=async()=>{e.value=!1,t.value="";try{await v.refreshData()}catch{t.value="Failed to refresh data. Please try again.",e.value=!0}};return Y(()=>v.error,_=>{_&&(t.value=_,e.value=!0)}),J(async()=>{try{v.talastageApp||await v.fetchTalaStageApp()}catch{t.value="Failed to load application data. Please refresh the page.",e.value=!0}}),(_,a)=>{const d=K,k=Ee,g=pe;return $(),P("div",je,[m("div",Ue,[o(d,{size:"md",layout:"horizontal","show-slogan":!1,"is-heading":!0,"text-align":"center"}),a[2]||(a[2]=m("h1",{class:"register-title"},"Create Your Account",-1)),m("p",ze," Join "+F(p.value)+" and start your journey ",1)]),o(ae,{"model-value":n.value,color:"primary",height:"3",rounded:"",class:"mb-3"},null,8,["model-value"]),m("div",De,[o(k)]),m("div",Me,[o(fe,{class:"mb-2"}),a[4]||(a[4]=m("span",{class:"text-body-2"},"Already have an account?",-1)),o(g,{to:"/login",class:"text-decoration-none"},{default:c(()=>[o(h,{variant:"text",color:"primary",class:"ml-1 text-capitalize",size:"small"},{default:c(()=>a[3]||(a[3]=[V(" Sign In ")])),_:1})]),_:1})]),m("div",Le,[m("p",Ye,[a[7]||(a[7]=V(" By creating an account, you agree to our ")),o(g,{to:"/policies/terms-of-service",class:"policy-link"},{default:c(()=>a[5]||(a[5]=[V(" Terms of Service ")])),_:1}),a[8]||(a[8]=V(" and ")),o(g,{to:"/policies/privacy-policy",class:"policy-link"},{default:c(()=>a[6]||(a[6]=[V(" Privacy Policy ")])),_:1})])]),o(ve,{modelValue:e.value,"onUpdate:modelValue":a[1]||(a[1]=f=>e.value=f),timeout:5e3,color:"error",location:"top"},{actions:c(()=>[o(h,{color:"white",variant:"text",onClick:u,size:"small"},{default:c(()=>a[9]||(a[9]=[V(" Retry ")])),_:1}),o(h,{color:"white",variant:"text",onClick:a[0]||(a[0]=f=>e.value=!1),size:"small"},{default:c(()=>a[10]||(a[10]=[V(" Close ")])),_:1})]),default:c(()=>[V(F(t.value)+" ",1)]),_:1},8,["modelValue"])])}}}),Ge=E(Oe,[["__scopeId","data-v-66368024"]]),Et=q({__name:"index",async setup(A){let v,y;se();const S=X();[v,y]=re(()=>S.fetchTalaStageApp()),await v,y();const e=b(()=>S.talastageApp);return ge({title:b(()=>{var t;return`Register - ${((t=e.value)==null?void 0:t.name)||"TalaStage"}`}),description:b(()=>{var t;return`Register on ${((t=e.value)==null?void 0:t.name)||"TalaStage"} to join our community, create projects, invest, and more.`}),keywords:b(()=>{var t;return`register, sign up, account, join, ${((t=e.value)==null?void 0:t.name)||"TalaStage"}`}),image:b(()=>{var t;return((t=e.value)==null?void 0:t.logo_url)||"/default-social-image.png"}),type:"website",siteName:b(()=>{var t;return((t=e.value)==null?void 0:t.name)||"TalaStage"}),url:b(()=>{var t;return`${((t=e.value)==null?void 0:t.canonical_url)||"https://talastage.com"}/register`}),noIndex:!0,canonical:b(()=>{var t;return`${((t=e.value)==null?void 0:t.canonical_url)||"https://talastage.com"}/register`}),openGraph:b(()=>{var t,p,n,u,_;return{title:`Register - ${((t=e.value)==null?void 0:t.name)||"TalaStage"}`,description:`Register on ${((p=e.value)==null?void 0:p.name)||"TalaStage"} to join our community, create projects, invest, and more.`,url:`${((n=e.value)==null?void 0:n.canonical_url)||"https://talastage.com"}/register`,image:((u=e.value)==null?void 0:u.logo_url)||"/default-social-image.png",siteName:((_=e.value)==null?void 0:_.name)||"TalaStage",type:"website"}}),twitter:b(()=>{var t,p,n;return{card:"summary_large_image",title:`Register - ${((t=e.value)==null?void 0:t.name)||"TalaStage"}`,description:`Register on ${((p=e.value)==null?void 0:p.name)||"TalaStage"} to join our community, create projects, invest, and more.`,image:((n=e.value)==null?void 0:n.logo_url)||"/default-social-image.png"}}),link:b(()=>{var t;return[{rel:"icon",type:"image/png",href:((t=e.value)==null?void 0:t.favicon_url)||"/favicon.png"}]})}),(t,p)=>{const n=Ge;return $(),P("div",null,[o(n)])}}});export{Et as default};
