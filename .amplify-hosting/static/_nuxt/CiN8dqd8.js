import{dC as W,f as D,g as F,j as l,c as u}from"./CGQimWOm.js";const{Axios:O,AxiosError:T,CanceledError:V,isCancel:b,CancelToken:j,VERSION:k,all:B,Cancel:J,isAxiosError:H,spread:U,toFormData:_,AxiosHeaders:$,HttpStatusCode:q,formToJSON:z,mergeConfig:G}=W,K=D("wallet",()=>{const{$axios:v}=F(),n=l(null),o=l(!1),r=l(!1),s=l(null),c=l(null),i=l(null),d=l(null),w=u(()=>{var e,t;return((t=(e=n.value)==null?void 0:e.data)==null?void 0:t.status)==="active"}),x=u(()=>{var e,t;return((t=(e=n.value)==null?void 0:e.data)==null?void 0:t.balance)??"0"}),y=u(()=>{var e,t;return(t=(e=n.value)==null?void 0:e.data)==null?void 0:t.currency}),C=u(()=>s.value?new Date<s.value:!1);function f(e){i.value=e}async function h(){var e,t,g,m,A;o.value=!0;try{const{data:a}=await v.get("/api/wallet");return n.value=a,d.value=new Date,a}catch(a){return H(a)?f({message:((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||a.message,status:(g=a.response)==null?void 0:g.status,code:(A=(m=a.response)==null?void 0:m.data)==null?void 0:A.code}):f({message:"An unexpected error occurred"}),null}finally{o.value=!1}}function E(e){r.value=e,e||(n.value=null)}function S(e){s.value=typeof e=="string"?new Date(e):e}function N(e){c.value=e}function p(){r.value=!1,s.value=null,c.value=null,i.value=null,n.value=null,d.value=null}async function R(){try{await v.post("/api/wallet/logout")}catch{}finally{p()}}return{wallet:n,isFetching:o,isAuthenticated:r,sessionExpiry:s,intendedRoute:c,error:i,lastUpdated:d,isWalletActive:w,currentBalance:x,currentCurrency:y,isSessionValid:C,fetchWallet:h,setError:f,setAuthenticated:E,setSessionExpiry:S,setIntendedRoute:N,clearAuth:p,logout:R}});export{H as i,K as u};
