import{d as a,u as e}from"./server.mjs";import{ref as t,computed as l}from"vue";const n=a("apps",(()=>{const a=t(null),n=t(!1),u=t(null),o=t(0),s=t(null),r=l((()=>a.value?{title:a.value.name||"TalaStage",description:a.value.seo_description||"Connecting talents across the globe with opportunities to shine and thrive âœ¨",keywords:a.value.meta_keywords||"",image:a.value.thumbnail_url||a.value.logo_url||"https://talastage.com/app-logo.png",canonical:a.value.canonical_url||"https://talastage.com",schemaMarkup:a.value.schema_markup||null}:null)),getCachedData=()=>{try{return null}catch(a){return console.error("Cache parsing error:",a),null}};async function fetchTalaStageApp(t=!1){const{$axios:l}=e(),r=Date.now()-o.value>3e5;if(!t&&!r){const e=getCachedData();if(e)return a.value=e.data,void(s.value=e.etag||null)}n.value=!0,u.value=null;try{const e={"Cache-Control":"no-cache",Pragma:"no-cache"};s.value&&(e["If-None-Match"]=s.value);const t=await l.get("/api/apps/talastage",{headers:e}),n=t.headers.etag;a.value=t.data,t.data,o.value=Date.now(),n&&(s.value=n)}catch(e){if(e.response&&304===e.response.status){const e=getCachedData();e&&(a.value=e.data,o.value=Date.now())}else{u.value=e.message;const t=getCachedData();t&&!a.value&&(a.value=t.data)}}finally{n.value=!1}}return{talastageApp:a,loading:n,error:u,seoData:r,fetchTalaStageApp:fetchTalaStageApp,clearCache:function(){a.value=null,o.value=0,s.value=null},refreshData:async function(){await fetchTalaStageApp(!0)}}}));export{n as u};
