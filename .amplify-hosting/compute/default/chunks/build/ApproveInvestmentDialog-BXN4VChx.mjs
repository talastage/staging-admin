import{B as e}from"./BaseDialog-DsGYlnLZ.mjs";import{useSSRContext as t,defineComponent as l,ref as a,watch as n,computed as r,mergeProps as s,withCtx as u,createTextVNode as o,toDisplayString as i,createVNode as d,openBlock as c,createBlock as m,createCommentVNode as v}from"vue";import{ssrRenderComponent as p,ssrInterpolate as f}from"vue/server-renderer";import{u as _}from"./useSnackMessage-PVLwAm7x.mjs";import{V as g}from"./index--K8ZrFMm.mjs";import{V as j}from"./VSpacer-_gFExeVk.mjs";import{b as V,V as h}from"./server.mjs";import{V as k}from"./VContainer-By3q0af_.mjs";import{V as y}from"./VRow-rkX0LEXR.mjs";import{V as b}from"./VCol-CKxprC4g.mjs";import{V as R}from"./VCard-CsohsM82.mjs";import{V as w,a as S,b as x}from"./VListItem-jTLuICGb.mjs";import{V as P}from"./VTextarea-DkPaPTLI.mjs";const C=l({__name:"ApproveInvestmentDialog",__ssrInlineRender:!0,props:{modelValue:{type:Boolean,required:!0},investment:{type:Object,default:null},mode:{type:String,default:"approve"}},emits:["update:modelValue","approved","rejected"],setup(t,{emit:l}){const C=t,A=l,U=_(),I=a(!1),$=a(""),q=a(""),L=a(!1);n((()=>C.mode),(e=>{L.value="reject"===e}),{immediate:!0}),n((()=>C.modelValue),(e=>{e&&(resetForm(),L.value="reject"===C.mode)}));const D=r({get:()=>C.modelValue,set:e=>A("update:modelValue",e)}),B=r((()=>L.value?"Reject Investment":"Approve Investment")),closeDialog=()=>{D.value=!1,resetForm()},resetForm=()=>{$.value="",q.value="",C.mode||(L.value=!1)},handleAction=async()=>{if(C.investment&&(L.value&&!$.value.trim()?(q.value="Please provide a reason for rejection",0):(q.value="",1))){I.value=!0;try{L.value?A("rejected",C.investment.id,$.value.trim()):A("approved",C.investment.id),closeDialog(),U.success(`Investment ${L.value?"rejected":"approved"} successfully`)}catch(e){console.error("Investment action failed:",e),U.error(`Failed to ${L.value?"reject":"approve"} investment`)}finally{I.value=!1}}};return(l,a,n,r)=>{a(p(e,s({modelValue:D.value,"onUpdate:modelValue":e=>D.value=e,title:B.value,"max-width":"600px"},r),{actions:u(((e,t,l,a)=>{if(!t)return[d(j),d(V,{color:"grey-darken-1",variant:"text",onClick:closeDialog},{default:u((()=>[o(" Cancel ")])),_:1}),d(V,{color:L.value?"error":"success",loading:I.value,disabled:I.value||L.value&&!$.value.trim(),onClick:handleAction},{default:u((()=>[o(i(L.value?"Reject":"Approve"),1)])),_:1},8,["color","loading","disabled"])];t(p(j,null,null,l,a)),t(p(V,{color:"grey-darken-1",variant:"text",onClick:closeDialog},{default:u(((e,t,l,a)=>{if(!t)return[o(" Cancel ")];t(" Cancel ")})),_:1},l,a)),t(p(V,{color:L.value?"error":"success",loading:I.value,disabled:I.value||L.value&&!$.value.trim(),onClick:handleAction},{default:u(((e,t,l,a)=>{if(!t)return[o(i(L.value?"Reject":"Approve"),1)];t(`${f(L.value?"Reject":"Approve")}`)})),_:1},l,a))})),default:u(((e,l,a,n)=>{if(!l)return[t.investment?(c(),m(k,{key:0},{default:u((()=>[d(y,null,{default:u((()=>[d(b,{cols:"12"},{default:u((()=>[d("div",{class:"text-body-1 mb-4"}," Are you sure you want to "+i(L.value?"reject":"approve")+" this investment? ",1),d(R,{variant:"outlined",class:"mb-4"},{default:u((()=>[d(w,null,{prepend:u((()=>[d(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u((()=>[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)])),_:1},8,["color"])])),default:u((()=>[d(S,null,{default:u((()=>[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)])),_:1}),d(x,null,{default:u((()=>[o(" Status: "+i(t.investment.status),1)])),_:1})])),_:1})])),_:1}),d(g,null,{default:u((()=>[L.value?(c(),m("div",{key:0},[d(P,{modelValue:$.value,"onUpdate:modelValue":e=>$.value=e,label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[e=>!!e||"Reason is required for rejection"],"error-messages":q.value},null,8,["modelValue","onUpdate:modelValue","rules","error-messages"])])):v("",!0)])),_:1})])),_:1})])),_:1})])),_:1})):v("",!0)];t.investment?l(p(k,null,{default:u(((e,l,a,n)=>{if(!l)return[d(y,null,{default:u((()=>[d(b,{cols:"12"},{default:u((()=>[d("div",{class:"text-body-1 mb-4"}," Are you sure you want to "+i(L.value?"reject":"approve")+" this investment? ",1),d(R,{variant:"outlined",class:"mb-4"},{default:u((()=>[d(w,null,{prepend:u((()=>[d(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u((()=>[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)])),_:1},8,["color"])])),default:u((()=>[d(S,null,{default:u((()=>[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)])),_:1}),d(x,null,{default:u((()=>[o(" Status: "+i(t.investment.status),1)])),_:1})])),_:1})])),_:1}),d(g,null,{default:u((()=>[L.value?(c(),m("div",{key:0},[d(P,{modelValue:$.value,"onUpdate:modelValue":e=>$.value=e,label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[e=>!!e||"Reason is required for rejection"],"error-messages":q.value},null,8,["modelValue","onUpdate:modelValue","rules","error-messages"])])):v("",!0)])),_:1})])),_:1})])),_:1})];l(p(y,null,{default:u(((e,l,a,n)=>{if(!l)return[d(b,{cols:"12"},{default:u((()=>[d("div",{class:"text-body-1 mb-4"}," Are you sure you want to "+i(L.value?"reject":"approve")+" this investment? ",1),d(R,{variant:"outlined",class:"mb-4"},{default:u((()=>[d(w,null,{prepend:u((()=>[d(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u((()=>[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)])),_:1},8,["color"])])),default:u((()=>[d(S,null,{default:u((()=>[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)])),_:1}),d(x,null,{default:u((()=>[o(" Status: "+i(t.investment.status),1)])),_:1})])),_:1})])),_:1}),d(g,null,{default:u((()=>[L.value?(c(),m("div",{key:0},[d(P,{modelValue:$.value,"onUpdate:modelValue":e=>$.value=e,label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[e=>!!e||"Reason is required for rejection"],"error-messages":q.value},null,8,["modelValue","onUpdate:modelValue","rules","error-messages"])])):v("",!0)])),_:1})])),_:1})];l(p(b,{cols:"12"},{default:u(((e,l,a,n)=>{if(!l)return[d("div",{class:"text-body-1 mb-4"}," Are you sure you want to "+i(L.value?"reject":"approve")+" this investment? ",1),d(R,{variant:"outlined",class:"mb-4"},{default:u((()=>[d(w,null,{prepend:u((()=>[d(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u((()=>[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)])),_:1},8,["color"])])),default:u((()=>[d(S,null,{default:u((()=>[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)])),_:1}),d(x,null,{default:u((()=>[o(" Status: "+i(t.investment.status),1)])),_:1})])),_:1})])),_:1}),d(g,null,{default:u((()=>[L.value?(c(),m("div",{key:0},[d(P,{modelValue:$.value,"onUpdate:modelValue":e=>$.value=e,label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[e=>!!e||"Reason is required for rejection"],"error-messages":q.value},null,8,["modelValue","onUpdate:modelValue","rules","error-messages"])])):v("",!0)])),_:1})];l(`<div class="text-body-1 mb-4"${n}> Are you sure you want to ${f(L.value?"reject":"approve")} this investment? </div>`),l(p(R,{variant:"outlined",class:"mb-4"},{default:u(((e,l,a,n)=>{if(!l)return[d(w,null,{prepend:u((()=>[d(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u((()=>[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)])),_:1},8,["color"])])),default:u((()=>[d(S,null,{default:u((()=>[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)])),_:1}),d(x,null,{default:u((()=>[o(" Status: "+i(t.investment.status),1)])),_:1})])),_:1})];l(p(w,null,{prepend:u(((e,l,a,n)=>{if(!l)return[d(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u((()=>[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)])),_:1},8,["color"])];l(p(h,{color:"pending"===t.investment.status?"warning":"success"},{default:u(((e,l,a,n)=>{if(!l)return[o(i("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle"),1)];l(`${f("pending"===t.investment.status?"mdi-clock-outline":"mdi-check-circle")}`)})),_:1},a,n))})),default:u(((e,l,a,n)=>{if(!l)return[d(S,null,{default:u((()=>[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)])),_:1}),d(x,null,{default:u((()=>[o(" Status: "+i(t.investment.status),1)])),_:1})];l(p(S,null,{default:u(((e,l,a,n)=>{if(!l)return[o(" Share Percentage: "+i(t.investment.share_percentage)+"% ",1)];l(` Share Percentage: ${f(t.investment.share_percentage)}% `)})),_:1},a,n)),l(p(x,null,{default:u(((e,l,a,n)=>{if(!l)return[o(" Status: "+i(t.investment.status),1)];l(` Status: ${f(t.investment.status)}`)})),_:1},a,n))})),_:1},a,n))})),_:1},a,n)),l(p(g,null,{default:u(((e,t,l,a)=>{if(!t)return[L.value?(c(),m("div",{key:0},[d(P,{modelValue:$.value,"onUpdate:modelValue":e=>$.value=e,label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[e=>!!e||"Reason is required for rejection"],"error-messages":q.value},null,8,["modelValue","onUpdate:modelValue","rules","error-messages"])])):v("",!0)];L.value?(t(`<div${a}>`),t(p(P,{modelValue:$.value,"onUpdate:modelValue":e=>$.value=e,label:"Rejection Reason",placeholder:"Please provide a reason for rejection",variant:"outlined",rows:"3",rules:[e=>!!e||"Reason is required for rejection"],"error-messages":q.value},null,l,a)),t("</div>")):t("\x3c!----\x3e")})),_:1},a,n))})),_:1},a,n))})),_:1},a,n))})),_:1},a,n)):l("\x3c!----\x3e")})),_:1},n))}}}),A=C.setup;C.setup=(e,l)=>{const a=t();return(a.modules||(a.modules=new Set)).add("components/investment/ApproveInvestmentDialog.vue"),A?A(e,l):void 0};export{C as _};
