import{_ as e}from"./nuxt-link-CU98Qcmd.mjs";import{A as o}from"./AlertMessage-Do7IDlzi.mjs";import{a as l}from"./SocialLoginButtons-CpaDBnO6.mjs";import{useSSRContext as a,defineComponent as r,ref as s,reactive as t,mergeProps as n,withCtx as i,createTextVNode as d,unref as m,createVNode as c}from"vue";import{ssrRenderComponent as p}from"vue/server-renderer";import{a as u,b as g,_ as f}from"./server.mjs";import{V as v}from"./VForm-HRC00ryg.mjs";import{V as y}from"./VTextField-rd-VvEF8.mjs";const b=r({__name:"LoginForm",__ssrInlineRender:!0,emits:["login-success"],setup(a,{emit:r}){const f=u(),b=s(null),w=s(!1),x=s(!1),h=t({email:"",password:""}),V=[e=>!!e||"Email is required",e=>/.+@.+\..+/.test(e)||"Invalid email format"],E=[e=>!!e||"Password is required",e=>e.length>=6||"Password must be at least 6 characters"],togglePasswordVisibility=()=>{w.value=!w.value},handleLogin=async()=>{var e;if(null==(e=b.value)?void 0:e.validate()){x.value=!0,f.loginError=null;try{await f.login(h),await f.fetchUser(),clearForm(),_("login-success")}catch(e){console.error("Login error:",e),f.loginError=e.message||"Login failed"}finally{x.value=!1}}},clearForm=()=>{var e;h.email="",h.password="",null==(e=b.value)||e.reset()},_=r,handleSocialSuccess=e=>{_("login-success")},handleSocialError=e=>{f.loginError=e};return(a,r,s,t)=>{const u=e,_=o,k=l;r(p(v,n({onSubmit:handleLogin,ref_key:"form",ref:b,class:"login-form"},t),{default:i(((e,o,l,a)=>{if(!o)return[c(y,{modelValue:h.email,"onUpdate:modelValue":e=>h.email=e,label:"Email",placeholder:"email@example.com",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-email","persistent-placeholder":!0,"single-line":!0,class:"custom-text-field mb-3",autocomplete:"email",type:"email",name:"email",rules:V},null,8,["modelValue","onUpdate:modelValue"]),c(y,{modelValue:h.password,"onUpdate:modelValue":e=>h.password=e,label:"Password",placeholder:"Enter your password",type:w.value?"text":"password",variant:"outlined",density:"compact","append-inner-icon":w.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":togglePasswordVisibility,"prepend-inner-icon":"mdi-lock","persistent-placeholder":!0,"single-line":!0,class:"custom-text-field mb-3",autocomplete:"current-password",name:"password",rules:E},null,8,["modelValue","onUpdate:modelValue","type","append-inner-icon"]),c("div",{class:"d-flex justify-end mb-3"},[c(u,{to:"/password/reset",class:"text-decoration-none text-caption text-primary forgot-link"},{default:i((()=>[d(" Forgot Password? ")])),_:1})]),c(_,{message:m(f).loginError,type:"error",visible:!!m(f).loginError,class:"mb-3"},null,8,["message","visible"]),c(g,{type:"submit",color:"primary",block:"",loading:x.value,class:"text-body-1 login-btn",height:"42"},{default:i((()=>[d(" Log In ")])),_:1},8,["loading"]),c(k,{mode:"login",onSocialSuccess:handleSocialSuccess,onSocialError:handleSocialError,class:"mt-3"})];o(p(y,{modelValue:h.email,"onUpdate:modelValue":e=>h.email=e,label:"Email",placeholder:"email@example.com",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-email","persistent-placeholder":!0,"single-line":!0,class:"custom-text-field mb-3",autocomplete:"email",type:"email",name:"email",rules:V},null,l,a)),o(p(y,{modelValue:h.password,"onUpdate:modelValue":e=>h.password=e,label:"Password",placeholder:"Enter your password",type:w.value?"text":"password",variant:"outlined",density:"compact","append-inner-icon":w.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":togglePasswordVisibility,"prepend-inner-icon":"mdi-lock","persistent-placeholder":!0,"single-line":!0,class:"custom-text-field mb-3",autocomplete:"current-password",name:"password",rules:E},null,l,a)),o(`<div class="d-flex justify-end mb-3" data-v-72a1de7f${a}>`),o(p(u,{to:"/password/reset",class:"text-decoration-none text-caption text-primary forgot-link"},{default:i(((e,o,l,a)=>{if(!o)return[d(" Forgot Password? ")];o(" Forgot Password? ")})),_:1},l,a)),o("</div>"),o(p(_,{message:m(f).loginError,type:"error",visible:!!m(f).loginError,class:"mb-3"},null,l,a)),o(p(g,{type:"submit",color:"primary",block:"",loading:x.value,class:"text-body-1 login-btn",height:"42"},{default:i(((e,o,l,a)=>{if(!o)return[d(" Log In ")];o(" Log In ")})),_:1},l,a)),o(p(k,{mode:"login",onSocialSuccess:handleSocialSuccess,onSocialError:handleSocialError,class:"mt-3"},null,l,a))})),_:1},s))}}}),w=b.setup;b.setup=(e,o)=>{const l=a();return(l.modules||(l.modules=new Set)).add("components/auth/LoginForm.vue"),w?w(e,o):void 0};const x=f(b,[["__scopeId","data-v-72a1de7f"]]);export{x as _};
