import{useSSRContext as e,ref as a,computed as t,defineComponent as i,mergeProps as l,withCtx as r,createTextVNode as o,toDisplayString as n,createVNode as s,renderSlot as u}from"vue";import{ssrRenderAttrs as d,ssrInterpolate as m,ssrRenderComponent as c,ssrRenderClass as v,ssrRenderStyle as p,ssrRenderSlot as f}from"vue/server-renderer";import{u as g}from"./useTimeFormatting-BygSFjON.mjs";import{d as x,u as y,af as h,V as b,_}from"./server.mjs";import{V as z}from"./VAlert-DneVUU3Q.mjs";import{V as S,a as w}from"./VCard-CsohsM82.mjs";import{V as q}from"./VAvatar-JL8WKjry.mjs";import{u as $}from"./useWalletStore-C5It8oQZ.mjs";const F=i({__name:"PremieringMediaRequirements",__ssrInlineRender:!0,props:{title:{default:void 0},loading:{type:Boolean,default:!1},error:{default:null},maxSize:{},resolution:{},format:{},duration:{},layout:{default:"horizontal"}},setup(e){const a=e,{formatDuration:i}=g(),{formatFileSize:s}=function(){const getFileExtension=e=>e.slice(2+(e.lastIndexOf(".")-1>>>0)).toLowerCase();return{formatFileSize:e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][a]},getFileExtension:getFileExtension,getFileType:e=>({jpg:"Image",jpeg:"Image",png:"Image",gif:"Image",webp:"Image",svg:"Image",pdf:"PDF Document",doc:"Word Document",docx:"Word Document",xls:"Excel Spreadsheet",xlsx:"Excel Spreadsheet",ppt:"PowerPoint",pptx:"PowerPoint",txt:"Text Document",mp3:"Audio",wav:"Audio",ogg:"Audio",mp4:"Video",mov:"Video",avi:"Video",mkv:"Video",zip:"Archive",rar:"Archive","7z":"Archive",tar:"Archive",gz:"Archive",js:"JavaScript",ts:"TypeScript",html:"HTML",css:"CSS",json:"JSON",xml:"XML",csv:"CSV File",md:"Markdown"}[getFileExtension(e)]||"Unknown File"),formatFileName:(e,a=20)=>{const t=getFileExtension(e),i=e.slice(0,e.lastIndexOf("."));return i.length<=a?e:`${i.slice(0,a)}...${t}`},getFileIcon:e=>({jpg:"🖼️",jpeg:"🖼️",png:"🖼️",gif:"🖼️",webp:"🖼️",svg:"🖼️",pdf:"📄",doc:"📝",docx:"📝",xls:"📊",xlsx:"📊",ppt:"📊",pptx:"📊",txt:"📄",mp3:"🎵",wav:"🎵",ogg:"🎵",mp4:"🎥",mov:"🎥",avi:"🎥",mkv:"🎥",zip:"📦",rar:"📦","7z":"📦",js:"📜",ts:"📜",html:"📜",css:"📜",csv:"📊",md:"📝"}[getFileExtension(e)]||"📄"),formatFileDate:e=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(e)),isImageFile:e=>["jpg","jpeg","png","gif","webp","svg"].includes(getFileExtension(e)),isDocumentFile:e=>["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"].includes(getFileExtension(e)),formatFilePermissions:e=>{const a={0:"---",1:"--x",2:"-w-",3:"-wx",4:"r--",5:"r-x",6:"rw-",7:"rwx"};return e.split("").map((e=>a[e])).join("")}}}(),u=t((()=>{const e="string"==typeof a.maxSize?parseInt(a.maxSize,10):a.maxSize;return s(e)})),p=t((()=>{const e=a.duration;return"number"!=typeof e||isNaN(e)?"Invalid duration":i(e,{showSeconds:!0,shortFormat:!0})}));return(e,a,t,i)=>{a(`<div${d(l({class:"requirements-wrapper"},i))} data-v-2b830504>`),e.title?a(`<h3 class="requirements-title" data-v-2b830504>${m(e.title)}</h3>`):a("\x3c!----\x3e"),e.loading?a(c(h,{indeterminate:"",color:"primary",height:"2"},null,t)):e.error?a(c(z,{type:"error",variant:"tonal",density:"compact",class:"mb-0"},{default:r(((a,t,i,l)=>{if(!t)return[o(n(e.error),1)];t(`${m(e.error)}`)})),_:1},t)):(a(`<div class="${v(["horizontal"===e.layout?"requirements-grid":"requirements-list"])}" data-v-2b830504><div class="req-item" data-v-2b830504>`),a(c(b,{size:"horizontal"===e.layout?"small":"default",color:"primary",class:"mr-2"},{default:r(((e,a,t,i)=>{if(!a)return[o(" mdi-file-size ")];a(" mdi-file-size ")})),_:1},t)),a(`<div class="${v("horizontal"===e.layout?"req-content-horizontal":"req-content-vertical")}" data-v-2b830504><span class="req-label" data-v-2b830504>Maximum Size:</span><span class="req-value" data-v-2b830504>${m(u.value)}</span></div></div><div class="req-item" data-v-2b830504>`),a(c(b,{size:"horizontal"===e.layout?"small":"default",color:"primary",class:"mr-2"},{default:r(((e,a,t,i)=>{if(!a)return[o(" mdi-video-high-definition ")];a(" mdi-video-high-definition ")})),_:1},t)),a(`<div class="${v("horizontal"===e.layout?"req-content-horizontal":"req-content-vertical")}" data-v-2b830504><span class="req-label" data-v-2b830504>Max Resolution:</span><span class="req-value" data-v-2b830504>${m(e.resolution)}</span></div></div><div class="req-item" data-v-2b830504>`),a(c(b,{size:"horizontal"===e.layout?"small":"default",color:"primary",class:"mr-2"},{default:r(((e,a,t,i)=>{if(!a)return[o(" mdi-video-input-component ")];a(" mdi-video-input-component ")})),_:1},t)),a(`<div class="${v("horizontal"===e.layout?"req-content-horizontal":"req-content-vertical")}" data-v-2b830504><span class="req-label" data-v-2b830504>Format:</span><span class="req-value" data-v-2b830504>${m(e.format)}</span></div></div><div class="req-item" data-v-2b830504>`),a(c(b,{size:"horizontal"===e.layout?"small":"default",color:"primary",class:"mr-2"},{default:r(((e,a,t,i)=>{if(!a)return[o(" mdi-clock-outline ")];a(" mdi-clock-outline ")})),_:1},t)),a(`<div class="${v("horizontal"===e.layout?"req-content-horizontal":"req-content-vertical")}" data-v-2b830504><span class="req-label" data-v-2b830504>Duration:</span><span class="req-value" data-v-2b830504>${m(p.value)}</span></div></div></div>`)),a("</div>")}}}),C=F.setup;F.setup=(a,t)=>{const i=e();return(i.modules||(i.modules=new Set)).add("components/premiering/PremieringMediaRequirements.vue"),C?C(a,t):void 0};const I=_(F,[["__scopeId","data-v-2b830504"]]),M=i({__name:"PaymentConfirmationCard",__ssrInlineRender:!0,props:{amount:{},currencySymbol:{},currencyCode:{},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},paymentLabel:{default:"Premiering Fee"}},setup:e=>(e,a,t,i)=>{a(c(S,l({elevation:"10",rounded:"lg"},i),{default:r(((a,t,i,l)=>{if(!t)return[s(w,{class:"pa-2"},{default:r((()=>[s("div",{class:"d-flex align-center"},[s("div",{class:"d-flex align-center"},[s(q,{class:"payment-avatar mr-4",size:"48",color:"primary",variant:"tonal"},{default:r((()=>[s(b,{size:"24",color:"primary"},{default:r((()=>[o(" mdi-cash-multiple ")])),_:1})])),_:1}),s("div",{class:"amount-info"},[s("div",{class:"text-subtitle-2 text-medium-emphasis"},n(e.paymentLabel),1),s("div",{class:"d-flex align-center"},[s("span",{class:"text-h6 font-weight-bold"},n(e.currencySymbol)+" "+n(e.amount.toLocaleString()),1),s("span",{class:"text-caption text-medium-emphasis ml-1"},n(e.currencyCode),1)]),s("div",{class:"text-caption text-medium-emphasis mt-1"}," That amount will be deducted from your wallet balance after uploading is complete. ")])]),s("div",{class:"ml-auto",style:{"min-width":"140px"}},[u(e.$slots,"actions",{},void 0,!0)])])])),_:2},1024)];t(c(w,{class:"pa-2"},{default:r(((a,t,i,l)=>{if(!t)return[s("div",{class:"d-flex align-center"},[s("div",{class:"d-flex align-center"},[s(q,{class:"payment-avatar mr-4",size:"48",color:"primary",variant:"tonal"},{default:r((()=>[s(b,{size:"24",color:"primary"},{default:r((()=>[o(" mdi-cash-multiple ")])),_:1})])),_:1}),s("div",{class:"amount-info"},[s("div",{class:"text-subtitle-2 text-medium-emphasis"},n(e.paymentLabel),1),s("div",{class:"d-flex align-center"},[s("span",{class:"text-h6 font-weight-bold"},n(e.currencySymbol)+" "+n(e.amount.toLocaleString()),1),s("span",{class:"text-caption text-medium-emphasis ml-1"},n(e.currencyCode),1)]),s("div",{class:"text-caption text-medium-emphasis mt-1"}," That amount will be deducted from your wallet balance after uploading is complete. ")])]),s("div",{class:"ml-auto",style:{"min-width":"140px"}},[u(e.$slots,"actions",{},void 0,!0)])])];t(`<div class="d-flex align-center" data-v-e60bd4c2${l}><div class="d-flex align-center" data-v-e60bd4c2${l}>`),t(c(q,{class:"payment-avatar mr-4",size:"48",color:"primary",variant:"tonal"},{default:r(((e,a,t,i)=>{if(!a)return[s(b,{size:"24",color:"primary"},{default:r((()=>[o(" mdi-cash-multiple ")])),_:1})];a(c(b,{size:"24",color:"primary"},{default:r(((e,a,t,i)=>{if(!a)return[o(" mdi-cash-multiple ")];a(" mdi-cash-multiple ")})),_:1},t,i))})),_:1},i,l)),t(`<div class="amount-info" data-v-e60bd4c2${l}><div class="text-subtitle-2 text-medium-emphasis" data-v-e60bd4c2${l}>${m(e.paymentLabel)}</div><div class="d-flex align-center" data-v-e60bd4c2${l}><span class="text-h6 font-weight-bold" data-v-e60bd4c2${l}>${m(e.currencySymbol)} ${m(e.amount.toLocaleString())}</span><span class="text-caption text-medium-emphasis ml-1" data-v-e60bd4c2${l}>${m(e.currencyCode)}</span></div><div class="text-caption text-medium-emphasis mt-1" data-v-e60bd4c2${l}> That amount will be deducted from your wallet balance after uploading is complete. </div></div></div><div class="ml-auto" style="${p({"min-width":"140px"})}" data-v-e60bd4c2${l}>`),f(e.$slots,"actions",{},null,t,i,l),t("</div></div>")})),_:3},i,l))})),_:3},t))}}),j=M.setup;M.setup=(a,t)=>{const i=e();return(i.modules||(i.modules=new Set)).add("components/payment/PaymentConfirmationCard.vue"),j?j(a,t):void 0};const A=_(M,[["__scopeId","data-v-e60bd4c2"]]),B=x("premieringMediaUploadRequirements",(()=>{const{$axios:e}=y(),i=a(null),l=a(null),r=a(!1),o=a(null),n=t((()=>{var e;if(!(null==(e=l.value)?void 0:e.max_file_size))return"0 MB";const a=l.value.max_file_size;return a>=1024?`${(a/1024).toFixed(1)} GB`:`${a} MB`})),s=t((()=>{var e;return(null==(e=l.value)?void 0:e.max_file_size)?1024*l.value.max_file_size*1024:0})),u=t((()=>{var e,a,t,i;return{loading:r.value,error:o.value,maxSize:s.value,resolution:(null==(a=l.value)?void 0:a.resolution_limit)||"N/A",format:(null==(t=l.value)?void 0:t.encoding_format)||"N/A",duration:null!=(e=null==(i=l.value)?void 0:i.main_duration_limit)?e:0}})),d=t((()=>{var e,a,t,i;return{loading:r.value,error:o.value,maxSize:s.value,resolution:(null==(a=l.value)?void 0:a.resolution_limit)||"N/A",format:(null==(t=l.value)?void 0:t.encoding_format)||"N/A",duration:null!=(e=null==(i=l.value)?void 0:i.trailer_duration_limit)?e:0}})),m=t((()=>{var e,a;return(null==(a=null==(e=l.value)?void 0:e.premiering_fee)?void 0:a.amount)||0})),c=t((()=>{var e,a;return(null==(a=null==(e=l.value)?void 0:e.premiering_fee)?void 0:a.currency)||null})),v=t((()=>{var e;return(null==(e=c.value)?void 0:e.code)||""})),p=t((()=>{var e;return(null==(e=c.value)?void 0:e.code)||""})),fetchRequirements=async a=>{r.value=!0,o.value=null;try{const t=await e.get(`/api/premiering-fees/${a}`);l.value=t.data}catch(e){throw console.error("Error fetching requirements:",e),o.value="Failed to fetch media requirements.",e}finally{r.value=!1}},f=t((()=>({main:{maxSize:u.value.maxSize,resolution:u.value.resolution,format:u.value.format,duration:u.value.duration},trailer:{maxSize:d.value.maxSize,resolution:d.value.resolution,format:d.value.format,duration:d.value.duration}})));return{selectedCategory:i,requirements:l,loading:r,error:o,mainRequirements:u,trailerRequirements:d,formattedRequirements:f,formattedMaxFileSize:n,amount:m,currency:c,currencySymbol:v,currencyCode:p,selectCategory:async e=>{try{i.value=e,await fetchRequirements(e.slug)}catch(e){console.error("Error in selectCategory:",e),o.value="Failed to load category requirements."}},fetchRequirements:fetchRequirements,resetState:()=>{i.value=null,localStorage.removeItem("premieringMediaUploadRequirements-selectedCategory"),r.value=!1,o.value=null},validateFileSize:e=>{var a;if(!(null==(a=l.value)?void 0:a.max_file_size))return!1;return e<=1024*l.value.max_file_size*1024},validateFormat:e=>{var a;if(!(null==(a=l.value)?void 0:a.encoding_format))return!1;const t=`video/${l.value.encoding_format.toLowerCase()}`;return e.toLowerCase()===t},validateDuration:(e,a)=>{if(!l.value)return!1;return e<=("main"===a?l.value.main_duration_limit:l.value.trailer_duration_limit)}}}),{persist:{paths:["selectedCategory"],storage:localStorage}});function useWalletStatus(e){const a=$(),getPaymentInfo=()=>"value"in e?e.value:e,i=t((()=>a.isWalletActive)),l=t((()=>Number(a.currentBalance||0))),r=t((()=>{const e=getPaymentInfo();return!(!a.currentCurrency||!e.currency)&&a.currentCurrency.code!==e.currency.code})),o=t((()=>{const e=getPaymentInfo();return!r.value&&l.value<e.amount}));return{status:t((()=>i.value?r.value?"currencyMismatch":o.value?"insufficient":"sufficient":"inactive")),isEligible:t((()=>i.value&&!o.value&&!r.value)),isWalletActive:i,hasInsufficientFunds:o,isCurrencyMismatch:r,availableBalance:l}}export{I as _,useWalletStatus as a,A as b,B as u};
