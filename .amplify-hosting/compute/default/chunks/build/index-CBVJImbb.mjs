import{_ as e}from"./BaseCard-5i8D5k_7.mjs";import{_ as t}from"./StatusBadge-s-9yaW6G.mjs";import{useSSRContext as r,defineComponent as a,mergeProps as l,withCtx as o,createTextVNode as s,toDisplayString as i,unref as d,createVNode as n,ref as u,openBlock as m,createBlock as c,Fragment as v,renderList as p,createCommentVNode as f,computed as y}from"vue";import{ssrRenderComponent as _,ssrInterpolate as g,ssrRenderList as x,ssrRenderStyle as b,ssrRenderAttrs as h}from"vue/server-renderer";import{u as j}from"./useCurrencyFormatter-Dfs2ioxk.mjs";import{u as k}from"./useDateFormatter-W2Hui1rv.mjs";import{a as $}from"./VChip-f_o2BAA4.mjs";import{_ as w,V,u as C,b as O,U as T,f as B}from"./server.mjs";import{u as S}from"./useInfiniteLoader-Bs8qePv9.mjs";import{V as I}from"./VContainer-By3q0af_.mjs";import{V as U}from"./VMenu-BpdBiT5v.mjs";import{V as z}from"./VList-CcwwrkQR.mjs";import{V as L,a as A}from"./VListItem-jTLuICGb.mjs";import{V as M}from"./VCard-CsohsM82.mjs";import{V as D}from"./VSnackbar-zBX8NfdO.mjs";import{u as F}from"./useApps-hYo13Xt3.mjs";import{u as R}from"./useSeo-Dl9beXFt.mjs";import"./index--K8ZrFMm.mjs";import"./VAvatar-JL8WKjry.mjs";import"./VImg-B2jcJjnn.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"vue-router";import"pinia-plugin-persistedstate";import"./index-8pAncyvV.mjs";import"./index-DfGQ-Pg8.mjs";import"./VOverlay-ZKavbTei.mjs";import"./easing-Bn3h-KUg.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"./ssrBoot-BtvJZs44.mjs";import"./VDivider-BmyMVZMt.mjs";const P=a({__name:"OrderHistoryItem",__ssrInlineRender:!0,props:{order:{type:Object,required:!0}},setup(r){const{currencyFormatter:a}=j(),{formatRelativeDate:u,formatLocalDateTime:m}=k(),formatOrderType=e=>e?e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "):"",getOrderTypeColor=e=>({tip:"purple",project_watching:"blue",project_tip:"deep-purple",project_promotion:"indigo",project_premiering:"red",event_promotion:"green",ticket_promotion:"orange",user_profile_promotion:"pink"}[e]||"grey");return(c,v,p,f)=>{const y=t;v(_(e,l({to:`/orders/order-${r.order.reference}`,class:"order-history-item",elevation:2},f),{default:o(((e,t,l,c)=>{if(!t)return[n("div",{class:"d-flex justify-space-between"},[n("div",{class:"flex-grow-1"},[n("div",{class:"d-flex align-center mb-2"},[n("div",{class:"text-subtitle-1 font-weight-medium"}," #"+i(r.order.reference),1),n($,{size:"small",color:getOrderTypeColor(r.order.order_type),class:"ml-2",variant:"flat"},{default:o((()=>[s(i(formatOrderType(r.order.order_type)),1)])),_:1},8,["color"])]),n("div",{class:"d-flex align-center text-grey text-body-2"},[n(V,{size:"small",class:"mr-1"},{default:o((()=>[s("mdi-clock-outline")])),_:1}),n("span",{class:"mr-4"},i(d(u)(r.order.created_at)),1),n("span",{class:"text-caption"},i(d(m)(r.order.created_at)),1)])]),n("div",{class:"text-right"},[n("div",{class:"text-h6 mb-1"},i(d(a)(r.order.total_amount,r.order.currency.symbol,r.order.currency.code)),1),n(y,{status:r.order.status},null,8,["status"])])])];t(`<div class="d-flex justify-space-between" data-v-14998bad${c}><div class="flex-grow-1" data-v-14998bad${c}><div class="d-flex align-center mb-2" data-v-14998bad${c}><div class="text-subtitle-1 font-weight-medium" data-v-14998bad${c}> #${g(r.order.reference)}</div>`),t(_($,{size:"small",color:getOrderTypeColor(r.order.order_type),class:"ml-2",variant:"flat"},{default:o(((e,t,a,l)=>{if(!t)return[s(i(formatOrderType(r.order.order_type)),1)];t(`${g(formatOrderType(r.order.order_type))}`)})),_:1},l,c)),t(`</div><div class="d-flex align-center text-grey text-body-2" data-v-14998bad${c}>`),t(_(V,{size:"small",class:"mr-1"},{default:o(((e,t,r,a)=>{if(!t)return[s("mdi-clock-outline")];t("mdi-clock-outline")})),_:1},l,c)),t(`<span class="mr-4" data-v-14998bad${c}>${g(d(u)(r.order.created_at))}</span><span class="text-caption" data-v-14998bad${c}>${g(d(m)(r.order.created_at))}</span></div></div><div class="text-right" data-v-14998bad${c}><div class="text-h6 mb-1" data-v-14998bad${c}>${g(d(a)(r.order.total_amount,r.order.currency.symbol,r.order.currency.code))}</div>`),t(_(y,{status:r.order.status},null,l,c)),t("</div></div>")})),_:1},p))}}}),Y=P.setup;P.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/order/OrderHistoryItem.vue"),Y?Y(e,t):void 0};const H=w(P,[["__scopeId","data-v-14998bad"]]),N=a({__name:"UserOrdersPage",__ssrInlineRender:!0,setup(e){const{$axios:t}=C(),r=u([]),a=u(!0),y=u(!1),h=u(""),j=u(1),k=u("latest"),$=[{label:"Latest First",value:"latest"},{label:"Oldest First",value:"oldest"},{label:"Highest Amount",value:"amount_desc"},{label:"Lowest Amount",value:"amount_asc"}],fetchOrders=async e=>{try{const l=await t.get("/api/orders/history",{params:{page:e,per_page:10,sort:k.value}}),{data:o,current_page:s,last_page:i}=l.data;r.value=1===e?o:[...r.value,...o],a.value=s<i,j.value=s}catch(e){y.value=!0,h.value="Failed to load orders. Please try again.",console.error("Error fetching orders:",e)}},{sentinelRef:w,isLoading:B,initLoader:F}=S(fetchOrders,a),updateSort=async e=>{k.value=e,j.value=1,r.value=[],await fetchOrders(1)};return(e,t,a,u)=>{const k=H;t(_(I,u,{default:o(((e,t,a,u)=>{if(!t)return[n("div",{class:"d-flex justify-space-between align-center mb-6"},[n("h2",{class:"text-h5"},"Order History"),r.value.length?(m(),c(U,{key:0},{activator:o((({props:e})=>[n(O,l(e,{icon:"mdi-dots-vertical",variant:"text"}),null,16)])),default:o((()=>[n(z,null,{default:o((()=>[(m(),c(v,null,p($,((e,t)=>n(L,{key:t,value:e.value,onClick:t=>updateSort(e.value)},{default:o((()=>[n(A,null,{default:o((()=>[s(i(e.label),1)])),_:2},1024)])),_:2},1032,["value","onClick"]))),64))])),_:1})])),_:1})):f("",!0)]),d(B)&&1===j.value?(m(),c("div",{key:0,class:"d-flex justify-center align-center",style:{"min-height":"200px"}},[n(T,{indeterminate:"",color:"primary"})])):(m(),c(v,{key:1},[d(B)||0!==r.value.length?(m(),c("div",{key:1,class:"orders-list"},[(m(!0),c(v,null,p(r.value,(e=>(m(),c(k,{key:e.id,order:e},null,8,["order"])))),128))])):(m(),c(M,{key:0,class:"text-center pa-6"},{default:o((()=>[n(V,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:o((()=>[s(" mdi-receipt-text-outline ")])),_:1}),n("h3",{class:"text-h6 mb-2"},"No Orders Yet"),n("p",{class:"text-body-1 text-grey mb-4"}," Your order history will appear here once you make your first purchase. ")])),_:1})),d(B)&&j.value>1?(m(),c("div",{key:2,class:"d-flex justify-center my-4"},[n(T,{indeterminate:"",color:"primary"})])):f("",!0),n("div",{ref_key:"sentinelRef",ref:w,class:"sentinel"},null,512)],64)),n(D,{modelValue:y.value,"onUpdate:modelValue":e=>y.value=e,color:"error",timeout:"5000"},{actions:o((()=>[n(O,{color:"white",variant:"text",onClick:e=>y.value=!1},{default:o((()=>[s(" Close ")])),_:1},8,["onClick"])])),default:o((()=>[s(i(h.value)+" ",1)])),_:1},8,["modelValue","onUpdate:modelValue"])];t(`<div class="d-flex justify-space-between align-center mb-6" data-v-d43f5457${u}><h2 class="text-h5" data-v-d43f5457${u}>Order History</h2>`),r.value.length?t(_(U,null,{activator:o((({props:e},t,r,a)=>{if(!t)return[n(O,l(e,{icon:"mdi-dots-vertical",variant:"text"}),null,16)];t(_(O,l(e,{icon:"mdi-dots-vertical",variant:"text"}),null,r,a))})),default:o(((e,t,r,a)=>{if(!t)return[n(z,null,{default:o((()=>[(m(),c(v,null,p($,((e,t)=>n(L,{key:t,value:e.value,onClick:t=>updateSort(e.value)},{default:o((()=>[n(A,null,{default:o((()=>[s(i(e.label),1)])),_:2},1024)])),_:2},1032,["value","onClick"]))),64))])),_:1})];t(_(z,null,{default:o(((e,t,r,a)=>{if(!t)return[(m(),c(v,null,p($,((e,t)=>n(L,{key:t,value:e.value,onClick:t=>updateSort(e.value)},{default:o((()=>[n(A,null,{default:o((()=>[s(i(e.label),1)])),_:2},1024)])),_:2},1032,["value","onClick"]))),64))];t("\x3c!--[--\x3e"),x($,((e,l)=>{t(_(L,{key:l,value:e.value,onClick:t=>updateSort(e.value)},{default:o(((t,r,a,l)=>{if(!r)return[n(A,null,{default:o((()=>[s(i(e.label),1)])),_:2},1024)];r(_(A,null,{default:o(((t,r,a,l)=>{if(!r)return[s(i(e.label),1)];r(`${g(e.label)}`)})),_:2},a,l))})),_:2},r,a))})),t("\x3c!--]--\x3e")})),_:1},r,a))})),_:1},a,u)):t("\x3c!----\x3e"),t("</div>"),d(B)&&1===j.value?(t(`<div class="d-flex justify-center align-center" style="${b({"min-height":"200px"})}" data-v-d43f5457${u}>`),t(_(T,{indeterminate:"",color:"primary"},null,a,u)),t("</div>")):(t("\x3c!--[--\x3e"),d(B)||0!==r.value.length?(t(`<div class="orders-list" data-v-d43f5457${u}>\x3c!--[--\x3e`),x(r.value,(e=>{t(_(k,{key:e.id,order:e},null,a,u))})),t("\x3c!--]--\x3e</div>")):t(_(M,{class:"text-center pa-6"},{default:o(((e,t,r,a)=>{if(!t)return[n(V,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:o((()=>[s(" mdi-receipt-text-outline ")])),_:1}),n("h3",{class:"text-h6 mb-2"},"No Orders Yet"),n("p",{class:"text-body-1 text-grey mb-4"}," Your order history will appear here once you make your first purchase. ")];t(_(V,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:o(((e,t,r,a)=>{if(!t)return[s(" mdi-receipt-text-outline ")];t(" mdi-receipt-text-outline ")})),_:1},r,a)),t(`<h3 class="text-h6 mb-2" data-v-d43f5457${a}>No Orders Yet</h3><p class="text-body-1 text-grey mb-4" data-v-d43f5457${a}> Your order history will appear here once you make your first purchase. </p>`)})),_:1},a,u)),d(B)&&j.value>1?(t(`<div class="d-flex justify-center my-4" data-v-d43f5457${u}>`),t(_(T,{indeterminate:"",color:"primary"},null,a,u)),t("</div>")):t("\x3c!----\x3e"),t(`<div class="sentinel" data-v-d43f5457${u}></div>\x3c!--]--\x3e`)),t(_(D,{modelValue:y.value,"onUpdate:modelValue":e=>y.value=e,color:"error",timeout:"5000"},{actions:o(((e,t,r,a)=>{if(!t)return[n(O,{color:"white",variant:"text",onClick:e=>y.value=!1},{default:o((()=>[s(" Close ")])),_:1},8,["onClick"])];t(_(O,{color:"white",variant:"text",onClick:e=>y.value=!1},{default:o(((e,t,r,a)=>{if(!t)return[s(" Close ")];t(" Close ")})),_:1},r,a))})),default:o(((e,t,r,a)=>{if(!t)return[s(i(h.value)+" ",1)];t(`${g(h.value)} `)})),_:1},a,u))})),_:1},a))}}}),Z=N.setup;N.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("views/orders/UserOrdersPage.vue"),Z?Z(e,t):void 0};const J=w(N,[["__scopeId","data-v-d43f5457"]]),K=a({__name:"index",__ssrInlineRender:!0,setup(e){const t=F(),r=y((()=>t.talastageApp));return R({title:y((()=>{var e;return(null==(e=r.value)?void 0:e.name)?`My Orders - ${r.value.name}`:"My Orders - TalaStage"})),description:y((()=>{var e;return`View and manage your orders on ${(null==(e=r.value)?void 0:e.name)||"TalaStage"}. Track order status and get updates.`})),keywords:"orders, my orders, track orders, order status, TalaStage",image:y((()=>{var e;return(null==(e=r.value)?void 0:e.logo_url)||"/default-social-image.png"})),url:y((()=>`${B().public.frontendUrl}/orders`)),type:"website",siteName:y((()=>{var e;return(null==(e=r.value)?void 0:e.name)||"TalaStage"})),twitterUsername:"@talastage",structured:{"@context":"https://schema.org","@type":"WebPage",name:y((()=>{var e;return(null==(e=r.value)?void 0:e.name)?`My Orders - ${r.value.name}`:"My Orders - TalaStage"})),description:y((()=>{var e;return`View and manage your orders on ${(null==(e=r.value)?void 0:e.name)||"TalaStage"}. Track order status and get updates.`})),url:y((()=>`${B().public.frontendUrl}/orders`)),publisher:{"@type":"Organization",name:y((()=>{var e;return(null==(e=r.value)?void 0:e.name)||"TalaStage"})),logo:{"@type":"ImageObject",url:y((()=>{var e;return(null==(e=r.value)?void 0:e.logo_url)||"/default-social-image.png"}))}}}}),(e,t,r,a)=>{const l=J;t(`<div${h(a)} data-v-d18fc355>`),t(_(l,null,null,r)),t("</div>")}}}),W=K.setup;K.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("pages/orders/index.vue"),W?W(e,t):void 0};const q=w(K,[["__scopeId","data-v-d18fc355"]]);export{q as default};
