import{_ as e}from"./WalletTransactions-CyYBgLl8.mjs";import{useSSRContext as t,defineComponent as a,ref as l,computed as s,mergeProps as r,unref as o,withCtx as n,createTextVNode as u,withAsyncContext as i,watch as c,createVNode as m,toDisplayString as d,openBlock as p,createBlock as v,Fragment as f,renderList as y,createCommentVNode as g}from"vue";import{ssrRenderAttrs as w,ssrInterpolate as h,ssrRenderComponent as b,ssrRenderList as _}from"vue/server-renderer";import{u as x}from"./useWalletStore-C5It8oQZ.mjs";import{V as j}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{_ as V,V as k,au as $,e as T,a$ as C,b as D}from"./server.mjs";import{useToast as S}from"vue-toastification";import{u as B}from"./useCurrencyFormatter-Dfs2ioxk.mjs";import{V as F}from"./VDialog-DA9BdIfh.mjs";import{V as A,b as I,a as W,c as U}from"./VCard-CsohsM82.mjs";import{V as Y}from"./VAlert-DneVUU3Q.mjs";import{V as R}from"./VSpacer-_gFExeVk.mjs";import{useRoute as P}from"vue-router";import{V as M}from"./VRow-rkX0LEXR.mjs";import{V as Z}from"./VCol-CKxprC4g.mjs";import{u as K}from"./useApps-hYo13Xt3.mjs";import{u as L}from"./useWalletAuthStore-Uk84eIzt.mjs";import"./BaseContent-D2jufG_L.mjs";import"./VDivider-BmyMVZMt.mjs";import"./BaseButton-BTGPFNw4.mjs";import"./useDateFormatter-W2Hui1rv.mjs";import"./VAvatar-JL8WKjry.mjs";import"./VImg-B2jcJjnn.mjs";import"./VChip-f_o2BAA4.mjs";import"./index--K8ZrFMm.mjs";import"axios";import"./index-8pAncyvV.mjs";import"./index-DfGQ-Pg8.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";import"./VOverlay-ZKavbTei.mjs";import"./easing-Bn3h-KUg.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"./interval-gl53xdpR.mjs";const N=a({__name:"WalletBalance",__ssrInlineRender:!0,setup(e){const t=x(),a=l(!1),i=s((()=>t.wallet)),c=s((()=>{var e;if(!(null==(e=i.value)?void 0:e.data))return null;const{balance:t,currency:a}=i.value.data;if(t&&a&&a.code){const e=parseFloat(t);if(!isNaN(e))return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}return null}));return(e,l,s,m)=>{var d,p,v;l(`<div${w(r({class:"wallet-balance"},m))} data-v-77230f32><div class="mt-3" data-v-77230f32><div class="text-subtitle-2 text-grey-darken-1 font-weight-medium mb-1" data-v-77230f32> Available Balance </div>`),c.value?(l(`<div class="balance-container" data-v-77230f32><div class="d-flex align-baseline" data-v-77230f32><span class="balance-amount font-weight-bold" data-v-77230f32>${h(c.value)}</span><span class="text-subtitle-1 ml-2 text-grey-darken-2 font-weight-medium" data-v-77230f32>${h(null==(v=null==(p=null==(d=i.value)?void 0:d.data)?void 0:p.currency)?void 0:v.code)}</span></div>`),a.value?l('<div class="balance-chart-container mt-2" data-v-77230f32><div class="balance-chart-placeholder" data-v-77230f32></div></div>'):l("\x3c!----\x3e"),l("</div>")):o(t).isFetching?(l('<div class="mt-3" data-v-77230f32>'),l(b(j,{type:"text",width:"300",height:"50"},null,s)),l("</div>")):o(t).error?(l('<div class="text-subtitle-1 mt-3 text-error font-weight-medium" data-v-77230f32>'),l(b(k,{start:"",color:"error",class:"mr-1"},{default:n(((e,t,a,l)=>{if(!t)return[u("mdi-alert-circle")];t("mdi-alert-circle")})),_:1},s)),l(` ${h(o(t).error.message)}</div>`)):(l('<div class="text-subtitle-1 mt-3 text-grey font-weight-medium" data-v-77230f32>'),l(b(k,{start:"",color:"grey",class:"mr-1"},{default:n(((e,t,a,l)=>{if(!t)return[u("mdi-information-outline")];t("mdi-information-outline")})),_:1},s)),l(" Balance information unavailable </div>")),l("</div></div>")}}}),q=N.setup;N.setup=(e,a)=>{const l=t();return(l.modules||(l.modules=new Set)).add("components/wallet/WalletBalance.vue"),q?q(e,a):void 0};const O=V(N,[["__scopeId","data-v-77230f32"]]),Q={__name:"TransactionStatusDialog",__ssrInlineRender:!0,props:{modelValue:Boolean,status:{type:String,default:"success"},message:{type:String,default:""},transactionType:{type:String,required:!0},amount:{type:Number,required:!0},currency:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,i=t,w=x(),{wallet:V}=C(w),k=S(),{currencyFormatter:$}=B(),T=s({get:()=>a.modelValue,set:e=>i("update:modelValue",e)}),P=l(!0),M=l(null),Z=s((()=>{switch(a.status){case"success":return`${capitalizeFirstLetter(a.transactionType)} Successful`;case"error":return`${capitalizeFirstLetter(a.transactionType)} Failed`;case"processing":return`${capitalizeFirstLetter(a.transactionType)} Processing`;default:return"Transaction Status"}})),K=s((()=>{const e=$(a.amount,a.currency.symbol,a.currency.code);switch(a.status){case"success":switch(a.transactionType){case"deposit":return`You have successfully deposited ${e} into your wallet.`;case"withdrawal":return`You have successfully withdrawn ${e} from your wallet.`;case"transfer":return`You have successfully transferred ${e}.`;default:return`Your ${a.transactionType} of ${e} was successful.`}case"error":return`Your ${a.transactionType} of ${e} has failed. Please try again or contact support if the issue persists.`;case"processing":return`Your ${a.transactionType} of ${e} is being processed. We'll notify you once it's complete.`;default:return a.message||`There's an update on your ${a.transactionType} of ${e}.`}})),L=s((()=>{switch(a.status){case"success":return"text-h5 bg-success text-white";case"error":return"text-h5 bg-error text-white";case"processing":return"text-h5 bg-info text-white";default:return"text-h5 bg-primary text-white"}})),N=s((()=>{switch(a.status){case"success":return"success";case"error":return"error";case"processing":return"info";default:return"primary"}})),q=s((()=>"success"===a.status||"processing"===a.status)),Q=s((()=>{if(!V.value||null===M.value)return!1;const e=parseFloat(V.value.data.balance)-M.value;return"success"===a.status&&0!==e})),X=s((()=>{if(!V.value||null===M.value)return"";const e=parseFloat(V.value.data.balance)-M.value;if(0===e)return"";const t=$(Math.abs(e),a.currency.symbol,a.currency.code);return e>0?`Your wallet balance has increased by ${t}.`:e<0?`Your wallet balance has decreased by ${t}.`:void 0})),E=s((()=>{if(!V.value||null===M.value)return"mdi-information";const e=parseFloat(V.value.data.balance)-M.value;return e>0?"mdi-arrow-up-bold":e<0?"mdi-arrow-down-bold":"mdi-equal"})),closeDialog=()=>{T.value=!1},capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1);return c(T,(async e=>{e?await(async()=>{P.value=!0;try{V.value&&(M.value=parseFloat(V.value.data.balance)),await w.fetchWallet()}catch(e){console.error("Error fetching wallet information:",e),k.error("Unable to load wallet information. Please try again later.")}finally{P.value=!1}})():M.value=null})),(t,a,l,s)=>{const i=O;a(b(F,r({modelValue:T.value,"onUpdate:modelValue":e=>T.value=e,"max-width":"500px"},s),{default:n(((t,a,l,s)=>{if(!a)return[m(A,null,{default:n((()=>[m(I,{class:L.value},{default:n((()=>[u(d(Z.value),1)])),_:1},8,["class"]),m(W,{class:"pt-4"},{default:n((()=>[m("p",{class:"text-body-1"},d(K.value),1),P.value?(p(),v(f,{key:0},y(1,(e=>m(j,{key:e,type:"article",class:"mb-4"}))),64)):o(V)?(p(),v(f,{key:1},[q.value?(p(),v(i,{key:0,walletData:o(V).data,class:"mt-4"},null,8,["walletData"])):g("",!0),Q.value?(p(),v(Y,{key:1,type:"success"===e.status?"success":"info",class:"mt-4",border:"left",elevation:"2",icon:E.value},{default:n((()=>[u(d(X.value),1)])),_:1},8,["type","icon"])):g("",!0)],64)):g("",!0)])),_:1}),m(U,null,{default:n((()=>[m(R),m(D,{color:N.value,onClick:closeDialog},{default:n((()=>[u("Close")])),_:1},8,["color"])])),_:1})])),_:1})];a(b(A,null,{default:n(((t,a,l,s)=>{if(!a)return[m(I,{class:L.value},{default:n((()=>[u(d(Z.value),1)])),_:1},8,["class"]),m(W,{class:"pt-4"},{default:n((()=>[m("p",{class:"text-body-1"},d(K.value),1),P.value?(p(),v(f,{key:0},y(1,(e=>m(j,{key:e,type:"article",class:"mb-4"}))),64)):o(V)?(p(),v(f,{key:1},[q.value?(p(),v(i,{key:0,walletData:o(V).data,class:"mt-4"},null,8,["walletData"])):g("",!0),Q.value?(p(),v(Y,{key:1,type:"success"===e.status?"success":"info",class:"mt-4",border:"left",elevation:"2",icon:E.value},{default:n((()=>[u(d(X.value),1)])),_:1},8,["type","icon"])):g("",!0)],64)):g("",!0)])),_:1}),m(U,null,{default:n((()=>[m(R),m(D,{color:N.value,onClick:closeDialog},{default:n((()=>[u("Close")])),_:1},8,["color"])])),_:1})];a(b(I,{class:L.value},{default:n(((e,t,a,l)=>{if(!t)return[u(d(Z.value),1)];t(`${h(Z.value)}`)})),_:1},l,s)),a(b(W,{class:"pt-4"},{default:n(((t,a,l,s)=>{if(!a)return[m("p",{class:"text-body-1"},d(K.value),1),P.value?(p(),v(f,{key:0},y(1,(e=>m(j,{key:e,type:"article",class:"mb-4"}))),64)):o(V)?(p(),v(f,{key:1},[q.value?(p(),v(i,{key:0,walletData:o(V).data,class:"mt-4"},null,8,["walletData"])):g("",!0),Q.value?(p(),v(Y,{key:1,type:"success"===e.status?"success":"info",class:"mt-4",border:"left",elevation:"2",icon:E.value},{default:n((()=>[u(d(X.value),1)])),_:1},8,["type","icon"])):g("",!0)],64)):g("",!0)];a(`<p class="text-body-1"${s}>${h(K.value)}</p>`),P.value?(a("\x3c!--[--\x3e"),_(1,(e=>{a(b(j,{key:e,type:"article",class:"mb-4"},null,l,s))})),a("\x3c!--]--\x3e")):o(V)?(a("\x3c!--[--\x3e"),q.value?a(b(i,{walletData:o(V).data,class:"mt-4"},null,l,s)):a("\x3c!----\x3e"),Q.value?a(b(Y,{type:"success"===e.status?"success":"info",class:"mt-4",border:"left",elevation:"2",icon:E.value},{default:n(((e,t,a,l)=>{if(!t)return[u(d(X.value),1)];t(`${h(X.value)}`)})),_:1},l,s)):a("\x3c!----\x3e"),a("\x3c!--]--\x3e")):a("\x3c!----\x3e")})),_:1},l,s)),a(b(U,null,{default:n(((e,t,a,l)=>{if(!t)return[m(R),m(D,{color:N.value,onClick:closeDialog},{default:n((()=>[u("Close")])),_:1},8,["color"])];t(b(R,null,null,a,l)),t(b(D,{color:N.value,onClick:closeDialog},{default:n(((e,t,a,l)=>{if(!t)return[u("Close")];t("Close")})),_:1},a,l))})),_:1},l,s))})),_:1},l,s))})),_:1},l))}}},X=Q.setup;Q.setup=(e,a)=>{const l=t();return(l.modules||(l.modules=new Set)).add("components/transaction/TransactionStatusDialog.vue"),X?X(e,a):void 0};const E={__name:"WalletPage",__ssrInlineRender:!0,setup(t){const a=x();C(a),S(),P();const s=l(!1),r=l(""),o=l(""),u=l(""),i=l(0),c=l({code:"",symbol:""});return(t,a,l,d)=>{const p=e,v=Q;a("\x3c!--[--\x3e"),a(b(M,null,{default:n(((e,t,a,l)=>{if(!t)return[m(Z,{cols:"12"},{default:n((()=>[m(p,{"transaction-type":"all",limit:10,"show-view-all":!1,"show-pagination":!1,"enable-infinite-scroll":!1,recent:!0})])),_:1})];t(b(Z,{cols:"12"},{default:n(((e,t,a,l)=>{if(!t)return[m(p,{"transaction-type":"all",limit:10,"show-view-all":!1,"show-pagination":!1,"enable-infinite-scroll":!1,recent:!0})];t(b(p,{"transaction-type":"all",limit:10,"show-view-all":!1,"show-pagination":!1,"enable-infinite-scroll":!1,recent:!0},null,a,l))})),_:1},a,l))})),_:1},l)),a(b(v,{modelValue:s.value,"onUpdate:modelValue":e=>s.value=e,status:r.value,message:o.value,"transaction-type":u.value,amount:i.value,currency:c.value},null,l)),a("\x3c!--]--\x3e")}}},G=E.setup;E.setup=(e,a)=>{const l=t();return(l.modules||(l.modules=new Set)).add("views/WalletPage.vue"),G?G(e,a):void 0};const J=V(E,[["__scopeId","data-v-800904d6"]]),z=a({__name:"index",__ssrInlineRender:!0,async setup(e){let t,a;L(),$();const l=K();[t,a]=i((()=>l.fetchTalaStageApp())),await t,a();const r=s((()=>l.talastageApp));return c((()=>r.value),(e=>{if(e){const t=`My Wallet - ${e.name||"TalaStage"}`,a="Manage your wallet, check balances, and track transactions securely.";T({title:t,meta:[{name:"description",content:a},{property:"og:title",content:t},{property:"og:description",content:a},{property:"og:image",content:e.logo_url||"/default-social-image.png"},{property:"og:type",content:"website"},{property:"og:url",content:`${e.canonical_url||"https://talastage.com"}/wallet`},{name:"twitter:title",content:t},{name:"twitter:description",content:a},{name:"twitter:image",content:e.logo_url||"/default-social-image.png"},{name:"twitter:card",content:"summary_large_image"}],link:[{rel:"icon",type:"image/png",href:e.favicon_url||"/favicon.png"},{rel:"canonical",href:`${e.canonical_url||"https://talastage.com"}/wallet`}]})}}),{immediate:!0}),(e,t,a,l)=>{const s=J;t(`<div${w(l)} data-v-211811f6>`),t(b(s,null,null,a)),t("</div>")}}}),H=z.setup;z.setup=(e,a)=>{const l=t();return(l.modules||(l.modules=new Set)).add("pages/wallet/index.vue"),H?H(e,a):void 0};const ee=V(z,[["__scopeId","data-v-211811f6"]]);export{ee as default};
