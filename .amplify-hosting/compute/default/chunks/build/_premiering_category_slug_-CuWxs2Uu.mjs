import{_ as e}from"./ProjectCardSkeleton-DMcYuKOy.mjs";import{useSSRContext as t,ref as r,computed as a,watch as o,mergeProps as s,unref as n,defineComponent as l,withCtx as i,createVNode as m,openBlock as u,createBlock as c,Fragment as p,renderList as d,renderSlot as g,toDisplayString as v,createCommentVNode as y}from"vue";import{ssrRenderComponent as f,ssrRenderAttrs as h,ssrRenderList as _,ssrRenderSlot as b,ssrInterpolate as x}from"vue/server-renderer";import{V as j}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{V as C}from"./VRow-rkX0LEXR.mjs";import{V as P}from"./VCol-CKxprC4g.mjs";import{_ as w}from"./BaseCard-5i8D5k_7.mjs";import{useRoute as $,useRouter as k}from"vue-router";import{b as S,f as V,V as L,_ as I}from"./server.mjs";import{_ as D}from"./ProjectGrid-D_1C43qX.mjs";import{V as T}from"./VContainer-By3q0af_.mjs";import{V as A}from"./VAlert-DneVUU3Q.mjs";import{V as N}from"./VCard-CsohsM82.mjs";import{u as U}from"./useSeo-Dl9beXFt.mjs";import{u as B}from"./usePremieringCategories-Dh-OtUP3.mjs";import{u as O}from"./useInfiniteScroll-CumoSAIu.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";import"./MediaThumbnail-jyEgcC54.mjs";import"hls.js";import"./VImg-B2jcJjnn.mjs";import"./UserAvatar-DFFlBvus.mjs";import"./VAvatar-JL8WKjry.mjs";import"./ProjectCardCompact-C94E1iON.mjs";import"./useDateFormatter-W2Hui1rv.mjs";import"./index-8pAncyvV.mjs";import"./index-DfGQ-Pg8.mjs";const R=l({__name:"ProjectCategorySkeleton",__ssrInlineRender:!0,props:{projectCount:{type:Number,default:4}},setup:t=>(t,r,a,o)=>{const n=e;r(`<div${h(s({class:"category-skeleton mb-12"},o))}><div class="d-flex align-center mb-6">`),r(f(j,{type:"avatar",size:"40",class:"mr-3"},null,a)),r(f(j,{type:"text",width:"200"},null,a)),r("</div>"),r(f(C,null,{default:i(((e,t,r,a)=>{if(!t)return[(u(),c(p,null,d(4,(e=>m(P,{key:e,cols:"12",sm:"6",md:"4",lg:"3"},{default:i((()=>[m(n)])),_:2},1024))),64))];t("\x3c!--[--\x3e"),_(4,(e=>{t(f(P,{key:e,cols:"12",sm:"6",md:"4",lg:"3"},{default:i(((e,t,r,a)=>{if(!t)return[m(n)];t(f(n,null,null,r,a))})),_:2},r,a))})),t("\x3c!--]--\x3e")})),_:1},a)),r("</div>")}}),z=R.setup;R.setup=(e,r)=>{const a=t();return(a.modules||(a.modules=new Set)).add("components/premiering/ProjectCategorySkeleton.vue"),z?z(e,r):void 0};const W=l({__name:"PremieringCategoryHeader",__ssrInlineRender:!0,props:{category:{}},setup(e){const t=k();return(e,r,a,o)=>{r(f(w,s({class:"category-header"},o),{default:i(((r,a,o,s)=>{var l,i;if(!a)return[m("div",{class:"d-flex align-center"},[g(e.$slots,"prepend",{},(()=>[m(S,{icon:"mdi-arrow-left",variant:"text",class:"mr-4",onClick:e=>n(t).back()},null,8,["onClick"])]),!0),m("h1",{class:"text-h4"},v(null==(i=e.category)?void 0:i.name),1),g(e.$slots,"append",{},void 0,!0)])];a(`<div class="d-flex align-center" data-v-b5bf8fca${s}>`),b(e.$slots,"prepend",{},(()=>{a(f(S,{icon:"mdi-arrow-left",variant:"text",class:"mr-4",onClick:e=>n(t).back()},null,o,s))}),a,o,s),a(`<h1 class="text-h4" data-v-b5bf8fca${s}>${x(null==(l=e.category)?void 0:l.name)}</h1>`),b(e.$slots,"append",{},null,a,o,s),a("</div>")})),_:3},a))}}}),E=W.setup;W.setup=(e,r)=>{const a=t();return(a.modules||(a.modules=new Set)).add("components/premiering/PremieringCategoryHeader.vue"),E?E(e,r):void 0};const F=I(W,[["__scopeId","data-v-b5bf8fca"]]),X={__name:"WatchCategoryProjectsPage",__ssrInlineRender:!0,props:{category:{type:Object,default:null},items:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},error:{type:String,default:null},currentPage:{type:Number,default:1},lastPage:{type:Number,default:1}},setup:e=>(t,r,a,o)=>{const s=R,n=F,l=D;r(f(T,o,{default:i(((t,r,a,o)=>{if(!r)return[e.isLoading&&!e.category?(u(),c(s,{key:0})):e.error?(u(),c(C,{key:1},{default:i((()=>[m(P,{cols:"12"},{default:i((()=>[m(A,{type:"error",text:e.error,class:"mb-4"},null,8,["text"])])),_:1})])),_:1})):e.category?(u(),c(p,{key:2},[m(n,{category:e.category},null,8,["category"]),m(l,{projects:e.items,"current-page":e.currentPage,"last-page":e.lastPage,"is-loading":e.isLoading,variant:"grid"},{"empty-state":i((()=>[m(N,{class:"text-center pa-8"},{default:i((()=>[m(L,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),m("h3",{class:"text-h5 mb-2"},"No Premieres Available"),m("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")])),_:1})])),_:1},8,["projects","current-page","last-page","is-loading"])],64)):y("",!0)];e.isLoading&&!e.category?r(f(s,null,null,a,o)):e.error?r(f(C,null,{default:i(((t,r,a,o)=>{if(!r)return[m(P,{cols:"12"},{default:i((()=>[m(A,{type:"error",text:e.error,class:"mb-4"},null,8,["text"])])),_:1})];r(f(P,{cols:"12"},{default:i(((t,r,a,o)=>{if(!r)return[m(A,{type:"error",text:e.error,class:"mb-4"},null,8,["text"])];r(f(A,{type:"error",text:e.error,class:"mb-4"},null,a,o))})),_:1},a,o))})),_:1},a,o)):e.category?(r("\x3c!--[--\x3e"),r(f(n,{category:e.category},null,a,o)),r(f(l,{projects:e.items,"current-page":e.currentPage,"last-page":e.lastPage,"is-loading":e.isLoading,variant:"grid"},{"empty-state":i(((e,t,r,a)=>{if(!t)return[m(N,{class:"text-center pa-8"},{default:i((()=>[m(L,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),m("h3",{class:"text-h5 mb-2"},"No Premieres Available"),m("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")])),_:1})];t(f(N,{class:"text-center pa-8"},{default:i(((e,t,r,a)=>{if(!t)return[m(L,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),m("h3",{class:"text-h5 mb-2"},"No Premieres Available"),m("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")];t(f(L,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"},null,r,a)),t(`<h3 class="text-h5 mb-2"${a}>No Premieres Available</h3><p class="text-body-1 text-medium-emphasis"${a}> There are currently no premieres in this category </p>`)})),_:1},r,a))})),_:1},a,o)),r("\x3c!--]--\x3e")):r("\x3c!----\x3e")})),_:1},a))}},M=X.setup;X.setup=(e,r)=>{const a=t();return(a.modules||(a.modules=new Set)).add("views/watch/WatchCategoryProjectsPage.vue"),M?M(e,r):void 0};const H={__name:"[premiering_category_slug]",__ssrInlineRender:!0,setup(e){const t=$(),l=t.params.premiering_category_slug,i=V().public.frontendUrl||"https://talastage.com",m=r(null),u=r(null),{fetchCategoryProjects:c}=B(),{items:p,isLoading:d,hasMore:g,currentPage:v,reset:y}=O((async e=>{try{const t=await c(l,e);if(1===e){const{projects:e,pagination:r,...a}=t;m.value=a}return t.projects}catch(e){return u.value="Failed to load category",console.error("Error fetching category:",e),[]}}),{threshold:200,throttle:300,direction:"vertical"}),h=a((()=>{var e,t;return(null==(t=null==(e=m.value)?void 0:e.pagination)?void 0:t.last_page)||1})),_=a((()=>{if(!m.value)return"Browse Premieres | TalaStage";return`${m.value.name||"Category"} Premieres | TalaStage`})),b=a((()=>{if(!m.value)return"Discover the latest premieres from talented creators in entertainment on TalaStage";const e=m.value.name||"entertainment";return`Watch the latest ${e} premieres from talented creators on TalaStage. Discover new projects and connect with creators in the ${e.toLowerCase()} industry.`})),x=a((()=>{var e;return(null==(e=m.value)?void 0:e.avatar_url)||`${i}/app-logo.png`})),j=a((()=>`${i}/watch/category/${l}`)),C=a((()=>{if(!m.value)return"talent, premieres, entertainment, creative projects";const e=m.value.name||"";return`${e}, premieres, talent, entertainment, creative projects, ${e.toLowerCase()} industry`})),P=a((()=>{if(!m.value||!p.value.length)return null;return{"@context":"https://schema.org","@type":"ItemList",name:`${m.value.name} Premieres on TalaStage`,description:`Browse the latest ${m.value.name} premieres from talented creators on TalaStage`,numberOfItems:p.value.length,itemListElement:p.value.map(((e,t)=>({"@type":"ListItem",position:t+1,item:{"@type":"VideoObject",name:e.name,description:`${e.name} by ${e.creator.display_name}`,thumbnailUrl:e.thumbnail_url,uploadDate:e.created_at,contentUrl:e.video_url,embedUrl:e.video_url,interactionStatistic:{"@type":"InteractionCounter",interactionType:"https://schema.org/WatchAction",userInteractionCount:e.views_count},author:{"@type":"Person",name:e.creator.display_name,url:`${i}/${e.creator.username}`}}})))}}));return U({title:_.value,description:b.value,image:x.value,url:j.value,keywords:C.value,type:"website"}),o((()=>m.value),(e=>{e&&U({title:_.value,description:b.value,image:x.value,url:j.value,keywords:C.value,type:"website",structured:P.value})}),{deep:!0}),o((()=>p.value),(e=>{m.value&&e.length&&U({structured:P.value})}),{deep:!0}),o((()=>t.params.premiering_category_slug),(e=>{e&&(y(),m.value=null,u.value=null)})),(e,t,r,a)=>{var o;t(f(X,s({category:m.value,items:n(p),"is-loading":n(d),error:u.value,"current-page":n(v),"last-page":null!=(o=h.value)?o:1},a),null,r))}}},K=H.setup;H.setup=(e,r)=>{const a=t();return(a.modules||(a.modules=new Set)).add("pages/watch/category/[premiering_category_slug].vue"),K?K(e,r):void 0};export{H as default};
