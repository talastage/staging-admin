import{_ as e}from"./BaseHeader-CiSkdPXW.mjs";import{B as t}from"./BaseDialog-DsGYlnLZ.mjs";import{_ as a}from"./MediaThumbnail-jyEgcC54.mjs";import{computed as s,createVNode as l,mergeProps as o,useSSRContext as r,ref as i,defineComponent as n,watch as d,withCtx as u,unref as c,createTextVNode as p,openBlock as m,createBlock as v,toDisplayString as f,createCommentVNode as j,resolveDynamicComponent as g,KeepAlive as _,withAsyncContext as h,Fragment as b,renderList as y}from"vue";import{ssrRenderComponent as x,ssrInterpolate as w,ssrRenderAttrs as P,ssrRenderClass as $,ssrRenderList as V,ssrRenderVNode as k}from"vue/server-renderer";import{u as D}from"./useDateFormatter-W2Hui1rv.mjs";import{p as C,$ as S,h as L,a2 as B,a3 as I,j as T,ac as U,d as z,u as E,_ as A,V as M,b as R,aL as F,aA as Z}from"./server.mjs";import{V as Y}from"./VDivider-BmyMVZMt.mjs";import{m as W,V as q}from"./VCheckboxBtn-v4ZZzD80.mjs";import{m as J,u as G,V as H}from"./VInput-DRJS2l97.mjs";import{useRouter as K,useRoute as N}from"vue-router";import{u as O}from"./useSnackMessage-PVLwAm7x.mjs";import{V as Q}from"./VMenu-BpdBiT5v.mjs";import{V as X}from"./VList-CcwwrkQR.mjs";import{V as ee,a as te}from"./VListItem-jTLuICGb.mjs";import{V as ae}from"./VCard-CsohsM82.mjs";import{V as se}from"./VTooltip-CE0EmfBU.mjs";import{_ as le}from"./EmptyStateCard-3UqWseqH.mjs";import{u as oe}from"./index-8pAncyvV.mjs";import{V as re}from"./VAlert-DneVUU3Q.mjs";import{V as ie}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{V as ne}from"./VContainer-By3q0af_.mjs";import{V as de,a as ue}from"./VTabs-t8Cp0Axr.mjs";import{u as ce}from"./useApps-hYo13Xt3.mjs";import{u as pe}from"./useSeo-Dl9beXFt.mjs";import"./VDialog-DA9BdIfh.mjs";import"./VOverlay-ZKavbTei.mjs";import"./easing-Bn3h-KUg.mjs";import"./VImg-B2jcJjnn.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"hls.js";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";import"./VSelectionControl-BvLhSUlq.mjs";import"./index--K8ZrFMm.mjs";import"./ssrBoot-BtvJZs44.mjs";import"./VAvatar-JL8WKjry.mjs";import"./index-DfGQ-Pg8.mjs";const me=C({...J(),...S(W(),["inline"])},"VCheckbox"),ve=L()({name:"VCheckbox",inheritAttrs:!1,props:me(),emits:{"update:modelValue":e=>!0,"update:focused":e=>!0},setup(e,t){let{attrs:a,slots:r}=t;const i=B(e,"modelValue"),{isFocused:n,focus:d,blur:u}=G(e),c=I(),p=s((()=>e.id||`checkbox-${c}`));return T((()=>{const[t,s]=U(a),c=H.filterProps(e),m=q.filterProps(e);return l(H,o({class:["v-checkbox",e.class]},t,c,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,id:p.value,focused:n.value,style:e.style}),{...r,default:e=>{let{id:t,messagesId:a,isDisabled:n,isReadonly:c}=e;return l(q,o(m,{id:t.value,"aria-describedby":a.value,disabled:n.value,readonly:c.value},s,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,onFocus:d,onBlur:u}),r)}})})),{}}}),fe=n({__name:"ProjectDeleteDialog",__ssrInlineRender:!0,props:{show:{type:Boolean},project:{}},emits:["update:show","confirm","cancel"],setup(e,{emit:s}){const r=e,n=s,{formatRelativeDate:g}=D(),_=i(!1),h=i(!1),b=i(r.show);d((()=>r.show),(e=>{b.value=e,e||(_.value=!1,h.value=!1)})),d(b,(e=>{n("update:show",e)}));const onConfirm=async()=>{if(_.value){h.value=!0;try{n("confirm")}finally{h.value=!1}}},onCancel=()=>{b.value=!1,n("cancel")};return(e,s,r,i)=>{const n=a;s(x(t,o({modelValue:b.value,"onUpdate:modelValue":e=>b.value=e,title:"Delete Project","max-width":"550px"},i),{default:u(((t,a,s,o)=>{if(!a)return[l("div",{class:"delete-project-dialog"},[e.project?(m(),v("div",{key:0,class:"project-preview pa-4"},[l("div",{class:"d-flex"},[l("div",{class:"thumbnail-wrapper"},[l(n,{"thumbnail-url":e.project.thumbnail_url,video_url:e.project.project_url,access_uuid:e.project.access_uuid,size:"sm",class:"rounded-lg"},null,8,["thumbnail-url","video_url","access_uuid"])]),l("div",{class:"project-info ml-4"},[l("h3",{class:"text-h6 font-weight-medium mb-1"},f(e.project.name),1),l("div",{class:"text-body-2 text-medium-emphasis"}," Published "+f(c(g)(e.project.created_at)),1),l("div",{class:"d-flex align-center mt-1"},[l(M,{size:"small",class:"mr-1"},{default:u((()=>[p("mdi-eye")])),_:1}),l("span",{class:"text-body-2 text-medium-emphasis"},f(e.project.views_count||0)+" views ",1)])])])])):j("",!0),l(Y,{class:"my-4"}),l("div",{class:"warning-section pa-4"},[l("div",{class:"text-h6 text-error mb-4"}," Are you sure you want to delete this project? "),l("div",{class:"text-body-1 mb-4"},[p(" This action cannot be undone. You will permanently lose: "),l("ul",{class:"mt-2"},[l("li",null,"Project content and data"),l("li",null,"Audience analytics"),l("li",null,"Video statistics"),l("li",null,"Associated comments and engagement")])]),l(ve,{modelValue:_.value,"onUpdate:modelValue":e=>_.value=e,color:"error",class:"confirmation-checkbox"},{label:u((()=>[l("span",{class:"text-body-2"}," I understand that this action is permanent and cannot be reversed ")])),_:1},8,["modelValue","onUpdate:modelValue"])]),l(Y),l("div",{class:"dialog-actions pa-4"},[l(R,{variant:"tonal",color:"grey-darken-1",onClick:onCancel,class:"mr-3"},{default:u((()=>[p(" Cancel ")])),_:1}),l(R,{color:"error",disabled:!_.value,onClick:onConfirm,loading:h.value},{default:u((()=>[p(" Delete Forever "),l(M,{right:"",class:"ml-2"},{default:u((()=>[p("mdi-delete-forever")])),_:1})])),_:1},8,["disabled","loading"])])])];a(`<div class="delete-project-dialog" data-v-724a7d9d${o}>`),e.project?(a(`<div class="project-preview pa-4" data-v-724a7d9d${o}><div class="d-flex" data-v-724a7d9d${o}><div class="thumbnail-wrapper" data-v-724a7d9d${o}>`),a(x(n,{"thumbnail-url":e.project.thumbnail_url,video_url:e.project.project_url,access_uuid:e.project.access_uuid,size:"sm",class:"rounded-lg"},null,s,o)),a(`</div><div class="project-info ml-4" data-v-724a7d9d${o}><h3 class="text-h6 font-weight-medium mb-1" data-v-724a7d9d${o}>${w(e.project.name)}</h3><div class="text-body-2 text-medium-emphasis" data-v-724a7d9d${o}> Published ${w(c(g)(e.project.created_at))}</div><div class="d-flex align-center mt-1" data-v-724a7d9d${o}>`),a(x(M,{size:"small",class:"mr-1"},{default:u(((e,t,a,s)=>{if(!t)return[p("mdi-eye")];t("mdi-eye")})),_:1},s,o)),a(`<span class="text-body-2 text-medium-emphasis" data-v-724a7d9d${o}>${w(e.project.views_count||0)} views </span></div></div></div></div>`)):a("\x3c!----\x3e"),a(x(Y,{class:"my-4"},null,s,o)),a(`<div class="warning-section pa-4" data-v-724a7d9d${o}><div class="text-h6 text-error mb-4" data-v-724a7d9d${o}> Are you sure you want to delete this project? </div><div class="text-body-1 mb-4" data-v-724a7d9d${o}> This action cannot be undone. You will permanently lose: <ul class="mt-2" data-v-724a7d9d${o}><li data-v-724a7d9d${o}>Project content and data</li><li data-v-724a7d9d${o}>Audience analytics</li><li data-v-724a7d9d${o}>Video statistics</li><li data-v-724a7d9d${o}>Associated comments and engagement</li></ul></div>`),a(x(ve,{modelValue:_.value,"onUpdate:modelValue":e=>_.value=e,color:"error",class:"confirmation-checkbox"},{label:u(((e,t,a,s)=>{if(!t)return[l("span",{class:"text-body-2"}," I understand that this action is permanent and cannot be reversed ")];t(`<span class="text-body-2" data-v-724a7d9d${s}> I understand that this action is permanent and cannot be reversed </span>`)})),_:1},s,o)),a("</div>"),a(x(Y,null,null,s,o)),a(`<div class="dialog-actions pa-4" data-v-724a7d9d${o}>`),a(x(R,{variant:"tonal",color:"grey-darken-1",onClick:onCancel,class:"mr-3"},{default:u(((e,t,a,s)=>{if(!t)return[p(" Cancel ")];t(" Cancel ")})),_:1},s,o)),a(x(R,{color:"error",disabled:!_.value,onClick:onConfirm,loading:h.value},{default:u(((e,t,a,s)=>{if(!t)return[p(" Delete Forever "),l(M,{right:"",class:"ml-2"},{default:u((()=>[p("mdi-delete-forever")])),_:1})];t(" Delete Forever "),t(x(M,{right:"",class:"ml-2"},{default:u(((e,t,a,s)=>{if(!t)return[p("mdi-delete-forever")];t("mdi-delete-forever")})),_:1},a,s))})),_:1},s,o)),a("</div></div>")})),_:1},r))}}}),je=fe.setup;fe.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/project/ProjectDeleteDialog.vue"),je?je(e,t):void 0};const ge=A(fe,[["__scopeId","data-v-724a7d9d"]]),_e=z("studioProjects",(()=>{const{$axios:e}=E(),t=i({published:{data:[],currentPage:0,lastPage:1,isLoading:!1,isLoaded:!1},draft:{data:[],currentPage:0,lastPage:1,isLoading:!1,isLoaded:!1}});return{projects:t,fetchProjects:async a=>{if(!(t.value[a].isLoading||t.value[a].currentPage>=t.value[a].lastPage)){t.value[a].isLoading=!0;try{const s=(await e.get(`/api/studio/projects?type=${a}&page=${t.value[a].currentPage+1}`)).data;(null==s?void 0:s.data)&&Array.isArray(s.data)&&(t.value[a].data=[...t.value[a].data,...s.data],t.value[a].currentPage=s.meta.current_page,t.value[a].lastPage=s.meta.last_page),t.value[a].isLoaded=!0}catch(e){throw console.error(`Error fetching ${a} projects:`,e),e}finally{t.value[a].isLoading=!1}}},getProjectsByType:e=>t.value[e].data,resetProjects:e=>{t.value[e]={data:[],currentPage:0,lastPage:1,isLoading:!1,isLoaded:!1}},hasMore:e=>t.value[e].currentPage<t.value[e].lastPage,deleteProject:async a=>{try{await e.delete(`/api/studio/projects/${a}`);for(const e in t.value)t.value[e].data=t.value[e].data.filter((e=>e.access_uuid!==a))}catch(e){throw console.error("Error deleting project:",e),e}}}})),he={__name:"MoreBtn",__ssrInlineRender:!0,props:{menuList:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:t}){const a=t,handleSelection=e=>{a("select",e)};return(t,a,s,r)=>{a(x(Q,r,{activator:u((({props:e},t,a,s)=>{if(!t)return[l(R,o({icon:""},e),{default:u((()=>[l(M,null,{default:u((()=>[p("mdi-dots-vertical")])),_:1})])),_:2},1040)];t(x(R,o({icon:""},e),{default:u(((e,t,a,s)=>{if(!t)return[l(M,null,{default:u((()=>[p("mdi-dots-vertical")])),_:1})];t(x(M,null,{default:u(((e,t,a,s)=>{if(!t)return[p("mdi-dots-vertical")];t("mdi-dots-vertical")})),_:2},a,s))})),_:2},a,s))})),default:u(((t,a,s,o)=>{if(!a)return[l(X,null,{default:u((()=>[(m(!0),v(b,null,y(e.menuList,((e,t)=>(m(),v(ee,{key:t,onClick:t=>handleSelection(e)},{default:u((()=>[l(te,null,{default:u((()=>[p(f(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})];a(x(X,null,{default:u(((t,a,s,o)=>{if(!a)return[(m(!0),v(b,null,y(e.menuList,((e,t)=>(m(),v(ee,{key:t,onClick:t=>handleSelection(e)},{default:u((()=>[l(te,null,{default:u((()=>[p(f(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))];a("\x3c!--[--\x3e"),V(e.menuList,((e,t)=>{a(x(ee,{key:t,onClick:t=>handleSelection(e)},{default:u(((t,a,s,o)=>{if(!a)return[l(te,null,{default:u((()=>[p(f(e.title),1)])),_:2},1024)];a(x(te,null,{default:u(((t,a,s,l)=>{if(!a)return[p(f(e.title),1)];a(`${w(e.title)}`)})),_:2},s,o))})),_:2},s,o))})),a("\x3c!--]--\x3e")})),_:1},s,o))})),_:1},s))}}},be=he.setup;he.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/buttons/MoreBtn.vue"),be?be(e,t):void 0};const ye=n({__name:"ProjectStatusBadge",__ssrInlineRender:!0,props:{status:{type:String,default:"draft",validator:e=>["draft","published"].includes(e.toLowerCase())},size:{type:String,default:"md",validator:e=>["sm","md","lg"].includes(e)},uppercase:{type:Boolean,default:!0}},setup(e){const t=e,a=s((()=>{const e=t.status;return t.uppercase?e.toUpperCase():e}));return(t,s,l,r)=>{s(`<span${P(o({class:["status-badge",[`status-${e.status.toLowerCase()}`,`size-${e.size}`]]},r))} data-v-cc448830>${w(c(a))}</span>`)}}}),xe=ye.setup;ye.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/studio/ProjectStatusBadge.vue"),xe?xe(e,t):void 0};const we=A(ye,[["__scopeId","data-v-cc448830"]]),Pe=n({__name:"StudioProjectCard",__ssrInlineRender:!0,props:{project:{}},emits:["edit-project","edit-draft","delete-project","view-details","view-earnings"],setup(e,{emit:t}){const r=e,i=t,{formatRelativeDate:n,formatLocalDateTime:d}=D(),{truncateText:c}={truncateText:(e,t=100,a=!0)=>e?e.length<=t?e:e.substring(0,t)+(a?"...":""):""},{mobile:g,smAndDown:_,mdAndDown:h}=F(),b=s((()=>Boolean(r.project.premiering_start_date&&r.project.premiering_time))),y=s((()=>Boolean(r.project.watch_fee&&r.project.currency))),V=s((()=>{if(b.value&&r.project.premiering_start_date&&r.project.premiering_time){const e=new Date(r.project.premiering_start_date),[t,a]=r.project.premiering_time.split(":");return e.setHours(parseInt(t),parseInt(a)),d(e.toISOString())}return n(r.project.created_at)})),k=s((()=>{var e;return y.value?`${(null==(e=r.project.currency)?void 0:e.symbol)||""} ${r.project.watch_fee||""}`:""})),C=s((()=>{const e=r.project.name||"",t=_.value?30:50;return c(e,t)})),S=s((()=>{const e=r.project.description||"";return c(e,_.value?80:120)})),handleEdit=()=>{i("edit-project",r.project)},handleEditDraft=()=>{i("edit-draft",r.project)},handleDetails=()=>{i("view-details",r.project)},handleEarnings=()=>{i("view-earnings",r.project)},handleMoreAction=e=>{"delete"===e.action&&i("delete-project",r.project)},watchProject=e=>{e&&(e.stopPropagation(),e.preventDefault()),Z(`/watch/${r.project.access_uuid}`)};return(e,t,s,r)=>{const i=a,n=he;t(x(ae,o({class:"studio-card",elevation:"2"},r),{default:u(((t,a,s,r)=>{if(!a)return[l("div",{class:"card-layout"},[l("div",{class:"thumbnail-wrapper"},[l(i,{thumbnailUrl:e.project.thumbnail_url,videoUrl:e.project.video_url,showViews:!1,showDuration:!0,size:"lg",class:"project-card__thumbnail",onClick:watchProject},null,8,["thumbnailUrl","videoUrl"])]),l("div",{class:"content-section"},[l("div",{class:"header-section"},[l("div",{class:"title-status-wrapper"},[l(se,{location:"bottom"},{activator:u((({props:e})=>[l("h3",o({class:"project-title"},e),f(C.value),17)])),default:u((()=>[l("span",null,f(e.project.name),1)])),_:1}),l(we,{status:e.project.status,size:"sm"},null,8,["status"])]),l("div",{class:"more-actions"},[l(n,{menuList:[{title:"Delete",action:"delete"}],onSelect:handleMoreAction})])]),e.project.description?(m(),v("p",{key:0,class:"project-description"},f(S.value),1)):j("",!0),l("div",{class:"date-info"},[l(M,{icon:"mdi-calendar-clock",color:b.value?"error":void 0,size:"small"},null,8,["color"]),l("span",{class:{"premiere-text":b.value}},f(V.value),3)]),y.value?(m(),v("div",{key:1,class:"price-info"},[l(M,{icon:"mdi-ticket",size:"small"}),l("span",null,"Watch Fee: "+f(k.value),1)])):j("",!0),l("div",{class:"action-buttons"},["published"===e.project.status?(m(),v(R,{key:0,color:"primary",variant:"outlined",size:"small",onClick:handleEdit,class:"action-btn"},{default:u((()=>[p(" Edit ")])),_:1})):(m(),v(R,{key:1,color:"warning",variant:"outlined",size:"small",onClick:handleEditDraft,class:"action-btn"},{default:u((()=>[p(" Edit Draft ")])),_:1})),"draft"!==e.project.status?(m(),v(R,{key:2,color:"info",variant:"outlined",size:"small",onClick:handleDetails,class:"action-btn"},{default:u((()=>[p(" Details ")])),_:1})):j("",!0),"draft"!==e.project.status?(m(),v(R,{key:3,color:"success",variant:"outlined",size:"small",onClick:handleEarnings,class:"action-btn"},{default:u((()=>[p(" Project Earnings ")])),_:1})):j("",!0)])])])];a(`<div class="card-layout" data-v-f28b1be1${r}><div class="thumbnail-wrapper" data-v-f28b1be1${r}>`),a(x(i,{thumbnailUrl:e.project.thumbnail_url,videoUrl:e.project.video_url,showViews:!1,showDuration:!0,size:"lg",class:"project-card__thumbnail",onClick:watchProject},null,s,r)),a(`</div><div class="content-section" data-v-f28b1be1${r}><div class="header-section" data-v-f28b1be1${r}><div class="title-status-wrapper" data-v-f28b1be1${r}>`),a(x(se,{location:"bottom"},{activator:u((({props:e},t,a,s)=>{if(!t)return[l("h3",o({class:"project-title"},e),f(C.value),17)];t(`<h3${P(o({class:"project-title"},e))} data-v-f28b1be1${s}>${w(C.value)}</h3>`)})),default:u(((t,a,s,o)=>{if(!a)return[l("span",null,f(e.project.name),1)];a(`<span data-v-f28b1be1${o}>${w(e.project.name)}</span>`)})),_:1},s,r)),a(x(we,{status:e.project.status,size:"sm"},null,s,r)),a(`</div><div class="more-actions" data-v-f28b1be1${r}>`),a(x(n,{menuList:[{title:"Delete",action:"delete"}],onSelect:handleMoreAction},null,s,r)),a("</div></div>"),e.project.description?a(`<p class="project-description" data-v-f28b1be1${r}>${w(S.value)}</p>`):a("\x3c!----\x3e"),a(`<div class="date-info" data-v-f28b1be1${r}>`),a(x(M,{icon:"mdi-calendar-clock",color:b.value?"error":void 0,size:"small"},null,s,r)),a(`<span class="${$({"premiere-text":b.value})}" data-v-f28b1be1${r}>${w(V.value)}</span></div>`),y.value?(a(`<div class="price-info" data-v-f28b1be1${r}>`),a(x(M,{icon:"mdi-ticket",size:"small"},null,s,r)),a(`<span data-v-f28b1be1${r}>Watch Fee: ${w(k.value)}</span></div>`)):a("\x3c!----\x3e"),a(`<div class="action-buttons" data-v-f28b1be1${r}>`),"published"===e.project.status?a(x(R,{color:"primary",variant:"outlined",size:"small",onClick:handleEdit,class:"action-btn"},{default:u(((e,t,a,s)=>{if(!t)return[p(" Edit ")];t(" Edit ")})),_:1},s,r)):a(x(R,{color:"warning",variant:"outlined",size:"small",onClick:handleEditDraft,class:"action-btn"},{default:u(((e,t,a,s)=>{if(!t)return[p(" Edit Draft ")];t(" Edit Draft ")})),_:1},s,r)),"draft"!==e.project.status?a(x(R,{color:"info",variant:"outlined",size:"small",onClick:handleDetails,class:"action-btn"},{default:u(((e,t,a,s)=>{if(!t)return[p(" Details ")];t(" Details ")})),_:1},s,r)):a("\x3c!----\x3e"),"draft"!==e.project.status?a(x(R,{color:"success",variant:"outlined",size:"small",onClick:handleEarnings,class:"action-btn"},{default:u(((e,t,a,s)=>{if(!t)return[p(" Project Earnings ")];t(" Project Earnings ")})),_:1},s,r)):a("\x3c!----\x3e"),a("</div></div></div>")})),_:1},s))}}}),$e=Pe.setup;Pe.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/studio/StudioProjectCard.vue"),$e?$e(e,t):void 0};const Ve=A(Pe,[["__scopeId","data-v-f28b1be1"]]),ke=n({__name:"StudioDraftProjects",__ssrInlineRender:!0,emits:["delete-project"],setup(e,{emit:t}){const a=K(),l=_e(),r=i("");i(null);const n=i(null),d=i(null),m=s((()=>l.getProjectsByType("draft"))),v=s((()=>l.projects.draft.isLoading)),j=s((()=>l.projects.draft.isLoaded)),g=s((()=>l.hasMore("draft"))),_=s((()=>!d.value||Date.now()-d.value>3e5)),handleEditProject=e=>{a.push(`/studio/projects/${e.access_uuid}/detail`)},handleEditDraft=e=>{a.push(`/studio/projects/${e.access_uuid}/edit_draft`)},handleViewDetails=e=>{a.push(`/studio/projects/${e.access_uuid}/detail`)},handleViewEarnings=e=>{a.push(`/project/${e.access_uuid}/earnings`)},handleDeleteProject=e=>{h("delete-project",e)};oe(n,(([{isIntersecting:e}])=>{e&&!v.value&&g.value&&(async(e=!1)=>{if(e||_.value||!j.value)try{g.value&&!v.value&&(await l.fetchProjects("draft"),d.value=Date.now())}catch(e){r.value=e instanceof Error?e.message:"Failed to load draft projects. Please try again.",console.error("Error loading draft projects:",e)}})()}),{threshold:.5});const h=t;return(e,t,s,l)=>{const i=Ve,n=le;t(`<div${P(o({class:"draft-projects"},l))} data-v-59966199>`),r.value?t(x(re,{type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:u(((e,t,a,s)=>{if(!t)return[p(f(r.value),1)];t(`${w(r.value)}`)})),_:1},s)):t("\x3c!----\x3e"),t('<div class="projects-grid" data-v-59966199>'),m.value.length?(t("\x3c!--[--\x3e"),V(m.value,(e=>{t(x(i,{key:e.id,project:e,onEditProject:handleEditProject,onEditDraft:handleEditDraft,onDeleteProject:handleDeleteProject,onViewDetails:handleViewDetails,onViewEarnings:handleViewEarnings},null,s))})),t("\x3c!--]--\x3e")):v.value?t("\x3c!----\x3e"):t(x(n,{title:"No Projects Yet",message:"You haven't premiered any projects yet. Start by premiering your first project!",icon:"mdi-file-document-outline","action-text":"Premiere a Project","on-action-click":()=>c(a).push("/premiering")},null,s)),v.value?(t("\x3c!--[--\x3e"),V(3,(e=>{t(x(ie,{key:e,type:"article",loading:!0,class:"skeleton-loader"},null,s))})),t("\x3c!--]--\x3e")):t("\x3c!----\x3e"),t("</div>"),g.value&&!v.value?t('<div class="load-trigger" data-v-59966199></div>'):t("\x3c!----\x3e"),t("</div>")}}}),De=ke.setup;ke.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/studio/StudioDraftProjects.vue"),De?De(e,t):void 0};const Ce=A(ke,[["__scopeId","data-v-59966199"]]),Se=n({__name:"StudioPublishedProjects",__ssrInlineRender:!0,emits:["delete-project"],setup(e,{emit:t}){const a=K(),l=_e(),r=i("");i(null);const n=i(null),d=i(null),m=s((()=>l.getProjectsByType("published"))),v=s((()=>l.projects.published.isLoading));s((()=>l.projects.published.isLoaded));const j=s((()=>l.hasMore("published")));s((()=>!d.value||Date.now()-d.value>3e5));const handleEditProject=e=>{a.push(`/studio/projects/${e.access_uuid}/detail`)},handleEditDraft=e=>{a.push(`/premiering/${e.premiering_category_slug}/edit_draft`)},handleViewDetails=e=>{a.push(`/studio/projects/${e.access_uuid}/detail`)},handleViewEarnings=e=>{a.push(`/project/${e.access_uuid}/earnings`)},handleDeleteProject=e=>{g("delete-project",e)};oe(n,(([{isIntersecting:e}])=>{e&&!v.value&&j.value&&(async()=>{try{j.value&&!v.value&&(await l.fetchProjects("published"),d.value=Date.now())}catch(e){r.value=e instanceof Error?e.message:"Failed to load projects. Please try again."}})()}),{threshold:.5});const g=t;return(e,t,s,l)=>{const i=Ve,n=le;t(`<div${P(o({class:"published-projects"},l))} data-v-7187b1f4>`),r.value?t(x(re,{type:"error",variant:"tonal",closable:"",class:"mb-4"},{default:u(((e,t,a,s)=>{if(!t)return[p(f(r.value),1)];t(`${w(r.value)}`)})),_:1},s)):t("\x3c!----\x3e"),t('<div class="projects-grid" data-v-7187b1f4>'),m.value.length?(t("\x3c!--[--\x3e"),V(m.value,(e=>{t(x(i,{key:e.id,project:e,onEditProject:handleEditProject,onEditDraft:handleEditDraft,onDeleteProject:handleDeleteProject,onViewDetails:handleViewDetails,onViewEarnings:handleViewEarnings},null,s))})),t("\x3c!--]--\x3e")):v.value?t("\x3c!----\x3e"):t(x(n,{title:"No Published Projects",message:"You haven't published any projects yet. Start by premiering your first project!",icon:"mdi-video-off-outline","action-text":"Premiere a Project","on-action-click":()=>c(a).push("/premiering")},null,s)),v.value?(t("\x3c!--[--\x3e"),V(3,(e=>{t(x(ie,{key:e,type:"article",loading:!0,class:"skeleton-loader"},null,s))})),t("\x3c!--]--\x3e")):t("\x3c!----\x3e"),t("</div>"),j.value&&!v.value?t('<div class="load-trigger" data-v-7187b1f4></div>'):t("\x3c!----\x3e"),t("</div>")}}}),Le=Se.setup;Se.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("components/studio/StudioPublishedProjects.vue"),Le?Le(e,t):void 0};const Be=A(Se,[["__scopeId","data-v-7187b1f4"]]),Ie=n({__name:"ManageProjectsPage",__ssrInlineRender:!0,setup(t){const a=_e(),r=O();N();const n=K(),c=i("published"),f=i(!1),h=i(null),b=s((()=>"published"===c.value?Be:Ce));d(c,(e=>{n.push({query:{tab:e}})}));const handleDeleteProject=e=>{h.value=e,f.value=!0},confirmDeleteProject=async()=>{if(h.value)try{await a.deleteProject(h.value.access_uuid),r.success(`Project "${h.value.title||"Untitled"}" has been deleted successfully`),f.value=!1,h.value=null}catch(e){console.error("Error deleting project:",e),r.error("Failed to delete project. Please try again.")}};return(t,a,s,r)=>{const i=e,n=ge;a(x(ne,o({class:"pa-0 mt-4 mx-auto","max-width":"1200"},r),{default:u(((e,t,a,s)=>{if(!t)return[l(i,{title:"Manage your projects"},{subtitle:u((()=>[l("span",{class:"text-subtitle-1 text-medium-emphasis"}," View and manage your projects across different stages ")])),_:1}),l(de,{modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,color:"primary",class:"mb-6 custom-tabs",grow:""},{default:u((()=>[l(ue,{value:"published"},{default:u((()=>[p("Published Projects")])),_:1}),l(ue,{value:"draft"},{default:u((()=>[p("Draft Projects")])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"]),l(ne,{class:"pa-0 mt-4"},{default:u((()=>[(m(),v(_,null,[(m(),v(g(b.value),{key:c.value,onDeleteProject:handleDeleteProject},null,32))],1024))])),_:1}),h.value?(m(),v(n,{key:0,show:f.value,"onUpdate:show":e=>f.value=e,project:h.value,onConfirm:confirmDeleteProject},null,8,["show","onUpdate:show","project"])):j("",!0)];t(x(i,{title:"Manage your projects"},{subtitle:u(((e,t,a,s)=>{if(!t)return[l("span",{class:"text-subtitle-1 text-medium-emphasis"}," View and manage your projects across different stages ")];t(`<span class="text-subtitle-1 text-medium-emphasis"${s}> View and manage your projects across different stages </span>`)})),_:1},a,s)),t(x(de,{modelValue:c.value,"onUpdate:modelValue":e=>c.value=e,color:"primary",class:"mb-6 custom-tabs",grow:""},{default:u(((e,t,a,s)=>{if(!t)return[l(ue,{value:"published"},{default:u((()=>[p("Published Projects")])),_:1}),l(ue,{value:"draft"},{default:u((()=>[p("Draft Projects")])),_:1})];t(x(ue,{value:"published"},{default:u(((e,t,a,s)=>{if(!t)return[p("Published Projects")];t("Published Projects")})),_:1},a,s)),t(x(ue,{value:"draft"},{default:u(((e,t,a,s)=>{if(!t)return[p("Draft Projects")];t("Draft Projects")})),_:1},a,s))})),_:1},a,s)),t(x(ne,{class:"pa-0 mt-4"},{default:u(((e,t,a,s)=>{if(!t)return[(m(),v(_,null,[(m(),v(g(b.value),{key:c.value,onDeleteProject:handleDeleteProject},null,32))],1024))];t(""),k(t,l(g(b.value),{key:c.value,onDeleteProject:handleDeleteProject},null),a,s)})),_:1},a,s)),h.value?t(x(n,{show:f.value,"onUpdate:show":e=>f.value=e,project:h.value,onConfirm:confirmDeleteProject},null,a,s)):t("\x3c!----\x3e")})),_:1},s))}}}),Te=Ie.setup;Ie.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("views/projects/ManageProjectsPage.vue"),Te?Te(e,t):void 0};const Ue=n({__name:"manage-projects",__ssrInlineRender:!0,async setup(e){var t,a,l,o,r,i,n,d,u,c,p,m,v,f,j,g,_,b,y;let w,$;const V=ce();[w,$]=h((()=>V.fetchTalaStageApp())),await w,$();const k=s((()=>V.talastageApp));return pe({title:`Manage Projects - ${(null==(t=k.value)?void 0:t.name)||"TalaStage"}`,description:(null==(a=k.value)?void 0:a.seo_description)||`Manage all your projects effectively on ${(null==(l=k.value)?void 0:l.name)||"TalaStage"}.`,keywords:`manage projects, project dashboard, project settings, ${(null==(o=k.value)?void 0:o.name)||"TalaStage"}`,image:(null==(r=k.value)?void 0:r.logo_url)||"/default-social-image.png",type:"website",siteName:(null==(i=k.value)?void 0:i.name)||"TalaStage",url:`${(null==(n=k.value)?void 0:n.canonical_url)||"https://talastage.com"}/studio/projects/manage-projects`,noIndex:!0,robots:"noindex, nofollow",canonical:`${(null==(d=k.value)?void 0:d.canonical_url)||"https://talastage.com"}/studio/projects/manage-projects`,openGraph:{title:`Manage Projects - ${(null==(u=k.value)?void 0:u.name)||"TalaStage"}`,description:(null==(c=k.value)?void 0:c.seo_description)||`Manage all your projects effectively on ${(null==(p=k.value)?void 0:p.name)||"TalaStage"}.`,url:`${(null==(m=k.value)?void 0:m.canonical_url)||"https://talastage.com"}/studio/projects/manage-projects`,image:(null==(v=k.value)?void 0:v.logo_url)||"/default-social-image.png",siteName:(null==(f=k.value)?void 0:f.name)||"TalaStage",type:"website"},twitter:{card:"summary_large_image",title:`Manage Projects - ${(null==(j=k.value)?void 0:j.name)||"TalaStage"}`,description:(null==(g=k.value)?void 0:g.seo_description)||`Manage all your projects effectively on ${(null==(_=k.value)?void 0:_.name)||"TalaStage"}.`,image:(null==(b=k.value)?void 0:b.logo_url)||"/default-social-image.png"},link:[{rel:"icon",type:"image/png",href:(null==(y=k.value)?void 0:y.favicon_url)||"/favicon.png"}]}),(e,t,a,s)=>{const l=Ie;t(`<div${P(s)} data-v-e21ac66d>`),t(x(l,null,null,a)),t("</div>")}}}),ze=Ue.setup;Ue.setup=(e,t)=>{const a=r();return(a.modules||(a.modules=new Set)).add("pages/studio/projects/manage-projects.vue"),ze?ze(e,t):void 0};const Ee=A(Ue,[["__scopeId","data-v-e21ac66d"]]);export{Ee as default};
