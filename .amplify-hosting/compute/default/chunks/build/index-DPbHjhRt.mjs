import{_ as e}from"./BaseContent-D2jufG_L.mjs";import{_ as t,a as r}from"./PaymentList-er3BEGd0.mjs";import{_ as a}from"./EmptyStateCard-3UqWseqH.mjs";import{useSSRContext as i,defineComponent as s,ref as n,watch as o,mergeProps as l,withCtx as m,unref as d,createVNode as p,createTextVNode as c,toDisplayString as u,openBlock as v,createBlock as y,Fragment as f,renderList as j,createCommentVNode as x}from"vue";import{ssrRenderAttrs as _,ssrRenderComponent as g,ssrRenderList as V,ssrInterpolate as h}from"vue/server-renderer";import{u as k}from"./useUserPayments-DIMCdT2C.mjs";import{u as C}from"./useInfiniteLoader-Bs8qePv9.mjs";import{V as b}from"./VSelect-BWLkvD3S.mjs";import{_ as P,aL as B,U as L,b as $,V as U,c as D,au as w}from"./server.mjs";import{a as F}from"./VChip-f_o2BAA4.mjs";import{V as S}from"./VAlert-DneVUU3Q.mjs";import{V as A}from"./VContainer-By3q0af_.mjs";import"./VCard-CsohsM82.mjs";import"./VAvatar-JL8WKjry.mjs";import"./VImg-B2jcJjnn.mjs";import"./VDivider-BmyMVZMt.mjs";import"./BaseCard-5i8D5k_7.mjs";import"./VSkeletonLoader-CXOx9RZQ.mjs";import"./UserAvatar-DFFlBvus.mjs";import"./useDateFormatter-W2Hui1rv.mjs";import"./useCurrencyFormatter-Dfs2ioxk.mjs";import"vue-router";import"./index-8pAncyvV.mjs";import"./index-DfGQ-Pg8.mjs";import"./VTextField-rd-VvEF8.mjs";import"./VCounter-BZE6l8kb.mjs";import"./index--K8ZrFMm.mjs";import"./VField-ZM6yOiXp.mjs";import"./VInput-DRJS2l97.mjs";import"./easing-Bn3h-KUg.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./VList-CcwwrkQR.mjs";import"./VListItem-jTLuICGb.mjs";import"./ssrBoot-BtvJZs44.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"./VMenu-BpdBiT5v.mjs";import"./VOverlay-ZKavbTei.mjs";import"./VCheckboxBtn-v4ZZzD80.mjs";import"./VSelectionControl-BvLhSUlq.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";const R=s({__name:"UserPaymentsPage",__ssrInlineRender:!0,setup(i){const{mobile:s,smAndDown:P,mdAndDown:D}=B(),w=n("all"),A=[{title:"All Statuses",value:"all"},{title:"Completed",value:"completed"},{title:"Pending",value:"pending"},{title:"Failed",value:"failed"}],{payments:R,loading:E,error:I,hasMore:Z,fetchPayments:q}=k(),{sentinelRef:T,initLoader:M}=C(q,Z,{immediate:!0}),retryLoad=()=>{I.value=null,R.value=[],M()};return o(w,(()=>{R.value=[],M()})),(i,n,o,k)=>{const C=e,P=t,B=r,D=a;n(`<div${_(l({class:"user-payments"},k))} data-v-18947f47>`),n(g(C,{title:"Payment History",subtitle:"View and manage your payment transactions"},{action:m(((e,t,r,a)=>{if(!t)return[p("div",{class:"filter-controls"},[p(b,{modelValue:w.value,"onUpdate:modelValue":e=>w.value=e,items:A,label:"Filter by Status",variant:"outlined",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-filter-variant",class:["filter-select",{"filter-select-mobile":d(s)}]},null,8,["modelValue","onUpdate:modelValue","class"])])];t(`<div class="filter-controls" data-v-18947f47${a}>`),t(g(b,{modelValue:w.value,"onUpdate:modelValue":e=>w.value=e,items:A,label:"Filter by Status",variant:"outlined",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-filter-variant",class:["filter-select",{"filter-select-mobile":d(s)}]},null,r,a)),t("</div>")})),content:m(((e,t,r,a)=>{if(!t)return[d(E)&&!d(R).length?(v(),y("div",{key:0,class:"skeleton-container"},[(v(),y(f,null,j(3,(e=>p(P,{key:e}))),64))])):d(R).length?(v(),y("div",{key:1,class:"payments-container"},[p(B,{payments:d(R),loading:d(E)},null,8,["payments","loading"]),p("div",{ref_key:"sentinelRef",ref:T,class:"d-flex justify-center my-6"},[d(E)?(v(),y("div",{key:0,class:"loading-more"},[p(L,{indeterminate:"",color:"primary",size:"28",width:"3"}),p("span",{class:"text-body-2 text-medium-emphasis ml-3"}," Loading more payments... ")])):d(Z)?x("",!0):(v(),y(F,{key:1,variant:"tonal",color:"primary","prepend-icon":"mdi-check-circle",class:"end-message"},{default:m((()=>[c(" All payments loaded ")])),_:1}))],512)])):(v(),y("div",{key:2,class:"empty-state-container"},[p(D,{title:"No Payments Found",message:"You haven't made any payments yet. Your payment history will appear here once you start making transactions.",icon:"mdi-credit-card-outline","icon-color":"primary"},{default:m((()=>[p($,{color:"primary",variant:"elevated","prepend-icon":"mdi-plus",onClick:e=>i.$router.push("/premieres")},{default:m((()=>[c(" Explore Premieres ")])),_:1},8,["onClick"])])),_:1})])),d(I)?(v(),y(S,{key:3,type:"error",variant:"tonal",class:"mt-4 error-alert",closable:"","onClick:close":e=>I.value=null},{prepend:m((()=>[p(U,{icon:"mdi-alert-circle"})])),append:m((()=>[p($,{variant:"text",size:"small",onClick:retryLoad},{default:m((()=>[c(" Retry ")])),_:1})])),default:m((()=>[p("div",{class:"d-flex flex-column"},[p("strong",null,"Error Loading Payments"),p("span",{class:"text-body-2 mt-1"},u(d(I)),1)])])),_:1},8,["onClick:close"])):x("",!0)];d(E)&&!d(R).length?(t(`<div class="skeleton-container" data-v-18947f47${a}>\x3c!--[--\x3e`),V(3,(e=>{t(g(P,{key:e},null,r,a))})),t("\x3c!--]--\x3e</div>")):d(R).length?(t(`<div class="payments-container" data-v-18947f47${a}>`),t(g(B,{payments:d(R),loading:d(E)},null,r,a)),t(`<div class="d-flex justify-center my-6" data-v-18947f47${a}>`),d(E)?(t(`<div class="loading-more" data-v-18947f47${a}>`),t(g(L,{indeterminate:"",color:"primary",size:"28",width:"3"},null,r,a)),t(`<span class="text-body-2 text-medium-emphasis ml-3" data-v-18947f47${a}> Loading more payments... </span></div>`)):d(Z)?t("\x3c!----\x3e"):t(g(F,{variant:"tonal",color:"primary","prepend-icon":"mdi-check-circle",class:"end-message"},{default:m(((e,t,r,a)=>{if(!t)return[c(" All payments loaded ")];t(" All payments loaded ")})),_:1},r,a)),t("</div></div>")):(t(`<div class="empty-state-container" data-v-18947f47${a}>`),t(g(D,{title:"No Payments Found",message:"You haven't made any payments yet. Your payment history will appear here once you start making transactions.",icon:"mdi-credit-card-outline","icon-color":"primary"},{default:m(((e,t,r,a)=>{if(!t)return[p($,{color:"primary",variant:"elevated","prepend-icon":"mdi-plus",onClick:e=>i.$router.push("/premieres")},{default:m((()=>[c(" Explore Premieres ")])),_:1},8,["onClick"])];t(g($,{color:"primary",variant:"elevated","prepend-icon":"mdi-plus",onClick:e=>i.$router.push("/premieres")},{default:m(((e,t,r,a)=>{if(!t)return[c(" Explore Premieres ")];t(" Explore Premieres ")})),_:1},r,a))})),_:1},r,a)),t("</div>")),d(I)?t(g(S,{type:"error",variant:"tonal",class:"mt-4 error-alert",closable:"","onClick:close":e=>I.value=null},{prepend:m(((e,t,r,a)=>{if(!t)return[p(U,{icon:"mdi-alert-circle"})];t(g(U,{icon:"mdi-alert-circle"},null,r,a))})),append:m(((e,t,r,a)=>{if(!t)return[p($,{variant:"text",size:"small",onClick:retryLoad},{default:m((()=>[c(" Retry ")])),_:1})];t(g($,{variant:"text",size:"small",onClick:retryLoad},{default:m(((e,t,r,a)=>{if(!t)return[c(" Retry ")];t(" Retry ")})),_:1},r,a))})),default:m(((e,t,r,a)=>{if(!t)return[p("div",{class:"d-flex flex-column"},[p("strong",null,"Error Loading Payments"),p("span",{class:"text-body-2 mt-1"},u(d(I)),1)])];t(`<div class="d-flex flex-column" data-v-18947f47${a}><strong data-v-18947f47${a}>Error Loading Payments</strong><span class="text-body-2 mt-1" data-v-18947f47${a}>${h(d(I))}</span></div>`)})),_:1},r,a)):t("\x3c!----\x3e")})),_:1},o)),n("</div>")}}}),E=R.setup;R.setup=(e,t)=>{const r=i();return(r.modules||(r.modules=new Set)).add("views/payments/UserPaymentsPage.vue"),E?E(e,t):void 0};const I=P(R,[["__scopeId","data-v-18947f47"]]),Z=s({__name:"index",__ssrInlineRender:!0,setup(e){const t=D(),r=w(),a=t.query.tx_ref,i=t.query.transaction_id,s=t.query.status;if(a){const e={...s&&{status:s},...i&&{transaction_id:i},tx_ref:a};r.replace({path:`/payments/payment-${a}`,query:e})}return(e,t,r,a)=>{const i=I;t(g(A,l({class:"payments-page"},a),{default:m(((e,t,r,a)=>{if(!t)return[p(i)];t(g(i,null,null,r,a))})),_:1},r))}}}),q=Z.setup;Z.setup=(e,t)=>{const r=i();return(r.modules||(r.modules=new Set)).add("pages/payments/index.vue"),q?q(e,t):void 0};const T=P(Z,[["__scopeId","data-v-d1de2687"]]);export{T as default};
