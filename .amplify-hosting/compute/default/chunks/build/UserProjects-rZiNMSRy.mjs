import{_ as e}from"./BaseCard-5i8D5k_7.mjs";import{_ as t}from"./ProjectGrid-D_1C43qX.mjs";import{_ as r}from"./BaseHeader-CiSkdPXW.mjs";import{_ as o}from"./EmptyStateCard-3UqWseqH.mjs";import{useSSRContext as a,defineComponent as i,ref as s,computed as n,watch as l,withCtx as m,unref as p,createVNode as u,toDisplayString as c,createTextVNode as d,openBlock as g,createBlock as f,Fragment as j,renderList as h}from"vue";import{ssrRenderComponent as y,ssrInterpolate as v,ssrRenderList as P}from"vue/server-renderer";import{useRouter as _}from"vue-router";import{d as x,u as w,_ as k,V as C}from"./server.mjs";import{u as b}from"./useProfileOwnership-UkSlwWA2.mjs";import{a as S}from"./VCard-CsohsM82.mjs";import{a as z}from"./VChip-f_o2BAA4.mjs";import"./MediaThumbnail-jyEgcC54.mjs";import"hls.js";import"./VImg-B2jcJjnn.mjs";import"./UserAvatar-DFFlBvus.mjs";import"./VAvatar-JL8WKjry.mjs";import"./ProjectCardSkeleton-DMcYuKOy.mjs";import"./VSkeletonLoader-CXOx9RZQ.mjs";import"./ProjectCardCompact-C94E1iON.mjs";import"./useDateFormatter-W2Hui1rv.mjs";import"./index-8pAncyvV.mjs";import"./index-DfGQ-Pg8.mjs";import"./VContainer-By3q0af_.mjs";import"./VRow-rkX0LEXR.mjs";import"./VCol-CKxprC4g.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";import"./index--K8ZrFMm.mjs";const F=x("userProjects",{state:()=>({projects:[],pagination:{currentPage:1,lastPage:1,total:0,perPage:12,from:1,to:12},isLoading:!1,error:null}),getters:{hasMorePages:e=>e.pagination.currentPage<e.pagination.lastPage,totalProjects:e=>e.pagination.total},actions:{resetState(){this.projects=[],this.pagination={currentPage:1,lastPage:1,total:0,perPage:12,from:1,to:12},this.isLoading=!1,this.error=null},async fetchProjects(e){var t,r;if(this.isLoading||!this.hasMorePages&&this.projects.length>0)return;this.isLoading=!0,this.error=null;const{$axios:o}=w();try{const{data:t}=await o.get(`/api/user/${e}/projects`,{params:{page:this.pagination.currentPage}});1===this.pagination.currentPage?this.projects=t.projects:this.projects=[...this.projects,...t.projects],this.pagination={currentPage:t.pagination.current_page+1,lastPage:t.pagination.last_page,total:t.pagination.total,perPage:t.pagination.per_page,from:t.pagination.from,to:t.pagination.to}}catch(e){throw console.error("Error fetching projects:",e),this.error=(null==(r=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:r.message)||"Failed to fetch projects",e}finally{this.isLoading=!1}}}}),L=i({__name:"UserProjects",__ssrInlineRender:!0,props:{username:{type:String,required:!0}},setup(a){const i=a;_();const x=F(),{isProfileOwner:w}=b(i.username),k=s(null),L=s(!1),$=n((()=>w.value?"My Premieres":`${i.username}'s Premieres`)),V=n((()=>"\n  Ready to showcase your talent? Start by premiering your first project.\n  Share your creative work with the world and build your portfolio.\n")),M=n((()=>`\n  ${i.username} hasn't shared any premieres yet.\n  Check back later to see what they create!\n`)),Y=n((()=>!k.value||Date.now()-k.value>3e5)),D=["ðŸŽ¬ Share Your Work","ðŸŒŸ Build Your Portfolio","ðŸ¤ Connect with Others","ðŸ’¡ Inspire & Get Inspired"],fetchProjects=async(e=!1)=>{if(e||Y.value||!L.value)try{await x.fetchProjects(i.username),k.value=Date.now(),L.value=!0}catch(e){console.error("Error fetching projects:",e)}};return l((()=>i.username),((e,t)=>{e&&e!==t&&(x.resetState(),k.value=null,L.value=!1,fetchProjects(!0))})),(i,s,n,l)=>{const _=t,k=r,b=o;s(y(e,l,{default:m(((e,t,r,o)=>{if(!t)return[u(_,{projects:p(x).projects,"total-projects":p(x).totalProjects,"current-page":p(x).pagination.currentPage,"last-page":p(x).pagination.lastPage,"is-loading":p(x).isLoading,variant:"grid",title:"User Projects",onLoadMore:fetchProjects},{header:m((()=>[u(k,{title:$.value},{subtitle:m((()=>[u("p",{class:"text-subtitle-1"},c(p(x).totalProjects)+" premieres",1)])),_:1},8,["title"])])),"empty-state":m((()=>[p(w)?(g(),f(b,{key:0,title:"Start Your Creative Journey",message:V.value,"action-text":"Premiere Your First Project",link:"/premiering"},{icon:m((()=>[u(C,{size:"64",color:"primary",class:"mb-4"},{default:m((()=>[d(" mdi-movie-plus-outline ")])),_:1})])),"extra-content":m((()=>[u(S,{class:"text-center"},{default:m((()=>[(g(),f(j,null,h(D,((e,t)=>u(z,{key:t,class:"ma-1",color:"primary",variant:"outlined",size:"small"},{default:m((()=>[d(c(e),1)])),_:2},1024))),64))])),_:1})])),_:1},8,["message"])):(g(),f(b,{key:1,title:`${a.username}'s Premieres`,message:M.value},{icon:m((()=>[u(C,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:m((()=>[d(" mdi-movie-open-outline ")])),_:1})])),"extra-content":m((()=>[u(S,{class:"text-center text-caption text-grey-darken-1"},{default:m((()=>[d(" Follow "+c(a.username)+" to get notified when they share new projects ",1)])),_:1})])),_:1},8,["title","message"]))])),_:1},8,["projects","total-projects","current-page","last-page","is-loading"])];t(y(_,{projects:p(x).projects,"total-projects":p(x).totalProjects,"current-page":p(x).pagination.currentPage,"last-page":p(x).pagination.lastPage,"is-loading":p(x).isLoading,variant:"grid",title:"User Projects",onLoadMore:fetchProjects},{header:m(((e,t,r,o)=>{if(!t)return[u(k,{title:$.value},{subtitle:m((()=>[u("p",{class:"text-subtitle-1"},c(p(x).totalProjects)+" premieres",1)])),_:1},8,["title"])];t(y(k,{title:$.value},{subtitle:m(((e,t,r,o)=>{if(!t)return[u("p",{class:"text-subtitle-1"},c(p(x).totalProjects)+" premieres",1)];t(`<p class="text-subtitle-1" data-v-683d1111${o}>${v(p(x).totalProjects)} premieres</p>`)})),_:1},r,o))})),"empty-state":m(((e,t,r,o)=>{if(!t)return[p(w)?(g(),f(b,{key:0,title:"Start Your Creative Journey",message:V.value,"action-text":"Premiere Your First Project",link:"/premiering"},{icon:m((()=>[u(C,{size:"64",color:"primary",class:"mb-4"},{default:m((()=>[d(" mdi-movie-plus-outline ")])),_:1})])),"extra-content":m((()=>[u(S,{class:"text-center"},{default:m((()=>[(g(),f(j,null,h(D,((e,t)=>u(z,{key:t,class:"ma-1",color:"primary",variant:"outlined",size:"small"},{default:m((()=>[d(c(e),1)])),_:2},1024))),64))])),_:1})])),_:1},8,["message"])):(g(),f(b,{key:1,title:`${a.username}'s Premieres`,message:M.value},{icon:m((()=>[u(C,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:m((()=>[d(" mdi-movie-open-outline ")])),_:1})])),"extra-content":m((()=>[u(S,{class:"text-center text-caption text-grey-darken-1"},{default:m((()=>[d(" Follow "+c(a.username)+" to get notified when they share new projects ",1)])),_:1})])),_:1},8,["title","message"]))];p(w)?t(y(b,{title:"Start Your Creative Journey",message:V.value,"action-text":"Premiere Your First Project",link:"/premiering"},{icon:m(((e,t,r,o)=>{if(!t)return[u(C,{size:"64",color:"primary",class:"mb-4"},{default:m((()=>[d(" mdi-movie-plus-outline ")])),_:1})];t(y(C,{size:"64",color:"primary",class:"mb-4"},{default:m(((e,t,r,o)=>{if(!t)return[d(" mdi-movie-plus-outline ")];t(" mdi-movie-plus-outline ")})),_:1},r,o))})),"extra-content":m(((e,t,r,o)=>{if(!t)return[u(S,{class:"text-center"},{default:m((()=>[(g(),f(j,null,h(D,((e,t)=>u(z,{key:t,class:"ma-1",color:"primary",variant:"outlined",size:"small"},{default:m((()=>[d(c(e),1)])),_:2},1024))),64))])),_:1})];t(y(S,{class:"text-center"},{default:m(((e,t,r,o)=>{if(!t)return[(g(),f(j,null,h(D,((e,t)=>u(z,{key:t,class:"ma-1",color:"primary",variant:"outlined",size:"small"},{default:m((()=>[d(c(e),1)])),_:2},1024))),64))];t("\x3c!--[--\x3e"),P(D,((e,a)=>{t(y(z,{key:a,class:"ma-1",color:"primary",variant:"outlined",size:"small"},{default:m(((t,r,o,a)=>{if(!r)return[d(c(e),1)];r(`${v(e)}`)})),_:2},r,o))})),t("\x3c!--]--\x3e")})),_:1},r,o))})),_:1},r,o)):t(y(b,{title:`${a.username}'s Premieres`,message:M.value},{icon:m(((e,t,r,o)=>{if(!t)return[u(C,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:m((()=>[d(" mdi-movie-open-outline ")])),_:1})];t(y(C,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:m(((e,t,r,o)=>{if(!t)return[d(" mdi-movie-open-outline ")];t(" mdi-movie-open-outline ")})),_:1},r,o))})),"extra-content":m(((e,t,r,o)=>{if(!t)return[u(S,{class:"text-center text-caption text-grey-darken-1"},{default:m((()=>[d(" Follow "+c(a.username)+" to get notified when they share new projects ",1)])),_:1})];t(y(S,{class:"text-center text-caption text-grey-darken-1"},{default:m(((e,t,r,o)=>{if(!t)return[d(" Follow "+c(a.username)+" to get notified when they share new projects ",1)];t(` Follow ${v(a.username)} to get notified when they share new projects `)})),_:1},r,o))})),_:1},r,o))})),_:1},r,o))})),_:1},n))}}}),$=L.setup;L.setup=(e,t)=>{const r=a();return(r.modules||(r.modules=new Set)).add("components/profile/UserProjects.vue"),$?$(e,t):void 0};const V=k(L,[["__scopeId","data-v-683d1111"]]);export{V as default};
