import{computed as e,ref as t,createVNode as l,mergeProps as n,withDirectives as o,resolveDirective as a,Fragment as u,cloneVNode as r,nextTick as s}from"vue";import{V as i}from"./VCounter-BZE6l8kb.mjs";import{m as c,f as d,V as f}from"./VField-ZM6yOiXp.mjs";import{m as p,u as v,V as m}from"./VInput-DRJS2l97.mjs";import{f as x}from"./forwardRefs-BSTjJZPU.mjs";import{p as V,h as y,a2 as C,j as g,ac as h,ad as k}from"./server.mjs";import{I}from"./VImg-B2jcJjnn.mjs";const _=["color","file","time","date","datetime-local","week","month"],j=V({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...p(),...c()},"VTextField"),F=y()({name:"VTextField",directives:{Intersect:I},inheritAttrs:!1,props:j(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(c,p){let{attrs:V,emit:y,slots:I}=p;const j=C(c,"modelValue"),{isFocused:F,focus:S,blur:b}=v(c),w=e((()=>{var e;return"function"==typeof c.counterValue?c.counterValue(j.value):"number"==typeof c.counterValue?c.counterValue:(null!=(e=j.value)?e:"").toString().length})),B=e((()=>V.maxlength?V.maxlength:!c.counter||"number"!=typeof c.counter&&"string"!=typeof c.counter?void 0:c.counter)),M=e((()=>["plain","underlined"].includes(c.variant)));function onIntersect(e,t){var l,n;c.autofocus&&e&&(null==(n=null==(l=t[0].target)?void 0:l.focus)||n.call(l))}const P=t(),D=t(),E=t(),J=e((()=>_.includes(c.type)||c.persistentPlaceholder||F.value||c.active));function onFocus(){var e;E.value!==(void 0).activeElement&&(null==(e=E.value)||e.focus()),F.value||S()}function onControlMousedown(e){y("mousedown:control",e),e.target!==E.value&&(onFocus(),e.preventDefault())}function onControlClick(e){onFocus(),y("click:control",e)}function onClear(e){e.stopPropagation(),onFocus(),s((()=>{j.value=null,k(c["onClick:clear"],e)}))}function onInput(e){var t;const l=e.target;if(j.value=l.value,(null==(t=c.modelModifiers)?void 0:t.trim)&&["text","search","password","tel","url"].includes(c.type)){const e=[l.selectionStart,l.selectionEnd];s((()=>{l.selectionStart=e[0],l.selectionEnd=e[1]}))}}return g((()=>{const e=!!(I.counter||!1!==c.counter&&null!=c.counter),t=!(!e&&!I.details),[s,p]=h(V),{modelValue:v,...x}=m.filterProps(c),y=d(c);return l(m,n({ref:P,modelValue:j.value,"onUpdate:modelValue":e=>j.value=e,class:["v-text-field",{"v-text-field--prefixed":c.prefix,"v-text-field--suffixed":c.suffix,"v-input--plain-underlined":M.value},c.class],style:c.style},s,x,{centerAffix:!M.value,focused:F.value}),{...I,default:e=>{let{id:t,isDisabled:s,isDirty:i,isReadonly:d,isValid:v}=e;return l(f,n({ref:D,onMousedown:onControlMousedown,onClick:onControlClick,"onClick:clear":onClear,"onClick:prependInner":c["onClick:prependInner"],"onClick:appendInner":c["onClick:appendInner"],role:c.role},y,{id:t.value,active:J.value||i.value,dirty:i.value||c.dirty,disabled:s.value,focused:F.value,error:!1===v.value}),{...I,default:e=>{let{props:{class:t,...i}}=e;const f=o(l("input",n({ref:E,value:j.value,onInput:onInput,autofocus:c.autofocus,readonly:d.value,disabled:s.value,name:c.name,placeholder:c.placeholder,size:1,type:c.type,onFocus:onFocus,onBlur:b},i,p),null),[[a("intersect"),{handler:onIntersect},null,{once:!0}]]);return l(u,null,[c.prefix&&l("span",{class:"v-text-field__prefix"},[l("span",{class:"v-text-field__prefix__text"},[c.prefix])]),I.default?l("div",{class:t,"data-no-activator":""},[I.default(),f]):r(f,{class:t}),c.suffix&&l("span",{class:"v-text-field__suffix"},[l("span",{class:"v-text-field__suffix__text"},[c.suffix])])])}})},details:t?t=>{var n;return l(u,null,[null==(n=I.details)?void 0:n.call(I,t),e&&l(u,null,[l("span",null,null),l(i,{active:c.persistentCounter||F.value,value:w.value,max:B.value},I.counter)])])}:void 0})})),x({},P,D,E)}});export{F as V,j as m};
