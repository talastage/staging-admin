import{inject as e,provide as t,shallowRef as l,computed as a,createVNode as o,ref as u,reactive as s}from"vue";import{p as n,a3 as i,P as r,m as v,z as c,h as y,B as m,i as d,j as p,g as f,aK as g,Q as h,bj as I}from"./server.mjs";import{u as S}from"./ssrBoot-BtvJZs44.mjs";const b=Symbol.for("vuetify:layout"),x=Symbol.for("vuetify:layout-item"),w=n({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),$=n({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayoutItem(o){var u;const s=e(b);if(!s)throw new Error("[Vuetify] Could not find injected layout");const n=null!=(u=o.id)?u:`layout-item-${i()}`,v=r("useLayoutItem");t(x,{id:n});const c=l(!1),{layoutItemStyles:y,layoutItemScrimStyles:m}=s.register(v,{...o,active:a((()=>!c.value&&o.active.value)),id:n});return{layoutItemStyles:y,layoutRect:s.layoutRect,layoutItemScrimStyles:m}}function createLayout(o){const n=e(b,null),i=a((()=>n?n.rootZIndex.value-100:1e3)),v=u([]),c=s(new Map),y=s(new Map),m=s(new Map),d=s(new Map),p=s(new Map),{resizeRef:f,contentRect:S}=g(),w=a((()=>{var e;const t=new Map,l=null!=(e=o.overlaps)?e:[];for(const e of l.filter((e=>e.includes(":")))){const[l,a]=e.split(":");if(!v.value.includes(l)||!v.value.includes(a))continue;const o=c.get(l),u=c.get(a),s=y.get(l),n=y.get(a);o&&u&&s&&n&&(t.set(a,{position:o.value,amount:parseInt(s.value,10)}),t.set(l,{position:u.value,amount:-parseInt(n.value,10)}))}return t})),$=a((()=>{const e=[...new Set([...m.values()].map((e=>e.value)))].sort(((e,t)=>e-t)),t=[];for(const l of e){const e=v.value.filter((e=>{var t;return(null==(t=m.get(e))?void 0:t.value)===l}));t.push(...e)}return((e,t,l,a)=>{let o={top:0,left:0,right:0,bottom:0};const u=[{id:"",layer:{...o}}];for(const s of e){const e=t.get(s),n=l.get(s),i=a.get(s);if(!e||!n||!i)continue;const r={...o,[e.value]:parseInt(o[e.value],10)+(i.value?parseInt(n.value,10):0)};u.push({id:s,layer:r}),o=r}return u})(t,c,y,d)})),L=a((()=>!Array.from(p.values()).some((e=>e.value)))),R=a((()=>$.value[$.value.length-1].layer)),z=a((()=>({"--v-layout-left":h(R.value.left),"--v-layout-right":h(R.value.right),"--v-layout-top":h(R.value.top),"--v-layout-bottom":h(R.value.bottom),...L.value?void 0:{transition:"none"}}))),M=a((()=>$.value.slice(1).map(((e,t)=>{let{id:l}=e;const{layer:a}=$.value[t],o=y.get(l),u=c.get(l);return{id:l,...a,size:Number(o.value),position:u.value}})))),getLayoutItem=e=>M.value.find((t=>t.id===e)),V=r("createLayout"),B=l(!1);t(b,{register:(e,t)=>{let{id:l,order:o,position:u,layoutSize:s,elementSize:n,active:r,disableTransitions:f,absolute:g}=t;m.set(l,o),c.set(l,u),y.set(l,s),d.set(l,r),f&&p.set(l,f);const h=I(x,null==V?void 0:V.vnode).indexOf(e);h>-1?v.value.splice(h,0,l):v.value.push(l);const S=a((()=>M.value.findIndex((e=>e.id===l)))),b=a((()=>i.value+2*$.value.length-2*S.value));return{layoutItemStyles:a((()=>{const e="left"===u.value||"right"===u.value,t="right"===u.value,a="bottom"===u.value,o={[u.value]:0,zIndex:b.value,transform:`translate${e?"X":"Y"}(${(r.value?0:-110)*(t||a?-1:1)}%)`,position:g.value||1e3!==i.value?"absolute":"fixed",...L.value?void 0:{transition:"none"}};if(!B.value)return o;const s=M.value[S.value];if(!s)throw new Error(`[Vuetify] Could not find layout item "${l}"`);const v=w.value.get(l);return v&&(s[v.position]+=v.amount),{...o,height:e?`calc(100% - ${s.top}px - ${s.bottom}px)`:n.value?`${n.value}px`:void 0,left:t?void 0:`${s.left}px`,right:t?`${s.right}px`:void 0,top:"bottom"!==u.value?`${s.top}px`:void 0,bottom:"top"!==u.value?`${s.bottom}px`:void 0,width:e?n.value?`${n.value}px`:void 0:`calc(100% - ${s.left}px - ${s.right}px)`}})),layoutItemScrimStyles:a((()=>({zIndex:b.value-1}))),zIndex:b}},unregister:e=>{m.delete(e),c.delete(e),y.delete(e),d.delete(e),p.delete(e),v.value=v.value.filter((t=>t!==e))},mainRect:R,mainStyles:z,getLayoutItem:getLayoutItem,items:M,layoutRect:S,rootZIndex:i});return{layoutClasses:a((()=>["v-layout",{"v-layout--full-height":o.fullHeight}])),layoutStyles:a((()=>({zIndex:n?i.value:void 0,position:n?"relative":void 0,overflow:n?"hidden":void 0}))),getLayoutItem:getLayoutItem,items:M,layoutRect:S,layoutRef:f}}const L=n({...v(),...w({fullHeight:!0}),...c()},"VApp"),R=y()({name:"VApp",props:L(),setup(e,t){let{slots:l}=t;const a=m(e),{layoutClasses:u,getLayoutItem:s,items:n,layoutRef:i}=createLayout(e),{rtlClasses:r}=d();return p((()=>{var t;return o("div",{ref:i,class:["v-application",a.themeClasses.value,u.value,r.value,e.class],style:[e.style]},[o("div",{class:"v-application__wrap"},[null==(t=l.default)?void 0:t.call(l)])])})),{getLayoutItem:s,items:n,theme:a}}}),z=n({scrollable:Boolean,...v(),...f({tag:"main"})},"VMain"),M=y()({name:"VMain",props:z(),setup(t,l){let{slots:a}=l;const{mainStyles:u}=function(){const t=e(b);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}(),{ssrBootStyles:s}=S();return p((()=>o(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[u.value,s.value,t.style]},{default:()=>{var e,l;return[t.scrollable?o("div",{class:"v-main__scroller"},[null==(e=a.default)?void 0:e.call(a)]):null==(l=a.default)?void 0:l.call(a)]}}))),{}}});export{R as V,M as a,$ as m,useLayoutItem as u};
