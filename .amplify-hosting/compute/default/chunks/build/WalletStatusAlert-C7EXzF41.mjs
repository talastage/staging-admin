import{useSSRContext as e,defineComponent as a,computed as t,watch as l,mergeProps as s,withCtx as i,createTextVNode as r,createVNode as n,toDisplayString as c}from"vue";import{ssrRenderAttrs as o,ssrRenderComponent as d,ssrInterpolate as u}from"vue/server-renderer";import{useRouter as m}from"vue-router";import{u as v}from"./useWalletStore-C5It8oQZ.mjs";import{V as p,a as f}from"./VCard-CsohsM82.mjs";import{V as y,b as g,af as x,_ as w}from"./server.mjs";import{a as b}from"./VChip-f_o2BAA4.mjs";const h=a({__name:"WalletStatusAlert",__ssrInlineRender:!0,props:{amount:{type:Number,required:!0},currency:{type:Object,required:!0,default:()=>({id:0,code:"RWF",symbol:"RWF"})},useCompactLayout:{type:Boolean,default:!1},hideCompactLayout:{type:Boolean,default:!1},showSuccessAlert:{type:Boolean,default:!0},inactiveMessage:{type:String,default:"Your wallet is inactive. Please activate it to continue."},insufficientFundsMessage:{type:String,default:"Insufficient wallet balance"},successMessage:{type:String,default:"Your wallet has sufficient funds for this payment"},currencyMismatchMessage:{type:String,default:"Currency mismatch between wallet and payment"},errorMessage:{type:String,default:"Unable to verify wallet status. Please try again later."},balanceLabel:{type:String,default:"Available Balance"},paymentLabel:{type:String,default:"Payment Amount"},activateButtonText:{type:String,default:"Activate Wallet"},depositButtonText:{type:String,default:"Deposit Funds"},walletStatus:{type:String,default:"",validator:e=>["","active","inactive","insufficient","sufficient","currencyMismatch","error"].includes(e)}},emits:["validate","deposit-click","activate-click"],setup(e,{emit:a}){const w=e,h=a,_=m(),z=v();function formatAmount(e,a,t){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t||"RWF",currencyDisplay:"symbol"}).format(e).replace(t,a||t)}catch(l){return`${a||t}${e.toFixed(2)}`}}const S=t((()=>z.currentCurrency||{code:"RWF",symbol:"RWF"})),$=t((()=>{var e;return z.currentBalance?formatAmount(Number(z.currentBalance),S.value.symbol||S.value.code,S.value.code):(null==(e=S.value)?void 0:e.code)?`${S.value.symbol||S.value.code}0.00`:"RWF0.00"})),A=t((()=>{var e;return w.amount?formatAmount(w.amount,w.currency.symbol||w.currency.code,w.currency.code):(null==(e=w.currency)?void 0:e.code)?`${w.currency.symbol||w.currency.code}0.00`:"RWF0.00"})),k=t((()=>"inactive"!==w.walletStatus&&("active"===w.walletStatus||"sufficient"===w.walletStatus||"insufficient"===w.walletStatus||z.isWalletActive))),C=t((()=>{var e,a;if("insufficient"===w.walletStatus)return!0;if("sufficient"===w.walletStatus)return!1;const t=Number(z.currentBalance||0);return null==(e=S.value)||e.code,null==(a=w.currency)||a.code,t<w.amount})),B=t((()=>{const e=Number(z.currentBalance||0),a=w.amount||1;if(0===a)return 100;const t=e/a*100;return Math.min(t,100)})),navigateToHelp=()=>{_.push("/help/wallet/wallet-deposits/how-to-deposit-funds-to-your-wallet")},navigateToActivate=()=>{_.push("/wallet/activate"),h("activate-click")},navigateToDeposit=()=>{_.push("/wallet/deposit"),h("deposit-click")};return l([()=>z.currentBalance,()=>w.amount,()=>{var e;return null==(e=S.value)?void 0:e.code},()=>{var e;return null==(e=w.currency)?void 0:e.code},()=>k.value,()=>C.value,()=>w.walletStatus],(()=>{var e,a;const t=w.walletStatus||(k.value?C.value?"insufficient":"sufficient":"inactive");h("validate",{valid:k.value&&!C.value&&"currencyMismatch"!==w.walletStatus&&"error"!==w.walletStatus,status:t,data:{wallet_id:null==(a=null==(e=z.wallet)?void 0:e.data)?void 0:a.id}})}),{immediate:!0}),(a,t,l,m)=>{t(`<div${o(s({class:"wallet-status-compact"},m))} data-v-65822250>`),k.value?C.value?t(d(p,{class:"insufficient-card",elevation:"2",rounded:"lg"},{default:i(((e,a,t,l)=>{if(!a)return[n(f,{class:"pa-3"},{default:i((()=>[n("div",{class:"d-flex align-center justify-space-between mb-2"},[n("div",{class:"d-flex align-center"},[n(y,{color:"warning",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-cash-remove")])),_:1}),n("span",{class:"text-body-2 font-weight-medium"},"Insufficient Balance")]),n(b,{size:"small",color:"warning",variant:"tonal"},{default:i((()=>[r(c(B.value.toFixed(0))+"% available ",1)])),_:1})]),n("div",{class:"balance-row mb-2"},[n("div",{class:"balance-item"},[n("span",{class:"text-caption text-medium-emphasis"},"Balance:"),n("span",{class:"text-body-2 font-weight-bold text-success"},c($.value),1)]),n(y,{size:"16",color:"grey"},{default:i((()=>[r("mdi-arrow-right")])),_:1}),n("div",{class:"balance-item"},[n("span",{class:"text-caption text-medium-emphasis"},"Required:"),n("span",{class:"text-body-2 font-weight-bold text-error"},c(A.value),1)])]),n(x,{"model-value":B.value,color:"warning","bg-color":"grey-lighten-4",height:"4",rounded:"",class:"mb-3"},null,8,["model-value"]),n("p",{class:"text-caption text-medium-emphasis mb-3"}," Please deposit funds to your wallet to complete this payment. "),n("div",{class:"d-flex gap-2"},[n(g,{size:"small",color:"primary",variant:"elevated",onClick:navigateToDeposit},{default:i((()=>[r(" Add Funds ")])),_:1}),n(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i((()=>[r(" Need Help? ")])),_:1})])])),_:1})];a(d(f,{class:"pa-3"},{default:i(((e,a,t,l)=>{if(!a)return[n("div",{class:"d-flex align-center justify-space-between mb-2"},[n("div",{class:"d-flex align-center"},[n(y,{color:"warning",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-cash-remove")])),_:1}),n("span",{class:"text-body-2 font-weight-medium"},"Insufficient Balance")]),n(b,{size:"small",color:"warning",variant:"tonal"},{default:i((()=>[r(c(B.value.toFixed(0))+"% available ",1)])),_:1})]),n("div",{class:"balance-row mb-2"},[n("div",{class:"balance-item"},[n("span",{class:"text-caption text-medium-emphasis"},"Balance:"),n("span",{class:"text-body-2 font-weight-bold text-success"},c($.value),1)]),n(y,{size:"16",color:"grey"},{default:i((()=>[r("mdi-arrow-right")])),_:1}),n("div",{class:"balance-item"},[n("span",{class:"text-caption text-medium-emphasis"},"Required:"),n("span",{class:"text-body-2 font-weight-bold text-error"},c(A.value),1)])]),n(x,{"model-value":B.value,color:"warning","bg-color":"grey-lighten-4",height:"4",rounded:"",class:"mb-3"},null,8,["model-value"]),n("p",{class:"text-caption text-medium-emphasis mb-3"}," Please deposit funds to your wallet to complete this payment. "),n("div",{class:"d-flex gap-2"},[n(g,{size:"small",color:"primary",variant:"elevated",onClick:navigateToDeposit},{default:i((()=>[r(" Add Funds ")])),_:1}),n(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i((()=>[r(" Need Help? ")])),_:1})])];a(`<div class="d-flex align-center justify-space-between mb-2" data-v-65822250${l}><div class="d-flex align-center" data-v-65822250${l}>`),a(d(y,{color:"warning",size:"20",class:"mr-2"},{default:i(((e,a,t,l)=>{if(!a)return[r("mdi-cash-remove")];a("mdi-cash-remove")})),_:1},t,l)),a(`<span class="text-body-2 font-weight-medium" data-v-65822250${l}>Insufficient Balance</span></div>`),a(d(b,{size:"small",color:"warning",variant:"tonal"},{default:i(((e,a,t,l)=>{if(!a)return[r(c(B.value.toFixed(0))+"% available ",1)];a(`${u(B.value.toFixed(0))}% available `)})),_:1},t,l)),a(`</div><div class="balance-row mb-2" data-v-65822250${l}><div class="balance-item" data-v-65822250${l}><span class="text-caption text-medium-emphasis" data-v-65822250${l}>Balance:</span><span class="text-body-2 font-weight-bold text-success" data-v-65822250${l}>${u($.value)}</span></div>`),a(d(y,{size:"16",color:"grey"},{default:i(((e,a,t,l)=>{if(!a)return[r("mdi-arrow-right")];a("mdi-arrow-right")})),_:1},t,l)),a(`<div class="balance-item" data-v-65822250${l}><span class="text-caption text-medium-emphasis" data-v-65822250${l}>Required:</span><span class="text-body-2 font-weight-bold text-error" data-v-65822250${l}>${u(A.value)}</span></div></div>`),a(d(x,{"model-value":B.value,color:"warning","bg-color":"grey-lighten-4",height:"4",rounded:"",class:"mb-3"},null,t,l)),a(`<p class="text-caption text-medium-emphasis mb-3" data-v-65822250${l}> Please deposit funds to your wallet to complete this payment. </p><div class="d-flex gap-2" data-v-65822250${l}>`),a(d(g,{size:"small",color:"primary",variant:"elevated",onClick:navigateToDeposit},{default:i(((e,a,t,l)=>{if(!a)return[r(" Add Funds ")];a(" Add Funds ")})),_:1},t,l)),a(d(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i(((e,a,t,l)=>{if(!a)return[r(" Need Help? ")];a(" Need Help? ")})),_:1},t,l)),a("</div>")})),_:1},t,l))})),_:1},l)):e.showSuccessAlert?t(d(p,{class:"success-card",elevation:"1",rounded:"lg"},{default:i(((e,a,t,l)=>{if(!a)return[n(f,{class:"pa-3"},{default:i((()=>[n("div",{class:"d-flex align-center"},[n(y,{color:"success",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-check-circle")])),_:1}),n("div",null,[n("span",{class:"text-body-2 font-weight-medium text-success"},"Ready to Pay"),n("div",{class:"text-caption text-medium-emphasis"}," Balance: "+c($.value),1)])])])),_:1})];a(d(f,{class:"pa-3"},{default:i(((e,a,t,l)=>{if(!a)return[n("div",{class:"d-flex align-center"},[n(y,{color:"success",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-check-circle")])),_:1}),n("div",null,[n("span",{class:"text-body-2 font-weight-medium text-success"},"Ready to Pay"),n("div",{class:"text-caption text-medium-emphasis"}," Balance: "+c($.value),1)])])];a(`<div class="d-flex align-center" data-v-65822250${l}>`),a(d(y,{color:"success",size:"20",class:"mr-2"},{default:i(((e,a,t,l)=>{if(!a)return[r("mdi-check-circle")];a("mdi-check-circle")})),_:1},t,l)),a(`<div data-v-65822250${l}><span class="text-body-2 font-weight-medium text-success" data-v-65822250${l}>Ready to Pay</span><div class="text-caption text-medium-emphasis" data-v-65822250${l}> Balance: ${u($.value)}</div></div></div>`)})),_:1},t,l))})),_:1},l)):"error"===e.walletStatus?t(d(p,{class:"error-card",elevation:"2",rounded:"lg"},{default:i(((a,t,l,s)=>{if(!t)return[n(f,{class:"pa-3"},{default:i((()=>[n("div",{class:"d-flex align-center mb-2"},[n(y,{color:"error",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-alert")])),_:1}),n("span",{class:"text-body-2 font-weight-medium"},"Wallet Error")]),n("p",{class:"text-caption text-medium-emphasis mb-3"},c(e.errorMessage),1),n(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i((()=>[r(" Get Support ")])),_:1})])),_:1})];t(d(f,{class:"pa-3"},{default:i(((a,t,l,s)=>{if(!t)return[n("div",{class:"d-flex align-center mb-2"},[n(y,{color:"error",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-alert")])),_:1}),n("span",{class:"text-body-2 font-weight-medium"},"Wallet Error")]),n("p",{class:"text-caption text-medium-emphasis mb-3"},c(e.errorMessage),1),n(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i((()=>[r(" Get Support ")])),_:1})];t(`<div class="d-flex align-center mb-2" data-v-65822250${s}>`),t(d(y,{color:"error",size:"20",class:"mr-2"},{default:i(((e,a,t,l)=>{if(!a)return[r("mdi-alert")];a("mdi-alert")})),_:1},l,s)),t(`<span class="text-body-2 font-weight-medium" data-v-65822250${s}>Wallet Error</span></div><p class="text-caption text-medium-emphasis mb-3" data-v-65822250${s}>${u(e.errorMessage)}</p>`),t(d(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i(((e,a,t,l)=>{if(!a)return[r(" Get Support ")];a(" Get Support ")})),_:1},l,s))})),_:1},l,s))})),_:1},l)):t("\x3c!----\x3e"):t(d(p,{class:"inactive-card",elevation:"2",rounded:"lg"},{default:i(((e,a,t,l)=>{if(!a)return[n(f,{class:"pa-3"},{default:i((()=>[n("div",{class:"d-flex align-center mb-2"},[n(y,{color:"warning",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-wallet-outline")])),_:1}),n("span",{class:"text-body-2 font-weight-medium"},"Wallet Activation Required")]),n("p",{class:"text-caption text-medium-emphasis mb-3"}," To complete this payment, please activate your wallet first. "),n("div",{class:"d-flex gap-2"},[n(g,{size:"small",color:"warning",variant:"elevated",onClick:navigateToActivate},{default:i((()=>[r(" Activate Now ")])),_:1}),n(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i((()=>[r(" Need Help? ")])),_:1})])])),_:1})];a(d(f,{class:"pa-3"},{default:i(((e,a,t,l)=>{if(!a)return[n("div",{class:"d-flex align-center mb-2"},[n(y,{color:"warning",size:"20",class:"mr-2"},{default:i((()=>[r("mdi-wallet-outline")])),_:1}),n("span",{class:"text-body-2 font-weight-medium"},"Wallet Activation Required")]),n("p",{class:"text-caption text-medium-emphasis mb-3"}," To complete this payment, please activate your wallet first. "),n("div",{class:"d-flex gap-2"},[n(g,{size:"small",color:"warning",variant:"elevated",onClick:navigateToActivate},{default:i((()=>[r(" Activate Now ")])),_:1}),n(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i((()=>[r(" Need Help? ")])),_:1})])];a(`<div class="d-flex align-center mb-2" data-v-65822250${l}>`),a(d(y,{color:"warning",size:"20",class:"mr-2"},{default:i(((e,a,t,l)=>{if(!a)return[r("mdi-wallet-outline")];a("mdi-wallet-outline")})),_:1},t,l)),a(`<span class="text-body-2 font-weight-medium" data-v-65822250${l}>Wallet Activation Required</span></div><p class="text-caption text-medium-emphasis mb-3" data-v-65822250${l}> To complete this payment, please activate your wallet first. </p><div class="d-flex gap-2" data-v-65822250${l}>`),a(d(g,{size:"small",color:"warning",variant:"elevated",onClick:navigateToActivate},{default:i(((e,a,t,l)=>{if(!a)return[r(" Activate Now ")];a(" Activate Now ")})),_:1},t,l)),a(d(g,{size:"small",color:"grey",variant:"outlined",onClick:navigateToHelp},{default:i(((e,a,t,l)=>{if(!a)return[r(" Need Help? ")];a(" Need Help? ")})),_:1},t,l)),a("</div>")})),_:1},t,l))})),_:1},l)),t("</div>")}}}),_=h.setup;h.setup=(a,t)=>{const l=e();return(l.modules||(l.modules=new Set)).add("components/wallet/WalletStatusAlert.vue"),_?_(a,t):void 0};const z=w(h,[["__scopeId","data-v-65822250"]]);export{z as _};
