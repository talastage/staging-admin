import{t as e,n as t,a as n,b as r,c as o,i,d as a,u,e as l}from"./index-DfGQ-Pg8.mjs";import{computed as s,ref as c,watch as d,getCurrentInstance as m,watchEffect as v,reactive as h,nextTick as f}from"vue";function unrefElement(t){var n;const r=e(t);return null!=(n=null==r?void 0:r.$el)?n:r}const g=void 0;function useEventListener(...t){let o,a,u,l;if("string"==typeof t[0]||Array.isArray(t[0])?([a,u,l]=t,o=g):[o,a,u,l]=t,!o)return n;Array.isArray(a)||(a=[a]),Array.isArray(u)||(u=[u]);const s=[],cleanup=()=>{s.forEach((e=>e())),s.length=0},c=d((()=>[unrefElement(o),e(l)]),(([e,t])=>{if(cleanup(),!e)return;const n=i(t)?{...t}:t;s.push(...a.flatMap((t=>u.map((r=>((e,t,n,r)=>(e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)))(e,t,r,n))))))}),{immediate:!0,flush:"post"}),stop=()=>{c(),cleanup()};return r(stop),stop}function useSupported(e){const t=function(){const e=c(!1);return m(),e}();return s((()=>(t.value,Boolean(e()))))}function useMediaQuery(t,n={}){const{window:o=g}=n,i=useSupported((()=>o&&"matchMedia"in o&&"function"==typeof o.matchMedia));let a;const u=c(!1),handler=e=>{u.value=e.matches},cleanup=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",handler):a.removeListener(handler))},l=v((()=>{i.value&&(cleanup(),a=o.matchMedia(e(t)),"addEventListener"in a?a.addEventListener("change",handler):a.addListener(handler),u.value=a.matches)}));return r((()=>{l(),cleanup(),a=void 0})),u}function useBreakpoints(t,n={}){function getValue2(n,r){let o=e(t[e(n)]);return null!=r&&(o=a(o,r)),"number"==typeof o&&(o=`${o}px`),o}const{window:r=g,strategy:o="min-width"}=n;function match(e){return!!r&&r.matchMedia(e).matches}const greaterOrEqual=e=>useMediaQuery((()=>`(min-width: ${getValue2(e)})`),n),smallerOrEqual=e=>useMediaQuery((()=>`(max-width: ${getValue2(e)})`),n),i=Object.keys(t).reduce(((e,t)=>(Object.defineProperty(e,t,{get:()=>"min-width"===o?greaterOrEqual(t):smallerOrEqual(t),enumerable:!0,configurable:!0}),e)),{});function current(){const e=Object.keys(t).map((e=>[e,greaterOrEqual(e)]));return s((()=>e.filter((([,e])=>e.value)).map((([e])=>e))))}return Object.assign(i,{greaterOrEqual:greaterOrEqual,smallerOrEqual:smallerOrEqual,greater:e=>useMediaQuery((()=>`(min-width: ${getValue2(e,.1)})`),n),smaller:e=>useMediaQuery((()=>`(max-width: ${getValue2(e,-.1)})`),n),between:(e,t)=>useMediaQuery((()=>`(min-width: ${getValue2(e)}) and (max-width: ${getValue2(t,-.1)})`),n),isGreater:e=>match(`(min-width: ${getValue2(e,.1)})`),isGreaterOrEqual:e=>match(`(min-width: ${getValue2(e)})`),isSmaller:e=>match(`(max-width: ${getValue2(e,-.1)})`),isSmallerOrEqual:e=>match(`(max-width: ${getValue2(e)})`),isInBetween:(e,t)=>match(`(min-width: ${getValue2(e)}) and (max-width: ${getValue2(t,-.1)})`),current:current,active(){const e=current();return s((()=>0===e.value.length?"":e.value.at(-1)))}})}function useIntersectionObserver(o,i,a={}){const{root:u,rootMargin:l="0px",threshold:m=.1,window:v=g,immediate:h=!0}=a,f=useSupported((()=>v&&"IntersectionObserver"in v)),p=s((()=>{const n=e(o);return(Array.isArray(n)?n:[n]).map(unrefElement).filter(t)}));let w=n;const b=c(h),E=f.value?d((()=>[p.value,unrefElement(u),b.value]),(([e,t])=>{if(w(),!b.value)return;if(!e.length)return;const r=new IntersectionObserver(i,{root:unrefElement(t),rootMargin:l,threshold:m});e.forEach((e=>e&&r.observe(e))),w=()=>{r.disconnect(),w=n}}),{immediate:h,flush:"post"}):n,stop=()=>{w(),E(),b.value=!1};return r(stop),{isSupported:f,isActive:b,pause(){w(),b.value=!1},resume(){b.value=!0},stop:stop}}function useInfiniteScroll(t,r,i={}){var a;const{direction:m="bottom",interval:v=100,canLoadMore:p=()=>!0}=i,w=h(function(t,r={}){const{throttle:i=0,idle:a=200,onStop:d=n,onScroll:m=n,offset:v={left:0,right:0,top:0,bottom:0},eventListenerOptions:f={capture:!1,passive:!0},behavior:p="auto",window:w=g,onError:b=e=>{console.error(e)}}=r,E=c(0),y=c(0),S=s({get:()=>E.value,set(e){scrollTo2(e,void 0)}}),I=s({get:()=>y.value,set(e){scrollTo2(void 0,e)}});function scrollTo2(n,r){var o,i,a;if(!w)return;const u=e(t);u&&(null==(a=u instanceof Document?w.document.body:u)||a.scrollTo({top:null!=(o=e(r))?o:I.value,left:null!=(i=e(n))?i:S.value,behavior:e(p)}))}const M=c(!1),L=h({left:!0,right:!1,top:!0,bottom:!1}),O=h({left:!1,right:!1,top:!1,bottom:!1}),onScrollEnd=e=>{M.value&&(M.value=!1,O.left=!1,O.right=!1,O.top=!1,O.bottom=!1,d(e))},V=l(onScrollEnd,i+a),setArrivedState=e=>{var t;if(!w)return;const n=(null==(t=null==e?void 0:e.document)?void 0:t.documentElement)||(null==e?void 0:e.documentElement)||unrefElement(e),{display:r,flexDirection:o}=getComputedStyle(n),i=n.scrollLeft;O.left=i<E.value,O.right=i>E.value;const a=Math.abs(i)<=(v.left||0),u=Math.abs(i)+n.clientWidth>=n.scrollWidth-(v.right||0)-1;"flex"===r&&"row-reverse"===o?(L.left=u,L.right=a):(L.left=a,L.right=u),E.value=i;let l=n.scrollTop;e!==w.document||l||(l=w.document.body.scrollTop),O.top=l<y.value,O.bottom=l>y.value;const s=Math.abs(l)<=(v.top||0),c=Math.abs(l)+n.clientHeight>=n.scrollHeight-(v.bottom||0)-1;"flex"===r&&"column-reverse"===o?(L.top=c,L.bottom=s):(L.top=s,L.bottom=c),y.value=l},onScrollHandler=e=>{var t;if(!w)return;const n=null!=(t=e.target.documentElement)?t:e.target;setArrivedState(n),M.value=!0,V(e),m(e)};return useEventListener(t,"scroll",i?u(onScrollHandler,i,!0,!1):onScrollHandler,f),o((()=>{try{const n=e(t);if(!n)return;setArrivedState(n)}catch(e){b(e)}})),useEventListener(t,"scrollend",onScrollEnd,f),{x:S,y:I,isScrolling:M,arrivedState:L,directions:O,measure(){const n=e(t);w&&n&&setArrivedState(n)}}}(t,{...i,offset:{[m]:null!=(a=i.distance)?a:0,...i.offset}})),b=c(),E=s((()=>!!b.value)),y=s((()=>{return n=e(t),"undefined"!=typeof Window&&n instanceof Window?n.document.documentElement:"undefined"!=typeof Document&&n instanceof Document?n.documentElement:n;var n})),S=function(e,t={}){const{window:n=g,scrollTarget:r,threshold:o=0}=t,i=c(!1);return useIntersectionObserver(e,(e=>{let t=i.value,n=0;for(const r of e)r.time>=n&&(n=r.time,t=r.isIntersecting);i.value=t}),{root:r,window:n,threshold:o}),i}(y);return d((()=>[w.arrivedState[m],S.value]),(function checkAndLoad(){if(w.measure(),!y.value||!S.value||!p(y.value))return;const{scrollHeight:e,clientHeight:t,scrollWidth:n,clientWidth:o}=y.value,i="bottom"===m||"top"===m?e<=t:n<=o;(w.arrivedState[m]||i)&&(b.value||(b.value=Promise.all([r(w),new Promise((e=>setTimeout(e,v)))]).finally((()=>{b.value=null,f((()=>checkAndLoad()))}))))}),{immediate:!0}),{isLoading:E}}function useWindowSize(e={}){const{window:t=g,initialWidth:n=Number.POSITIVE_INFINITY,initialHeight:r=Number.POSITIVE_INFINITY,listenOrientation:i=!0,includeScrollbar:a=!0}=e,u=c(n),l=c(r),update=()=>{t&&(a?(u.value=t.innerWidth,l.value=t.innerHeight):(u.value=t.document.documentElement.clientWidth,l.value=t.document.documentElement.clientHeight))};if(update(),o(update),useEventListener("resize",update,{passive:!0}),i){const e=useMediaQuery("(orientation: portrait)");d(e,(()=>update()))}return{width:u,height:l}}export{useWindowSize as a,useBreakpoints as b,useInfiniteScroll as c,useIntersectionObserver as u};
