import{useSSRContext as e,defineComponent as l,computed as a,ref as t,watch as o,mergeProps as r,withCtx as s,openBlock as n,createBlock as u,createCommentVNode as i,createVNode as d,createTextVNode as m,toDisplayString as v}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as g,ssrInterpolate as f}from"vue/server-renderer";import{useRouter as p}from"vue-router";import{u as _}from"./useSnackMessage-PVLwAm7x.mjs";import{Q as T,T as y}from"./QuickTalentSelection-DYzSZiSn.mjs";import{V as C}from"./VDialog-DA9BdIfh.mjs";import{V as k,a as b,c as S}from"./VCard-CsohsM82.mjs";import{V}from"./VDivider-BmyMVZMt.mjs";import{V as R}from"./VSpacer-_gFExeVk.mjs";import{b as x,_ as D}from"./server.mjs";const h=l({__name:"TalentRegisterDialog",__ssrInlineRender:!0,props:{modelValue:{type:Boolean},mode:{}},emits:["update:modelValue","talent-updated"],setup(e,{emit:l}){const D=e,h=l,E=a((()=>"create"===D.mode)),F=t(D.modelValue);o((()=>D.modelValue),(e=>{F.value=e})),o(F,(e=>{h("update:modelValue",e)}));const j=t(null),z=t(!1),U=t(null),w=a((()=>{var e,l;return null!=(e=null==(l=j.value)?void 0:l.formIsValid)&&e})),I=a((()=>{const e=j.value;return(null==e?void 0:e.isUpdating)||(null==e?void 0:e.registering)||!1})),submitForm=()=>{var e;null==(e=j.value)||e.submitTalent()},handleTalentUpdated=e=>{h("talent-updated",e)},M=p(),$=_(),handleSuccess=e=>{z.value=!0,$.success(e,{timeout:3e3}),U.value=setTimeout((()=>{closeDialog(),M.push("/")}),3e3)},handleQuickTalentRegistered=e=>{h("talent-updated",e),handleSuccess(`Talent "${e.name}" registered successfully!`)},handleQuickTalentSelected=e=>{var l;null==(l=j.value)||l.resetForm()},handleError=e=>{$.error(e,{timeout:5e3}),console.error("Talent registration error:",e)};function closeDialog(){var e;F.value=!1,z.value=!1,null==(e=j.value)||e.resetForm(),clearTimeout()}function clearTimeout(){U.value&&(clearTimeout(U.value),U.value=null)}return o(F,(async e=>{e&&j.value&&await j.value.initializeForm()})),(e,l,a,t)=>{l(`<div${c(r({class:"talent-register-dialog"},t))} data-v-0331f7b3>`),l(g(C,{modelValue:F.value,"onUpdate:modelValue":e=>F.value=e,"max-width":"700px",persistent:"",scrim:!0},{default:s(((l,a,t,o)=>{if(!a)return[d(k,null,{default:s((()=>[d(b,{class:"pa-4 pt-6"},{default:s((()=>[E.value?(n(),u(T,{key:0,onTalentRegistered:handleQuickTalentRegistered,onTalentSelected:handleQuickTalentSelected,onError:handleError})):i("",!0),E.value?(n(),u(V,{key:1,class:"my-4"})):i("",!0),d(y,{ref_key:"talentFormRef",ref:j,mode:e.mode,"is-dialog-mode":!0,onTalentUpdated:handleTalentUpdated,onSuccess:handleSuccess,onError:handleError},null,8,["mode"])])),_:1}),d(V),d(S,{class:"pa-4"},{default:s((()=>[d(R),d(x,{variant:"text",onClick:closeDialog,disabled:I.value},{default:s((()=>[m(v(z.value?"Close":"Cancel"),1)])),_:1},8,["disabled"]),z.value?i("",!0):(n(),u(x,{key:0,color:"primary",onClick:submitForm,disabled:!w.value||I.value,loading:I.value,size:"large",class:"register-btn"},{default:s((()=>[m(v(E.value?"Register Talent":"Save Changes"),1)])),_:1},8,["disabled","loading"]))])),_:1})])),_:1})];a(g(k,null,{default:s(((l,a,t,o)=>{if(!a)return[d(b,{class:"pa-4 pt-6"},{default:s((()=>[E.value?(n(),u(T,{key:0,onTalentRegistered:handleQuickTalentRegistered,onTalentSelected:handleQuickTalentSelected,onError:handleError})):i("",!0),E.value?(n(),u(V,{key:1,class:"my-4"})):i("",!0),d(y,{ref_key:"talentFormRef",ref:j,mode:e.mode,"is-dialog-mode":!0,onTalentUpdated:handleTalentUpdated,onSuccess:handleSuccess,onError:handleError},null,8,["mode"])])),_:1}),d(V),d(S,{class:"pa-4"},{default:s((()=>[d(R),d(x,{variant:"text",onClick:closeDialog,disabled:I.value},{default:s((()=>[m(v(z.value?"Close":"Cancel"),1)])),_:1},8,["disabled"]),z.value?i("",!0):(n(),u(x,{key:0,color:"primary",onClick:submitForm,disabled:!w.value||I.value,loading:I.value,size:"large",class:"register-btn"},{default:s((()=>[m(v(E.value?"Register Talent":"Save Changes"),1)])),_:1},8,["disabled","loading"]))])),_:1})];a(g(b,{class:"pa-4 pt-6"},{default:s(((l,a,t,o)=>{if(!a)return[E.value?(n(),u(T,{key:0,onTalentRegistered:handleQuickTalentRegistered,onTalentSelected:handleQuickTalentSelected,onError:handleError})):i("",!0),E.value?(n(),u(V,{key:1,class:"my-4"})):i("",!0),d(y,{ref_key:"talentFormRef",ref:j,mode:e.mode,"is-dialog-mode":!0,onTalentUpdated:handleTalentUpdated,onSuccess:handleSuccess,onError:handleError},null,8,["mode"])];E.value?a(g(T,{onTalentRegistered:handleQuickTalentRegistered,onTalentSelected:handleQuickTalentSelected,onError:handleError},null,t,o)):a("\x3c!----\x3e"),E.value?a(g(V,{class:"my-4"},null,t,o)):a("\x3c!----\x3e"),a(g(y,{ref_key:"talentFormRef",ref:j,mode:e.mode,"is-dialog-mode":!0,onTalentUpdated:handleTalentUpdated,onSuccess:handleSuccess,onError:handleError},null,t,o))})),_:1},t,o)),a(g(V,null,null,t,o)),a(g(S,{class:"pa-4"},{default:s(((e,l,a,t)=>{if(!l)return[d(R),d(x,{variant:"text",onClick:closeDialog,disabled:I.value},{default:s((()=>[m(v(z.value?"Close":"Cancel"),1)])),_:1},8,["disabled"]),z.value?i("",!0):(n(),u(x,{key:0,color:"primary",onClick:submitForm,disabled:!w.value||I.value,loading:I.value,size:"large",class:"register-btn"},{default:s((()=>[m(v(E.value?"Register Talent":"Save Changes"),1)])),_:1},8,["disabled","loading"]))];l(g(R,null,null,a,t)),l(g(x,{variant:"text",onClick:closeDialog,disabled:I.value},{default:s(((e,l,a,t)=>{if(!l)return[m(v(z.value?"Close":"Cancel"),1)];l(`${f(z.value?"Close":"Cancel")}`)})),_:1},a,t)),z.value?l("\x3c!----\x3e"):l(g(x,{color:"primary",onClick:submitForm,disabled:!w.value||I.value,loading:I.value,size:"large",class:"register-btn"},{default:s(((e,l,a,t)=>{if(!l)return[m(v(E.value?"Register Talent":"Save Changes"),1)];l(`${f(E.value?"Register Talent":"Save Changes")}`)})),_:1},a,t))})),_:1},t,o))})),_:1},t,o))})),_:1},a)),l("</div>")}}}),E=h.setup;h.setup=(l,a)=>{const t=e();return(t.modules||(t.modules=new Set)).add("components/talent/TalentRegisterDialog.vue"),E?E(l,a):void 0};const F=D(h,[["__scopeId","data-v-0331f7b3"]]);export{F as _};
