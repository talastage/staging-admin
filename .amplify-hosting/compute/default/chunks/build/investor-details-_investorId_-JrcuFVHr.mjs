import{_ as e}from"./ProjectPageHeader-iRx9USVm.mjs";import{_ as a}from"./UserAvatar-DFFlBvus.mjs";import{_ as t}from"./PageAvatar-YzVemsBd.mjs";import{_ as l}from"./AmountDisplayCard-DhqZb7_E.mjs";import{_ as n}from"./BalanceTransferDialog-DA-XcHtR.mjs";import{ref as s,useSSRContext as r,defineComponent as o,computed as i,mergeProps as c,withCtx as u,createTextVNode as d,createVNode as m,toDisplayString as v,unref as p,openBlock as f,createBlock as y,Fragment as g,createCommentVNode as _,watchEffect as b,renderList as x,watch as h}from"vue";import{ssrRenderComponent as w,ssrInterpolate as k,ssrRenderAttrs as U,ssrRenderList as V}from"vue/server-renderer";import{u as j}from"./useDateFormatter-W2Hui1rv.mjs";import{d as z,u as $,_ as T,V as N,b as S,U as C,a$ as B}from"./server.mjs";import{V as I,d as R,b as A,a as D}from"./VCard-CsohsM82.mjs";import{V as F}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{V as E}from"./VAlert-DneVUU3Q.mjs";import{V as L}from"./VDivider-BmyMVZMt.mjs";import{V as P}from"./VAvatar-JL8WKjry.mjs";import{V as H}from"./VTooltip-CE0EmfBU.mjs";import{V as W}from"./VRow-rkX0LEXR.mjs";import{V as G}from"./VCol-CKxprC4g.mjs";import{u as Z}from"./useCurrencyFormatter-Dfs2ioxk.mjs";import{u as Y}from"./useInfiniteLoader-Bs8qePv9.mjs";import{V as X}from"./VSpacer-_gFExeVk.mjs";import{a as M}from"./VChip-f_o2BAA4.mjs";import{V as J}from"./VSheet-CDtLFCXf.mjs";import{V as K}from"./VList-CcwwrkQR.mjs";import{V as O,a as Q,b as q}from"./VListItem-jTLuICGb.mjs";import{V as ee}from"./VSnackbar-zBX8NfdO.mjs";import{useRoute as ae}from"vue-router";import{u as te}from"./useProjectStore-ICfMYGpe.mjs";import{V as le}from"./VContainer-By3q0af_.mjs";import{V as ne,a as se}from"./VTabs-t8Cp0Axr.mjs";import{V as re,a as oe}from"./VWindowItem-DjFGFGcX.mjs";import"./VImg-B2jcJjnn.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:fs";import"node:url";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"node:path";import"./BaseCard-5i8D5k_7.mjs";import"./BaseDialog-DsGYlnLZ.mjs";import"./VDialog-DA9BdIfh.mjs";import"./VOverlay-ZKavbTei.mjs";import"./easing-Bn3h-KUg.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"./VTextField-rd-VvEF8.mjs";import"./VCounter-BZE6l8kb.mjs";import"./index--K8ZrFMm.mjs";import"./VField-ZM6yOiXp.mjs";import"./VInput-DRJS2l97.mjs";import"./useWalletStore-C5It8oQZ.mjs";import"axios";import"./useSnackMessage-PVLwAm7x.mjs";import"./VForm-HRC00ryg.mjs";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:net";import"unhead";import"pinia-plugin-persistedstate";import"./index-8pAncyvV.mjs";import"./index-DfGQ-Pg8.mjs";import"./ssrBoot-BtvJZs44.mjs";const ie=z("projectInvestorBalance",(()=>{const e=s(null),a=s(!1),t=s(null),l=s(null),n=s(null),{$axios:r}=$();async function fetchBalance(s,o){a.value=!0,t.value=null,l.value=s,n.value=o;try{const a=await r.get(`/api/projects/${s}/earnings/investors/${o}/balance`);e.value=a.data}catch(e){console.error("Error fetching project investor balance:",e),t.value=e instanceof Error?e.message:"Failed to fetch balance"}finally{a.value=!1}}return{balance:e,isLoading:a,error:t,fetchBalance:fetchBalance,updateBalanceAfterTransfer:async function(){l.value&&n.value?await fetchBalance(l.value,n.value):console.warn("Cannot update balance: accessUuid or investorId is missing")}}})),ce=o({__name:"ProjectInvestorBalanceCard",__ssrInlineRender:!0,props:{balance:{},loading:{type:Boolean},accessUuid:{}},setup(e){const r=e,{formatRelativeDate:o}=j(),b=s(!1),x=ie(),h=i((()=>r.balance&&r.balance.data&&r.balance.data.investor_type&&"creator"===r.balance.data.investor_type.type?"Project Creator Earnings":"Investor Earnings")),formatSharePercentage=e=>e?Number(e).toFixed(2):"0.00",V=i((()=>{var e,a,t,l;return null!=(e=null==(l=null==(t=null==(a=r.balance)?void 0:a.data)?void 0:t.investor_type)?void 0:l.is_user)&&e})),z=i((()=>{var e,a,t;return null!=(e=null==(t=null==(a=r.balance)?void 0:a.data)?void 0:t.project_investor)?e:null})),$=i((()=>{var e,a,t;return null!=(e=null==(t=null==(a=r.balance)?void 0:a.data)?void 0:t.currency)?e:{symbol:"$",code:"USD"}})),T=i((()=>{if(!z.value)return"Unknown Investor";if(V.value){const e=z.value;return e.display_name||e.username||"Anonymous User"}return z.value.name||"Unnamed Page"})),C=i((()=>{var e,a;return(null==(a=null==(e=r.balance)?void 0:e.data)?void 0:a.project_investor)?`/api/projects/${r.accessUuid}/earnings/investors/${r.balance.data.project_investor.id}/transfer-to-wallet`:""}));function openTransferDialog(){b.value=!0}function handleTransferSuccess(){b.value=!1,x.updateBalanceAfterTransfer()}return(e,s,r,i)=>{const x=a,j=t,B=l,A=n;s(w(I,c({elevation:"10"},i),{default:u(((a,t,l,n)=>{if(!t)return[m(R,null,{default:u((()=>[e.loading?(f(),y(F,{key:0,type:"list-item-three-line"})):e.balance&&e.balance.data?(f(),y(g,{key:2},[m("div",{class:"mb-4"},[m("h1",{class:"text-h5 font-weight-bold mb-2"},v(h.value),1),m(L,{class:"mb-4"})]),m("div",{class:"d-flex align-center justify-space-between mb-4"},[m("div",{class:"d-flex align-center"},[m("div",{class:"mr-4"},[V.value&&z.value?(f(),y(x,{key:0,username:z.value.username||"",profile_photo:z.value.profile_photo||"",size:"xl"},null,8,["username","profile_photo"])):z.value?(f(),y(j,{key:1,page:z.value,size:"xl"},null,8,["page"])):(f(),y(P,{key:2,size:"xl",color:"grey lighten-2"},{default:u((()=>[m(N,null,{default:u((()=>[d("mdi-account")])),_:1})])),_:1}))]),m("div",null,[m("h2",{class:"text-h6 font-weight-medium"},v(T.value),1),m("span",{class:"text-body-2 text-medium-emphasis"},"Project Investor")])]),void 0!==e.balance.data.share_percentage?(f(),y("div",{key:0,class:"share-percentage-container"},[m(H,{location:"top",text:"Your share percentage in this project"},{activator:u((({props:a})=>[m("div",c({class:"share-percentage d-flex flex-column align-center"},a),[m("div",{class:"d-flex align-center"},[m(N,{icon:"mdi-chart-pie",class:"mr-2",color:"primary"}),m("span",{class:"text-h6 font-weight-medium"},v(formatSharePercentage(e.balance.data.share_percentage))+"% ",1)]),m("span",{class:"text-caption text-medium-emphasis"},"Your Share Percentage")],16)])),_:1})])):_("",!0)]),$.value?(f(),y(W,{key:0},{default:u((()=>[m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Available Balance",amount:Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-wallet",variant:"primary"},{footer:u((({variant:a})=>[m(S,{variant:"tonal",color:"primary"===a?"white":"primary",size:"small",onClick:openTransferDialog,disabled:!Number(e.balance.data.balance)},{default:u((()=>[d(" Transfer to Wallet ")])),_:2},1032,["color","disabled"])])),_:1},8,["amount","currency-symbol","currency-code"])])),_:1}),m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Total Earned",amount:Number(e.balance.data.total_earned||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-multiple",tooltip:"Total amount received from earnings"},{footer:u((()=>[m("span",{class:"text-medium-emphasis"}," Last earning: "+v(e.balance.data.last_earning_at?p(o)(e.balance.data.last_earning_at):"Never"),1)])),_:1},8,["amount","currency-symbol","currency-code"])])),_:1}),m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Total Withdrawn",amount:Number(e.balance.data.total_withdrawn||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-remove"},null,8,["amount","currency-symbol","currency-code"])])),_:1})])),_:1})):_("",!0),$.value?(f(),y(A,{key:1,modelValue:b.value,"onUpdate:modelValue":e=>b.value=e,"transfer-endpoint":C.value,"available-balance":Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,onTransferSuccess:handleTransferSuccess},null,8,["modelValue","onUpdate:modelValue","transfer-endpoint","available-balance","currency-symbol","currency-code"])):_("",!0)],64)):(f(),y(E,{key:1,type:"info",text:"No balance information available",variant:"tonal"}))])),_:1})];t(w(R,null,{default:u(((a,t,l,n)=>{if(!t)return[e.loading?(f(),y(F,{key:0,type:"list-item-three-line"})):e.balance&&e.balance.data?(f(),y(g,{key:2},[m("div",{class:"mb-4"},[m("h1",{class:"text-h5 font-weight-bold mb-2"},v(h.value),1),m(L,{class:"mb-4"})]),m("div",{class:"d-flex align-center justify-space-between mb-4"},[m("div",{class:"d-flex align-center"},[m("div",{class:"mr-4"},[V.value&&z.value?(f(),y(x,{key:0,username:z.value.username||"",profile_photo:z.value.profile_photo||"",size:"xl"},null,8,["username","profile_photo"])):z.value?(f(),y(j,{key:1,page:z.value,size:"xl"},null,8,["page"])):(f(),y(P,{key:2,size:"xl",color:"grey lighten-2"},{default:u((()=>[m(N,null,{default:u((()=>[d("mdi-account")])),_:1})])),_:1}))]),m("div",null,[m("h2",{class:"text-h6 font-weight-medium"},v(T.value),1),m("span",{class:"text-body-2 text-medium-emphasis"},"Project Investor")])]),void 0!==e.balance.data.share_percentage?(f(),y("div",{key:0,class:"share-percentage-container"},[m(H,{location:"top",text:"Your share percentage in this project"},{activator:u((({props:a})=>[m("div",c({class:"share-percentage d-flex flex-column align-center"},a),[m("div",{class:"d-flex align-center"},[m(N,{icon:"mdi-chart-pie",class:"mr-2",color:"primary"}),m("span",{class:"text-h6 font-weight-medium"},v(formatSharePercentage(e.balance.data.share_percentage))+"% ",1)]),m("span",{class:"text-caption text-medium-emphasis"},"Your Share Percentage")],16)])),_:1})])):_("",!0)]),$.value?(f(),y(W,{key:0},{default:u((()=>[m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Available Balance",amount:Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-wallet",variant:"primary"},{footer:u((({variant:a})=>[m(S,{variant:"tonal",color:"primary"===a?"white":"primary",size:"small",onClick:openTransferDialog,disabled:!Number(e.balance.data.balance)},{default:u((()=>[d(" Transfer to Wallet ")])),_:2},1032,["color","disabled"])])),_:1},8,["amount","currency-symbol","currency-code"])])),_:1}),m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Total Earned",amount:Number(e.balance.data.total_earned||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-multiple",tooltip:"Total amount received from earnings"},{footer:u((()=>[m("span",{class:"text-medium-emphasis"}," Last earning: "+v(e.balance.data.last_earning_at?p(o)(e.balance.data.last_earning_at):"Never"),1)])),_:1},8,["amount","currency-symbol","currency-code"])])),_:1}),m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Total Withdrawn",amount:Number(e.balance.data.total_withdrawn||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-remove"},null,8,["amount","currency-symbol","currency-code"])])),_:1})])),_:1})):_("",!0),$.value?(f(),y(A,{key:1,modelValue:b.value,"onUpdate:modelValue":e=>b.value=e,"transfer-endpoint":C.value,"available-balance":Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,onTransferSuccess:handleTransferSuccess},null,8,["modelValue","onUpdate:modelValue","transfer-endpoint","available-balance","currency-symbol","currency-code"])):_("",!0)],64)):(f(),y(E,{key:1,type:"info",text:"No balance information available",variant:"tonal"}))];e.loading?t(w(F,{type:"list-item-three-line"},null,l,n)):e.balance&&e.balance.data?(t(`\x3c!--[--\x3e<div class="mb-4" data-v-731094ae${n}><h1 class="text-h5 font-weight-bold mb-2" data-v-731094ae${n}>${k(h.value)}</h1>`),t(w(L,{class:"mb-4"},null,l,n)),t(`</div><div class="d-flex align-center justify-space-between mb-4" data-v-731094ae${n}><div class="d-flex align-center" data-v-731094ae${n}><div class="mr-4" data-v-731094ae${n}>`),V.value&&z.value?t(w(x,{username:z.value.username||"",profile_photo:z.value.profile_photo||"",size:"xl"},null,l,n)):z.value?t(w(j,{page:z.value,size:"xl"},null,l,n)):t(w(P,{size:"xl",color:"grey lighten-2"},{default:u(((e,a,t,l)=>{if(!a)return[m(N,null,{default:u((()=>[d("mdi-account")])),_:1})];a(w(N,null,{default:u(((e,a,t,l)=>{if(!a)return[d("mdi-account")];a("mdi-account")})),_:1},t,l))})),_:1},l,n)),t(`</div><div data-v-731094ae${n}><h2 class="text-h6 font-weight-medium" data-v-731094ae${n}>${k(T.value)}</h2><span class="text-body-2 text-medium-emphasis" data-v-731094ae${n}>Project Investor</span></div></div>`),void 0!==e.balance.data.share_percentage?(t(`<div class="share-percentage-container" data-v-731094ae${n}>`),t(w(H,{location:"top",text:"Your share percentage in this project"},{activator:u((({props:a},t,l,n)=>{if(!t)return[m("div",c({class:"share-percentage d-flex flex-column align-center"},a),[m("div",{class:"d-flex align-center"},[m(N,{icon:"mdi-chart-pie",class:"mr-2",color:"primary"}),m("span",{class:"text-h6 font-weight-medium"},v(formatSharePercentage(e.balance.data.share_percentage))+"% ",1)]),m("span",{class:"text-caption text-medium-emphasis"},"Your Share Percentage")],16)];t(`<div${U(c({class:"share-percentage d-flex flex-column align-center"},a))} data-v-731094ae${n}><div class="d-flex align-center" data-v-731094ae${n}>`),t(w(N,{icon:"mdi-chart-pie",class:"mr-2",color:"primary"},null,l,n)),t(`<span class="text-h6 font-weight-medium" data-v-731094ae${n}>${k(formatSharePercentage(e.balance.data.share_percentage))}% </span></div><span class="text-caption text-medium-emphasis" data-v-731094ae${n}>Your Share Percentage</span></div>`)})),_:1},l,n)),t("</div>")):t("\x3c!----\x3e"),t("</div>"),$.value?t(w(W,null,{default:u(((a,t,l,n)=>{if(!t)return[m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Available Balance",amount:Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-wallet",variant:"primary"},{footer:u((({variant:a})=>[m(S,{variant:"tonal",color:"primary"===a?"white":"primary",size:"small",onClick:openTransferDialog,disabled:!Number(e.balance.data.balance)},{default:u((()=>[d(" Transfer to Wallet ")])),_:2},1032,["color","disabled"])])),_:1},8,["amount","currency-symbol","currency-code"])])),_:1}),m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Total Earned",amount:Number(e.balance.data.total_earned||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-multiple",tooltip:"Total amount received from earnings"},{footer:u((()=>[m("span",{class:"text-medium-emphasis"}," Last earning: "+v(e.balance.data.last_earning_at?p(o)(e.balance.data.last_earning_at):"Never"),1)])),_:1},8,["amount","currency-symbol","currency-code"])])),_:1}),m(G,{cols:"12",sm:"6",md:"4"},{default:u((()=>[m(B,{title:"Total Withdrawn",amount:Number(e.balance.data.total_withdrawn||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-remove"},null,8,["amount","currency-symbol","currency-code"])])),_:1})];t(w(G,{cols:"12",sm:"6",md:"4"},{default:u(((a,t,l,n)=>{if(!t)return[m(B,{title:"Available Balance",amount:Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-wallet",variant:"primary"},{footer:u((({variant:a})=>[m(S,{variant:"tonal",color:"primary"===a?"white":"primary",size:"small",onClick:openTransferDialog,disabled:!Number(e.balance.data.balance)},{default:u((()=>[d(" Transfer to Wallet ")])),_:2},1032,["color","disabled"])])),_:1},8,["amount","currency-symbol","currency-code"])];t(w(B,{title:"Available Balance",amount:Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-wallet",variant:"primary"},{footer:u((({variant:a},t,l,n)=>{if(!t)return[m(S,{variant:"tonal",color:"primary"===a?"white":"primary",size:"small",onClick:openTransferDialog,disabled:!Number(e.balance.data.balance)},{default:u((()=>[d(" Transfer to Wallet ")])),_:2},1032,["color","disabled"])];t(w(S,{variant:"tonal",color:"primary"===a?"white":"primary",size:"small",onClick:openTransferDialog,disabled:!Number(e.balance.data.balance)},{default:u(((e,a,t,l)=>{if(!a)return[d(" Transfer to Wallet ")];a(" Transfer to Wallet ")})),_:2},l,n))})),_:1},l,n))})),_:1},l,n)),t(w(G,{cols:"12",sm:"6",md:"4"},{default:u(((a,t,l,n)=>{if(!t)return[m(B,{title:"Total Earned",amount:Number(e.balance.data.total_earned||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-multiple",tooltip:"Total amount received from earnings"},{footer:u((()=>[m("span",{class:"text-medium-emphasis"}," Last earning: "+v(e.balance.data.last_earning_at?p(o)(e.balance.data.last_earning_at):"Never"),1)])),_:1},8,["amount","currency-symbol","currency-code"])];t(w(B,{title:"Total Earned",amount:Number(e.balance.data.total_earned||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-multiple",tooltip:"Total amount received from earnings"},{footer:u(((a,t,l,n)=>{if(!t)return[m("span",{class:"text-medium-emphasis"}," Last earning: "+v(e.balance.data.last_earning_at?p(o)(e.balance.data.last_earning_at):"Never"),1)];t(`<span class="text-medium-emphasis" data-v-731094ae${n}> Last earning: ${k(e.balance.data.last_earning_at?p(o)(e.balance.data.last_earning_at):"Never")}</span>`)})),_:1},l,n))})),_:1},l,n)),t(w(G,{cols:"12",sm:"6",md:"4"},{default:u(((a,t,l,n)=>{if(!t)return[m(B,{title:"Total Withdrawn",amount:Number(e.balance.data.total_withdrawn||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-remove"},null,8,["amount","currency-symbol","currency-code"])];t(w(B,{title:"Total Withdrawn",amount:Number(e.balance.data.total_withdrawn||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,icon:"mdi-cash-remove"},null,l,n))})),_:1},l,n))})),_:1},l,n)):t("\x3c!----\x3e"),$.value?t(w(A,{modelValue:b.value,"onUpdate:modelValue":e=>b.value=e,"transfer-endpoint":C.value,"available-balance":Number(e.balance.data.balance||0),"currency-symbol":$.value.symbol,"currency-code":$.value.code,onTransferSuccess:handleTransferSuccess},null,l,n)):t("\x3c!----\x3e"),t("\x3c!--]--\x3e")):t(w(E,{type:"info",text:"No balance information available",variant:"tonal"},null,l,n))})),_:1},l,n))})),_:1},r))}}}),ue=ce.setup;ce.setup=(e,a)=>{const t=r();return(t.modules||(t.modules=new Set)).add("components/project/ProjectInvestorBalanceCard.vue"),ue?ue(e,a):void 0};const de=T(ce,[["__scopeId","data-v-731094ae"]]),me=o({__name:"ProjectInvestorTransactions",__ssrInlineRender:!0,props:{accessUuid:{},investorId:{}},emits:["update:transactions","update:loading","update:total"],setup(e,{emit:a}){const t=e,l=a,{$axios:n}=$(),{currencyFormatter:r}=Z(),{formatLocalDateTime:o,formatRelativeDate:h}=j(),U=s([]),z=s(0),T=s(!0),B=s(null),R=s(!1),H=s(!0),ae=i((()=>`/api/projects/${t.accessUuid}/earnings/investors/${t.investorId}/transactions`)),{sentinelRef:te,isLoading:le,initLoader:ne,page:se}=Y((async e=>{try{const{data:a}=await n.get(ae.value,{params:{page:e}});return U.value=1===e?a.data:[...U.value,...a.data],z.value=a.meta.total[0],H.value=a.meta.current_page[0]<a.meta.last_page[0],l("update:transactions",U.value),l("update:total",z.value),a.data}catch(e){throw B.value=e instanceof Error?e:new Error("Failed to load transactions"),R.value=!0,console.error("Error fetching transactions:",e),B.value}finally{T.value=!1}}),H,{immediate:!1});function getStatusColor(e){return{processed:"success",pending:"warning",cancelled:"error"}[e]||"grey"}function refresh(){H.value=!0,B.value=null,T.value=!0,ne()}return b((()=>{l("update:loading",le.value)})),(e,a,t,l)=>{a(w(I,c({elevation:"0",border:""},l),{default:u(((e,a,t,l)=>{if(!a)return[m(A,{class:"d-flex align-center px-4 py-3 bg-grey-lighten-4"},{default:u((()=>[m(N,{icon:"mdi-bank-transfer",class:"mr-2"}),m("span",{class:"text-h6"},"Transaction History"),m(X),z.value?(f(),y(M,{key:0,size:"small",color:"primary",variant:"flat"},{default:u((()=>[d(v(z.value)+" transactions ",1)])),_:1})):_("",!0)])),_:1}),m(L),T.value?(f(),y(D,{key:0,class:"pa-4"},{default:u((()=>[(f(),y(g,null,x(3,(e=>m(J,{key:e,class:"mb-4 pa-4 rounded-lg bg-grey-lighten-4"},{default:u((()=>[m(F,{type:"list-item-avatar, text@2"})])),_:2},1024))),64))])),_:1})):U.value.length||T.value?(f(),y(K,{key:2},{default:u((()=>[(f(!0),y(g,null,x(U.value,((e,a)=>(f(),y(O,{key:e.id,class:{"bg-grey-lighten-4":a%2!=0}},{prepend:u((()=>[m(P,{color:getStatusColor(e.status),size:"48"},{default:u((()=>[m(N,{icon:"mdi-bank-transfer",size:"32"})])),_:2},1032,["color"])])),default:u((()=>[m(Q,{class:"font-weight-medium"},{default:u((()=>{var a;return[d(v(p(o)(e.created_at||(null==(a=e.timestamps)?void 0:a.created_at))),1)]})),_:2},1024),m(q,{class:"text-caption text-grey"},{default:u((()=>{var a;return[d(v(p(h)(e.created_at||(null==(a=e.timestamps)?void 0:a.created_at))),1)]})),_:2},1024),m(q,null,{default:u((()=>[m("span",{class:"text-caption text-grey"},"Status:"),m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"ml-1 text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])])),_:2},1024),m(q,{class:"mt-2"},{default:u((()=>[m(W,null,{default:u((()=>[m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Gross Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.gross_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Net Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.net_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Service Fee"),m("div",{class:"font-weight-medium"},v(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),e.metadata&&(e.metadata.transaction_reference||e.metadata.description)?(f(),y(q,{key:0,class:"mt-2"},{default:u((()=>[m(L,{class:"mb-2"}),e.metadata.transaction_reference?(f(),y("div",{key:0},[m("span",{class:"text-caption text-grey"},"Reference:"),m("span",{class:"font-weight-medium"},v(e.metadata.transaction_reference),1)])):_("",!0),e.metadata.description?(f(),y("div",{key:1},[m("span",{class:"text-caption text-grey"},"Description:"),m("span",{class:"font-weight-medium"},v(e.metadata.description),1)])):_("",!0)])),_:2},1024)):_("",!0)])),_:2},1032,["class"])))),128)),m("div",{ref_key:"sentinelRef",ref:te,class:"sentinel-element py-2"},[p(le)?(f(),y("div",{key:0,class:"text-center py-4"},[m(C,{indeterminate:"",color:"primary"})])):_("",!0)],512),!H.value&&U.value.length>0?(f(),y("div",{key:0,class:"pa-4 text-center"},[m(M,{color:"grey",size:"small",variant:"flat"},{default:u((()=>[d(" No more transactions ")])),_:1})])):_("",!0)])),_:1})):(f(),y(D,{key:1},{default:u((()=>[m(E,{type:"info",variant:"tonal",border:"start",class:"mb-0"},{prepend:u((()=>[m(N,{icon:"mdi-information"})])),default:u((()=>[d(" No transactions found. ")])),_:1})])),_:1})),m(ee,{modelValue:R.value,"onUpdate:modelValue":e=>R.value=e,color:"error",timeout:"3000"},{actions:u((()=>[m(S,{variant:"text",onClick:refresh},{default:u((()=>[d("Retry")])),_:1})])),default:u((()=>{var e;return[d(v((null==(e=B.value)?void 0:e.message)||"Failed to load transactions")+" ",1)]})),_:1},8,["modelValue","onUpdate:modelValue"])];a(w(A,{class:"d-flex align-center px-4 py-3 bg-grey-lighten-4"},{default:u(((e,a,t,l)=>{if(!a)return[m(N,{icon:"mdi-bank-transfer",class:"mr-2"}),m("span",{class:"text-h6"},"Transaction History"),m(X),z.value?(f(),y(M,{key:0,size:"small",color:"primary",variant:"flat"},{default:u((()=>[d(v(z.value)+" transactions ",1)])),_:1})):_("",!0)];a(w(N,{icon:"mdi-bank-transfer",class:"mr-2"},null,t,l)),a(`<span class="text-h6" data-v-722a2a38${l}>Transaction History</span>`),a(w(X,null,null,t,l)),z.value?a(w(M,{size:"small",color:"primary",variant:"flat"},{default:u(((e,a,t,l)=>{if(!a)return[d(v(z.value)+" transactions ",1)];a(`${k(z.value)} transactions `)})),_:1},t,l)):a("\x3c!----\x3e")})),_:1},t,l)),a(w(L,null,null,t,l)),T.value?a(w(D,{class:"pa-4"},{default:u(((e,a,t,l)=>{if(!a)return[(f(),y(g,null,x(3,(e=>m(J,{key:e,class:"mb-4 pa-4 rounded-lg bg-grey-lighten-4"},{default:u((()=>[m(F,{type:"list-item-avatar, text@2"})])),_:2},1024))),64))];a("\x3c!--[--\x3e"),V(3,(e=>{a(w(J,{key:e,class:"mb-4 pa-4 rounded-lg bg-grey-lighten-4"},{default:u(((e,a,t,l)=>{if(!a)return[m(F,{type:"list-item-avatar, text@2"})];a(w(F,{type:"list-item-avatar, text@2"},null,t,l))})),_:2},t,l))})),a("\x3c!--]--\x3e")})),_:1},t,l)):U.value.length||T.value?a(w(K,null,{default:u(((e,a,t,l)=>{if(!a)return[(f(!0),y(g,null,x(U.value,((e,a)=>(f(),y(O,{key:e.id,class:{"bg-grey-lighten-4":a%2!=0}},{prepend:u((()=>[m(P,{color:getStatusColor(e.status),size:"48"},{default:u((()=>[m(N,{icon:"mdi-bank-transfer",size:"32"})])),_:2},1032,["color"])])),default:u((()=>[m(Q,{class:"font-weight-medium"},{default:u((()=>{var a;return[d(v(p(o)(e.created_at||(null==(a=e.timestamps)?void 0:a.created_at))),1)]})),_:2},1024),m(q,{class:"text-caption text-grey"},{default:u((()=>{var a;return[d(v(p(h)(e.created_at||(null==(a=e.timestamps)?void 0:a.created_at))),1)]})),_:2},1024),m(q,null,{default:u((()=>[m("span",{class:"text-caption text-grey"},"Status:"),m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"ml-1 text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])])),_:2},1024),m(q,{class:"mt-2"},{default:u((()=>[m(W,null,{default:u((()=>[m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Gross Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.gross_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Net Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.net_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Service Fee"),m("div",{class:"font-weight-medium"},v(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),e.metadata&&(e.metadata.transaction_reference||e.metadata.description)?(f(),y(q,{key:0,class:"mt-2"},{default:u((()=>[m(L,{class:"mb-2"}),e.metadata.transaction_reference?(f(),y("div",{key:0},[m("span",{class:"text-caption text-grey"},"Reference:"),m("span",{class:"font-weight-medium"},v(e.metadata.transaction_reference),1)])):_("",!0),e.metadata.description?(f(),y("div",{key:1},[m("span",{class:"text-caption text-grey"},"Description:"),m("span",{class:"font-weight-medium"},v(e.metadata.description),1)])):_("",!0)])),_:2},1024)):_("",!0)])),_:2},1032,["class"])))),128)),m("div",{ref_key:"sentinelRef",ref:te,class:"sentinel-element py-2"},[p(le)?(f(),y("div",{key:0,class:"text-center py-4"},[m(C,{indeterminate:"",color:"primary"})])):_("",!0)],512),!H.value&&U.value.length>0?(f(),y("div",{key:0,class:"pa-4 text-center"},[m(M,{color:"grey",size:"small",variant:"flat"},{default:u((()=>[d(" No more transactions ")])),_:1})])):_("",!0)];a("\x3c!--[--\x3e"),V(U.value,((e,n)=>{a(w(O,{key:e.id,class:{"bg-grey-lighten-4":n%2!=0}},{prepend:u(((a,t,l,n)=>{if(!t)return[m(P,{color:getStatusColor(e.status),size:"48"},{default:u((()=>[m(N,{icon:"mdi-bank-transfer",size:"32"})])),_:2},1032,["color"])];t(w(P,{color:getStatusColor(e.status),size:"48"},{default:u(((e,a,t,l)=>{if(!a)return[m(N,{icon:"mdi-bank-transfer",size:"32"})];a(w(N,{icon:"mdi-bank-transfer",size:"32"},null,t,l))})),_:2},l,n))})),default:u(((a,t,l,n)=>{if(!t)return[m(Q,{class:"font-weight-medium"},{default:u((()=>{var a;return[d(v(p(o)(e.created_at||(null==(a=e.timestamps)?void 0:a.created_at))),1)]})),_:2},1024),m(q,{class:"text-caption text-grey"},{default:u((()=>{var a;return[d(v(p(h)(e.created_at||(null==(a=e.timestamps)?void 0:a.created_at))),1)]})),_:2},1024),m(q,null,{default:u((()=>[m("span",{class:"text-caption text-grey"},"Status:"),m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"ml-1 text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])])),_:2},1024),m(q,{class:"mt-2"},{default:u((()=>[m(W,null,{default:u((()=>[m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Gross Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.gross_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Net Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.net_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Service Fee"),m("div",{class:"font-weight-medium"},v(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),e.metadata&&(e.metadata.transaction_reference||e.metadata.description)?(f(),y(q,{key:0,class:"mt-2"},{default:u((()=>[m(L,{class:"mb-2"}),e.metadata.transaction_reference?(f(),y("div",{key:0},[m("span",{class:"text-caption text-grey"},"Reference:"),m("span",{class:"font-weight-medium"},v(e.metadata.transaction_reference),1)])):_("",!0),e.metadata.description?(f(),y("div",{key:1},[m("span",{class:"text-caption text-grey"},"Description:"),m("span",{class:"font-weight-medium"},v(e.metadata.description),1)])):_("",!0)])),_:2},1024)):_("",!0)];t(w(Q,{class:"font-weight-medium"},{default:u(((a,t,l,n)=>{var s,r;if(!t)return[d(v(p(o)(e.created_at||(null==(r=e.timestamps)?void 0:r.created_at))),1)];t(`${k(p(o)(e.created_at||(null==(s=e.timestamps)?void 0:s.created_at)))}`)})),_:2},l,n)),t(w(q,{class:"text-caption text-grey"},{default:u(((a,t,l,n)=>{var s,r;if(!t)return[d(v(p(h)(e.created_at||(null==(r=e.timestamps)?void 0:r.created_at))),1)];t(`${k(p(h)(e.created_at||(null==(s=e.timestamps)?void 0:s.created_at)))}`)})),_:2},l,n)),t(w(q,null,{default:u(((a,t,l,n)=>{if(!t)return[m("span",{class:"text-caption text-grey"},"Status:"),m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"ml-1 text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])];t(`<span class="text-caption text-grey" data-v-722a2a38${n}>Status:</span>`),t(w(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"ml-1 text-capitalize"},{default:u(((a,t,l,n)=>{if(!t)return[d(v(e.status),1)];t(`${k(e.status)}`)})),_:2},l,n))})),_:2},l,n)),t(w(q,{class:"mt-2"},{default:u(((a,t,l,n)=>{if(!t)return[m(W,null,{default:u((()=>[m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Gross Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.gross_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Net Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.net_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Service Fee"),m("div",{class:"font-weight-medium"},v(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code)),1)])),_:2},1024)])),_:2},1024)];t(w(W,null,{default:u(((a,t,l,n)=>{if(!t)return[m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Gross Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.gross_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Net Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.net_amount,e.currency.symbol,e.currency.code)),1)])),_:2},1024),m(G,{cols:"12",sm:"4",class:"text-start"},{default:u((()=>[m("div",{class:"text-caption text-grey mb-1"},"Service Fee"),m("div",{class:"font-weight-medium"},v(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code)),1)])),_:2},1024)];t(w(G,{cols:"12",sm:"4",class:"text-start"},{default:u(((a,t,l,n)=>{if(!t)return[m("div",{class:"text-caption text-grey mb-1"},"Gross Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.gross_amount,e.currency.symbol,e.currency.code)),1)];t(`<div class="text-caption text-grey mb-1" data-v-722a2a38${n}>Gross Amount</div><div class="font-weight-medium" data-v-722a2a38${n}>${k(p(r)(e.gross_amount,e.currency.symbol,e.currency.code))}</div>`)})),_:2},l,n)),t(w(G,{cols:"12",sm:"4",class:"text-start"},{default:u(((a,t,l,n)=>{if(!t)return[m("div",{class:"text-caption text-grey mb-1"},"Net Amount"),m("div",{class:"font-weight-medium"},v(p(r)(e.net_amount,e.currency.symbol,e.currency.code)),1)];t(`<div class="text-caption text-grey mb-1" data-v-722a2a38${n}>Net Amount</div><div class="font-weight-medium" data-v-722a2a38${n}>${k(p(r)(e.net_amount,e.currency.symbol,e.currency.code))}</div>`)})),_:2},l,n)),t(w(G,{cols:"12",sm:"4",class:"text-start"},{default:u(((a,t,l,n)=>{if(!t)return[m("div",{class:"text-caption text-grey mb-1"},"Service Fee"),m("div",{class:"font-weight-medium"},v(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code)),1)];t(`<div class="text-caption text-grey mb-1" data-v-722a2a38${n}>Service Fee</div><div class="font-weight-medium" data-v-722a2a38${n}>${k(p(r)(e.app_service_fee,e.currency.symbol,e.currency.code))}</div>`)})),_:2},l,n))})),_:2},l,n))})),_:2},l,n)),e.metadata&&(e.metadata.transaction_reference||e.metadata.description)?t(w(q,{class:"mt-2"},{default:u(((a,t,l,n)=>{if(!t)return[m(L,{class:"mb-2"}),e.metadata.transaction_reference?(f(),y("div",{key:0},[m("span",{class:"text-caption text-grey"},"Reference:"),m("span",{class:"font-weight-medium"},v(e.metadata.transaction_reference),1)])):_("",!0),e.metadata.description?(f(),y("div",{key:1},[m("span",{class:"text-caption text-grey"},"Description:"),m("span",{class:"font-weight-medium"},v(e.metadata.description),1)])):_("",!0)];t(w(L,{class:"mb-2"},null,l,n)),e.metadata.transaction_reference?t(`<div data-v-722a2a38${n}><span class="text-caption text-grey" data-v-722a2a38${n}>Reference:</span><span class="font-weight-medium" data-v-722a2a38${n}>${k(e.metadata.transaction_reference)}</span></div>`):t("\x3c!----\x3e"),e.metadata.description?t(`<div data-v-722a2a38${n}><span class="text-caption text-grey" data-v-722a2a38${n}>Description:</span><span class="font-weight-medium" data-v-722a2a38${n}>${k(e.metadata.description)}</span></div>`):t("\x3c!----\x3e")})),_:2},l,n)):t("\x3c!----\x3e")})),_:2},t,l))})),a(`\x3c!--]--\x3e<div class="sentinel-element py-2" data-v-722a2a38${l}>`),p(le)?(a(`<div class="text-center py-4" data-v-722a2a38${l}>`),a(w(C,{indeterminate:"",color:"primary"},null,t,l)),a("</div>")):a("\x3c!----\x3e"),a("</div>"),!H.value&&U.value.length>0?(a(`<div class="pa-4 text-center" data-v-722a2a38${l}>`),a(w(M,{color:"grey",size:"small",variant:"flat"},{default:u(((e,a,t,l)=>{if(!a)return[d(" No more transactions ")];a(" No more transactions ")})),_:1},t,l)),a("</div>")):a("\x3c!----\x3e")})),_:1},t,l)):a(w(D,null,{default:u(((e,a,t,l)=>{if(!a)return[m(E,{type:"info",variant:"tonal",border:"start",class:"mb-0"},{prepend:u((()=>[m(N,{icon:"mdi-information"})])),default:u((()=>[d(" No transactions found. ")])),_:1})];a(w(E,{type:"info",variant:"tonal",border:"start",class:"mb-0"},{prepend:u(((e,a,t,l)=>{if(!a)return[m(N,{icon:"mdi-information"})];a(w(N,{icon:"mdi-information"},null,t,l))})),default:u(((e,a,t,l)=>{if(!a)return[d(" No transactions found. ")];a(" No transactions found. ")})),_:1},t,l))})),_:1},t,l)),a(w(ee,{modelValue:R.value,"onUpdate:modelValue":e=>R.value=e,color:"error",timeout:"3000"},{actions:u(((e,a,t,l)=>{if(!a)return[m(S,{variant:"text",onClick:refresh},{default:u((()=>[d("Retry")])),_:1})];a(w(S,{variant:"text",onClick:refresh},{default:u(((e,a,t,l)=>{if(!a)return[d("Retry")];a("Retry")})),_:1},t,l))})),default:u(((e,a,t,l)=>{var n,s;if(!a)return[d(v((null==(s=B.value)?void 0:s.message)||"Failed to load transactions")+" ",1)];a(`${k((null==(n=B.value)?void 0:n.message)||"Failed to load transactions")} `)})),_:1},t,l))})),_:1},t))}}}),ve=me.setup;me.setup=(e,a)=>{const t=r();return(t.modules||(t.modules=new Set)).add("components/project/ProjectInvestorTransactions.vue"),ve?ve(e,a):void 0};const pe=T(me,[["__scopeId","data-v-722a2a38"]]),fe=o({__name:"ProjectInvestorBalanceHistory",__ssrInlineRender:!0,props:{accessUuid:{},investorId:{}},emits:["update:history","update:loading","update:total"],setup(e,{emit:a}){const t=e,l=a,{$axios:n}=$(),{formatLocalDateTime:r}=j(),o=s([]),h=s(!0),U=s(null),z=s(!1),T=s(!0),B=s(0),R=i((()=>`/api/projects/${t.accessUuid}/earnings/investors/${t.investorId}/balance-history`)),getStatusColor=e=>({completed:"success",pending:"warning",failed:"error"}[e]||"grey"),formatAmount=(e,a)=>`${a} ${e}`,formatDateTime=(e,a)=>r(`${e} ${a}`),{sentinelRef:H,isLoading:W,initLoader:G,page:Z}=Y((async e=>{try{const{data:a}=await n.get(R.value,{params:{page:e}});return o.value=1===e?a.data:[...o.value,...a.data],B.value=a.meta.total,T.value=a.meta.current_page<a.meta.last_page,l("update:history",o.value),l("update:total",B.value),a.data}catch(e){throw U.value=e instanceof Error?e:new Error("Failed to load balance history"),z.value=!0,console.error("Error fetching balance history:",e),U.value}finally{h.value=!1}}),T,{immediate:!1});function refresh(){T.value=!0,U.value=null,h.value=!0,G()}return b((()=>{l("update:loading",W.value)})),(e,a,t,l)=>{a(w(I,c({elevation:"0",border:""},l),{default:u(((e,a,t,l)=>{if(!a)return[m(A,{class:"d-flex align-center px-4 py-3 bg-grey-lighten-4"},{default:u((()=>[m(N,{icon:"mdi-history",class:"mr-2"}),m("span",{class:"text-h6"},"Balance History"),m(X),B.value?(f(),y(M,{key:0,size:"small",color:"primary",variant:"flat"},{default:u((()=>[d(v(B.value)+" transactions ",1)])),_:1})):_("",!0)])),_:1}),m(L),h.value?(f(),y(D,{key:0,class:"pa-4"},{default:u((()=>[(f(),y(g,null,x(3,(e=>m(J,{key:e,class:"mb-4 pa-4 rounded-lg bg-grey-lighten-4"},{default:u((()=>[m(F,{type:"list-item-two-line"})])),_:2},1024))),64))])),_:1})):o.value.length||h.value?(f(),y(D,{key:2,class:"pa-0"},{default:u((()=>[m(K,null,{default:u((()=>[(f(!0),y(g,null,x(o.value,((e,a)=>(f(),y(O,{key:e.id,ripple:!1,class:["py-4 px-4",{"bg-grey-lighten-4":a%2==0}]},{prepend:u((()=>[m(P,{color:getStatusColor(e.status),size:"42",class:"mr-3"},{default:u((()=>[m(N,{icon:"mdi-swap-horizontal"})])),_:2},1032,["color"])])),append:u((()=>[m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])])),default:u((()=>[m(Q,{class:"font-weight-medium mb-1"},{default:u((()=>[d(v(formatAmount(e.amount,e.currency.symbol)),1)])),_:2},1024),m(q,{class:"text-caption d-flex align-center"},{default:u((()=>[m(N,{size:"16",icon:"mdi-clock-outline",class:"mr-1",color:"grey-darken-1"}),d(" "+v(formatDateTime(e.date,e.time)),1)])),_:2},1024)])),_:2},1032,["class"])))),128)),m("div",{ref_key:"sentinelRef",ref:H,class:"sentinel-element py-2"},[p(W)&&!h.value?(f(),y("div",{key:0,class:"text-center py-4"},[m(C,{indeterminate:"",color:"primary"})])):_("",!0)],512),!T.value&&o.value.length>0?(f(),y("div",{key:0,class:"pa-4 text-center text-caption text-grey"}," End of history ")):_("",!0)])),_:1})])),_:1})):(f(),y(D,{key:1},{default:u((()=>[m(E,{type:"info",variant:"tonal",border:"start",class:"mb-0"},{prepend:u((()=>[m(N,{icon:"mdi-information"})])),default:u((()=>[d(" No balance history found. ")])),_:1})])),_:1})),m(ee,{modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,color:"error",timeout:"3000"},{actions:u((()=>[m(S,{variant:"text",onClick:refresh},{default:u((()=>[d("Retry")])),_:1})])),default:u((()=>{var e;return[d(v((null==(e=U.value)?void 0:e.message)||"Failed to load balance history")+" ",1)]})),_:1},8,["modelValue","onUpdate:modelValue"])];a(w(A,{class:"d-flex align-center px-4 py-3 bg-grey-lighten-4"},{default:u(((e,a,t,l)=>{if(!a)return[m(N,{icon:"mdi-history",class:"mr-2"}),m("span",{class:"text-h6"},"Balance History"),m(X),B.value?(f(),y(M,{key:0,size:"small",color:"primary",variant:"flat"},{default:u((()=>[d(v(B.value)+" transactions ",1)])),_:1})):_("",!0)];a(w(N,{icon:"mdi-history",class:"mr-2"},null,t,l)),a(`<span class="text-h6" data-v-7b86ffff${l}>Balance History</span>`),a(w(X,null,null,t,l)),B.value?a(w(M,{size:"small",color:"primary",variant:"flat"},{default:u(((e,a,t,l)=>{if(!a)return[d(v(B.value)+" transactions ",1)];a(`${k(B.value)} transactions `)})),_:1},t,l)):a("\x3c!----\x3e")})),_:1},t,l)),a(w(L,null,null,t,l)),h.value?a(w(D,{class:"pa-4"},{default:u(((e,a,t,l)=>{if(!a)return[(f(),y(g,null,x(3,(e=>m(J,{key:e,class:"mb-4 pa-4 rounded-lg bg-grey-lighten-4"},{default:u((()=>[m(F,{type:"list-item-two-line"})])),_:2},1024))),64))];a("\x3c!--[--\x3e"),V(3,(e=>{a(w(J,{key:e,class:"mb-4 pa-4 rounded-lg bg-grey-lighten-4"},{default:u(((e,a,t,l)=>{if(!a)return[m(F,{type:"list-item-two-line"})];a(w(F,{type:"list-item-two-line"},null,t,l))})),_:2},t,l))})),a("\x3c!--]--\x3e")})),_:1},t,l)):o.value.length||h.value?a(w(D,{class:"pa-0"},{default:u(((e,a,t,l)=>{if(!a)return[m(K,null,{default:u((()=>[(f(!0),y(g,null,x(o.value,((e,a)=>(f(),y(O,{key:e.id,ripple:!1,class:["py-4 px-4",{"bg-grey-lighten-4":a%2==0}]},{prepend:u((()=>[m(P,{color:getStatusColor(e.status),size:"42",class:"mr-3"},{default:u((()=>[m(N,{icon:"mdi-swap-horizontal"})])),_:2},1032,["color"])])),append:u((()=>[m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])])),default:u((()=>[m(Q,{class:"font-weight-medium mb-1"},{default:u((()=>[d(v(formatAmount(e.amount,e.currency.symbol)),1)])),_:2},1024),m(q,{class:"text-caption d-flex align-center"},{default:u((()=>[m(N,{size:"16",icon:"mdi-clock-outline",class:"mr-1",color:"grey-darken-1"}),d(" "+v(formatDateTime(e.date,e.time)),1)])),_:2},1024)])),_:2},1032,["class"])))),128)),m("div",{ref_key:"sentinelRef",ref:H,class:"sentinel-element py-2"},[p(W)&&!h.value?(f(),y("div",{key:0,class:"text-center py-4"},[m(C,{indeterminate:"",color:"primary"})])):_("",!0)],512),!T.value&&o.value.length>0?(f(),y("div",{key:0,class:"pa-4 text-center text-caption text-grey"}," End of history ")):_("",!0)])),_:1})];a(w(K,null,{default:u(((e,a,t,l)=>{if(!a)return[(f(!0),y(g,null,x(o.value,((e,a)=>(f(),y(O,{key:e.id,ripple:!1,class:["py-4 px-4",{"bg-grey-lighten-4":a%2==0}]},{prepend:u((()=>[m(P,{color:getStatusColor(e.status),size:"42",class:"mr-3"},{default:u((()=>[m(N,{icon:"mdi-swap-horizontal"})])),_:2},1032,["color"])])),append:u((()=>[m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])])),default:u((()=>[m(Q,{class:"font-weight-medium mb-1"},{default:u((()=>[d(v(formatAmount(e.amount,e.currency.symbol)),1)])),_:2},1024),m(q,{class:"text-caption d-flex align-center"},{default:u((()=>[m(N,{size:"16",icon:"mdi-clock-outline",class:"mr-1",color:"grey-darken-1"}),d(" "+v(formatDateTime(e.date,e.time)),1)])),_:2},1024)])),_:2},1032,["class"])))),128)),m("div",{ref_key:"sentinelRef",ref:H,class:"sentinel-element py-2"},[p(W)&&!h.value?(f(),y("div",{key:0,class:"text-center py-4"},[m(C,{indeterminate:"",color:"primary"})])):_("",!0)],512),!T.value&&o.value.length>0?(f(),y("div",{key:0,class:"pa-4 text-center text-caption text-grey"}," End of history ")):_("",!0)];a("\x3c!--[--\x3e"),V(o.value,((e,n)=>{a(w(O,{ripple:!1,class:["py-4 px-4",{"bg-grey-lighten-4":n%2==0}]},{prepend:u(((a,t,l,n)=>{if(!t)return[m(P,{color:getStatusColor(e.status),size:"42",class:"mr-3"},{default:u((()=>[m(N,{icon:"mdi-swap-horizontal"})])),_:2},1032,["color"])];t(w(P,{color:getStatusColor(e.status),size:"42",class:"mr-3"},{default:u(((e,a,t,l)=>{if(!a)return[m(N,{icon:"mdi-swap-horizontal"})];a(w(N,{icon:"mdi-swap-horizontal"},null,t,l))})),_:2},l,n))})),append:u(((a,t,l,n)=>{if(!t)return[m(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"text-capitalize"},{default:u((()=>[d(v(e.status),1)])),_:2},1032,["color"])];t(w(M,{color:getStatusColor(e.status),size:"small",variant:"flat",class:"text-capitalize"},{default:u(((a,t,l,n)=>{if(!t)return[d(v(e.status),1)];t(`${k(e.status)}`)})),_:2},l,n))})),default:u(((a,t,l,n)=>{if(!t)return[m(Q,{class:"font-weight-medium mb-1"},{default:u((()=>[d(v(formatAmount(e.amount,e.currency.symbol)),1)])),_:2},1024),m(q,{class:"text-caption d-flex align-center"},{default:u((()=>[m(N,{size:"16",icon:"mdi-clock-outline",class:"mr-1",color:"grey-darken-1"}),d(" "+v(formatDateTime(e.date,e.time)),1)])),_:2},1024)];t(w(Q,{class:"font-weight-medium mb-1"},{default:u(((a,t,l,n)=>{if(!t)return[d(v(formatAmount(e.amount,e.currency.symbol)),1)];t(`${k(formatAmount(e.amount,e.currency.symbol))}`)})),_:2},l,n)),t(w(q,{class:"text-caption d-flex align-center"},{default:u(((a,t,l,n)=>{if(!t)return[m(N,{size:"16",icon:"mdi-clock-outline",class:"mr-1",color:"grey-darken-1"}),d(" "+v(formatDateTime(e.date,e.time)),1)];t(w(N,{size:"16",icon:"mdi-clock-outline",class:"mr-1",color:"grey-darken-1"},null,l,n)),t(` ${k(formatDateTime(e.date,e.time))}`)})),_:2},l,n))})),_:2},t,l))})),a(`\x3c!--]--\x3e<div class="sentinel-element py-2" data-v-7b86ffff${l}>`),p(W)&&!h.value?(a(`<div class="text-center py-4" data-v-7b86ffff${l}>`),a(w(C,{indeterminate:"",color:"primary"},null,t,l)),a("</div>")):a("\x3c!----\x3e"),a("</div>"),!T.value&&o.value.length>0?a(`<div class="pa-4 text-center text-caption text-grey" data-v-7b86ffff${l}> End of history </div>`):a("\x3c!----\x3e")})),_:1},t,l))})),_:1},t,l)):a(w(D,null,{default:u(((e,a,t,l)=>{if(!a)return[m(E,{type:"info",variant:"tonal",border:"start",class:"mb-0"},{prepend:u((()=>[m(N,{icon:"mdi-information"})])),default:u((()=>[d(" No balance history found. ")])),_:1})];a(w(E,{type:"info",variant:"tonal",border:"start",class:"mb-0"},{prepend:u(((e,a,t,l)=>{if(!a)return[m(N,{icon:"mdi-information"})];a(w(N,{icon:"mdi-information"},null,t,l))})),default:u(((e,a,t,l)=>{if(!a)return[d(" No balance history found. ")];a(" No balance history found. ")})),_:1},t,l))})),_:1},t,l)),a(w(ee,{modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,color:"error",timeout:"3000"},{actions:u(((e,a,t,l)=>{if(!a)return[m(S,{variant:"text",onClick:refresh},{default:u((()=>[d("Retry")])),_:1})];a(w(S,{variant:"text",onClick:refresh},{default:u(((e,a,t,l)=>{if(!a)return[d("Retry")];a("Retry")})),_:1},t,l))})),default:u(((e,a,t,l)=>{var n,s;if(!a)return[d(v((null==(s=U.value)?void 0:s.message)||"Failed to load balance history")+" ",1)];a(`${k((null==(n=U.value)?void 0:n.message)||"Failed to load balance history")} `)})),_:1},t,l))})),_:1},t))}}}),ye=fe.setup;fe.setup=(e,a)=>{const t=r();return(t.modules||(t.modules=new Set)).add("components/project/ProjectInvestorBalanceHistory.vue"),ye?ye(e,a):void 0};const ge=T(fe,[["__scopeId","data-v-7b86ffff"]]),_e=o({__name:"investor-details-[investorId]",__ssrInlineRender:!0,setup(a){const t=ae(),l=te(),n=ie(),{project:r,isLoading:o}=B(l),c=i((()=>t.params.access_uuid)),_=i((()=>t.params.investorId)),b=[{label:"Transactions",value:"transactions",icon:"mdi-swap-horizontal"},{label:"Withdrawals",value:"history",icon:"mdi-cash-minus"}],U=s("transactions"),j=s([]),z=s([]),$=s(0),T=s(0),S=s({transactions:!1,balanceHistory:!1});return h([()=>t.params.access_uuid,()=>t.params.investorId],(async([e,a])=>{e&&a&&await n.fetchBalance(e,a)})),(a,t,l,s)=>{const i=e,h=de,C=pe,B=ge;t(w(le,s,{default:u(((e,a,t,l)=>{if(!a)return[m(i,{project:p(r),loading:p(o),elevation:10,subtitle:"InvestorEarnings & Revenue Analytics"},null,8,["project","loading"]),m(h,{balance:p(n).balance,loading:p(n).isLoading,"access-uuid":c.value,class:"mb-6"},null,8,["balance","loading","access-uuid"]),m(I,{elevation:"10"},{default:u((()=>[m(ne,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e,"fixed-tabs":"","bg-color":"primary","slider-color":"secondary"},{default:u((()=>[(f(),y(g,null,x(b,(e=>m(se,{key:e.value,value:e.value,class:"text-none"},{default:u((()=>[m(N,{icon:e.icon,class:"mr-2"},null,8,["icon"]),d(" "+v(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue","onUpdate:modelValue"]),m(D,{class:"pa-0"},{default:u((()=>[m(re,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e},{default:u((()=>[m(oe,{value:"transactions"},{default:u((()=>[m(C,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:transactions":e=>j.value=e,"onUpdate:loading":e=>S.value.transactions=e,"onUpdate:total":e=>$.value=e},null,8,["access-uuid","investor-id","onUpdate:transactions","onUpdate:loading","onUpdate:total"])])),_:1}),m(oe,{value:"history"},{default:u((()=>[m(B,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:history":e=>z.value=e,"onUpdate:loading":e=>S.value.balanceHistory=e,"onUpdate:total":e=>T.value=e},null,8,["access-uuid","investor-id","onUpdate:history","onUpdate:loading","onUpdate:total"])])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1})];a(w(i,{project:p(r),loading:p(o),elevation:10,subtitle:"InvestorEarnings & Revenue Analytics"},null,t,l)),a(w(h,{balance:p(n).balance,loading:p(n).isLoading,"access-uuid":c.value,class:"mb-6"},null,t,l)),a(w(I,{elevation:"10"},{default:u(((e,a,t,l)=>{if(!a)return[m(ne,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e,"fixed-tabs":"","bg-color":"primary","slider-color":"secondary"},{default:u((()=>[(f(),y(g,null,x(b,(e=>m(se,{key:e.value,value:e.value,class:"text-none"},{default:u((()=>[m(N,{icon:e.icon,class:"mr-2"},null,8,["icon"]),d(" "+v(e.label),1)])),_:2},1032,["value"]))),64))])),_:1},8,["modelValue","onUpdate:modelValue"]),m(D,{class:"pa-0"},{default:u((()=>[m(re,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e},{default:u((()=>[m(oe,{value:"transactions"},{default:u((()=>[m(C,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:transactions":e=>j.value=e,"onUpdate:loading":e=>S.value.transactions=e,"onUpdate:total":e=>$.value=e},null,8,["access-uuid","investor-id","onUpdate:transactions","onUpdate:loading","onUpdate:total"])])),_:1}),m(oe,{value:"history"},{default:u((()=>[m(B,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:history":e=>z.value=e,"onUpdate:loading":e=>S.value.balanceHistory=e,"onUpdate:total":e=>T.value=e},null,8,["access-uuid","investor-id","onUpdate:history","onUpdate:loading","onUpdate:total"])])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1})];a(w(ne,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e,"fixed-tabs":"","bg-color":"primary","slider-color":"secondary"},{default:u(((e,a,t,l)=>{if(!a)return[(f(),y(g,null,x(b,(e=>m(se,{key:e.value,value:e.value,class:"text-none"},{default:u((()=>[m(N,{icon:e.icon,class:"mr-2"},null,8,["icon"]),d(" "+v(e.label),1)])),_:2},1032,["value"]))),64))];a("\x3c!--[--\x3e"),V(b,(e=>{a(w(se,{key:e.value,value:e.value,class:"text-none"},{default:u(((a,t,l,n)=>{if(!t)return[m(N,{icon:e.icon,class:"mr-2"},null,8,["icon"]),d(" "+v(e.label),1)];t(w(N,{icon:e.icon,class:"mr-2"},null,l,n)),t(` ${k(e.label)}`)})),_:2},t,l))})),a("\x3c!--]--\x3e")})),_:1},t,l)),a(w(D,{class:"pa-0"},{default:u(((e,a,t,l)=>{if(!a)return[m(re,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e},{default:u((()=>[m(oe,{value:"transactions"},{default:u((()=>[m(C,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:transactions":e=>j.value=e,"onUpdate:loading":e=>S.value.transactions=e,"onUpdate:total":e=>$.value=e},null,8,["access-uuid","investor-id","onUpdate:transactions","onUpdate:loading","onUpdate:total"])])),_:1}),m(oe,{value:"history"},{default:u((()=>[m(B,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:history":e=>z.value=e,"onUpdate:loading":e=>S.value.balanceHistory=e,"onUpdate:total":e=>T.value=e},null,8,["access-uuid","investor-id","onUpdate:history","onUpdate:loading","onUpdate:total"])])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue"])];a(w(re,{modelValue:U.value,"onUpdate:modelValue":e=>U.value=e},{default:u(((e,a,t,l)=>{if(!a)return[m(oe,{value:"transactions"},{default:u((()=>[m(C,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:transactions":e=>j.value=e,"onUpdate:loading":e=>S.value.transactions=e,"onUpdate:total":e=>$.value=e},null,8,["access-uuid","investor-id","onUpdate:transactions","onUpdate:loading","onUpdate:total"])])),_:1}),m(oe,{value:"history"},{default:u((()=>[m(B,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:history":e=>z.value=e,"onUpdate:loading":e=>S.value.balanceHistory=e,"onUpdate:total":e=>T.value=e},null,8,["access-uuid","investor-id","onUpdate:history","onUpdate:loading","onUpdate:total"])])),_:1})];a(w(oe,{value:"transactions"},{default:u(((e,a,t,l)=>{if(!a)return[m(C,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:transactions":e=>j.value=e,"onUpdate:loading":e=>S.value.transactions=e,"onUpdate:total":e=>$.value=e},null,8,["access-uuid","investor-id","onUpdate:transactions","onUpdate:loading","onUpdate:total"])];a(w(C,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:transactions":e=>j.value=e,"onUpdate:loading":e=>S.value.transactions=e,"onUpdate:total":e=>$.value=e},null,t,l))})),_:1},t,l)),a(w(oe,{value:"history"},{default:u(((e,a,t,l)=>{if(!a)return[m(B,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:history":e=>z.value=e,"onUpdate:loading":e=>S.value.balanceHistory=e,"onUpdate:total":e=>T.value=e},null,8,["access-uuid","investor-id","onUpdate:history","onUpdate:loading","onUpdate:total"])];a(w(B,{"access-uuid":c.value,"investor-id":_.value,"onUpdate:history":e=>z.value=e,"onUpdate:loading":e=>S.value.balanceHistory=e,"onUpdate:total":e=>T.value=e},null,t,l))})),_:1},t,l))})),_:1},t,l))})),_:1},t,l))})),_:1},t,l))})),_:1},l))}}}),be=_e.setup;_e.setup=(e,a)=>{const t=r();return(t.modules||(t.modules=new Set)).add("pages/investments/earnings/projects/[access_uuid]/investor-details-[investorId].vue"),be?be(e,a):void 0};const xe=T(_e,[["__scopeId","data-v-d7c00134"]]);export{xe as default};
