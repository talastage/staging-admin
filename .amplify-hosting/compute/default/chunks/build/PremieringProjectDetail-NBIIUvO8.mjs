import{_ as e}from"./BaseCard-5i8D5k_7.mjs";import{useSSRContext as a,inject as l,computed as t,createVNode as i,withDirectives as r,resolveDirective as o,vShow as s,ref as u,mergeProps as n,Fragment as d,defineComponent as c,withCtx as v,openBlock as m,createBlock as p,createTextVNode as h,createCommentVNode as f,toDisplayString as b,withKeys as g,withModifiers as y,toRef as x,shallowRef as _,provide as w,watch as k,unref as S}from"vue";import{ssrRenderAttrs as j,ssrInterpolate as U,ssrRenderComponent as V,ssrRenderClass as C,ssrRenderStyle as P}from"vue/server-renderer";import{p as F,x as T,s as $,m as z,h as M,R as E,i as R,X as D,j as L,Q as I,G as B,L as N,a0 as A,a2 as W,b as K,U as O,V as q,u as H,ba as Q,aQ as G,_ as X,af as Z,ap as J,aR as Y}from"./server.mjs";import{_ as ee}from"./BaseTitle-CB_md7-d.mjs";import{useToast as ae}from"vue-toastification";import{u as le}from"./usePremieringMediaUpload-Pb41DpBw.mjs";import{d as te,b as ie}from"./index--K8ZrFMm.mjs";import{e as re}from"./index-DfGQ-Pg8.mjs";import{V as oe}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{V as se}from"./VAlert-DneVUU3Q.mjs";import{a as ue}from"./VChip-f_o2BAA4.mjs";import{V as ne}from"./VForm-HRC00ryg.mjs";import{V as de}from"./VTextField-rd-VvEF8.mjs";import ce from"vue-cropperjs";import{V as ve}from"./VImg-B2jcJjnn.mjs";import{V as me}from"./VDialog-DA9BdIfh.mjs";import{V as pe,a as he,c as fe}from"./VCard-CsohsM82.mjs";import{V as be,a as ge}from"./VToolbar-8wIfw3zK.mjs";import{V as ye}from"./VSpacer-_gFExeVk.mjs";import{V as xe}from"./VDivider-BmyMVZMt.mjs";import _e from"hls.js";import{b as we,m as ke,u as Se,V as je,d as Ue}from"./VInput-DRJS2l97.mjs";import{u as Ve}from"./useVaporUpload-BcV2ypUE.mjs";import{V as Ce}from"./VRow-rkX0LEXR.mjs";import{V as Pe}from"./VCol-CKxprC4g.mjs";import{V as Fe}from"./VTextarea-DkPaPTLI.mjs";const Te=c({__name:"ProjectDetailSavedHeader",__ssrInlineRender:!0,props:{projectName:{},isSaving:{type:Boolean},lastSavedAt:{},saveError:{}},setup(e){const a=e,l=t((()=>a.saveError?`Error: ${a.saveError}`:a.isSaving?"Saving...":a.lastSavedAt?`Saved ${formatLastSaved(a.lastSavedAt)}`:"All changes saved")),r=t((()=>a.saveError?"error":a.isSaving?"grey-lighten-1":"success-lighten-1")),formatLastSaved=e=>{const a=(new Date).getTime()-e.getTime();return a<1e3?"just now":a<6e4?`${Math.floor(a/1e3)}s ago`:a<36e5?`${Math.floor(a/6e4)}m ago`:e.toLocaleTimeString()};return(e,a,t,o)=>{a(`<div${j(n({class:"project-detail-header d-flex align-center justify-space-between pa-4"},o))} data-v-36585f84><div class="project-name text-h6" data-v-36585f84>${U(e.projectName||"Untitled Project")}</div><div class="save-status-container" data-v-36585f84>`),a(V(K,{color:r.value,variant:"tonal",elevation:0,class:"save-status-btn",disabled:e.isSaving},{default:v(((a,t,r,o)=>{if(!t)return[e.isSaving?(m(),p(d,{key:0},[i(O,{indeterminate:"",size:"16",width:"2",color:"primary",class:"mr-2"}),h(" Saving... ")],64)):(m(),p(d,{key:1},[e.saveError?f("",!0):(m(),p(q,{key:0,icon:"mdi-check",size:"small",class:"mr-2"})),h(" "+b(l.value),1)],64))];e.isSaving?(t("\x3c!--[--\x3e"),t(V(O,{indeterminate:"",size:"16",width:"2",color:"primary",class:"mr-2"},null,r,o)),t(" Saving... \x3c!--]--\x3e")):(t("\x3c!--[--\x3e"),e.saveError?t("\x3c!----\x3e"):t(V(q,{icon:"mdi-check",size:"small",class:"mr-2"},null,r,o)),t(` ${U(l.value)}\x3c!--]--\x3e`))})),_:1},t)),a("</div></div>")}}}),$e=Te.setup;Te.setup=(e,l)=>{const t=a();return(t.modules||(t.modules=new Set)).add("components/project/ProjectDetailSavedHeader.vue"),$e?$e(e,l):void 0};const ze=X(Te,[["__scopeId","data-v-36585f84"]]),Me={USD:"$",KES:"KSh",UGX:"USh",TZS:"TSh",RWF:"RWF",BIF:"FBu",CDF:"FC",EUR:"€",GBP:"£",INR:"₹",CHF:"CHF",JPY:"¥",CAD:"C$",SEK:"kr",NOK:"kr",DKK:"kr",XDR:"XDR",MUR:"₨",ZMW:"ZK",GHS:"GH₵",BWP:"P",ZWL:"Z$",KMF:"CF",MZN:"MT",AOA:"Kz",SCR:"₨",MGA:"Ar",ETB:"Br",AED:"د.إ",AFN:"؋",AUD:"A$",ARS:"$"},Ee=c({__name:"ProjectWatchFeeSettings",__ssrInlineRender:!0,props:{project:{}},setup(a){const l=a,r=ae(),{$axios:o}=H(),s=le(),n=u({amount:0,currency:{id:0,name:"",code:"",symbol:""}}),d=u(l.project.watch_fee?l.project.watch_fee.toString():""),c=t((()=>null!==l.project.watch_fee&&""!==l.project.watch_fee)),x=u({default:!1,save:!1}),_=u({default:null,save:null}),w=t((()=>n.value.currency.code||"RWF")),k=t((()=>Me[n.value.currency.code]||w.value)),S=t((()=>{if(!n.value.amount)return null;const{amount:e,currency:a}=n.value;return`${Me[a.code]||a.code}${e.toLocaleString()}`})),j=t((()=>{if(!d.value)return!1;const e=parseFloat(d.value);return!isNaN(e)&&e>=n.value.amount})),C=t((()=>{if(!d.value)return"Enter amount";const e=parseFloat(d.value);return isNaN(e)?"Please enter a valid number":e<n.value.amount?`Amount must be at least ${S.value}`:"Valid amount"}));function validateWatchFee(e){if(!e)return"Amount is required";const a=parseFloat(e);return isNaN(a)?"Please enter a valid number":!(a<n.value.amount)||`Amount must be at least ${S.value}`}const P=re((e=>{validateWatchFee(e)}),300);function handleWatchFeeInput(e){const a=e.replace(/\.(?=.*\.)/g,"").replace(/[^\d.]/g,"").replace(/(\.\d{2})\d+$/,"$1");d.value=a,P(a)}async function saveWatchFee(){var e,a;if(j.value){x.value.save=!0,_.value.save=null;try{const e=await o.post(`/api/project-watch-fees/${l.project.access_uuid}`,{watch_fee:parseFloat(d.value),currency_id:n.value.currency.id});e.data.watch_fee&&(s.updateProject({watch_fee:e.data.watch_fee.amount,currency:e.data.watch_fee.currency}),r.success("Watch fee updated successfully"))}catch(l){console.error("Error saving watch fee:",l);const t=(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to update watch fee";_.value.save=t,r.error(t)}finally{x.value.save=!1}}}const retryLoading=async()=>{_.value.default=null,await async function(){x.value.default=!0,_.value.default=null;try{const e=await o.get("/api/default-amounts/default-watch-fee");e.data&&(n.value=e.data)}catch(e){console.error("Error fetching default watch fee:",e),_.value.default="Failed to fetch default watch fee",r.error("Failed to fetch default watch fee")}finally{x.value.default=!1}}()};return(a,l,t,r)=>{const o=ee;l(V(e,r,{default:v(((e,a,l,t)=>{if(!a)return[x.value.default?(m(),p("div",{key:0},[i(oe,{type:"article"})])):_.value.default||_.value.save?(m(),p("div",{key:1},[i(se,{type:"error",variant:"tonal",text:_.value.default||_.value.save},null,8,["text"]),i(K,{color:"primary",variant:"text",onClick:retryLoading},{default:v((()=>[h(" Retry Loading ")])),_:1})])):(m(),p("div",{key:2,class:"watch-fee-container"},[i("div",{class:"d-flex flex-column mb-3"},[i(o,{size:"h6",tag:"h3",marginBottom:1,class:"d-flex align-center"},{default:v((()=>[i(q,{icon:"mdi-currency-usd",class:"mr-2",size:"small",color:"primary"}),h(" Set Watch Fee "),c.value?(m(),p(ue,{key:0,color:"success",class:"ml-2",size:"x-small",variant:"flat"},{default:v((()=>[h(" Set ")])),_:1})):f("",!0)])),_:1}),i("span",{class:"text-body-2 text-medium-emphasis"}," Define how much viewers will need to pay to watch your content ")]),i(se,{color:"info",variant:"text",density:"compact",class:"mb-4 text-body-2 info-alert",border:"start"},{prepend:v((()=>[i(q,{size:"small",icon:"mdi-information"})])),default:v((()=>[i("span",null,[h(" Minimum amount: "),i("strong",null,b(S.value),1)])])),_:1}),i(ne,{onSubmit:y(saveWatchFee,["prevent"]),disabled:x.value.save},{default:v((()=>[i("div",{class:"d-flex fee-input-group"},[i(de,{modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,type:"text",density:"compact",variant:"outlined",label:"Enter watch fee amount",rules:[validateWatchFee],prefix:k.value,hint:C.value,"error-messages":_.value.save,loading:x.value.save,"persistent-hint":"","hide-details":"auto",onInput:handleWatchFeeInput,onKeyup:g(saveWatchFee,["enter"]),class:"flex-grow-1"},{append:v((()=>[i(ie,null,{default:v((()=>[j.value?(m(),p(q,{key:0,color:"success",size:"small",icon:"mdi-check-circle"})):f("",!0)])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","rules","prefix","hint","error-messages","loading"]),i(K,{color:"primary",loading:x.value.save,disabled:!j.value,type:"submit",class:"ml-2 submit-btn",height:40},{default:v((()=>[i("span",{class:"d-none d-sm-block"},b(c.value?"Update":"Set")+" Fee ",1),i(q,{icon:c.value?"mdi-update":"mdi-plus",size:"small",class:"d-sm-none"},null,8,["icon"])])),_:1},8,["loading","disabled"])])])),_:1},8,["disabled"])]))];x.value.default?(a(`<div data-v-8530f6f2${t}>`),a(V(oe,{type:"article"},null,l,t)),a("</div>")):_.value.default||_.value.save?(a(`<div data-v-8530f6f2${t}>`),a(V(se,{type:"error",variant:"tonal",text:_.value.default||_.value.save},null,l,t)),a(V(K,{color:"primary",variant:"text",onClick:retryLoading},{default:v(((e,a,l,t)=>{if(!a)return[h(" Retry Loading ")];a(" Retry Loading ")})),_:1},l,t)),a("</div>")):(a(`<div class="watch-fee-container" data-v-8530f6f2${t}><div class="d-flex flex-column mb-3" data-v-8530f6f2${t}>`),a(V(o,{size:"h6",tag:"h3",marginBottom:1,class:"d-flex align-center"},{default:v(((e,a,l,t)=>{if(!a)return[i(q,{icon:"mdi-currency-usd",class:"mr-2",size:"small",color:"primary"}),h(" Set Watch Fee "),c.value?(m(),p(ue,{key:0,color:"success",class:"ml-2",size:"x-small",variant:"flat"},{default:v((()=>[h(" Set ")])),_:1})):f("",!0)];a(V(q,{icon:"mdi-currency-usd",class:"mr-2",size:"small",color:"primary"},null,l,t)),a(" Set Watch Fee "),c.value?a(V(ue,{color:"success",class:"ml-2",size:"x-small",variant:"flat"},{default:v(((e,a,l,t)=>{if(!a)return[h(" Set ")];a(" Set ")})),_:1},l,t)):a("\x3c!----\x3e")})),_:1},l,t)),a(`<span class="text-body-2 text-medium-emphasis" data-v-8530f6f2${t}> Define how much viewers will need to pay to watch your content </span></div>`),a(V(se,{color:"info",variant:"text",density:"compact",class:"mb-4 text-body-2 info-alert",border:"start"},{prepend:v(((e,a,l,t)=>{if(!a)return[i(q,{size:"small",icon:"mdi-information"})];a(V(q,{size:"small",icon:"mdi-information"},null,l,t))})),default:v(((e,a,l,t)=>{if(!a)return[i("span",null,[h(" Minimum amount: "),i("strong",null,b(S.value),1)])];a(`<span data-v-8530f6f2${t}> Minimum amount: <strong data-v-8530f6f2${t}>${U(S.value)}</strong></span>`)})),_:1},l,t)),a(V(ne,{onSubmit:saveWatchFee,disabled:x.value.save},{default:v(((e,a,l,t)=>{if(!a)return[i("div",{class:"d-flex fee-input-group"},[i(de,{modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,type:"text",density:"compact",variant:"outlined",label:"Enter watch fee amount",rules:[validateWatchFee],prefix:k.value,hint:C.value,"error-messages":_.value.save,loading:x.value.save,"persistent-hint":"","hide-details":"auto",onInput:handleWatchFeeInput,onKeyup:g(saveWatchFee,["enter"]),class:"flex-grow-1"},{append:v((()=>[i(ie,null,{default:v((()=>[j.value?(m(),p(q,{key:0,color:"success",size:"small",icon:"mdi-check-circle"})):f("",!0)])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","rules","prefix","hint","error-messages","loading"]),i(K,{color:"primary",loading:x.value.save,disabled:!j.value,type:"submit",class:"ml-2 submit-btn",height:40},{default:v((()=>[i("span",{class:"d-none d-sm-block"},b(c.value?"Update":"Set")+" Fee ",1),i(q,{icon:c.value?"mdi-update":"mdi-plus",size:"small",class:"d-sm-none"},null,8,["icon"])])),_:1},8,["loading","disabled"])])];a(`<div class="d-flex fee-input-group" data-v-8530f6f2${t}>`),a(V(de,{modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,type:"text",density:"compact",variant:"outlined",label:"Enter watch fee amount",rules:[validateWatchFee],prefix:k.value,hint:C.value,"error-messages":_.value.save,loading:x.value.save,"persistent-hint":"","hide-details":"auto",onInput:handleWatchFeeInput,onKeyup:saveWatchFee,class:"flex-grow-1"},{append:v(((e,a,l,t)=>{if(!a)return[i(ie,null,{default:v((()=>[j.value?(m(),p(q,{key:0,color:"success",size:"small",icon:"mdi-check-circle"})):f("",!0)])),_:1})];a(V(ie,null,{default:v(((e,a,l,t)=>{if(!a)return[j.value?(m(),p(q,{key:0,color:"success",size:"small",icon:"mdi-check-circle"})):f("",!0)];j.value?a(V(q,{color:"success",size:"small",icon:"mdi-check-circle"},null,l,t)):a("\x3c!----\x3e")})),_:1},l,t))})),_:1},l,t)),a(V(K,{color:"primary",loading:x.value.save,disabled:!j.value,type:"submit",class:"ml-2 submit-btn",height:40},{default:v(((e,a,l,t)=>{if(!a)return[i("span",{class:"d-none d-sm-block"},b(c.value?"Update":"Set")+" Fee ",1),i(q,{icon:c.value?"mdi-update":"mdi-plus",size:"small",class:"d-sm-none"},null,8,["icon"])];a(`<span class="d-none d-sm-block" data-v-8530f6f2${t}>${U(c.value?"Update":"Set")} Fee </span>`),a(V(q,{icon:c.value?"mdi-update":"mdi-plus",size:"small",class:"d-sm-none"},null,l,t))})),_:1},l,t)),a("</div>")})),_:1},l,t)),a("</div>"))})),_:1},t))}}}),Re=Ee.setup;Ee.setup=(e,l)=>{const t=a();return(t.modules||(t.modules=new Set)).add("components/project/ProjectWatchFeeSettings.vue"),Re?Re(e,l):void 0};const De=X(Ee,[["__scopeId","data-v-8530f6f2"]]),Le={__name:"MediaThumbnailUpload",__ssrInlineRender:!0,props:{thumbnailUrl:{type:String,default:null},isUploading:{type:Boolean,default:!1}},emits:["update:thumbnail","upload:start","upload:complete"],setup(e,{emit:a}){const l=e,r=a,{compressImage:o}=(()=>{const e={maxFileSize:5242880,compressionThreshold:2097152,targetFileSize:1572864,maxDimension:1920,minQuality:.5,startQuality:.9},getImageMetadata=e=>new Promise(((a,l)=>{const t=new Image;t.onload=()=>{a({width:t.width,height:t.height,type:e.type}),URL.revokeObjectURL(t.src)},t.onerror=()=>{URL.revokeObjectURL(t.src),l(new Error("Failed to load image for metadata extraction"))},t.src=URL.createObjectURL(e)})),compressImage=async(a,l={})=>{const t={...e,...l},i=a.size,updateProgress=e=>{t.progressCallback&&t.progressCallback(e)};if(updateProgress(10),a.size<=t.compressionThreshold)return updateProgress(100),{compressed:a,originalSize:i,compressedSize:i,compressionRatio:1,wasCompressed:!1};if(a.size>t.maxFileSize)throw new Error(`File size exceeds maximum allowed size of ${t.maxFileSize/1048576}MB`);return updateProgress(20),new Promise(((e,l)=>{const r=new Image,o=(void 0).createElement("canvas"),s=o.getContext("2d");r.onload=async()=>{try{updateProgress(30);let{width:a,height:l}=r;(a>t.maxDimension||l>t.maxDimension)&&(a>l?(l=Math.round(l*t.maxDimension/a),a=t.maxDimension):(a=Math.round(a*t.maxDimension/l),l=t.maxDimension)),updateProgress(40),o.width=a,o.height=l,s.drawImage(r,0,0,a,l),updateProgress(50);let u=t.startQuality,n=o.toDataURL("image/jpeg",u);const d=5;let c=0;for(;n.length>1.37*t.targetFileSize&&u>t.minQuality;)c++,u=Math.max(t.minQuality,t.startQuality-c*(t.startQuality-t.minQuality)/d),n=o.toDataURL("image/jpeg",u),updateProgress(50+Math.min(40,c/d*40));updateProgress(90);const v=await fetch(n),m=await v.blob();updateProgress(100),e({compressed:m,originalSize:i,compressedSize:m.size,compressionRatio:m.size/i,wasCompressed:!0,dimensions:{width:a,height:l}})}catch(e){l(e)}},r.onerror=()=>l(new Error("Failed to load image")),r.src=URL.createObjectURL(a)}))};return{compressImage:compressImage,analyzeImage:async e=>{const a=await getImageMetadata(e),l=e.size/1048576;return{dimensions:{width:a.width,height:a.height},aspectRatio:parseFloat((a.width/a.height).toFixed(2)),fileSize:`${l.toFixed(2)}MB`,type:a.type,isOptimal:l<2&&a.width>=1280&&a.height>=720&&Math.abs(a.width/a.height-16/9)<.1}},batchProcessImages:async(e,a={})=>{const l=[];for(const t of e)try{const e=await compressImage(t,a);l.push(e)}catch(e){console.error(`Error processing file: ${e}`)}return l},getImageMetadata:getImageMetadata}})(),s=u(null),d=u(!1),c=u(!1),g=u(""),y=u(null),x=u(null),_=u(!1),w=u(null),F=u(0),T=t((()=>w.value?w.value:l.thumbnailUrl));function handleImageError(){console.error("Failed to load thumbnail")}function selectFile(){var e;c.value||l.isUploading||null==(e=y.value)||e.click()}function closeDialog(){c.value||l.isUploading||(d.value=!1,s.value=null,g.value="",y.value&&(y.value.value=""))}async function applyCrop(){if(x.value&&!c.value&&!l.isUploading){c.value=!0,g.value="Preparing image...",r("upload:start");try{const e=x.value.getCroppedCanvas({width:1280,height:720,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"});g.value="Compressing image...";const a=await new Promise((a=>e.toBlob(a,"image/jpeg",.9)));w.value=URL.createObjectURL(a);const{compressed:l}=await o(a,{maxFileSize:5242880,compressionThreshold:2097152,targetFileSize:1572864,maxDimension:1920,progressCallback:e=>{F.value=Math.min(90,e)}});F.value=100,g.value="Uploading image...",r("update:thumbnail",l),setTimeout((()=>{d.value=!1}),500)}catch(e){console.error("Error processing thumbnail:",e),alert("Failed to process thumbnail. Please try again."),r("upload:complete",!1)}finally{c.value=!1}}}return k(c,((e,a)=>{!a||e||g.value||closeDialog()})),k((()=>l.isUploading),(e=>{e||setTimeout((()=>{w.value&&(URL.revokeObjectURL(w.value),w.value=null),F.value=0}),500)})),(a,l,t,r)=>{l(`<div${j(n({class:"media-thumbnail"},r))} data-v-382f4301><h3 class="text-h6 mb-4" data-v-382f4301>Media Thumbnail</h3><div class="thumbnail-uploader" data-v-382f4301><div class="thumbnail-container" data-v-382f4301>`),T.value?l(V(ve,{src:T.value,"aspect-ratio":16/9,cover:"",class:"thumbnail-preview",onError:handleImageError},{placeholder:v(((e,a,l,t)=>{if(!a)return[i(ie,null,{default:v((()=>[i("div",{class:"d-flex align-center justify-center fill-height"},[i(O,{indeterminate:"",color:"primary"})])])),_:1})];a(V(ie,null,{default:v(((e,a,l,t)=>{if(!a)return[i("div",{class:"d-flex align-center justify-center fill-height"},[i(O,{indeterminate:"",color:"primary"})])];a(`<div class="d-flex align-center justify-center fill-height" data-v-382f4301${t}>`),a(V(O,{indeterminate:"",color:"primary"},null,l,t)),a("</div>")})),_:1},l,t))})),_:1},t)):(l(`<div class="${C([{"drag-active":_.value},"empty-thumbnail"])}" data-v-382f4301>`),l(V(q,{icon:"mdi-image-outline",size:"48",color:"grey-lighten-1"},null,t)),l('<span class="text-grey-lighten-1 text-body-2" data-v-382f4301> Drag &amp; drop or click to upload </span></div>')),l(V(ie,null,{default:v(((a,l,t,r)=>{if(!l)return[c.value||e.isUploading?(m(),p("div",{key:0,class:"upload-overlay"},[i(O,{indeterminate:"",color:"primary",size:"64"}),i("span",{class:"mt-3 text-body-2 text-white"},b(g.value),1),F.value>0&&F.value<100?(m(),p(Z,{key:0,"model-value":F.value,class:"mt-2 upload-progress",color:"primary",rounded:""},null,8,["model-value"])):f("",!0)])):f("",!0)];c.value||e.isUploading?(l(`<div class="upload-overlay" data-v-382f4301${r}>`),l(V(O,{indeterminate:"",color:"primary",size:"64"},null,t,r)),l(`<span class="mt-3 text-body-2 text-white" data-v-382f4301${r}>${U(g.value)}</span>`),F.value>0&&F.value<100?l(V(Z,{"model-value":F.value,class:"mt-2 upload-progress",color:"primary",rounded:""},null,t,r)):l("\x3c!----\x3e"),l("</div>")):l("\x3c!----\x3e")})),_:1},t)),l(`<div class="${C(["action-button",{"has-thumbnail":T.value}])}" data-v-382f4301>`),l(V(K,{color:T.value?"white":"primary",variant:T.value?"flat":"elevated","prepend-icon":T.value?"mdi-refresh":"mdi-upload",disabled:c.value||e.isUploading,class:"upload-btn",elevation:"3",onClick:selectFile},{default:v(((e,a,l,t)=>{if(!a)return[h(b(T.value?"Replace":"Upload Thumbnail"),1)];a(`${U(T.value?"Replace":"Upload Thumbnail")}`)})),_:1},t)),l(`</div></div><div class="text-caption text-grey mt-2" data-v-382f4301> Recommended: 1280x720px or larger, 16:9 ratio, JPEG/PNG format </div><input type="file" accept="image/jpeg,image/png,image/jpg" style="${P({display:"none"})}" data-v-382f4301>`),l(V(me,{modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,"max-width":"800px",persistent:"",onKeydown:closeDialog},{default:v(((a,l,t,r)=>{if(!l)return[i(pe,{class:"thumbnail-editor-dialog"},{default:v((()=>[i(be,{density:"compact",color:"primary"},{default:v((()=>[i(ge,{class:"text-white"},{default:v((()=>[h("Edit Thumbnail")])),_:1}),i(ye),i(K,{icon:"mdi-close",variant:"text",color:"white",disabled:c.value||e.isUploading,onClick:closeDialog},null,8,["disabled"])])),_:1}),i(he,{class:"pa-4"},{default:v((()=>[i(ie,null,{default:v((()=>[s.value?(m(),p("div",{key:0,class:"cropper-container"},[i(S(ce),{ref_key:"cropper",ref:x,src:s.value,"aspect-ratio":16/9,"view-mode":2,background:!0,"auto-crop-area":1,responsive:!0,"img-style":{width:"100%",height:"100%"},style:{height:"min(450px, 70vh)",width:"100%"},guides:!0},null,8,["src"])])):(m(),p("div",{key:1,class:"d-flex justify-center align-center pa-8"},[i(O,{indeterminate:""})]))])),_:1}),i("div",{class:"thumbnail-info mt-4"},[i(q,{icon:"mdi-information-outline",size:"small",color:"grey",class:"mr-1"}),i("span",{class:"text-caption text-grey"}," Drag the image or move the crop area to adjust your thumbnail. The thumbnail will be displayed in 16:9 ratio across the platform. ")])])),_:1}),i(xe),i(fe,{class:"pa-4"},{default:v((()=>[i(ye),i(K,{color:"grey",variant:"text",disabled:c.value||e.isUploading,onClick:closeDialog},{default:v((()=>[h(" Cancel ")])),_:1},8,["disabled"]),i(K,{color:"primary",loading:c.value||e.isUploading,disabled:!s.value||c.value||e.isUploading,onClick:applyCrop},{default:v((()=>[h(b(c.value||e.isUploading?g.value:"Save Changes"),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})];l(V(pe,{class:"thumbnail-editor-dialog"},{default:v(((a,l,t,r)=>{if(!l)return[i(be,{density:"compact",color:"primary"},{default:v((()=>[i(ge,{class:"text-white"},{default:v((()=>[h("Edit Thumbnail")])),_:1}),i(ye),i(K,{icon:"mdi-close",variant:"text",color:"white",disabled:c.value||e.isUploading,onClick:closeDialog},null,8,["disabled"])])),_:1}),i(he,{class:"pa-4"},{default:v((()=>[i(ie,null,{default:v((()=>[s.value?(m(),p("div",{key:0,class:"cropper-container"},[i(S(ce),{ref_key:"cropper",ref:x,src:s.value,"aspect-ratio":16/9,"view-mode":2,background:!0,"auto-crop-area":1,responsive:!0,"img-style":{width:"100%",height:"100%"},style:{height:"min(450px, 70vh)",width:"100%"},guides:!0},null,8,["src"])])):(m(),p("div",{key:1,class:"d-flex justify-center align-center pa-8"},[i(O,{indeterminate:""})]))])),_:1}),i("div",{class:"thumbnail-info mt-4"},[i(q,{icon:"mdi-information-outline",size:"small",color:"grey",class:"mr-1"}),i("span",{class:"text-caption text-grey"}," Drag the image or move the crop area to adjust your thumbnail. The thumbnail will be displayed in 16:9 ratio across the platform. ")])])),_:1}),i(xe),i(fe,{class:"pa-4"},{default:v((()=>[i(ye),i(K,{color:"grey",variant:"text",disabled:c.value||e.isUploading,onClick:closeDialog},{default:v((()=>[h(" Cancel ")])),_:1},8,["disabled"]),i(K,{color:"primary",loading:c.value||e.isUploading,disabled:!s.value||c.value||e.isUploading,onClick:applyCrop},{default:v((()=>[h(b(c.value||e.isUploading?g.value:"Save Changes"),1)])),_:1},8,["loading","disabled"])])),_:1})];l(V(be,{density:"compact",color:"primary"},{default:v(((a,l,t,r)=>{if(!l)return[i(ge,{class:"text-white"},{default:v((()=>[h("Edit Thumbnail")])),_:1}),i(ye),i(K,{icon:"mdi-close",variant:"text",color:"white",disabled:c.value||e.isUploading,onClick:closeDialog},null,8,["disabled"])];l(V(ge,{class:"text-white"},{default:v(((e,a,l,t)=>{if(!a)return[h("Edit Thumbnail")];a("Edit Thumbnail")})),_:1},t,r)),l(V(ye,null,null,t,r)),l(V(K,{icon:"mdi-close",variant:"text",color:"white",disabled:c.value||e.isUploading,onClick:closeDialog},null,t,r))})),_:1},t,r)),l(V(he,{class:"pa-4"},{default:v(((e,a,l,t)=>{if(!a)return[i(ie,null,{default:v((()=>[s.value?(m(),p("div",{key:0,class:"cropper-container"},[i(S(ce),{ref_key:"cropper",ref:x,src:s.value,"aspect-ratio":16/9,"view-mode":2,background:!0,"auto-crop-area":1,responsive:!0,"img-style":{width:"100%",height:"100%"},style:{height:"min(450px, 70vh)",width:"100%"},guides:!0},null,8,["src"])])):(m(),p("div",{key:1,class:"d-flex justify-center align-center pa-8"},[i(O,{indeterminate:""})]))])),_:1}),i("div",{class:"thumbnail-info mt-4"},[i(q,{icon:"mdi-information-outline",size:"small",color:"grey",class:"mr-1"}),i("span",{class:"text-caption text-grey"}," Drag the image or move the crop area to adjust your thumbnail. The thumbnail will be displayed in 16:9 ratio across the platform. ")])];a(V(ie,null,{default:v(((e,a,l,t)=>{if(!a)return[s.value?(m(),p("div",{key:0,class:"cropper-container"},[i(S(ce),{ref_key:"cropper",ref:x,src:s.value,"aspect-ratio":16/9,"view-mode":2,background:!0,"auto-crop-area":1,responsive:!0,"img-style":{width:"100%",height:"100%"},style:{height:"min(450px, 70vh)",width:"100%"},guides:!0},null,8,["src"])])):(m(),p("div",{key:1,class:"d-flex justify-center align-center pa-8"},[i(O,{indeterminate:""})]))];s.value?(a(`<div class="cropper-container" data-v-382f4301${t}>`),a(V(S(ce),{ref_key:"cropper",ref:x,src:s.value,"aspect-ratio":16/9,"view-mode":2,background:!0,"auto-crop-area":1,responsive:!0,"img-style":{width:"100%",height:"100%"},style:{height:"min(450px, 70vh)",width:"100%"},guides:!0},null,l,t)),a("</div>")):(a(`<div class="d-flex justify-center align-center pa-8" data-v-382f4301${t}>`),a(V(O,{indeterminate:""},null,l,t)),a("</div>"))})),_:1},l,t)),a(`<div class="thumbnail-info mt-4" data-v-382f4301${t}>`),a(V(q,{icon:"mdi-information-outline",size:"small",color:"grey",class:"mr-1"},null,l,t)),a(`<span class="text-caption text-grey" data-v-382f4301${t}> Drag the image or move the crop area to adjust your thumbnail. The thumbnail will be displayed in 16:9 ratio across the platform. </span></div>`)})),_:1},t,r)),l(V(xe,null,null,t,r)),l(V(fe,{class:"pa-4"},{default:v(((a,l,t,r)=>{if(!l)return[i(ye),i(K,{color:"grey",variant:"text",disabled:c.value||e.isUploading,onClick:closeDialog},{default:v((()=>[h(" Cancel ")])),_:1},8,["disabled"]),i(K,{color:"primary",loading:c.value||e.isUploading,disabled:!s.value||c.value||e.isUploading,onClick:applyCrop},{default:v((()=>[h(b(c.value||e.isUploading?g.value:"Save Changes"),1)])),_:1},8,["loading","disabled"])];l(V(ye,null,null,t,r)),l(V(K,{color:"grey",variant:"text",disabled:c.value||e.isUploading,onClick:closeDialog},{default:v(((e,a,l,t)=>{if(!a)return[h(" Cancel ")];a(" Cancel ")})),_:1},t,r)),l(V(K,{color:"primary",loading:c.value||e.isUploading,disabled:!s.value||c.value||e.isUploading,onClick:applyCrop},{default:v(((a,l,t,i)=>{if(!l)return[h(b(c.value||e.isUploading?g.value:"Save Changes"),1)];l(`${U(c.value||e.isUploading?g.value:"Save Changes")}`)})),_:1},t,r))})),_:1},t,r))})),_:1},t,r))})),_:1},t)),l("</div></div>")}}},Ie=Le.setup;Le.setup=(e,l)=>{const t=a();return(t.modules||(t.modules=new Set)).add("components/media/MediaThumbnailUpload.vue"),Ie?Ie(e,l):void 0};const Be=X(Le,[["__scopeId","data-v-382f4301"]]),Ne=Symbol.for("vuetify:v-slider");const Ae=F({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>"boolean"==typeof e||"always"===e},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>"boolean"==typeof e||"always"===e},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...T(),...$({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),We=F({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...z()},"VSliderThumb"),Ke=M()({name:"VSliderThumb",directives:{Ripple:E},props:We(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:u,emit:n}=a;const d=l(Ne),{isRtl:c,rtlClasses:v}=R();if(!d)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:m,step:p,disabled:h,thumbSize:f,thumbLabel:b,direction:g,isReversed:y,vertical:x,readonly:_,elevation:w,mousePressed:k,decimals:S,indexFromEnd:j}=d,{textColorClasses:U,textColorStyles:V}=D(m),{pageup:C,pagedown:P,end:F,home:T,left:$,right:z,down:M,up:E}=Y,N=[C,P,F,T,$,z,M,E],A=t((()=>p.value?[1,2,3]:[1,5,10]));function onKeydown(a){const l=function(a,l){if(!N.includes(a.key))return;a.preventDefault();const t=p.value||.1,i=(e.max-e.min)/t;if([$,z,M,E].includes(a.key)){const e=(x.value?[c.value?$:z,y.value?M:E]:j.value!==c.value?[$,E]:[z,E]).includes(a.key)?1:-1,i=a.shiftKey?2:a.ctrlKey?1:0;l+=e*t*A.value[i]}else a.key===T?l=e.min:a.key===F?l=e.max:l-=(a.key===P?1:-1)*t*(i>100?i/10:10);return Math.max(e.min,Math.min(e.max,l))}(a,e.modelValue);null!=l&&n("update:modelValue",l)}return L((()=>{const a=I(j.value?100-e.position:e.position,"%"),{elevationClasses:l}=B(t((()=>h.value?void 0:w.value)));return i("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&k.value},e.class,v.value],style:[{"--v-slider-thumb-position":a,"--v-slider-thumb-size":I(f.value)},e.style],role:"slider",tabindex:h.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!_.value,"aria-orientation":g.value,onKeydown:_.value?void 0:onKeydown},[i("div",{class:["v-slider-thumb__surface",U.value,l.value],style:{...V.value}},null),r(i("div",{class:["v-slider-thumb__ripple",U.value],style:V.value},null),[[o("ripple"),e.ripple,null,{circle:!0,center:!0}]]),i(te,{origin:"bottom center"},{default:()=>{var a,l;return[r(i("div",{class:"v-slider-thumb__label-container"},[i("div",{class:["v-slider-thumb__label"]},[i("div",null,[null!=(a=null==(l=u["thumb-label"])?void 0:l.call(u,{modelValue:e.modelValue}))?a:e.modelValue.toFixed(p.value?S.value:1)])])]),[[s,b.value&&e.focused||"always"===b.value]])]}})])})),{}}}),Oe=F({start:{type:Number,required:!0},stop:{type:Number,required:!0},...z()},"VSliderTrack"),qe=M()({name:"VSliderTrack",props:Oe(),emits:{},setup(e,a){let{slots:r}=a;const o=l(Ne);if(!o)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:s,parsedTicks:u,rounded:n,showTicks:d,tickSize:c,trackColor:v,trackFillColor:m,trackSize:p,vertical:h,min:f,max:b,indexFromEnd:g}=o,{roundedClasses:y}=N(n),{backgroundColorClasses:x,backgroundColorStyles:_}=A(m),{backgroundColorClasses:w,backgroundColorStyles:k}=A(v),S=t((()=>`inset-${h.value?"block":"inline"}-${g.value?"end":"start"}`)),j=t((()=>h.value?"height":"width")),U=t((()=>({[S.value]:"0%",[j.value]:"100%"}))),V=t((()=>e.stop-e.start)),C=t((()=>({[S.value]:I(e.start,"%"),[j.value]:I(V.value,"%")}))),P=t((()=>{if(!d.value)return[];return(h.value?u.value.slice().reverse():u.value).map(((a,l)=>{var t,o;const s=a.value!==f.value&&a.value!==b.value?I(a.position,"%"):void 0;return i("div",{key:a.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":a.position>=e.start&&a.position<=e.stop,"v-slider-track__tick--first":a.value===f.value,"v-slider-track__tick--last":a.value===b.value}],style:{[S.value]:s}},[(a.label||r["tick-label"])&&i("div",{class:"v-slider-track__tick-label"},[null!=(t=null==(o=r["tick-label"])?void 0:o.call(r,{tick:a,index:l}))?t:a.label])])}))}));return L((()=>i("div",{class:["v-slider-track",y.value,e.class],style:[{"--v-slider-track-size":I(p.value),"--v-slider-tick-size":I(c.value)},e.style]},[i("div",{class:["v-slider-track__background",w.value,{"v-slider-track__background--opacity":!!s.value||!m.value}],style:{...U.value,...k.value}},null),i("div",{class:["v-slider-track__fill",x.value],style:{...C.value,..._.value}},null),d.value&&i("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":"always"===d.value}]},[P.value])]))),{}}}),He=F({...we(),...Ae(),...ke(),modelValue:{type:[Number,String],default:0}},"VSlider"),Qe=M()({name:"VSlider",props:He(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,a){let{slots:l,emit:r}=a;const o=u(),{rtlClasses:s}=R(),c=(e=>{const a=t((()=>parseFloat(e.min))),l=t((()=>parseFloat(e.max))),i=t((()=>+e.step>0?parseFloat(e.step):0)),r=t((()=>Math.max(Q(i.value),Q(a.value))));return{min:a,max:l,step:i,decimals:r,roundValue:function(e){if(e=parseFloat(e),i.value<=0)return e;const t=J(e,a.value,l.value),o=a.value%i.value,s=Math.round((t-o)/i.value)*i.value+o;return parseFloat(Math.min(s,l.value).toFixed(r.value))}}})(e),v=W(e,"modelValue",void 0,(e=>c.roundValue(null==e?c.min.value:e))),{min:m,max:p,mousePressed:h,roundValue:f,onSliderMousedown:b,onSliderTouchstart:g,trackContainerRef:y,position:k,hasLabels:S,readonly:j}=(e=>{let{props:a,steps:l,onSliderStart:i,onSliderMove:r,onSliderEnd:o,getActiveThumb:s}=e;const{isRtl:n}=R(),d=x(a,"reverse"),c=t((()=>"vertical"===a.direction)),v=t((()=>c.value!==d.value)),{min:m,max:p,step:h,decimals:f,roundValue:b}=l,g=t((()=>parseInt(a.thumbSize,10))),y=t((()=>parseInt(a.tickSize,10))),k=t((()=>parseInt(a.trackSize,10))),S=t((()=>(p.value-m.value)/h.value)),j=x(a,"disabled"),U=t((()=>{var e;return a.error||a.disabled?void 0:null!=(e=a.thumbColor)?e:a.color})),V=t((()=>{var e;return a.error||a.disabled?void 0:null!=(e=a.trackColor)?e:a.color})),C=t((()=>{var e;return a.error||a.disabled?void 0:null!=(e=a.trackFillColor)?e:a.color})),P=_(!1),F=_(0),T=u(),$=u();function parseMouseMove(e){var l;const t="vertical"===a.direction,i=t?"top":"left",r=t?"height":"width",o=t?"clientY":"clientX",{[i]:s,[r]:u}=null==(l=T.value)?void 0:l.$el.getBoundingClientRect(),d=function(e,a){return"touches"in e&&e.touches.length?e.touches[0][a]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][a]:e[a]}(e,o);let c=Math.min(Math.max((d-s-F.value)/u,0),1)||0;return(t?v.value:v.value!==n.value)&&(c=1-c),b(m.value+c*(p.value-m.value))}const handleStop=e=>{o({value:parseMouseMove(e)}),P.value=!1,F.value=0},handleStart=e=>{$.value=s(e),$.value&&($.value.focus(),P.value=!0,$.value.contains(e.target)?F.value=function(e,a,l){const t="vertical"===l,i=a.getBoundingClientRect(),r="touches"in e?e.touches[0]:e;return t?r.clientY-(i.top+i.height/2):r.clientX-(i.left+i.width/2)}(e,$.value,a.direction):(F.value=0,r({value:parseMouseMove(e)})),i({value:parseMouseMove(e)}))},z={passive:!0,capture:!0};function onMouseMove(e){r({value:parseMouseMove(e)})}function onSliderMouseUp(e){e.stopPropagation(),e.preventDefault(),handleStop(e),(void 0).removeEventListener("mousemove",onMouseMove,z),(void 0).removeEventListener("mouseup",onSliderMouseUp)}function onSliderTouchend(e){var a;handleStop(e),(void 0).removeEventListener("touchmove",onMouseMove,z),null==(a=e.target)||a.removeEventListener("touchend",onSliderTouchend)}const position=e=>{const a=(e-m.value)/(p.value-m.value)*100;return J(isNaN(a)?0:a,0,100)},M=x(a,"showTicks"),E=t((()=>M.value?a.ticks?Array.isArray(a.ticks)?a.ticks.map((e=>({value:e,position:position(e),label:e.toString()}))):Object.keys(a.ticks).map((e=>({value:parseFloat(e),position:position(parseFloat(e)),label:a.ticks[e]}))):S.value!==1/0?G(S.value+1).map((e=>{const a=m.value+e*h.value;return{value:a,position:position(a)}})):[]:[])),D=t((()=>E.value.some((e=>{let{label:a}=e;return!!a})))),L={activeThumbRef:$,color:x(a,"color"),decimals:f,disabled:j,direction:x(a,"direction"),elevation:x(a,"elevation"),hasLabels:D,isReversed:d,indexFromEnd:v,min:m,max:p,mousePressed:P,numTicks:S,onSliderMousedown:function(e){e.preventDefault(),handleStart(e),(void 0).addEventListener("mousemove",onMouseMove,z),(void 0).addEventListener("mouseup",onSliderMouseUp,{passive:!1})},onSliderTouchstart:function(e){var a;handleStart(e),(void 0).addEventListener("touchmove",onMouseMove,z),null==(a=e.target)||a.addEventListener("touchend",onSliderTouchend,{passive:!1})},parsedTicks:E,parseMouseMove:parseMouseMove,position:position,readonly:x(a,"readonly"),rounded:x(a,"rounded"),roundValue:b,showTicks:M,startOffset:F,step:h,thumbSize:g,thumbColor:U,thumbLabel:x(a,"thumbLabel"),ticks:x(a,"ticks"),tickSize:y,trackColor:V,trackContainerRef:T,trackFillColor:C,trackSize:k,vertical:c};return w(Ne,L),L})({props:e,steps:c,onSliderStart:()=>{r("start",v.value)},onSliderEnd:e=>{let{value:a}=e;const l=f(a);v.value=l,r("end",l)},onSliderMove:e=>{let{value:a}=e;return v.value=f(a)},getActiveThumb:()=>{var e;return null==(e=o.value)?void 0:e.$el}}),{isFocused:U,focus:V,blur:C}=Se(e),P=t((()=>k(v.value)));return L((()=>{const a=je.filterProps(e),t=!!(e.label||l.label||l.prepend);return i(je,n({class:["v-slider",{"v-slider--has-labels":!!l["tick-label"]||S.value,"v-slider--focused":U.value,"v-slider--pressed":h.value,"v-slider--disabled":e.disabled},s.value,e.class],style:e.style},a,{focused:U.value}),{...l,prepend:t?a=>{var t,r,o;return i(d,null,[null!=(t=null==(r=l.label)?void 0:r.call(l,a))?t:e.label?i(Ue,{id:a.id.value,class:"v-slider__label",text:e.label},null):void 0,null==(o=l.prepend)?void 0:o.call(l,a)])}:void 0,default:a=>{let{id:t,messagesId:r}=a;return i("div",{class:"v-slider__container",onMousedown:j.value?void 0:b,onTouchstartPassive:j.value?void 0:g},[i("input",{id:t.value,name:e.name||t.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:v.value},null),i(qe,{ref:y,start:0,stop:P.value},{"tick-label":l["tick-label"]}),i(Ke,{ref:o,"aria-describedby":r.value,focused:U.value,min:m.value,max:p.value,modelValue:v.value,"onUpdate:modelValue":e=>v.value=e,position:P.value,elevation:e.elevation,onFocus:V,onBlur:C,ripple:e.ripple},{"thumb-label":l["thumb-label"]})])}})})),{}}}),Ge="/images/default-thumbnail.jpg",Xe=c({__name:"VideoPreview",__ssrInlineRender:!0,props:{videoId:{},videoUrl:{default:null},thumbnailUrl:{default:null},width:{default:"100%"},height:{default:"200px"}},emits:["play","pause","error"],setup(e,{expose:a,emit:l}){const o=e,d=l,c=u("loading"),g=u(0),x=u(0),_=u(0),w=u(null),S=u(null),F=u(null),T=u(!1),$=u(!0),z=u(!1),M=t((()=>"number"==typeof o.width?`${o.width}px`:o.width)),E=t((()=>"number"==typeof o.height?`${o.height}px`:o.height)),formatTime=e=>{const a=Math.floor(e%60);return`${Math.floor(e/60)}:${String(a).padStart(2,"0")}`},R=t((()=>formatTime(g.value))),D=t((()=>formatTime(x.value))),play=()=>{w.value&&"no_url"!==c.value&&"error"!==c.value&&(w.value.play().catch(onVideoError),d("play",o.videoId))},pause=()=>{var e;null==(e=w.value)||e.pause()},togglePlayPause=()=>{"playing"===c.value?pause():play()},toggleMute=()=>{$.value=!$.value,w.value&&(w.value.muted=$.value)},toggleFullscreen=()=>{var e;(void 0).fullscreenElement?(void 0).exitFullscreen():null==(e=S.value)||e.requestFullscreen()},cleanup=()=>{F.value&&(F.value.destroy(),F.value=null),w.value&&(w.value.removeAttribute("src"),w.value.load()),g.value=0,x.value=0,_.value=0},handleSeek=e=>{w.value&&0!==g.value&&(w.value.currentTime=e/100*g.value)},onVideoError=e=>{console.error("Video error:",e),c.value="error",d("error",o.videoId)};return k((()=>o.videoUrl),(e=>{e?(e=>{if(cleanup(),w.value)if(c.value="loading",w.value.muted=$.value,e.includes(".m3u8"))if(_e.isSupported()){const a=new _e({debug:!1,enableWorker:!0,lowLatencyMode:!1,backBufferLength:90,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,maxStarvationDelay:4,maxLoadingDelay:4,xhrSetup:e=>{e.withCredentials=!1},fetchSetup:(e,a)=>new Request(e.url,{...a,mode:"cors",credentials:"omit"})});F.value=a,a.on(_e.Events.MEDIA_ATTACHED,(()=>{console.log("HLS media attached")})),a.on(_e.Events.MANIFEST_PARSED,((e,a)=>{console.log("HLS manifest parsed, found",a.levels.length,"quality levels")})),a.on(_e.Events.ERROR,((e,l)=>{if(console.error("HLS error:",l),l.fatal)switch(l.type){case _e.ErrorTypes.NETWORK_ERROR:console.error("Fatal network error, trying to recover"),a.startLoad();break;case _e.ErrorTypes.MEDIA_ERROR:console.error("Fatal media error, trying to recover"),a.recoverMediaError();break;default:console.error("Fatal error, cannot recover"),onVideoError(l)}})),a.loadSource(e),a.attachMedia(w.value)}else w.value.canPlayType("application/vnd.apple.mpegurl")?w.value.src=e:(console.error("HLS not supported"),onVideoError("HLS not supported"));else w.value.src=e})(e):(c.value="no_url",cleanup())}),{immediate:!0}),a({play:play,pause:pause}),(e,a,l,t)=>{a(`<div${j(n({ref_key:"wrapperRef",ref:S,class:"video-preview-wrapper",style:{width:M.value,height:E.value},tabindex:"0"},t))} data-v-a7b3eddf><div class="video-container" data-v-a7b3eddf><video class="${C([{"is-playing":"playing"===c.value},"video-element"])}" preload="metadata" loop playsinline crossorigin="anonymous" data-v-a7b3eddf></video>`),a(V(ie,null,{default:v(((a,l,t,o)=>{if(!l)return[r(i("div",{class:"overlay-container"},[i(ve,{src:e.thumbnailUrl||Ge,"lazy-src":Ge,class:"thumbnail-image","aspect-ratio":"16/9",cover:""},{placeholder:v((()=>[i("div",{class:"d-flex align-center justify-center fill-height"},[i(O,{indeterminate:"",color:"grey-lighten-4"})])])),_:1},8,["src"]),"no_url"===c.value?(m(),p("div",{key:0,class:"overlay-content"},[i(q,{size:"48",color:"grey-lighten-2"},{default:v((()=>[h("mdi-video-off")])),_:1}),i("p",{class:"text-caption mt-2 text-grey-lighten-1"}," Video is processing... ")])):f("",!0),"loading"===c.value?(m(),p("div",{key:1,class:"overlay-content"},[i(O,{indeterminate:"",color:"white",size:"48"})])):f("",!0),"error"===c.value?(m(),p("div",{key:2,class:"overlay-content error-state"},[i(q,{size:"48",color:"error"},{default:v((()=>[h("mdi-alert-circle-outline")])),_:1}),i("p",{class:"text-caption mt-2"},"Could not load video.")])):f("",!0),"idle"===c.value||"paused"===c.value?(m(),p("div",{key:3,class:"play-button-overlay",onClick:y(play,["stop"])},[i(K,{icon:"mdi-play-circle",color:"white",size:"x-large",variant:"text",ripple:!1})])):f("",!0)],512),[[s,"playing"!==c.value]])];l(`<div style="${P("playing"!==c.value?null:{display:"none"})}" class="overlay-container" data-v-a7b3eddf${o}>`),l(V(ve,{src:e.thumbnailUrl||Ge,"lazy-src":Ge,class:"thumbnail-image","aspect-ratio":"16/9",cover:""},{placeholder:v(((e,a,l,t)=>{if(!a)return[i("div",{class:"d-flex align-center justify-center fill-height"},[i(O,{indeterminate:"",color:"grey-lighten-4"})])];a(`<div class="d-flex align-center justify-center fill-height" data-v-a7b3eddf${t}>`),a(V(O,{indeterminate:"",color:"grey-lighten-4"},null,l,t)),a("</div>")})),_:1},t,o)),"no_url"===c.value?(l(`<div class="overlay-content" data-v-a7b3eddf${o}>`),l(V(q,{size:"48",color:"grey-lighten-2"},{default:v(((e,a,l,t)=>{if(!a)return[h("mdi-video-off")];a("mdi-video-off")})),_:1},t,o)),l(`<p class="text-caption mt-2 text-grey-lighten-1" data-v-a7b3eddf${o}> Video is processing... </p></div>`)):l("\x3c!----\x3e"),"loading"===c.value?(l(`<div class="overlay-content" data-v-a7b3eddf${o}>`),l(V(O,{indeterminate:"",color:"white",size:"48"},null,t,o)),l("</div>")):l("\x3c!----\x3e"),"error"===c.value?(l(`<div class="overlay-content error-state" data-v-a7b3eddf${o}>`),l(V(q,{size:"48",color:"error"},{default:v(((e,a,l,t)=>{if(!a)return[h("mdi-alert-circle-outline")];a("mdi-alert-circle-outline")})),_:1},t,o)),l(`<p class="text-caption mt-2" data-v-a7b3eddf${o}>Could not load video.</p></div>`)):l("\x3c!----\x3e"),"idle"===c.value||"paused"===c.value?(l(`<div class="play-button-overlay" data-v-a7b3eddf${o}>`),l(V(K,{icon:"mdi-play-circle",color:"white",size:"x-large",variant:"text",ripple:!1},null,t,o)),l("</div>")):l("\x3c!----\x3e"),l("</div>")})),_:1},l)),a(V(ie,null,{default:v(((e,a,l,t)=>{if(!a)return[r(i("div",{class:"controls-bar"},[i(K,{icon:"",size:"small",variant:"text",color:"white",onClick:y(togglePlayPause,["stop"])},{default:v((()=>[i(q,null,{default:v((()=>[h(b("playing"===c.value?"mdi-pause":"mdi-play"),1)])),_:1})])),_:1}),i(K,{icon:"",size:"small",variant:"text",color:"white",onClick:y(toggleMute,["stop"])},{default:v((()=>[i(q,null,{default:v((()=>[h(b($.value?"mdi-volume-off":"mdi-volume-high"),1)])),_:1})])),_:1}),i("span",{class:"time-display text-white text-caption mx-2"},b(D.value)+" / "+b(R.value),1),i(Qe,{modelValue:_.value,"onUpdate:modelValue":[e=>_.value=e,handleSeek],class:"mx-2",color:"red","track-color":"grey-darken-1","thumb-color":"red",density:"compact",max:100,step:.1,"hide-details":"",onClick:y((()=>{}),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"]),i(K,{icon:"",size:"small",variant:"text",color:"white",onClick:y(toggleFullscreen,["stop"])},{default:v((()=>[i(q,null,{default:v((()=>[h(b(z.value?"mdi-fullscreen-exit":"mdi-fullscreen"),1)])),_:1})])),_:1})],512),[[s,(T.value||"paused"===c.value)&&"no_url"!==c.value&&"loading"!==c.value&&"error"!==c.value]])];a(`<div style="${P(!T.value&&"paused"!==c.value||"no_url"===c.value||"loading"===c.value||"error"===c.value?{display:"none"}:null)}" class="controls-bar" data-v-a7b3eddf${t}>`),a(V(K,{icon:"",size:"small",variant:"text",color:"white",onClick:togglePlayPause},{default:v(((e,a,l,t)=>{if(!a)return[i(q,null,{default:v((()=>[h(b("playing"===c.value?"mdi-pause":"mdi-play"),1)])),_:1})];a(V(q,null,{default:v(((e,a,l,t)=>{if(!a)return[h(b("playing"===c.value?"mdi-pause":"mdi-play"),1)];a(`${U("playing"===c.value?"mdi-pause":"mdi-play")}`)})),_:1},l,t))})),_:1},l,t)),a(V(K,{icon:"",size:"small",variant:"text",color:"white",onClick:toggleMute},{default:v(((e,a,l,t)=>{if(!a)return[i(q,null,{default:v((()=>[h(b($.value?"mdi-volume-off":"mdi-volume-high"),1)])),_:1})];a(V(q,null,{default:v(((e,a,l,t)=>{if(!a)return[h(b($.value?"mdi-volume-off":"mdi-volume-high"),1)];a(`${U($.value?"mdi-volume-off":"mdi-volume-high")}`)})),_:1},l,t))})),_:1},l,t)),a(`<span class="time-display text-white text-caption mx-2" data-v-a7b3eddf${t}>${U(D.value)} / ${U(R.value)}</span>`),a(V(Qe,{modelValue:_.value,"onUpdate:modelValue":[e=>_.value=e,handleSeek],class:"mx-2",color:"red","track-color":"grey-darken-1","thumb-color":"red",density:"compact",max:100,step:.1,"hide-details":"",onClick:()=>{}},null,l,t)),a(V(K,{icon:"",size:"small",variant:"text",color:"white",onClick:toggleFullscreen},{default:v(((e,a,l,t)=>{if(!a)return[i(q,null,{default:v((()=>[h(b(z.value?"mdi-fullscreen-exit":"mdi-fullscreen"),1)])),_:1})];a(V(q,null,{default:v(((e,a,l,t)=>{if(!a)return[h(b(z.value?"mdi-fullscreen-exit":"mdi-fullscreen"),1)];a(`${U(z.value?"mdi-fullscreen-exit":"mdi-fullscreen")}`)})),_:1},l,t))})),_:1},l,t)),a("</div>")})),_:1},l)),a("</div></div>")}}}),Ze=Xe.setup;Xe.setup=(e,l)=>{const t=a();return(t.modules||(t.modules=new Set)).add("components/upload/VideoPreview.vue"),Ze?Ze(e,l):void 0};const Je=X(Xe,[["__scopeId","data-v-a7b3eddf"]]),Ye=c({__name:"PremieringProjectDetail",__ssrInlineRender:!0,props:{project:{}},setup(a){var l,t,r,o;const s=a,n=ae(),{$axios:d}=H(),c=le(),m=u(null!=(l=null==(r=s.project)?void 0:r.name)?l:""),p=u(null!=(t=null==(o=s.project)?void 0:o.description)?t:""),h=u(!1),f=u(!1),g=u(null),y=u(null);let x=null;const _=u(null),w=u(null),S=u(null);function handlePlay(e){var a,l;S.value&&S.value!==e&&("main"===S.value?null==(a=_.value)||a.pause():null==(l=w.value)||l.pause()),S.value=e}function handlePause(e){S.value===e&&(S.value=null)}function scheduleSave(e){x&&clearTimeout(x),x=setTimeout((()=>{!async function(e){var a,l,t;if(!(null==(a=s.project)?void 0:a.access_uuid))return;h.value=!0,y.value=null;try{const{data:a}=await d.put(`/api/studio/projects/${s.project.access_uuid}/draft`,e);c.updateProject(a),g.value=new Date,n.success("Project details saved")}catch(e){y.value=(null==(t=null==(l=e.response)?void 0:l.data)?void 0:t.message)||"Failed to save",n.error("Failed to save project details")}finally{h.value=!1}}(e)}),1e3)}function handleThumbnailUploadStart(){f.value=!0}function handleThumbnailUploadComplete(e){e||(f.value=!1)}async function handleThumbnailUpdate(e){var a;if(null==(a=s.project)?void 0:a.access_uuid){f.value=!0;try{const{uploadFile:a}=Ve(),l=await a(e,`/api/studio/projects/${s.project.access_uuid}/thumbnail/upload-url`,`/api/studio/projects/${s.project.access_uuid}/thumbnail/confirm`,{onProgress:e=>{}});c.updateProject({...s.project,thumbnail_url:l.thumbnail_url}),n.success("Thumbnail updated successfully")}catch(e){console.error("Error updating thumbnail:",e),n.error("Failed to update thumbnail")}finally{f.value=!1}}}return k(m,(e=>{scheduleSave({name:e})})),k(p,(e=>{scheduleSave({description:e})})),(a,l,t,r)=>{const o=e,s=ze,u=De,n=Be;a.project?l(V(o,r,{default:v(((e,l,t,r)=>{if(!l)return[i("div",{class:"header-actions mb-5"},[i("div",{class:"header-actions-left"},[i(s,{"project-name":m.value,"is-saving":h.value,"last-saved-at":g.value,"save-error":y.value},null,8,["project-name","is-saving","last-saved-at","save-error"])])]),i(Ce,null,{default:v((()=>[i(Pe,{cols:"12",md:"8",class:"pb-2"},{default:v((()=>[i("div",{class:"input-group"},[i(de,{modelValue:m.value,"onUpdate:modelValue":e=>m.value=e,label:"Project Name",variant:"outlined",class:"mb-3",rules:[e=>!!e||"Project name is required"],required:"",placeholder:"Enter your project name",disabled:h.value,density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","rules","disabled"]),i(Fe,{modelValue:p.value,"onUpdate:modelValue":e=>p.value=e,label:"Description",variant:"outlined",rows:"2","auto-grow":"",class:"mb-1",counter:5e3,rules:[e=>!e||e.length<=5e3||"Max 5000 characters"],placeholder:"Tell viewers about your video",disabled:h.value,density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","rules","disabled"]),i("div",{class:["char-count mb-3",{"error--text":p.value.length>5e3}]},b(p.value.length)+" / 5000 ",3)]),i(u,{project:a.project,class:"mb-5"},null,8,["project"]),i("div",{class:"thumbnail-section"},[i(n,{"thumbnail-url":a.project.thumbnail_url,"is-uploading":f.value,"onUpdate:thumbnail":handleThumbnailUpdate,"onUpload:start":handleThumbnailUploadStart,"onUpload:complete":handleThumbnailUploadComplete},null,8,["thumbnail-url","is-uploading"])])])),_:1}),i(Pe,{cols:"12",md:"4",class:"pb-2"},{default:v((()=>[i("div",{class:"preview-section"},[i("h3",{class:"text-subtitle-1 mb-2"},"Main Video Preview"),i(Je,{ref_key:"mainVideoPlayer",ref:_,"video-id":"main","video-url":a.project.project_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause,class:"mb-4"},null,8,["video-url","thumbnail-url"]),i("h3",{class:"text-subtitle-1 mb-2"},"Trailer Preview"),i(Je,{ref_key:"trailerVideoPlayer",ref:w,"video-id":"trailer","video-url":a.project.trailer_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause},null,8,["video-url","thumbnail-url"])])])),_:1})])),_:1})];l(`<div class="header-actions mb-5" data-v-fd66940f${r}><div class="header-actions-left" data-v-fd66940f${r}>`),l(V(s,{"project-name":m.value,"is-saving":h.value,"last-saved-at":g.value,"save-error":y.value},null,t,r)),l("</div></div>"),l(V(Ce,null,{default:v(((e,l,t,r)=>{if(!l)return[i(Pe,{cols:"12",md:"8",class:"pb-2"},{default:v((()=>[i("div",{class:"input-group"},[i(de,{modelValue:m.value,"onUpdate:modelValue":e=>m.value=e,label:"Project Name",variant:"outlined",class:"mb-3",rules:[e=>!!e||"Project name is required"],required:"",placeholder:"Enter your project name",disabled:h.value,density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","rules","disabled"]),i(Fe,{modelValue:p.value,"onUpdate:modelValue":e=>p.value=e,label:"Description",variant:"outlined",rows:"2","auto-grow":"",class:"mb-1",counter:5e3,rules:[e=>!e||e.length<=5e3||"Max 5000 characters"],placeholder:"Tell viewers about your video",disabled:h.value,density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","rules","disabled"]),i("div",{class:["char-count mb-3",{"error--text":p.value.length>5e3}]},b(p.value.length)+" / 5000 ",3)]),i(u,{project:a.project,class:"mb-5"},null,8,["project"]),i("div",{class:"thumbnail-section"},[i(n,{"thumbnail-url":a.project.thumbnail_url,"is-uploading":f.value,"onUpdate:thumbnail":handleThumbnailUpdate,"onUpload:start":handleThumbnailUploadStart,"onUpload:complete":handleThumbnailUploadComplete},null,8,["thumbnail-url","is-uploading"])])])),_:1}),i(Pe,{cols:"12",md:"4",class:"pb-2"},{default:v((()=>[i("div",{class:"preview-section"},[i("h3",{class:"text-subtitle-1 mb-2"},"Main Video Preview"),i(Je,{ref_key:"mainVideoPlayer",ref:_,"video-id":"main","video-url":a.project.project_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause,class:"mb-4"},null,8,["video-url","thumbnail-url"]),i("h3",{class:"text-subtitle-1 mb-2"},"Trailer Preview"),i(Je,{ref_key:"trailerVideoPlayer",ref:w,"video-id":"trailer","video-url":a.project.trailer_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause},null,8,["video-url","thumbnail-url"])])])),_:1})];l(V(Pe,{cols:"12",md:"8",class:"pb-2"},{default:v(((e,l,t,r)=>{if(!l)return[i("div",{class:"input-group"},[i(de,{modelValue:m.value,"onUpdate:modelValue":e=>m.value=e,label:"Project Name",variant:"outlined",class:"mb-3",rules:[e=>!!e||"Project name is required"],required:"",placeholder:"Enter your project name",disabled:h.value,density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","rules","disabled"]),i(Fe,{modelValue:p.value,"onUpdate:modelValue":e=>p.value=e,label:"Description",variant:"outlined",rows:"2","auto-grow":"",class:"mb-1",counter:5e3,rules:[e=>!e||e.length<=5e3||"Max 5000 characters"],placeholder:"Tell viewers about your video",disabled:h.value,density:"comfortable"},null,8,["modelValue","onUpdate:modelValue","rules","disabled"]),i("div",{class:["char-count mb-3",{"error--text":p.value.length>5e3}]},b(p.value.length)+" / 5000 ",3)]),i(u,{project:a.project,class:"mb-5"},null,8,["project"]),i("div",{class:"thumbnail-section"},[i(n,{"thumbnail-url":a.project.thumbnail_url,"is-uploading":f.value,"onUpdate:thumbnail":handleThumbnailUpdate,"onUpload:start":handleThumbnailUploadStart,"onUpload:complete":handleThumbnailUploadComplete},null,8,["thumbnail-url","is-uploading"])])];l(`<div class="input-group" data-v-fd66940f${r}>`),l(V(de,{modelValue:m.value,"onUpdate:modelValue":e=>m.value=e,label:"Project Name",variant:"outlined",class:"mb-3",rules:[e=>!!e||"Project name is required"],required:"",placeholder:"Enter your project name",disabled:h.value,density:"comfortable"},null,t,r)),l(V(Fe,{modelValue:p.value,"onUpdate:modelValue":e=>p.value=e,label:"Description",variant:"outlined",rows:"2","auto-grow":"",class:"mb-1",counter:5e3,rules:[e=>!e||e.length<=5e3||"Max 5000 characters"],placeholder:"Tell viewers about your video",disabled:h.value,density:"comfortable"},null,t,r)),l(`<div class="${C([{"error--text":p.value.length>5e3},"char-count mb-3"])}" data-v-fd66940f${r}>${U(p.value.length)} / 5000 </div></div>`),l(V(u,{project:a.project,class:"mb-5"},null,t,r)),l(`<div class="thumbnail-section" data-v-fd66940f${r}>`),l(V(n,{"thumbnail-url":a.project.thumbnail_url,"is-uploading":f.value,"onUpdate:thumbnail":handleThumbnailUpdate,"onUpload:start":handleThumbnailUploadStart,"onUpload:complete":handleThumbnailUploadComplete},null,t,r)),l("</div>")})),_:1},t,r)),l(V(Pe,{cols:"12",md:"4",class:"pb-2"},{default:v(((e,l,t,r)=>{if(!l)return[i("div",{class:"preview-section"},[i("h3",{class:"text-subtitle-1 mb-2"},"Main Video Preview"),i(Je,{ref_key:"mainVideoPlayer",ref:_,"video-id":"main","video-url":a.project.project_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause,class:"mb-4"},null,8,["video-url","thumbnail-url"]),i("h3",{class:"text-subtitle-1 mb-2"},"Trailer Preview"),i(Je,{ref_key:"trailerVideoPlayer",ref:w,"video-id":"trailer","video-url":a.project.trailer_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause},null,8,["video-url","thumbnail-url"])])];l(`<div class="preview-section" data-v-fd66940f${r}><h3 class="text-subtitle-1 mb-2" data-v-fd66940f${r}>Main Video Preview</h3>`),l(V(Je,{ref_key:"mainVideoPlayer",ref:_,"video-id":"main","video-url":a.project.project_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause,class:"mb-4"},null,t,r)),l(`<h3 class="text-subtitle-1 mb-2" data-v-fd66940f${r}>Trailer Preview</h3>`),l(V(Je,{ref_key:"trailerVideoPlayer",ref:w,"video-id":"trailer","video-url":a.project.trailer_url,"thumbnail-url":a.project.thumbnail_url,onPlay:handlePlay,onPause:handlePause},null,t,r)),l("</div>")})),_:1},t,r))})),_:1},t,r))})),_:1},t)):l("\x3c!----\x3e")}}}),ea=Ye.setup;Ye.setup=(e,l)=>{const t=a();return(t.modules||(t.modules=new Set)).add("components/premiering/PremieringProjectDetail.vue"),ea?ea(e,l):void 0};const aa=X(Ye,[["__scopeId","data-v-fd66940f"]]);export{aa as _};
