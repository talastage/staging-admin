import{d as e,u as t}from"./server.mjs";var r="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,s="object"==typeof self&&self&&self.Object===Object&&self,a=r||s||Function("return this")(),n=a.Symbol,o=Object.prototype,u=o.hasOwnProperty,i=o.toString,c=n?n.toStringTag:void 0;var l=Object.prototype.toString;var p=n?n.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":p&&p in Object(e)?function(e){var t=u.call(e,c),r=e[c];try{e[c]=void 0;var s=!0}catch(e){}var a=i.call(e);return s&&(t?e[c]=r:delete e[c]),a}(e):function(e){return l.call(e)}(e)}var f=/\s/;var d=/^\s+/;function baseTrim(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&f.test(e.charAt(t)););return t}(e)+1).replace(d,""):e}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var h=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,v=/^0o[0-7]+$/i,b=parseInt;function toNumber(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==baseGetTag(e)}(e))return NaN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var r=g.test(e);return r||v.test(e)?b(e.slice(2),r?2:8):h.test(e)?NaN:+e}var now=function(){return a.Date.now()},j=Math.max,m=Math.min;const y=e("searchApp",{state:()=>({searchResults:{projects:{results:[],total:0,current_page:1,per_page:18,last_page:1},users:{results:[],total:0,current_page:1,per_page:18,last_page:1}},loading:!1,error:null,lastQuery:""}),actions:{async search(e,r=1){const s=e.trim();if(s){if(1===r&&this.lastQuery===s&&this.searchResults.users.results.length>0)return this.searchResults;this.loading=!0,this.error=null,this.lastQuery=s;try{const{$axios:e}=t(),a=await e.get("/api/search/app",{params:{query:s,page:r}});return this.searchResults=1===r?{projects:{results:a.data.projects.results||[],total:a.data.projects.total,current_page:a.data.projects.current_page,per_page:a.data.projects.per_page,last_page:a.data.projects.last_page},users:{results:a.data.users.results||[],total:a.data.users.total,current_page:a.data.users.current_page,per_page:a.data.users.per_page,last_page:a.data.users.last_page}}:{projects:{...this.searchResults.projects,results:[...this.searchResults.projects.results,...a.data.projects.results||[]]},users:{...this.searchResults.users,results:[...this.searchResults.users.results,...a.data.users.results||[]]}},this.searchResults}catch(e){throw console.error("Search error:",e),this.error="Failed to perform search",e}finally{this.loading=!1}}},debouncedSearch:function(e,t,r){var s,a,n,o,u,i,c=0,l=!1,p=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function invokeFunc(t){var r=s,n=a;return s=a=void 0,c=t,o=e.apply(n,r)}function shouldInvoke(e){var r=e-i;return void 0===i||r>=t||r<0||p&&e-c>=n}function timerExpired(){var e=now();if(shouldInvoke(e))return trailingEdge(e);u=setTimeout(timerExpired,function(e){var r=t-(e-i);return p?m(r,n-(e-c)):r}(e))}function trailingEdge(e){return u=void 0,f&&s?invokeFunc(e):(s=a=void 0,o)}function debounced(){var e=now(),r=shouldInvoke(e);if(s=arguments,a=this,i=e,r){if(void 0===u)return function(e){return c=e,u=setTimeout(timerExpired,t),l?invokeFunc(e):o}(i);if(p)return clearTimeout(u),u=setTimeout(timerExpired,t),invokeFunc(i)}return void 0===u&&(u=setTimeout(timerExpired,t)),o}return t=toNumber(t)||0,isObject(r)&&(l=!!r.leading,n=(p="maxWait"in r)?j(toNumber(r.maxWait)||0,t):n,f="trailing"in r?!!r.trailing:f),debounced.cancel=function(){void 0!==u&&clearTimeout(u),c=0,s=i=a=u=void 0},debounced.flush=function(){return void 0===u?o:trailingEdge(now())},debounced}((function(e,t=1){return this.search(e,t)}),300),clearResults(){this.searchResults={projects:{results:[],total:0,current_page:1,per_page:18,last_page:1},users:{results:[],total:0,current_page:1,per_page:18,last_page:1}},this.error=null,this.lastQuery=""}}});export{y as u};
