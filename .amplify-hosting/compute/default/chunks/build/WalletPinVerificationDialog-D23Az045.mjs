import{B as e}from"./BaseDialog-DsGYlnLZ.mjs";import{useSSRContext as l,ref as a,computed as t,mergeProps as o,withCtx as r,createTextVNode as i,createVNode as n,toDisplayString as u,watch as s}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as m,ssrInterpolate as v}from"vue/server-renderer";import{u as c}from"./useWalletAuthStore-Uk84eIzt.mjs";import{b as p,_ as f}from"./server.mjs";import{V}from"./VForm-HRC00ryg.mjs";import{V as b}from"./VOtpInput-CwUg_E9q.mjs";import{V as y}from"./VAlert-DneVUU3Q.mjs";const g={__name:"WalletPinVerification",__ssrInlineRender:!0,emits:["verified","error","forgot-pin"],setup(e,{emit:l}){const s=l,f=c(),g=a(""),P=a(!1),_=a(""),I=t((()=>6===g.value.length)),verifyPin=async()=>{if(I.value){P.value=!0,_.value="";try{await f.verifyPin(g.value),s("verified"),g.value=""}catch(e){_.value=f.authError||"Invalid PIN. Please try again.",s("error",e)}finally{P.value=!1}}},forgotPin=()=>{s("forgot-pin")};return(e,l,a,t)=>{l(`<div${d(o({class:"wallet-pin-verification"},t))} data-v-5efbac82>`),l(m(V,{onSubmit:verifyPin},{default:r(((e,l,a,t)=>{if(!l)return[n(b,{modelValue:g.value,"onUpdate:modelValue":e=>g.value=e,length:6,type:"number",onFinish:verifyPin,class:"mb-4",disabled:P.value,placeholder:"•",autofocus:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),n(p,{color:"primary",type:"submit",loading:P.value,disabled:!I.value||P.value,block:"",elevation:"0"},{default:r((()=>[i(" Verify PIN ")])),_:1},8,["loading","disabled"])];l(m(b,{modelValue:g.value,"onUpdate:modelValue":e=>g.value=e,length:6,type:"number",onFinish:verifyPin,class:"mb-4",disabled:P.value,placeholder:"•",autofocus:""},null,a,t)),l(m(p,{color:"primary",type:"submit",loading:P.value,disabled:!I.value||P.value,block:"",elevation:"0"},{default:r(((e,l,a,t)=>{if(!l)return[i(" Verify PIN ")];l(" Verify PIN ")})),_:1},a,t))})),_:1},a)),l(m(p,{variant:"text",color:"primary",onClick:forgotPin,disabled:P.value,class:"mt-2"},{default:r(((e,l,a,t)=>{if(!l)return[i(" Forgot PIN? ")];l(" Forgot PIN? ")})),_:1},a)),_.value?l(m(y,{type:"error",class:"mt-4",density:"compact"},{default:r(((e,l,a,t)=>{if(!l)return[i(u(_.value),1)];l(`${v(_.value)}`)})),_:1},a)):l("\x3c!----\x3e"),l("</div>")}}},P=g.setup;g.setup=(e,a)=>{const t=l();return(t.modules||(t.modules=new Set)).add("components/wallet/WalletPinVerification.vue"),P?P(e,a):void 0};const _=f(g,[["__scopeId","data-v-5efbac82"]]),I={__name:"WalletPinVerificationDialog",__ssrInlineRender:!0,props:{modelValue:Boolean},emits:["update:modelValue","verified","error","forgot-pin"],setup(l,{emit:t}){const i=l,u=t,d=a(i.modelValue);s((()=>i.modelValue),(e=>{d.value=e})),s(d,(e=>{u("update:modelValue",e)}));const handleVerified=()=>{u("verified"),d.value=!1},handleError=e=>{u("error",e)},handleForgotPin=()=>{u("forgot-pin"),d.value=!1};return(l,a,t,i)=>{const u=_;a(m(e,o({modelValue:d.value,"onUpdate:modelValue":e=>d.value=e,title:"Verify Wallet PIN","max-width":"450px","show-close-button":!0},i),{default:r(((e,l,a,t)=>{if(!l)return[n("div",{class:"pa-4"},[n("p",{class:"text-body-1 text-center mb-6"}," Please enter your 6-digit wallet PIN to confirm this action "),n(u,{onVerified:handleVerified,onError:handleError,onForgotPin:handleForgotPin})])];l(`<div class="pa-4"${t}><p class="text-body-1 text-center mb-6"${t}> Please enter your 6-digit wallet PIN to confirm this action </p>`),l(m(u,{onVerified:handleVerified,onError:handleError,onForgotPin:handleForgotPin},null,a,t)),l("</div>")})),_:1},t))}}},h=I.setup;I.setup=(e,a)=>{const t=l();return(t.modules||(t.modules=new Set)).add("components/wallet/WalletPinVerificationDialog.vue"),h?h(e,a):void 0};export{I as _};
