import{useSSRContext as e,defineComponent as l,ref as a,computed as t,watch as u,mergeProps as r,withCtx as o,createTextVNode as i,toDisplayString as s,createVNode as d,openBlock as n,createBlock as m,createCommentVNode as c,Fragment as v,renderList as p}from"vue";import{ssrRenderAttrs as f,ssrRenderComponent as y,ssrInterpolate as V,ssrRenderList as g}from"vue/server-renderer";import{useRoute as _,useRouter as b}from"vue-router";import{_ as h,u as U,V as x}from"./server.mjs";import{V as k}from"./VContainer-By3q0af_.mjs";import{a as j}from"./VChip-f_o2BAA4.mjs";import{V as C}from"./VRow-rkX0LEXR.mjs";import{V as z}from"./VCol-CKxprC4g.mjs";import{V as $,b as B,a as w,d as I,e as q}from"./VCard-CsohsM82.mjs";import{V as O}from"./VSelect-BWLkvD3S.mjs";import{V as S}from"./VSwitch-DGucU0le.mjs";import{V as F}from"./VCombobox-CR2vKudT.mjs";import{V as Z}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{V as R}from"./VAvatar-JL8WKjry.mjs";import{V as T}from"./VImg-B2jcJjnn.mjs";import{V as A}from"./VPagination-DpVjYVUo.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";import"./index--K8ZrFMm.mjs";import"./VTextField-rd-VvEF8.mjs";import"./VCounter-BZE6l8kb.mjs";import"./VField-ZM6yOiXp.mjs";import"./VInput-DRJS2l97.mjs";import"./easing-Bn3h-KUg.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./VList-CcwwrkQR.mjs";import"./VListItem-jTLuICGb.mjs";import"./ssrBoot-BtvJZs44.mjs";import"./VDivider-BmyMVZMt.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"./VMenu-BpdBiT5v.mjs";import"./VOverlay-ZKavbTei.mjs";import"./VCheckboxBtn-v4ZZzD80.mjs";import"./VSelectionControl-BvLhSUlq.mjs";import"./filter-BWdoXH_J.mjs";const L=l({__name:"page_search_results",__ssrInlineRender:!0,setup(e){const l=_(),h=b(),{$axios:L}=U(),M=a(!1),D=a([]),J=a(0),K=a(1),X=a(15),E=a({query:"",category:null,country:null,verified:!1,interests:[]}),N=a("relevance"),P=[{title:"Most Relevant",value:"relevance"},{title:"Newest",value:"created_at"},{title:"Name A-Z",value:"name"},{title:"Verified First",value:"verified"}],W=t((()=>Math.ceil(J.value/X.value))),G=t((()=>Object.entries(E.value).reduce(((e,[l,a])=>(a&&("object"!=typeof a||a.length>0)&&(e[l]=a),e)),{}))),Q=t((()=>E.value.query?`Search results for "${E.value.query}"`:E.value.category?`${E.value.category} Pages`:"Search Results")),applyFilters=()=>{K.value=1,h.push({query:{...E.value,sort:N.value,page:K.value}})},removeFilter=e=>{Array.isArray(E.value[e])?E.value[e]=[]:E.value[e]=null,applyFilters()},handlePageChange=e=>{h.push({query:{...l.query,page:e}})},formatFilterLabel=(e,l)=>{switch(e){case"query":return`Search: ${l}`;case"category":return`Category: ${l}`;case"country":return`Country: ${l}`;case"verified":return"Verified Only";case"interests":return`Interests: ${l.join(", ")}`;default:return`${e}: ${l}`}};return u((()=>l.query),(e=>{E.value={query:e.q||"",category:e.category||null,country:e.country||null,verified:"true"===e.verified,interests:Array.isArray(e.interests)?e.interests:e.interests?[e.interests]:[]},N.value=e.sort||"relevance",K.value=Number(e.page)||1,(async()=>{try{M.value=!0;const{data:e}=await L.get("/api/pages/search",{params:{...E.value,sort_by:N.value,page:K.value,per_page:X.value}});D.value=e.data,J.value=e.meta.total}catch(e){console.error("Error fetching results:",e)}finally{M.value=!1}})()}),{immediate:!0}),(e,l,a,t)=>{l(`<div${f(r({class:"search-results-page"},t))} data-v-75d65dc7>`),l(y(k,null,{default:o(((l,a,t,u)=>{if(!a)return[d("div",{class:"search-header mb-6"},[d("h1",{class:"text-h4 mb-2"},s(Q.value),1),d("div",{class:"d-flex flex-wrap gap-2"},[(n(!0),m(v,null,p(G.value,((e,l)=>(n(),m(j,{key:l,closable:"","onClick:close":e=>removeFilter(l)},{default:o((()=>[i(s(formatFilterLabel(l,e)),1)])),_:2},1032,["onClick:close"])))),128))])]),d(C,null,{default:o((()=>[d(z,{cols:"12",md:"3"},{default:o((()=>[d($,null,{default:o((()=>[d(B,null,{default:o((()=>[i("Filters")])),_:1}),d(w,null,{default:o((()=>[d(O,{modelValue:E.value.category,"onUpdate:modelValue":[e=>E.value.category=e,applyFilters],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(O,{modelValue:E.value.country,"onUpdate:modelValue":[e=>E.value.country=e,applyFilters],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(S,{modelValue:E.value.verified,"onUpdate:modelValue":e=>E.value.verified=e,label:"Verified Only",onChange:applyFilters},null,8,["modelValue","onUpdate:modelValue"]),d(F,{modelValue:E.value.interests,"onUpdate:modelValue":[e=>E.value.interests=e,applyFilters],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"])])),_:1})])),_:1})])),_:1}),d(z,{cols:"12",md:"9"},{default:o((()=>[d("div",{class:"d-flex align-center justify-space-between mb-4"},[d("div",{class:"text-body-1"},s(J.value)+" results found",1),d(O,{modelValue:N.value,"onUpdate:modelValue":[e=>N.value=e,applyFilters],items:P,density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue","onUpdate:modelValue"])]),M.value?(n(),m(Z,{key:0,type:"card-list",loading:M.value},null,8,["loading"])):(n(),m(v,{key:1},[(n(!0),m(v,null,p(D.value,(e=>(n(),m($,{key:e.id,to:`/investors/${e.slug}`,class:"mb-4"},{default:o((()=>[d(I,null,{prepend:o((()=>[d(R,{size:"60",class:"mr-4"},{default:o((()=>[d(T,{src:e.avatar_url},null,8,["src"])])),_:2},1024)])),append:o((()=>[d("div",{class:"d-flex gap-2"},[e.category?(n(),m(j,{key:0,size:"small",color:"primary",variant:"outlined"},{default:o((()=>[i(s(e.category.name),1)])),_:2},1024)):c("",!0),e.country?(n(),m(j,{key:1,size:"small",variant:"outlined"},{default:o((()=>[i(s(e.country.name),1)])),_:2},1024)):c("",!0)])])),default:o((()=>[d(B,null,{default:o((()=>[i(s(e.name)+" ",1),e.is_verified?(n(),m(x,{key:0,color:"primary",class:"ml-2",size:"small"},{default:o((()=>[i(" mdi-check-decagram ")])),_:1})):c("",!0)])),_:2},1024),d(q,null,{default:o((()=>[i(s(e.tagline),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128)),W.value>1?(n(),m(A,{key:0,modelValue:K.value,"onUpdate:modelValue":[e=>K.value=e,handlePageChange],length:W.value},null,8,["modelValue","onUpdate:modelValue","length"])):c("",!0)],64))])),_:1})])),_:1})];a(`<div class="search-header mb-6" data-v-75d65dc7${u}><h1 class="text-h4 mb-2" data-v-75d65dc7${u}>${V(Q.value)}</h1><div class="d-flex flex-wrap gap-2" data-v-75d65dc7${u}>\x3c!--[--\x3e`),g(G.value,((e,l)=>{a(y(j,{key:l,closable:"","onClick:close":e=>removeFilter(l)},{default:o(((a,t,u,r)=>{if(!t)return[i(s(formatFilterLabel(l,e)),1)];t(`${V(formatFilterLabel(l,e))}`)})),_:2},t,u))})),a("\x3c!--]--\x3e</div></div>"),a(y(C,null,{default:o(((l,a,t,u)=>{if(!a)return[d(z,{cols:"12",md:"3"},{default:o((()=>[d($,null,{default:o((()=>[d(B,null,{default:o((()=>[i("Filters")])),_:1}),d(w,null,{default:o((()=>[d(O,{modelValue:E.value.category,"onUpdate:modelValue":[e=>E.value.category=e,applyFilters],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(O,{modelValue:E.value.country,"onUpdate:modelValue":[e=>E.value.country=e,applyFilters],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(S,{modelValue:E.value.verified,"onUpdate:modelValue":e=>E.value.verified=e,label:"Verified Only",onChange:applyFilters},null,8,["modelValue","onUpdate:modelValue"]),d(F,{modelValue:E.value.interests,"onUpdate:modelValue":[e=>E.value.interests=e,applyFilters],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"])])),_:1})])),_:1})])),_:1}),d(z,{cols:"12",md:"9"},{default:o((()=>[d("div",{class:"d-flex align-center justify-space-between mb-4"},[d("div",{class:"text-body-1"},s(J.value)+" results found",1),d(O,{modelValue:N.value,"onUpdate:modelValue":[e=>N.value=e,applyFilters],items:P,density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue","onUpdate:modelValue"])]),M.value?(n(),m(Z,{key:0,type:"card-list",loading:M.value},null,8,["loading"])):(n(),m(v,{key:1},[(n(!0),m(v,null,p(D.value,(e=>(n(),m($,{key:e.id,to:`/investors/${e.slug}`,class:"mb-4"},{default:o((()=>[d(I,null,{prepend:o((()=>[d(R,{size:"60",class:"mr-4"},{default:o((()=>[d(T,{src:e.avatar_url},null,8,["src"])])),_:2},1024)])),append:o((()=>[d("div",{class:"d-flex gap-2"},[e.category?(n(),m(j,{key:0,size:"small",color:"primary",variant:"outlined"},{default:o((()=>[i(s(e.category.name),1)])),_:2},1024)):c("",!0),e.country?(n(),m(j,{key:1,size:"small",variant:"outlined"},{default:o((()=>[i(s(e.country.name),1)])),_:2},1024)):c("",!0)])])),default:o((()=>[d(B,null,{default:o((()=>[i(s(e.name)+" ",1),e.is_verified?(n(),m(x,{key:0,color:"primary",class:"ml-2",size:"small"},{default:o((()=>[i(" mdi-check-decagram ")])),_:1})):c("",!0)])),_:2},1024),d(q,null,{default:o((()=>[i(s(e.tagline),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128)),W.value>1?(n(),m(A,{key:0,modelValue:K.value,"onUpdate:modelValue":[e=>K.value=e,handlePageChange],length:W.value},null,8,["modelValue","onUpdate:modelValue","length"])):c("",!0)],64))])),_:1})];a(y(z,{cols:"12",md:"3"},{default:o(((l,a,t,u)=>{if(!a)return[d($,null,{default:o((()=>[d(B,null,{default:o((()=>[i("Filters")])),_:1}),d(w,null,{default:o((()=>[d(O,{modelValue:E.value.category,"onUpdate:modelValue":[e=>E.value.category=e,applyFilters],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(O,{modelValue:E.value.country,"onUpdate:modelValue":[e=>E.value.country=e,applyFilters],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(S,{modelValue:E.value.verified,"onUpdate:modelValue":e=>E.value.verified=e,label:"Verified Only",onChange:applyFilters},null,8,["modelValue","onUpdate:modelValue"]),d(F,{modelValue:E.value.interests,"onUpdate:modelValue":[e=>E.value.interests=e,applyFilters],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"])])),_:1})])),_:1})];a(y($,null,{default:o(((l,a,t,u)=>{if(!a)return[d(B,null,{default:o((()=>[i("Filters")])),_:1}),d(w,null,{default:o((()=>[d(O,{modelValue:E.value.category,"onUpdate:modelValue":[e=>E.value.category=e,applyFilters],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(O,{modelValue:E.value.country,"onUpdate:modelValue":[e=>E.value.country=e,applyFilters],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(S,{modelValue:E.value.verified,"onUpdate:modelValue":e=>E.value.verified=e,label:"Verified Only",onChange:applyFilters},null,8,["modelValue","onUpdate:modelValue"]),d(F,{modelValue:E.value.interests,"onUpdate:modelValue":[e=>E.value.interests=e,applyFilters],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"])])),_:1})];a(y(B,null,{default:o(((e,l,a,t)=>{if(!l)return[i("Filters")];l("Filters")})),_:1},t,u)),a(y(w,null,{default:o(((l,a,t,u)=>{if(!a)return[d(O,{modelValue:E.value.category,"onUpdate:modelValue":[e=>E.value.category=e,applyFilters],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(O,{modelValue:E.value.country,"onUpdate:modelValue":[e=>E.value.country=e,applyFilters],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"]),d(S,{modelValue:E.value.verified,"onUpdate:modelValue":e=>E.value.verified=e,label:"Verified Only",onChange:applyFilters},null,8,["modelValue","onUpdate:modelValue"]),d(F,{modelValue:E.value.interests,"onUpdate:modelValue":[e=>E.value.interests=e,applyFilters],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,8,["modelValue","onUpdate:modelValue","items"])];a(y(O,{modelValue:E.value.category,"onUpdate:modelValue":[e=>E.value.category=e,applyFilters],items:e.categories,label:"Category","item-title":"name","item-value":"slug",clearable:""},null,t,u)),a(y(O,{modelValue:E.value.country,"onUpdate:modelValue":[e=>E.value.country=e,applyFilters],items:e.countries,label:"Country","item-title":"name","item-value":"code",clearable:""},null,t,u)),a(y(S,{modelValue:E.value.verified,"onUpdate:modelValue":e=>E.value.verified=e,label:"Verified Only",onChange:applyFilters},null,t,u)),a(y(F,{modelValue:E.value.interests,"onUpdate:modelValue":[e=>E.value.interests=e,applyFilters],items:e.interests,label:"Interests","item-title":"name","item-value":"slug",multiple:"",chips:"",clearable:""},null,t,u))})),_:1},t,u))})),_:1},t,u))})),_:1},t,u)),a(y(z,{cols:"12",md:"9"},{default:o(((e,l,a,t)=>{if(!l)return[d("div",{class:"d-flex align-center justify-space-between mb-4"},[d("div",{class:"text-body-1"},s(J.value)+" results found",1),d(O,{modelValue:N.value,"onUpdate:modelValue":[e=>N.value=e,applyFilters],items:P,density:"comfortable","hide-details":"",class:"sort-select"},null,8,["modelValue","onUpdate:modelValue"])]),M.value?(n(),m(Z,{key:0,type:"card-list",loading:M.value},null,8,["loading"])):(n(),m(v,{key:1},[(n(!0),m(v,null,p(D.value,(e=>(n(),m($,{key:e.id,to:`/investors/${e.slug}`,class:"mb-4"},{default:o((()=>[d(I,null,{prepend:o((()=>[d(R,{size:"60",class:"mr-4"},{default:o((()=>[d(T,{src:e.avatar_url},null,8,["src"])])),_:2},1024)])),append:o((()=>[d("div",{class:"d-flex gap-2"},[e.category?(n(),m(j,{key:0,size:"small",color:"primary",variant:"outlined"},{default:o((()=>[i(s(e.category.name),1)])),_:2},1024)):c("",!0),e.country?(n(),m(j,{key:1,size:"small",variant:"outlined"},{default:o((()=>[i(s(e.country.name),1)])),_:2},1024)):c("",!0)])])),default:o((()=>[d(B,null,{default:o((()=>[i(s(e.name)+" ",1),e.is_verified?(n(),m(x,{key:0,color:"primary",class:"ml-2",size:"small"},{default:o((()=>[i(" mdi-check-decagram ")])),_:1})):c("",!0)])),_:2},1024),d(q,null,{default:o((()=>[i(s(e.tagline),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])))),128)),W.value>1?(n(),m(A,{key:0,modelValue:K.value,"onUpdate:modelValue":[e=>K.value=e,handlePageChange],length:W.value},null,8,["modelValue","onUpdate:modelValue","length"])):c("",!0)],64))];l(`<div class="d-flex align-center justify-space-between mb-4" data-v-75d65dc7${t}><div class="text-body-1" data-v-75d65dc7${t}>${V(J.value)} results found</div>`),l(y(O,{modelValue:N.value,"onUpdate:modelValue":[e=>N.value=e,applyFilters],items:P,density:"comfortable","hide-details":"",class:"sort-select"},null,a,t)),l("</div>"),M.value?l(y(Z,{type:"card-list",loading:M.value},null,a,t)):(l("\x3c!--[--\x3e\x3c!--[--\x3e"),g(D.value,(e=>{l(y($,{key:e.id,to:`/investors/${e.slug}`,class:"mb-4"},{default:o(((l,a,t,u)=>{if(!a)return[d(I,null,{prepend:o((()=>[d(R,{size:"60",class:"mr-4"},{default:o((()=>[d(T,{src:e.avatar_url},null,8,["src"])])),_:2},1024)])),append:o((()=>[d("div",{class:"d-flex gap-2"},[e.category?(n(),m(j,{key:0,size:"small",color:"primary",variant:"outlined"},{default:o((()=>[i(s(e.category.name),1)])),_:2},1024)):c("",!0),e.country?(n(),m(j,{key:1,size:"small",variant:"outlined"},{default:o((()=>[i(s(e.country.name),1)])),_:2},1024)):c("",!0)])])),default:o((()=>[d(B,null,{default:o((()=>[i(s(e.name)+" ",1),e.is_verified?(n(),m(x,{key:0,color:"primary",class:"ml-2",size:"small"},{default:o((()=>[i(" mdi-check-decagram ")])),_:1})):c("",!0)])),_:2},1024),d(q,null,{default:o((()=>[i(s(e.tagline),1)])),_:2},1024)])),_:2},1024)];a(y(I,null,{prepend:o(((l,a,t,u)=>{if(!a)return[d(R,{size:"60",class:"mr-4"},{default:o((()=>[d(T,{src:e.avatar_url},null,8,["src"])])),_:2},1024)];a(y(R,{size:"60",class:"mr-4"},{default:o(((l,a,t,u)=>{if(!a)return[d(T,{src:e.avatar_url},null,8,["src"])];a(y(T,{src:e.avatar_url},null,t,u))})),_:2},t,u))})),append:o(((l,a,t,u)=>{if(!a)return[d("div",{class:"d-flex gap-2"},[e.category?(n(),m(j,{key:0,size:"small",color:"primary",variant:"outlined"},{default:o((()=>[i(s(e.category.name),1)])),_:2},1024)):c("",!0),e.country?(n(),m(j,{key:1,size:"small",variant:"outlined"},{default:o((()=>[i(s(e.country.name),1)])),_:2},1024)):c("",!0)])];a(`<div class="d-flex gap-2" data-v-75d65dc7${u}>`),e.category?a(y(j,{size:"small",color:"primary",variant:"outlined"},{default:o(((l,a,t,u)=>{if(!a)return[i(s(e.category.name),1)];a(`${V(e.category.name)}`)})),_:2},t,u)):a("\x3c!----\x3e"),e.country?a(y(j,{size:"small",variant:"outlined"},{default:o(((l,a,t,u)=>{if(!a)return[i(s(e.country.name),1)];a(`${V(e.country.name)}`)})),_:2},t,u)):a("\x3c!----\x3e"),a("</div>")})),default:o(((l,a,t,u)=>{if(!a)return[d(B,null,{default:o((()=>[i(s(e.name)+" ",1),e.is_verified?(n(),m(x,{key:0,color:"primary",class:"ml-2",size:"small"},{default:o((()=>[i(" mdi-check-decagram ")])),_:1})):c("",!0)])),_:2},1024),d(q,null,{default:o((()=>[i(s(e.tagline),1)])),_:2},1024)];a(y(B,null,{default:o(((l,a,t,u)=>{if(!a)return[i(s(e.name)+" ",1),e.is_verified?(n(),m(x,{key:0,color:"primary",class:"ml-2",size:"small"},{default:o((()=>[i(" mdi-check-decagram ")])),_:1})):c("",!0)];a(`${V(e.name)} `),e.is_verified?a(y(x,{color:"primary",class:"ml-2",size:"small"},{default:o(((e,l,a,t)=>{if(!l)return[i(" mdi-check-decagram ")];l(" mdi-check-decagram ")})),_:2},t,u)):a("\x3c!----\x3e")})),_:2},t,u)),a(y(q,null,{default:o(((l,a,t,u)=>{if(!a)return[i(s(e.tagline),1)];a(`${V(e.tagline)}`)})),_:2},t,u))})),_:2},t,u))})),_:2},a,t))})),l("\x3c!--]--\x3e"),W.value>1?l(y(A,{modelValue:K.value,"onUpdate:modelValue":[e=>K.value=e,handlePageChange],length:W.value},null,a,t)):l("\x3c!----\x3e"),l("\x3c!--]--\x3e"))})),_:1},t,u))})),_:1},t,u))})),_:1},a)),l("</div>")}}}),M=L.setup;L.setup=(l,a)=>{const t=e();return(t.modules||(t.modules=new Set)).add("pages/page_search_results.vue"),M?M(l,a):void 0};const D=h(L,[["__scopeId","data-v-75d65dc7"]]);export{D as default};
