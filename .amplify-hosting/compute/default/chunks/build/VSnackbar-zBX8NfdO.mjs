import{ref as e,shallowRef as t,watch as a,createVNode as r,mergeProps as s,onScopeDispose as o,nextTick as l}from"vue";import{m as n,u as i,V as c}from"./VOverlay-ZKavbTei.mjs";import{f as u}from"./forwardRefs-BSTjJZPU.mjs";import{p as v,v as m,w as f,x as p,A as d,z as b,$ as k,h as y,a2 as S,J as x,K as P,B as V,D as T,L as _,ae as C,j as g,O as B,af as j,o as w}from"./server.mjs";const h=v({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...m({location:"bottom"}),...f(),...p(),...d(),...b(),...k(n({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),A=y()({name:"VSnackbar",props:h(),emits:{"update:modelValue":e=>!0},setup(n,v){let{slots:m}=v;const f=S(n,"modelValue"),{locationStyles:p}=x(n),{positionClasses:d}=P(n),{scopeId:b}=i(),{themeClasses:k}=V(n),{colorClasses:y,colorStyles:h,variantClasses:A}=T(n),{roundedClasses:D}=_(n),I=function(e){const a=t(e);let r=-1;function clear(){clearInterval(r)}return o(clear),{clear:clear,time:a,start:function(t){const s=t?getComputedStyle(t):{transitionDuration:.2},o=1e3*parseFloat(s.transitionDuration)||200;if(clear(),a.value<=0)return;const l=performance.now();r=(void 0).setInterval((()=>{const t=performance.now()-l+o;a.value=Math.max(e-t,0),a.value<=0&&clear()}),o)},reset:function(){clear(),l((()=>a.value=e))}}}(Number(n.timeout)),L=e(),N=e(),J=t(!1);a(f,startTimeout),a((()=>n.timeout),startTimeout);let K=-1;function startTimeout(){I.reset(),(void 0).clearTimeout(K);const e=Number(n.timeout);if(!f.value||-1===e)return;const t=C(N.value);I.start(t),K=(void 0).setTimeout((()=>{f.value=!1}),e)}function onPointerenter(){J.value=!0,I.reset(),(void 0).clearTimeout(K)}function onPointerleave(){J.value=!1,startTimeout()}return g((()=>{const e=c.filterProps(n),t=!!(m.default||m.text||n.text);return r(c,s({ref:L,class:["v-snackbar",{"v-snackbar--active":f.value,"v-snackbar--multi-line":n.multiLine&&!n.vertical,"v-snackbar--timer":!!n.timer,"v-snackbar--vertical":n.vertical},d.value,n.class],style:n.style},e,{modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,contentProps:s({class:["v-snackbar__wrapper",k.value,y.value,D.value,A.value],style:[p.value,h.value],onPointerenter:onPointerenter,onPointerleave:onPointerleave},e.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},b),{default:()=>{var e,a,s;return[B(!1,"v-snackbar"),n.timer&&r("div",{key:"timer",class:"v-snackbar__timer"},[r(j,{ref:N,active:!J.value,color:"string"==typeof n.timer?n.timer:"info",max:n.timeout,"model-value":I.time.value},null)]),t&&r("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[null!=(e=null==(a=m.text)?void 0:a.call(m))?e:n.text,null==(s=m.default)?void 0:s.call(m)]),m.actions&&r(w,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[r("div",{class:"v-snackbar__actions"},[m.actions()])]})]},activator:m.activator})})),u({},L)}});export{A as V};
