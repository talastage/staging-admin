import{useSSRContext as e,ref as a,computed as o,defineComponent as t,mergeProps as i,withCtx as l,createTextVNode as r,createVNode as s,toDisplayString as n}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as u,ssrRenderStyle as d,ssrInterpolate as v,ssrRenderClass as m,ssrRenderList as p}from"vue/server-renderer";import{useRouter as g}from"vue-router";import{u as h}from"./useApps-hYo13Xt3.mjs";import{V as f}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{d as x,aL as y,V as b,U as w,_ as z,u as _,a as S,b as $}from"./server.mjs";import{V as k}from"./VImg-B2jcJjnn.mjs";import{V as A}from"./VRow-rkX0LEXR.mjs";import{u as L}from"./useSnackMessage-PVLwAm7x.mjs";import{V as j}from"./VDivider-BmyMVZMt.mjs";const V=t({__name:"AppLogo",__ssrInlineRender:!0,props:{size:{default:"md"},layout:{default:"horizontal"},customSize:{default:0},showText:{type:Boolean,default:!0},showSlogan:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},isHeading:{type:Boolean,default:!1},textAlign:{default:"left"},eager:{type:Boolean,default:!1},errorColor:{default:"error"},darkMode:{type:Boolean,default:!1}},setup(e){const t=e,n=h();g();const{mobile:p,smAndDown:x}=y(),z=a(!1),_=o((()=>n.loading)),S=o((()=>{var e;return null==(e=n.talastageApp)?void 0:e.name})),$=o((()=>{var e;return null==(e=n.talastageApp)?void 0:e.slogan})),L=o((()=>p.value)),j=o((()=>"/talastage_logo.png")),V=o((()=>{const e={xs:{width:16,height:16,iconSize:14},sm:{width:20,height:20,iconSize:18},md:{width:28,height:28,iconSize:24},lg:{width:36,height:36,iconSize:32},xl:{width:48,height:48,iconSize:40},custom:{width:t.customSize,height:t.customSize,iconSize:.75*t.customSize}};return L.value&&"md"===t.size?{width:24,height:24,iconSize:20}:e[t.size]})),B=o((()=>({"--logo-gap":"vertical"===t.layout?"0.5rem":"1rem","--logo-direction":"vertical"===t.layout?"column":"row","--logo-alignment":"icon"===t.layout?"center":"flex-start"}))),C=o((()=>({width:`${V.value.width}px`,height:`${V.value.height}px`,fontSize:.6*V.value.iconSize+"px",backgroundColor:"var(--v-primary-base)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"8px",fontWeight:"bold"}))),I=o((()=>["logo-image",{rounded:"icon"===t.layout}])),R=o((()=>["logo-title",`text-${t.size}`,{"text-primary":!t.darkMode}])),M=o((()=>"icon"===t.layout?"avatar":"image")),handleImageError=()=>{z.value=!0};return(e,a,o,t)=>{var n;a(`<div${c(i({class:["app-logo",`app-logo--${e.size}`,`app-logo--${e.layout}`,{"app-logo--clickable":e.clickable}],style:B.value},t))} data-v-34a62b63><div class="logo-container" data-v-34a62b63>`),_.value?a(u(f,{type:M.value,width:V.value.width,height:V.value.height},null,o)):z.value?a(u(b,{size:V.value.iconSize,color:e.errorColor},{default:l(((e,a,o,t)=>{if(!a)return[r(" mdi-alert-circle ")];a(" mdi-alert-circle ")})),_:1},o)):(a("\x3c!--[--\x3e"),j.value?a(u(k,{src:j.value,width:V.value.width,height:V.value.height,alt:S.value,class:I.value,cover:"",eager:e.eager,onError:handleImageError},{placeholder:l(((e,a,o,t)=>{if(!a)return[s(A,{class:"fill-height ma-0",align:"center",justify:"center"},{default:l((()=>[s(w,{indeterminate:"",color:"primary",size:"20"})])),_:1})];a(u(A,{class:"fill-height ma-0",align:"center",justify:"center"},{default:l(((e,a,o,t)=>{if(!a)return[s(w,{indeterminate:"",color:"primary",size:"20"})];a(u(w,{indeterminate:"",color:"primary",size:"20"},null,o,t))})),_:1},o,t))})),_:1},o)):a(`<div class="text-logo" style="${d(C.value)}" data-v-34a62b63>${v((null==(n=S.value)?void 0:n.charAt(0))||"A")}</div>`),a("\x3c!--]--\x3e")),e.showText&&S.value&&!L.value?(a(`<div class="${m(["logo-text",`text-${e.textAlign}`,{"mt-2":"vertical"===e.layout}])}" data-v-34a62b63>`),e.isHeading?a(`<h1 class="${m(R.value)}" data-v-34a62b63>${v(S.value)}</h1>`):a(`<span class="${m(R.value)}" data-v-34a62b63>${v(S.value)}</span>`),e.showSlogan&&$.value?a(`<small class="slogan" data-v-34a62b63>${v($.value)}</small>`):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a("</div></div>")}}}),B=V.setup;V.setup=(a,o)=>{const t=e();return(t.modules||(t.modules=new Set)).add("components/app/AppLogo.vue"),B?B(a,o):void 0};const C=z(V,[["__scopeId","data-v-34a62b63"]]),I={google:{icon:"mdi-google",color:"red-lighten-1"},facebook:{icon:"mdi-facebook",color:"blue"},twitter:{icon:"mdi-twitter",color:"light-blue"},instagram:{icon:"mdi-instagram",color:"pink"},tiktok:{icon:"mdi-music-note",color:"black"},linkedin:{icon:"mdi-linkedin",color:"blue-darken-3"}},R=x("socialProviders",(()=>{const e=a([]),t=a(!1),i=a(!1),l=a(null),r=o((()=>e.value));return{providers:e,activeProviders:r,isLoading:t,isLoaded:i,error:l,fetchActiveProviders:async()=>{if(!t.value&&!i.value){t.value=!0,l.value=null;try{const{$axios:a}=_(),o=await a.get("/api/social-auth/active-providers");e.value=o.data.map((e=>{var a,o;return{name:e.name,label:e.display_name,icon:(null==(a=I[e.name])?void 0:a.icon)||"mdi-account",color:(null==(o=I[e.name])?void 0:o.color)||"primary"}})),i.value=!0}catch(e){l.value=e.message||"Failed to fetch social providers",console.error("Failed to fetch active providers:",e)}finally{t.value=!1}}},reset:()=>{e.value=[],t.value=!1,i.value=!1,l.value=null}}})),M=t({__name:"SocialLoginButtons",__ssrInlineRender:!0,props:{mode:{default:"login"}},emits:["social-success","social-error"],setup(e,{emit:t}){const d=S(),m=L(),g=R(),h=a(null),x=e,y=o((()=>g.activeProviders)),b=o((()=>g.isLoading)),getProviderText=e=>`${"register"===x.mode?"Continue with":"Login with"} ${e.charAt(0).toUpperCase()+e.slice(1)}`,w=t;return(e,a,o,t)=>{a(`<div${c(i({class:"social-login-section"},t))} data-v-0b073d6e>`),a(u(j,{class:"my-3"},{default:l(((e,a,o,t)=>{if(!a)return[s("span",{class:"text-caption text-medium-emphasis px-2"},"Or continue with")];a(`<span class="text-caption text-medium-emphasis px-2" data-v-0b073d6e${t}>Or continue with</span>`)})),_:1},o)),b.value?(a('<div class="social-buttons-container" data-v-0b073d6e>\x3c!--[--\x3e'),p(2,(e=>{a(u(f,{key:e,type:"button",class:"mb-1",height:"36"},null,o))})),a("\x3c!--]--\x3e</div>")):y.value.length>0?(a('<div class="social-buttons-container" data-v-0b073d6e>\x3c!--[--\x3e'),p(y.value,(e=>{a(u($,{key:e.name,color:e.color,variant:"outlined",loading:h.value===e.name,onClick:a=>(async e=>{try{h.value=e;const a=await d.initiateSocialLogin(e);a.redirect_url&&((void 0).location.href=a.redirect_url)}catch(a){console.error(`${e} login error:`,a),m.error(a.message||`Failed to login with ${e}`),w("social-error",a.message)}finally{h.value=null}})(e.name),class:"social-btn","prepend-icon":e.icon,block:""},{default:l(((a,o,t,i)=>{if(!o)return[r(n(getProviderText(e.name)),1)];o(`${v(getProviderText(e.name))}`)})),_:2},o))})),a("\x3c!--]--\x3e</div>")):a('<div class="text-center text-caption text-medium-emphasis py-2" data-v-0b073d6e> No social providers available </div>'),a("</div>")}}}),P=M.setup;M.setup=(a,o)=>{const t=e();return(t.modules||(t.modules=new Set)).add("components/auth/SocialLoginButtons.vue"),P?P(a,o):void 0};const X=z(M,[["__scopeId","data-v-0b073d6e"]]);export{C as _,X as a};
