import{_ as e}from"./PremieringProjectSettings-CkVWizCB.mjs";import{_ as t,a as r}from"./PremieringProjectSteppers-DtGl1Hzy.mjs";import{useSSRContext as o,defineComponent as a,ref as m,computed as i,mergeProps as s,withCtx as l,unref as n,createTextVNode as u,createVNode as p,toDisplayString as d,openBlock as c,createBlock as j,createCommentVNode as v}from"vue";import{ssrRenderComponent as g,ssrInterpolate as f}from"vue/server-renderer";import{useToast as V}from"vue-toastification";import{useRoute as h}from"vue-router";import{u as C}from"./useWalletStatus-D0U60UmT.mjs";import{u as y}from"./usePremieringMediaUpload-Pb41DpBw.mjs";import{u as B}from"./useWalletStore-C5It8oQZ.mjs";import{V as _}from"./VContainer-By3q0af_.mjs";import{V as D}from"./VSnackbar-zBX8NfdO.mjs";import{_ as P,b as S,f as w}from"./server.mjs";import{V as b,a as F}from"./VCard-CsohsM82.mjs";import{u as U}from"./useApps-hYo13Xt3.mjs";import{u as x}from"./useSeo-Dl9beXFt.mjs";import"./VMenu-BpdBiT5v.mjs";import"./VOverlay-ZKavbTei.mjs";import"./easing-Bn3h-KUg.mjs";import"./VImg-B2jcJjnn.mjs";import"./forwardRefs-BSTjJZPU.mjs";import"./dialog-transition-BU2TTOTj.mjs";import"./VTextField-rd-VvEF8.mjs";import"./VCounter-BZE6l8kb.mjs";import"./index--K8ZrFMm.mjs";import"./VField-ZM6yOiXp.mjs";import"./VInput-DRJS2l97.mjs";import"./VSelect-BWLkvD3S.mjs";import"./VList-CcwwrkQR.mjs";import"./VListItem-jTLuICGb.mjs";import"./VAvatar-JL8WKjry.mjs";import"./ssrBoot-BtvJZs44.mjs";import"./VDivider-BmyMVZMt.mjs";import"./VCheckboxBtn-v4ZZzD80.mjs";import"./VSelectionControl-BvLhSUlq.mjs";import"./VChip-f_o2BAA4.mjs";import"./VSpacer-_gFExeVk.mjs";import"@vuepic/vue-datepicker";import"./BaseDialog-DsGYlnLZ.mjs";import"./VDialog-DA9BdIfh.mjs";import"./BaseButton-BTGPFNw4.mjs";import"./useSnackMessage-PVLwAm7x.mjs";import"./AlertMessage-Do7IDlzi.mjs";import"./WalletStatusAlert-C7EXzF41.mjs";import"./VRow-rkX0LEXR.mjs";import"./VCol-CKxprC4g.mjs";import"./VSkeletonLoader-CXOx9RZQ.mjs";import"./VRadioGroup-DcyDhdKu.mjs";import"./VTabs-t8Cp0Axr.mjs";import"./VWindowItem-DjFGFGcX.mjs";import"./PremieringProjectDetail-NBIIUvO8.mjs";import"./BaseCard-5i8D5k_7.mjs";import"./BaseTitle-CB_md7-d.mjs";import"./index-DfGQ-Pg8.mjs";import"./VAlert-DneVUU3Q.mjs";import"./VForm-HRC00ryg.mjs";import"vue-cropperjs";import"./VToolbar-8wIfw3zK.mjs";import"hls.js";import"./useVaporUpload-BcV2ypUE.mjs";import"./VTextarea-DkPaPTLI.mjs";import"./AddProjectInvestors-4WgTDslN.mjs";import"./BaseHeader-CiSkdPXW.mjs";import"./EmptyStateCard-3UqWseqH.mjs";import"./PageAvatar-YzVemsBd.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:fs";import"node:url";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"node:path";import"./UserAvatar-DFFlBvus.mjs";import"./StatusBadge-s-9yaW6G.mjs";import"./useDebounce-MF5_aaOF.mjs";import"./VAutocomplete-BqaBgOKW.mjs";import"./filter-BWdoXH_J.mjs";import"./ConfirmDeleteDialog-Bb7O4z7X.mjs";import"./useInfiniteScroll-CumoSAIu.mjs";import"./VTooltip-CE0EmfBU.mjs";import"./AddProjectCredits-BZTs-XFv.mjs";import"./ProjectCreditGrid-ClNP8uGo.mjs";import"./nuxt-link-CU98Qcmd.mjs";import"./TipButton-DzVv7844.mjs";import"./TipDialog-DeBBt-gS.mjs";import"./UserCard-DhDpEloc.mjs";import"./MediaThumbnail-jyEgcC54.mjs";import"./useDateFormatter-W2Hui1rv.mjs";import"./useCurrencies-Dkc4Yzgg.mjs";import"./useCurrencyFormatter-Dfs2ioxk.mjs";import"./SearchUser-DlNWcghk.mjs";import"lodash/debounce.js";import"./useTalentCategories-DQov3s2P.mjs";import"./VCombobox-CR2vKudT.mjs";import"./VStepper-CbeSoOmZ.mjs";import"./VSheet-CDtLFCXf.mjs";import"./useTimeFormatting-BygSFjON.mjs";import"./usePusher-CX6o09md.mjs";import"util";import"crypto";import"stream";import"url";import"buffer";import"events";import"assert";import"net";import"tls";import"child_process";import"fs";import"http";import"https";import"./interval-gl53xdpR.mjs";import"axios";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:net";import"unhead";import"pinia-plugin-persistedstate";const k=a({__name:"PremieringCategoryPage",__ssrInlineRender:!0,setup(o){const a=V(),P=h(),w=C(),U=y(),x=B(),{numericBalance:k,checkSufficientFunds:T,formattedBalance:A}=(()=>{const e=B(),t=i((()=>{try{if(!e.currentBalance)return 0;const t=e.currentBalance.replace(/[^0-9.]/g,"");return parseFloat(t)||0}catch(e){return console.error("Error parsing wallet balance:",e),0}})),r=i((()=>{var r;return(null==(r=e.currentCurrency)?void 0:r.code)?`${e.currentCurrency.code} ${t.value.toFixed(2)}`:t.value.toFixed(2)}));return{numericBalance:t,formattedBalance:r,compareWithAmount:e=>{const o=t.value;return{numericBalance:o,isSufficient:o>=e,difference:o-e,formattedBalance:r.value}},checkSufficientFunds:e=>t.value>=e,currencyCode:i((()=>{var t;return(null==(t=e.currentCurrency)?void 0:t.code)||""}))}})(),I=m(1),q=m({show:!1,message:"",color:"error"}),R=m(!1);i((()=>{var e,t,r,o;return{amount:(null==(t=null==(e=w.requirements)?void 0:e.premiering_fee)?void 0:t.amount)||0,currency:(null==(o=null==(r=w.requirements)?void 0:r.premiering_fee)?void 0:o.currency)||{id:0,code:"",name:""}}}));const handlePaymentSuccess=async()=>{try{await x.fetchWallet(),q.value={show:!0,message:"Payment processed successfully!",color:"success"}}catch(e){q.value={show:!0,message:"Failed to refresh wallet balance",color:"error"}}},handleContinueUpload=()=>{q.value={show:!0,message:"You can now continue with your upload",color:"success"}},handlePaymentFailed=()=>{R.value=!0};function finish(){a.success("Project setup completed!")}function handlePaymentDialog(e){R.value=!0,"PAYMENT_REQUIRED"===e.code&&w.fetchRequirements(P.params.premiering_category_slug)}return i((()=>T(w.amount))),(o,a,m,i)=>{const V=e,h=t,C=r;a(g(_,s({fluid:"",class:"pa-0"},i),{default:l(((e,t,r,o)=>{var a,m;if(!t)return[p(V,{modelValue:R.value,"onUpdate:modelValue":e=>R.value=e,project:n(U).project,onPaymentSuccess:handlePaymentSuccess,onContinue:handleContinueUpload},null,8,["modelValue","onUpdate:modelValue","project"]),p(D,{modelValue:q.value.show,"onUpdate:modelValue":e=>q.value.show=e,color:q.value.color,timeout:5e3,location:"top"},{actions:l((()=>[p(S,{color:"white",variant:"text",onClick:e=>q.value.show=!1},{default:l((()=>[u(" Close ")])),_:1},8,["onClick"])])),default:l((()=>[u(d(q.value.message)+" ",1)])),_:1},8,["modelValue","onUpdate:modelValue","color"]),p(b,{flat:"",class:"mb-6"},{default:l((()=>[p(F,{class:"pa-6"},{default:l((()=>[p(h,{"requirements-data":n(w).formattedRequirements,onOpenPaymentDialog:handlePaymentDialog},null,8,["requirements-data"])])),_:1})])),_:1}),(null==(m=n(U).project)?void 0:m.access_uuid)?(c(),j(C,{key:0,modelValue:I.value,"onUpdate:modelValue":e=>I.value=e,mode:"premiering",project:n(U).project,onFinish:finish,onPaymentFailed:handlePaymentFailed},null,8,["modelValue","onUpdate:modelValue","project"])):v("",!0)];t(g(V,{modelValue:R.value,"onUpdate:modelValue":e=>R.value=e,project:n(U).project,onPaymentSuccess:handlePaymentSuccess,onContinue:handleContinueUpload},null,r,o)),t(g(D,{modelValue:q.value.show,"onUpdate:modelValue":e=>q.value.show=e,color:q.value.color,timeout:5e3,location:"top"},{actions:l(((e,t,r,o)=>{if(!t)return[p(S,{color:"white",variant:"text",onClick:e=>q.value.show=!1},{default:l((()=>[u(" Close ")])),_:1},8,["onClick"])];t(g(S,{color:"white",variant:"text",onClick:e=>q.value.show=!1},{default:l(((e,t,r,o)=>{if(!t)return[u(" Close ")];t(" Close ")})),_:1},r,o))})),default:l(((e,t,r,o)=>{if(!t)return[u(d(q.value.message)+" ",1)];t(`${f(q.value.message)} `)})),_:1},r,o)),t(g(b,{flat:"",class:"mb-6"},{default:l(((e,t,r,o)=>{if(!t)return[p(F,{class:"pa-6"},{default:l((()=>[p(h,{"requirements-data":n(w).formattedRequirements,onOpenPaymentDialog:handlePaymentDialog},null,8,["requirements-data"])])),_:1})];t(g(F,{class:"pa-6"},{default:l(((e,t,r,o)=>{if(!t)return[p(h,{"requirements-data":n(w).formattedRequirements,onOpenPaymentDialog:handlePaymentDialog},null,8,["requirements-data"])];t(g(h,{"requirements-data":n(w).formattedRequirements,onOpenPaymentDialog:handlePaymentDialog},null,r,o))})),_:1},r,o))})),_:1},r,o)),(null==(a=n(U).project)?void 0:a.access_uuid)?t(g(C,{modelValue:I.value,"onUpdate:modelValue":e=>I.value=e,mode:"premiering",project:n(U).project,onFinish:finish,onPaymentFailed:handlePaymentFailed},null,r,o)):t("\x3c!----\x3e")})),_:1},m))}}}),T=k.setup;k.setup=(e,t)=>{const r=o();return(r.modules||(r.modules=new Set)).add("views/premiering/PremieringCategoryPage.vue"),T?T(e,t):void 0};const A=a({__name:"index",__ssrInlineRender:!0,setup(e){const t=h(),r=U(),o=i((()=>t.params.premiering_category_slug)),a=m(null),s=i((()=>{var e;return(null==(e=r.talastageApp)?void 0:e.name)||"TalaStage"})),l=i((()=>{var e;return(null==(e=a.value)?void 0:e.name)?`Premiere ${a.value.name} Project - ${s.value}`:`Premiere Project - ${s.value}`})),n=i((()=>{var e,t;return(null==(e=a.value)?void 0:e.seo_description)?`Upload and premiere your ${a.value.seo_description} projects on ${s.value}.`:`Upload and premiere your projects in the ${(null==(t=o.value)?void 0:t.replace(/-/g," "))||"various"} category on TalaStage.`})),u=i((()=>{var e,t;const r=null==(e=a.value)?void 0:e.meta_keywords;return[null==(t=o.value)?void 0:t.replace(/-/g,", "),r,"upload, premiere, project, TalaStage"].filter(Boolean).join(", ")})),p=i((()=>`${w().public.frontendUrl}/premiering/${o.value}`)),d=i((()=>{var e,t;return(null==(e=r.talastageApp)?void 0:e.thumbnail_url)||(null==(t=r.talastageApp)?void 0:t.logo_url)||"https://talastage.com/default-upload-category.png"}));return x({title:l,description:n,keywords:u,image:d,type:"website",siteName:s,url:p,noIndex:!0,structured:i((()=>{var e;return{"@context":"https://schema.org","@type":"WebPage",name:l.value,description:n.value,url:p.value,publisher:{"@type":"Organization",name:s.value,logo:{"@type":"ImageObject",url:(null==(e=r.talastageApp)?void 0:e.logo_url)||"https://talastage.com/default-thumbnail.png"}}}}))}),(e,t,r,o)=>{t(g(k,o,null,r))}}}),I=A.setup;A.setup=(e,t)=>{const r=o();return(r.modules||(r.modules=new Set)).add("pages/premiering/[premiering_category_slug]/index.vue"),I?I(e,t):void 0};const q=P(A,[["__scopeId","data-v-0d0da050"]]);export{q as default};
