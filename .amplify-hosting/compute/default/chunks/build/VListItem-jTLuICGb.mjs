import{shallowRef as e,ref as t,computed as l,watch as n,withDirectives as a,createVNode as s,Fragment as r,resolveDirective as i,inject as u,provide as o,toRaw as d}from"vue";import{c as v,V as c}from"./VAvatar-JL8WKjry.mjs";import{p,I as f,a4 as y,q as m,m as g,n as h,r as S,s as b,x as k,y as A,g as w,z as C,A as I,h as M,R as V,M as L,B as O,C as P,D as _,E as j,F as B,G,L as x,j as D,a5 as K,O as H,V as E,o as F,a2 as N,P as R,a3 as $}from"./server.mjs";const q=Symbol.for("vuetify:list");function createList(){const t=u(q,{hasPrepend:e(!1),updateHasPrepend:()=>null}),l={hasPrepend:e(!1),updateHasPrepend:e=>{e&&(l.hasPrepend.value=e)}};return o(q,l),t}function useList(){return u(q,null)}const z={open:e=>{let{id:t,value:l,opened:n,parents:a}=e;if(l){const e=new Set;e.add(t);let l=a.get(t);for(;null!=l;)e.add(l),l=a.get(l);return e}return n.delete(t),n},select:()=>null},J={open:e=>{let{id:t,value:l,opened:n,parents:a}=e;if(l){let e=a.get(t);for(n.add(t);null!=e&&e!==t;)n.add(e),e=a.get(e);return n}return n.delete(t),n},select:()=>null},W={open:J.open,select:e=>{let{id:t,value:l,opened:n,parents:a}=e;if(!l)return n;const s=[];let r=a.get(t);for(;null!=r;)s.push(r),r=a.get(r);return new Set(s)}},independentSelectStrategy=e=>{const t={select:t=>{let{id:l,value:n,selected:a}=t;if(l=d(l),e&&!n){const e=Array.from(a.entries()).reduce(((e,t)=>{let[l,n]=t;return"on"===n?[...e,l]:e}),[]);if(1===e.length&&e[0]===l)return a}return a.set(l,n?"on":"off"),a},in:(e,l,n)=>{let a=new Map;for(const s of e||[])a=t.select({id:s,value:!0,selected:new Map(a),children:l,parents:n});return a},out:e=>{const t=[];for(const[l,n]of e.entries())"on"===n&&t.push(l);return t}};return t},independentSingleSelectStrategy=e=>{const t=independentSelectStrategy(e);return{select:e=>{let{selected:l,id:n,...a}=e;n=d(n);const s=l.has(n)?new Map([[n,l.get(n)]]):new Map;return t.select({...a,id:n,selected:s})},in:(e,l,n)=>{let a=new Map;return(null==e?void 0:e.length)&&(a=t.in(e.slice(0,1),l,n)),a},out:(e,l,n)=>t.out(e,l,n)}},Q=Symbol.for("vuetify:nested"),T={id:e(),root:{register:()=>null,unregister:()=>null,parents:t(new Map),children:t(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:t(new Set),selected:t(new Map),selectedValues:t([])}},U=p({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),useNested=n=>{const a=t(new Map),s=t(new Map),r=N(n,"opened",n.opened,(e=>new Set(e)),(e=>[...e.values()])),i=l((()=>{if("object"==typeof n.selectStrategy)return n.selectStrategy;switch(n.selectStrategy){case"single-leaf":return(e=>{const t=independentSingleSelectStrategy(e);return{select:e=>{let{id:l,selected:n,children:a,...s}=e;return l=d(l),a.has(l)?n:t.select({id:l,selected:n,children:a,...s})},in:t.in,out:t.out}})(n.mandatory);case"leaf":return(e=>{const t=independentSelectStrategy(e);return{select:e=>{let{id:l,selected:n,children:a,...s}=e;return l=d(l),a.has(l)?n:t.select({id:l,selected:n,children:a,...s})},in:t.in,out:t.out}})(n.mandatory);case"independent":return independentSelectStrategy(n.mandatory);case"single-independent":return independentSingleSelectStrategy(n.mandatory);default:return(e=>{const t={select:t=>{let{id:l,value:n,selected:a,children:s,parents:r}=t;l=d(l);const i=new Map(a),u=[l];for(;u.length;){const e=u.shift();a.set(e,n?"on":"off"),s.has(e)&&u.push(...s.get(e))}let o=r.get(l);for(;o;){const e=s.get(o),t=e.every((e=>"on"===a.get(e))),l=e.every((e=>!a.has(e)||"off"===a.get(e)));a.set(o,t?"on":l?"off":"indeterminate"),o=r.get(o)}return e&&!n&&0===Array.from(a.entries()).reduce(((e,t)=>{let[l,n]=t;return"on"===n?[...e,l]:e}),[]).length?i:a},in:(e,l,n)=>{let a=new Map;for(const s of e||[])a=t.select({id:s,value:!0,selected:new Map(a),children:l,parents:n});return a},out:(e,t)=>{const l=[];for(const[n,a]of e.entries())"on"!==a||t.has(n)||l.push(n);return l}};return t})(n.mandatory)}})),u=l((()=>{if("object"==typeof n.openStrategy)return n.openStrategy;switch(n.openStrategy){case"list":return W;case"single":return z;default:return J}})),v=N(n,"selected",n.selected,(e=>i.value.in(e,a.value,s.value)),(e=>i.value.out(e,a.value,s.value)));function getPath(e){const t=[];let l=e;for(;null!=l;)t.unshift(l),l=s.value.get(l);return t}const c=R("nested"),p={id:e(),root:{opened:r,selected:v,selectedValues:l((()=>{const e=[];for(const[t,l]of v.value.entries())"on"===l&&e.push(t);return e})),register:(e,t,l)=>{t&&e!==t&&s.value.set(e,t),l&&a.value.set(e,[]),null!=t&&a.value.set(t,[...a.value.get(t)||[],e])},unregister:e=>{var t;a.value.delete(e);const l=s.value.get(e);if(l){const n=null!=(t=a.value.get(l))?t:[];a.value.set(l,n.filter((t=>t!==e)))}s.value.delete(e),r.value.delete(e)},open:(e,t,l)=>{c.emit("click:open",{id:e,value:t,path:getPath(e),event:l});const n=u.value.open({id:e,value:t,opened:new Set(r.value),children:a.value,parents:s.value,event:l});n&&(r.value=n)},openOnSelect:(e,t,l)=>{const n=u.value.select({id:e,value:t,selected:new Map(v.value),opened:new Set(r.value),children:a.value,parents:s.value,event:l});n&&(r.value=n)},select:(e,t,l)=>{c.emit("click:select",{id:e,value:t,path:getPath(e),event:l});const n=i.value.select({id:e,value:t,selected:new Map(v.value),children:a.value,parents:s.value,event:l});n&&(v.value=n),p.root.openOnSelect(e,t,l)},children:a,parents:s}};return o(Q,p),p.root},useNestedItem=(e,t)=>{const n=u(Q,T),a=Symbol($()),s=l((()=>void 0!==e.value?e.value:a)),r={...n,id:s,open:(e,t)=>n.root.open(s.value,e,t),openOnSelect:(e,t)=>n.root.openOnSelect(s.value,e,t),isOpen:l((()=>n.root.opened.value.has(s.value))),parent:l((()=>n.root.parents.value.get(s.value))),select:(e,t)=>n.root.select(s.value,e,t),isSelected:l((()=>"on"===n.root.selected.value.get(d(s.value)))),isIndeterminate:l((()=>"indeterminate"===n.root.selected.value.get(s.value))),isLeaf:l((()=>!n.root.children.value.get(s.value))),isGroupActivator:n.isGroupActivator};return!n.isGroupActivator&&n.root.register(s.value,n.id.value,t),t&&o(Q,r),r},useNestedGroupActivator=()=>{const e=u(Q,T);o(Q,{...e,isGroupActivator:!0})},X=v("v-list-item-subtitle"),Y=v("v-list-item-title"),Z=p({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:f,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:f,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:y(),onClickOnce:y(),...m(),...g(),...h(),...S(),...b(),...k(),...A(),...w(),...C(),...I({variant:"text"})},"VListItem"),ee=M()({name:"VListItem",directives:{Ripple:V},props:Z(),emits:{click:e=>!0},setup(e,t){let{attrs:u,slots:o,emit:d}=t;const v=L(e,u),p=l((()=>void 0===e.value?v.href.value:e.value)),{select:f,isSelected:y,isIndeterminate:m,isGroupActivator:g,root:h,parent:S,openOnSelect:b}=useNestedItem(p,!1),k=useList(),A=l((()=>{var t;return!1!==e.active&&(e.active||(null==(t=v.isActive)?void 0:t.value)||y.value)})),w=l((()=>!1!==e.link&&v.isLink.value)),C=l((()=>!e.disabled&&!1!==e.link&&(e.link||v.isClickable.value||null!=e.value&&!!k))),I=l((()=>e.rounded||e.nav)),M=l((()=>{var t;return null!=(t=e.color)?t:e.activeColor})),V=l((()=>{var t;return{color:A.value&&null!=(t=M.value)?t:e.baseColor,variant:e.variant}}));n((()=>{var e;return null==(e=v.isActive)?void 0:e.value}),(e=>{e&&null!=S.value&&h.open(S.value,!0),e&&b(e)}),{immediate:!0});const{themeClasses:N}=O(e),{borderClasses:R}=P(e),{colorClasses:$,colorStyles:q,variantClasses:z}=_(V),{densityClasses:J}=j(e),{dimensionStyles:W}=B(e),{elevationClasses:Q}=G(e),{roundedClasses:T}=x(I),U=l((()=>e.lines?`v-list-item--${e.lines}-line`:void 0)),Z=l((()=>({isActive:A.value,select:f,isSelected:y.value,isIndeterminate:m.value})));function onClick(t){var l;d("click",t),!g&&C.value&&(null==(l=v.navigate)||l.call(v,t),null!=e.value&&f(!y.value,t))}function onKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),onClick(e))}return D((()=>{const t=w.value?"a":e.tag,l=o.title||null!=e.title,n=o.subtitle||null!=e.subtitle,u=!(!e.appendAvatar&&!e.appendIcon),d=!(!u&&!o.append),p=!(!e.prependAvatar&&!e.prependIcon),f=!(!p&&!o.prepend);return null==k||k.updateHasPrepend(f),e.activeColor&&K("active-color",["color","base-color"]),a(s(t,{class:["v-list-item",{"v-list-item--active":A.value,"v-list-item--disabled":e.disabled,"v-list-item--link":C.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!f&&(null==k?void 0:k.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&A.value},N.value,R.value,$.value,J.value,Q.value,U.value,T.value,z.value,e.class],style:[q.value,W.value,e.style],href:v.href.value,tabindex:C.value?k?-2:0:void 0,onClick:onClick,onKeydown:C.value&&!w.value&&onKeyDown},{default:()=>{var t;return[H(C.value||A.value,"v-list-item"),f&&s("div",{key:"prepend",class:"v-list-item__prepend"},[o.prepend?s(F,{key:"prepend-defaults",disabled:!p,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var e;return[null==(e=o.prepend)?void 0:e.call(o,Z.value)]}}):s(r,null,[e.prependAvatar&&s(c,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&s(E,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),s("div",{class:"v-list-item__spacer"},null)]),s("div",{class:"v-list-item__content","data-no-activator":""},[l&&s(Y,{key:"title"},{default:()=>{var t,l;return[null!=(t=null==(l=o.title)?void 0:l.call(o,{title:e.title}))?t:e.title]}}),n&&s(X,{key:"subtitle"},{default:()=>{var t,l;return[null!=(t=null==(l=o.subtitle)?void 0:l.call(o,{subtitle:e.subtitle}))?t:e.subtitle]}}),null==(t=o.default)?void 0:t.call(o,Z.value)]),d&&s("div",{key:"append",class:"v-list-item__append"},[o.append?s(F,{key:"append-defaults",disabled:!u,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var e;return[null==(e=o.append)?void 0:e.call(o,Z.value)]}}):s(r,null,[e.appendIcon&&s(E,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&s(c,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),s("div",{class:"v-list-item__spacer"},null)])]}}),[[i("ripple"),C.value&&e.ripple]])})),{}}});export{ee as V,Y as a,X as b,useNestedItem as c,useList as d,createList as e,useNested as f,U as m,useNestedGroupActivator as u};
