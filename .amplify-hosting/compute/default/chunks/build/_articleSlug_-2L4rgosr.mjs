import{useSSRContext as e,defineComponent as t,ref as a,watch as r,mergeProps as l,resolveComponent as i,withCtx as s,createTextVNode as o,toDisplayString as c,computed as n,createVNode as d,unref as u,openBlock as p,createBlock as m,createCommentVNode as v}from"vue";import{ssrRenderComponent as f,ssrRenderAttrs as b,ssrRenderList as h,ssrRenderClass as g,ssrInterpolate as y}from"vue/server-renderer";import{c as _,u as x,V as $,b as w,_ as C}from"./server.mjs";import{_ as j}from"./BaseCard-5i8D5k_7.mjs";import{u as k}from"./useDateFormatter-W2Hui1rv.mjs";import{V as H}from"./VContainer-By3q0af_.mjs";import{V as A}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{a as S}from"./VChip-f_o2BAA4.mjs";import{V as z}from"./VImg-B2jcJjnn.mjs";import{u as B}from"./useSeo-Dl9beXFt.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"vue-router";import"pinia-plugin-persistedstate";import"./VCard-CsohsM82.mjs";import"./VAvatar-JL8WKjry.mjs";import"./index--K8ZrFMm.mjs";const P=t({__name:"HelpBreadcrumb",__ssrInlineRender:!0,props:{items:{}},setup:e=>(e,t,a,r)=>{const n=i("router-link");t(`<nav${b(l({class:"help-breadcrumb"},r))} data-v-6d5e3174><ol class="breadcrumb-list" data-v-6d5e3174>\x3c!--[--\x3e`),h(e.items,((r,l)=>{t(`<li class="${g([{"is-current":l===e.items.length-1},"breadcrumb-item"])}" data-v-6d5e3174>`),r.to&&l!==e.items.length-1?t(f(n,{to:r.to,class:"breadcrumb-link"},{default:s(((e,t,a,l)=>{if(!t)return[o(c(r.text),1)];t(`${y(r.text)}`)})),_:2},a)):t(`<span class="breadcrumb-text" data-v-6d5e3174>${y(r.text)}</span>`),l<e.items.length-1?t(f($,{size:"14",class:"breadcrumb-separator"},{default:s(((e,t,a,r)=>{if(!t)return[o(" mdi-chevron-right ")];t(" mdi-chevron-right ")})),_:2},a)):t("\x3c!----\x3e"),t("</li>")})),t("\x3c!--]--\x3e</ol></nav>")}}),V=P.setup;P.setup=(t,a)=>{const r=e();return(r.modules||(r.modules=new Set)).add("components/help/HelpBreadcrumb.vue"),V?V(t,a):void 0};const T=C(P,[["__scopeId","data-v-6d5e3174"]]),F=t({__name:"HelpArticleDetailPage",__ssrInlineRender:!0,props:{article:{},error:{},isPending:{type:Boolean}},setup(e){const t=e,{formatLocalDateTime:a}=k(),r=n((()=>{if(!t.article)return[];const e=[{text:"Help Center",to:"/help"}];return t.article.category&&e.push({text:t.article.category.name,to:`/help/${t.article.category.slug}`}),t.article.sub_category&&e.push({text:t.article.sub_category.name,to:`/help/${t.article.category.slug}/${t.article.sub_category.slug}`}),e.push({text:t.article.title}),e}));function formatContent(e){return e?e.replace(/\r\n/g,"<br>"):""}return(e,t,i,n)=>{const h=T,g=j;t(`<div${b(l({class:"help-article-page"},n))} data-v-879f9b93>`),e.isPending?t(f(H,{class:"py-8"},{default:s(((e,t,a,r)=>{if(!t)return[d("div",{class:"article-wrapper"},[d(A,{type:"breadcrumbs",class:"mb-6"}),d(A,{type:"heading",class:"mb-4"}),d(A,{type:"text",width:"200px",class:"mb-8"}),d(A,{type:"paragraph",class:"mb-4"}),d(A,{type:"paragraph",class:"mb-4"}),d(A,{type:"paragraph",width:"80%"})])];t(`<div class="article-wrapper" data-v-879f9b93${r}>`),t(f(A,{type:"breadcrumbs",class:"mb-6"},null,a,r)),t(f(A,{type:"heading",class:"mb-4"},null,a,r)),t(f(A,{type:"text",width:"200px",class:"mb-8"},null,a,r)),t(f(A,{type:"paragraph",class:"mb-4"},null,a,r)),t(f(A,{type:"paragraph",class:"mb-4"},null,a,r)),t(f(A,{type:"paragraph",width:"80%"},null,a,r)),t("</div>")})),_:1},i)):e.error?t(f(H,{class:"py-12"},{default:s(((e,t,a,r)=>{if(!t)return[d("div",{class:"text-center"},[d($,{size:"80",color:"error",class:"mb-6"},{default:s((()=>[o("mdi-file-document-remove")])),_:1}),d("h2",{class:"text-h5 mb-4"},"Article Not Found"),d("p",{class:"text-body-1 text-medium-emphasis mb-6"}," The article you're looking for doesn't exist or has been moved. "),d(w,{color:"primary",size:"large",to:"/help","prepend-icon":"mdi-arrow-left"},{default:s((()=>[o(" Back to Help Center ")])),_:1})])];t(`<div class="text-center" data-v-879f9b93${r}>`),t(f($,{size:"80",color:"error",class:"mb-6"},{default:s(((e,t,a,r)=>{if(!t)return[o("mdi-file-document-remove")];t("mdi-file-document-remove")})),_:1},a,r)),t(`<h2 class="text-h5 mb-4" data-v-879f9b93${r}>Article Not Found</h2><p class="text-body-1 text-medium-emphasis mb-6" data-v-879f9b93${r}> The article you&#39;re looking for doesn&#39;t exist or has been moved. </p>`),t(f(w,{color:"primary",size:"large",to:"/help","prepend-icon":"mdi-arrow-left"},{default:s(((e,t,a,r)=>{if(!t)return[o(" Back to Help Center ")];t(" Back to Help Center ")})),_:1},a,r)),t("</div>")})),_:1},i)):e.article?(t('<div class="article-layout" data-v-879f9b93><div class="article-header" data-v-879f9b93>'),t(f(H,{class:"py-6"},{default:s(((t,l,i,n)=>{if(!l)return[d("div",{class:"article-wrapper"},[d(h,{items:r.value},null,8,["items"]),d("h1",{class:"article-title"},c(e.article.title),1),d("div",{class:"article-meta"},[d("div",{class:"d-flex align-center gap-4"},[d("div",{class:"d-flex align-center"},[d($,{size:"16",class:"mr-2"},{default:s((()=>[o("mdi-clock-outline")])),_:1}),d("span",{class:"text-body-2"},c(u(a)(e.article.updated_at)),1)]),e.article.is_popular?(p(),m(S,{key:0,color:"primary",size:"small","prepend-icon":"mdi-star"},{default:s((()=>[o(" Popular ")])),_:1})):v("",!0)])])])];l(`<div class="article-wrapper" data-v-879f9b93${n}>`),l(f(h,{items:r.value},null,i,n)),l(`<h1 class="article-title" data-v-879f9b93${n}>${y(e.article.title)}</h1><div class="article-meta" data-v-879f9b93${n}><div class="d-flex align-center gap-4" data-v-879f9b93${n}><div class="d-flex align-center" data-v-879f9b93${n}>`),l(f($,{size:"16",class:"mr-2"},{default:s(((e,t,a,r)=>{if(!t)return[o("mdi-clock-outline")];t("mdi-clock-outline")})),_:1},i,n)),l(`<span class="text-body-2" data-v-879f9b93${n}>${y(u(a)(e.article.updated_at))}</span></div>`),e.article.is_popular?l(f(S,{color:"primary",size:"small","prepend-icon":"mdi-star"},{default:s(((e,t,a,r)=>{if(!t)return[o(" Popular ")];t(" Popular ")})),_:1},i,n)):l("\x3c!----\x3e"),l("</div></div></div>")})),_:1},i)),t("</div>"),t(f(H,{class:"py-8"},{default:s(((t,a,r,l)=>{if(!a)return[d("div",{class:"article-wrapper"},[e.article.thumbnail_url?(p(),m(z,{key:0,src:e.article.thumbnail_url,class:"article-thumbnail mb-8","max-height":"400",cover:""},null,8,["src"])):v("",!0),d(g,{class:"article-content-card",elevation:"0"},{default:s((()=>[d("div",{class:"article-content",innerHTML:formatContent(e.article.content)},null,8,["innerHTML"])])),_:1})])];a(`<div class="article-wrapper" data-v-879f9b93${l}>`),e.article.thumbnail_url?a(f(z,{src:e.article.thumbnail_url,class:"article-thumbnail mb-8","max-height":"400",cover:""},null,r,l)):a("\x3c!----\x3e"),a(f(g,{class:"article-content-card",elevation:"0"},{default:s(((t,a,r,l)=>{var i;if(!a)return[d("div",{class:"article-content",innerHTML:formatContent(e.article.content)},null,8,["innerHTML"])];a(`<div class="article-content" data-v-879f9b93${l}>${null!=(i=formatContent(e.article.content))?i:""}</div>`)})),_:1},r,l)),a("</div>")})),_:1},i)),t("</div>")):t("\x3c!----\x3e"),t("</div>")}}}),I=F.setup;F.setup=(t,a)=>{const r=e();return(r.modules||(r.modules=new Set)).add("views/help/HelpArticleDetailPage.vue"),I?I(t,a):void 0};const L=C(F,[["__scopeId","data-v-879f9b93"]]),D=t({__name:"[articleSlug]",__ssrInlineRender:!0,setup(e){const t=_(),{$axios:i}=x(),s=a(null),o=a(null),c=a(!0);async function fetchArticle(){const{categorySlug:e,subCategorySlug:a,articleSlug:r}=t.params;if(!e||!a||!r)return o.value=new Error("Invalid route parameters"),void(c.value=!1);try{c.value=!0,o.value=null,console.log("Fetching article:",`/api/help/categories/${e}/${a}/${r}`);const t=await i.get(`/api/help/categories/${e}/${a}/${r}`);if(!t.data||!t.data.data)throw new Error("Article not found");s.value=t.data.data,function(){var e,t;if(!s.value)return;B({title:s.value.title,description:s.value.content?s.value.content.replace(/<[^>]+>/g,"").substring(0,160):"Help Center article",type:"article",modifiedTime:s.value.updated_at,publishedTime:s.value.created_at,section:"Help Center",keywords:`help, support, ${(null==(e=s.value.category)?void 0:e.name)||""}, ${(null==(t=s.value.sub_category)?void 0:t.name)||""}, ${s.value.title}`,structured:{"@context":"https://schema.org","@type":"FAQPage",mainEntity:{"@type":"Question",name:s.value.title,acceptedAnswer:{"@type":"Answer",text:s.value.content}}}})}()}catch(e){console.error("Failed to fetch article:",e),o.value=e,s.value=null}finally{c.value=!1}}return r((()=>t.fullPath),(()=>{fetchArticle()})),(e,t,a,r)=>{t(f(L,l({article:s.value,error:o.value,isPending:c.value},r),null,a))}}}),M=D.setup;D.setup=(t,a)=>{const r=e();return(r.modules||(r.modules=new Set)).add("pages/help/[categorySlug]/[subCategorySlug]/[articleSlug].vue"),M?M(t,a):void 0};export{D as default};
