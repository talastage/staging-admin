import{createVNode as e,computed as a,ref as l,shallowRef as s,unref as n,watch as t,provide as i,toRef as r,inject as u,nextTick as o}from"vue";import{p as d,m as v,z as p,h as c,j as f,aE as g,a2 as m,aF as y,X as V,I as h,a4 as b,n as I,E as S,i as M,a3 as B,a7 as $,as as k,V as x,aG as D}from"./server.mjs";import{a as C}from"./index--K8ZrFMm.mjs";import{m as F,M as A}from"./VImg-B2jcJjnn.mjs";const _=d({text:String,clickable:Boolean,...v(),...p()},"VLabel"),z=c()({name:"VLabel",props:_(),setup(a,l){let{slots:s}=l;return f((()=>{var l;return e("label",{class:["v-label",{"v-label--clickable":a.clickable},a.class],style:a.style},[a.text,null==(l=s.default)?void 0:l.call(s)])})),{}}});function useInputIcon(a){const{t:l}=$();return{InputIcon:function(s){var n;let{name:t}=s;const i={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[t],r=a[`onClick:${t}`],u=r&&i?l(`$vuetify.input.${i}`,null!=(n=a.label)?n:""):void 0;return e(x,{icon:a[`${t}Icon`],"aria-label":u,onClick:r},null)}}}const E=d({focused:Boolean,"onUpdate:focused":b()},"focus");function useFocus(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g();const s=m(e,"focused");return{focusClasses:a((()=>({[`${l}--focused`]:s.value}))),isFocused:s,focus:function(){s.value=!0},blur:function(){s.value=!1}}}const R=d({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...v(),...F({transition:{component:C,leaveAbsolute:!0,group:!0}})},"VMessages"),j=c()({name:"VMessages",props:R(),setup(l,s){let{slots:n}=s;const t=a((()=>y(l.messages))),{textColorClasses:i,textColorStyles:r}=V(a((()=>l.color)));return f((()=>e(A,{transition:l.transition,tag:"div",class:["v-messages",i.value,l.class],style:[r.value,l.style],role:"alert","aria-live":"polite"},{default:()=>[l.active&&t.value.map(((a,l)=>e("div",{class:"v-messages__message",key:`${l}-${t.value}`},[n.message?n.message({message:a}):a])))]}))),{}}}),O=Symbol.for("vuetify:form"),w=d({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function createForm(e){const n=m(e,"modelValue"),u=a((()=>e.disabled)),o=a((()=>e.readonly)),d=s(!1),v=l([]),p=l([]);return t(v,(()=>{let e=0,a=0;const l=[];for(const s of v.value)!1===s.isValid?(a++,l.push({id:s.id,errorMessages:s.errorMessages})):!0===s.isValid&&e++;p.value=l,n.value=!(a>0)&&(e===v.value.length||null)}),{deep:!0}),i(O,{register:e=>{let{id:a,validate:l,reset:s,resetValidation:n}=e;v.value.some((e=>e.id===a))&&D(`Duplicate input name "${a}"`),v.value.push({id:a,validate:l,reset:s,resetValidation:n,isValid:null,errorMessages:[]})},unregister:e=>{v.value=v.value.filter((a=>a.id!==e))},update:(e,a,l)=>{const s=v.value.find((a=>a.id===e));s&&(s.isValid=a,s.errorMessages=l)},isDisabled:u,isReadonly:o,isValidating:d,isValid:n,items:v,validateOn:r(e,"validateOn")}),{errors:p,isDisabled:u,isReadonly:o,isValidating:d,isValid:n,items:v,validate:async function(){const a=[];let l=!0;p.value=[],d.value=!0;for(const s of v.value){const n=await s.validate();if(n.length>0&&(l=!1,a.push({id:s.id,errorMessages:n})),!l&&e.fastFail)break}return p.value=a,d.value=!1,{valid:l,errors:p.value}},reset:function(){v.value.forEach((e=>e.reset()))},resetValidation:function(){v.value.forEach((e=>e.resetValidation()))}}}function useForm(){return u(O,null)}const P=d({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...E()},"validation");const H=d({id:String,appendIcon:h,centerAffix:{type:Boolean,default:!0},prependIcon:h,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},"onClick:prepend":b(),"onClick:append":b(),...v(),...I(),...P()},"VInput"),L=c()({name:"VInput",props:{...H()},emits:{"update:modelValue":e=>!0},setup(i,r){let{attrs:u,slots:d,emit:v}=r;const{densityClasses:p}=S(i),{rtlClasses:c}=M(),{InputIcon:V}=useInputIcon(i),h=B(),b=a((()=>i.id||`input-${h}`)),I=a((()=>`${b.value}-messages`)),{errorMessages:$,isDirty:x,isDisabled:D,isReadonly:C,isPristine:F,isValid:A,isValidating:_,reset:z,resetValidation:E,validate:R,validationClasses:O}=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B();const u=m(e,"modelValue"),d=a((()=>void 0===e.validationValue?u.value:e.validationValue)),v=useForm(),p=l([]),c=s(!0),f=a((()=>!(!y(""===u.value?null:u.value).length&&!y(""===d.value?null:d.value).length))),V=a((()=>{var a;return!!(null!=(a=e.disabled)?a:null==v?void 0:v.isDisabled.value)})),h=a((()=>{var a;return!!(null!=(a=e.readonly)?a:null==v?void 0:v.isReadonly.value)})),b=a((()=>{var a;return(null==(a=e.errorMessages)?void 0:a.length)?y(e.errorMessages).concat(p.value).slice(0,Math.max(0,+e.maxErrors)):p.value})),I=a((()=>{var a,l;let s=(null!=(a=e.validateOn)?a:null==v?void 0:v.validateOn.value)||"input";"lazy"===s&&(s="input lazy");const n=new Set(null!=(l=null==s?void 0:s.split(" "))?l:[]);return{blur:n.has("blur")||n.has("input"),input:n.has("input"),submit:n.has("submit"),lazy:n.has("lazy")}})),S=a((()=>{var a;return!e.error&&!(null==(a=e.errorMessages)?void 0:a.length)&&(!e.rules.length||(c.value?!p.value.length&&!I.value.lazy||null:!p.value.length))})),M=s(!1),$=a((()=>({[`${i}--error`]:!1===S.value,[`${i}--dirty`]:f.value,[`${i}--disabled`]:V.value,[`${i}--readonly`]:h.value}))),x=a((()=>{var a;return null!=(a=e.name)?a:n(r)}));function resetValidation(){c.value=!0,I.value.lazy?p.value=[]:validate(!0)}async function validate(){var a;let l=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const s=[];M.value=!0;for(const l of e.rules){if(s.length>=+(null!=(a=e.maxErrors)?a:1))break;const n="function"==typeof l?l:()=>l,t=await n(d.value);!0!==t&&(!1===t||"string"==typeof t?s.push(t||""):console.warn(`${t} is not a valid value. Rule functions must return boolean true or a string.`))}return p.value=s,M.value=!1,c.value=l,p.value}return k((()=>I.value.input),(()=>{t(d,(()=>{if(null!=d.value)validate();else if(e.focused){const a=t((()=>e.focused),(e=>{e||validate(),a()}))}}))})),k((()=>I.value.blur),(()=>{t((()=>e.focused),(e=>{e||validate()}))})),t(S,(()=>{null==v||v.update(x.value,S.value,b.value)})),{errorMessages:b,isDirty:f,isDisabled:V,isReadonly:h,isPristine:c,isValid:S,isValidating:M,reset:function(){u.value=null,o(resetValidation)},resetValidation:resetValidation,validate:validate,validationClasses:$}}(i,"v-input",b),w=a((()=>({id:b,messagesId:I,isDirty:x,isDisabled:D,isReadonly:C,isPristine:F,isValid:A,isValidating:_,reset:z,resetValidation:E,validate:R}))),P=a((()=>{var e;return(null==(e=i.errorMessages)?void 0:e.length)||!F.value&&$.value.length?$.value:i.hint&&(i.persistentHint||i.focused)?i.hint:i.messages}));return f((()=>{var a,l,s,n;const t=!(!d.prepend&&!i.prependIcon),r=!(!d.append&&!i.appendIcon),u=P.value.length>0,o=!i.hideDetails||"auto"===i.hideDetails&&(u||!!d.details);return e("div",{class:["v-input",`v-input--${i.direction}`,{"v-input--center-affix":i.centerAffix,"v-input--hide-spin-buttons":i.hideSpinButtons},p.value,c.value,O.value,i.class],style:i.style},[t&&e("div",{key:"prepend",class:"v-input__prepend"},[null==(a=d.prepend)?void 0:a.call(d,w.value),i.prependIcon&&e(V,{key:"prepend-icon",name:"prepend"},null)]),d.default&&e("div",{class:"v-input__control"},[null==(l=d.default)?void 0:l.call(d,w.value)]),r&&e("div",{key:"append",class:"v-input__append"},[i.appendIcon&&e(V,{key:"append-icon",name:"append"},null),null==(s=d.append)?void 0:s.call(d,w.value)]),o&&e("div",{class:"v-input__details"},[e(j,{id:I.value,active:u,messages:P.value},{message:d.message}),null==(n=d.details)?void 0:n.call(d,w.value)])])})),{reset:z,resetValidation:E,validate:R,isValid:A,errorMessages:$}}});export{L as V,w as a,E as b,createForm as c,z as d,useInputIcon as e,useForm as f,H as m,useFocus as u};
