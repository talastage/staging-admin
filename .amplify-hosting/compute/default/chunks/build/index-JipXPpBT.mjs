import{_ as e}from"./HelpItem-DrLQHdSM.mjs";import{useSSRContext as t,defineComponent as l,ref as r,computed as a,watch as s,mergeProps as o,withCtx as u,createVNode as i,createTextVNode as n,toDisplayString as d,openBlock as c,createBlock as m,Fragment as p,renderList as f,createCommentVNode as h}from"vue";import{ssrRenderComponent as v,ssrInterpolate as y,ssrRenderList as g}from"vue/server-renderer";import{useRoute as b,useRouter as x}from"vue-router";import{u as _}from"./useApi-DFtPsK3Q.mjs";import{V as w}from"./VContainer-By3q0af_.mjs";import{V}from"./VRow-rkX0LEXR.mjs";import{V as j}from"./VCol-CKxprC4g.mjs";import{V as k}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{_ as S,V as R,b as C,f as A}from"./server.mjs";import{V as H}from"./VList-CcwwrkQR.mjs";import{V as U}from"./VPagination-DpVjYVUo.mjs";import{u as $}from"./useApps-hYo13Xt3.mjs";import{u as q}from"./useSeo-Dl9beXFt.mjs";import"./BaseCard-5i8D5k_7.mjs";import"./VCard-CsohsM82.mjs";import"./VAvatar-JL8WKjry.mjs";import"./VImg-B2jcJjnn.mjs";import"./VChip-f_o2BAA4.mjs";import"./index--K8ZrFMm.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:fs";import"node:url";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"node:path";import"./asyncData-BkL_fZdA.mjs";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:net";import"unhead";import"pinia-plugin-persistedstate";import"./VListItem-jTLuICGb.mjs";import"./ssrBoot-BtvJZs44.mjs";import"./VDivider-BmyMVZMt.mjs";const z=l({__name:"HelpSearchResultsPage",__ssrInlineRender:!0,setup(t){var l;const S=b();x();const A=r((null==(l=S.query.q)?void 0:l.toString())||""),$=r([]),q=r(0),z=r(1),B=r(10),F=r(!0),T=r(!1),I=a((()=>Math.ceil(q.value/B.value))),fetchSearchResults=async()=>{if(!A.value)return $.value=[],q.value=0,void(F.value=!1);F.value=!0,T.value=!1;try{const{get:e}=_(),t=await e("/api/help/search",{params:{q:A.value,page:z.value,limit:B.value}});$.value=t.data,q.value=t.total}catch(e){console.error("Failed to fetch search results:",e),T.value=!0}finally{F.value=!1}};return s(z,fetchSearchResults),s((()=>S.query.q),(e=>{A.value=(null==e?void 0:e.toString())||"",z.value=1,fetchSearchResults()}),{immediate:!0}),(t,l,r,a)=>{const s=e;l(v(w,o({class:"help-search-results-page"},a),{default:u(((e,t,l,r)=>{if(!t)return[F.value?(c(),m(V,{key:0},{default:u((()=>[i(j,{cols:"12"},{default:u((()=>[i(k,{type:"heading",class:"mb-4"}),i(k,{type:"paragraph",class:"mb-2"}),i(k,{type:"paragraph",class:"mb-2"})])),_:1})])),_:1})):T.value?(c(),m(V,{key:1},{default:u((()=>[i(j,{cols:"12",class:"text-center py-12"},{default:u((()=>[i(R,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u((()=>[n(" mdi-alert-circle-outline ")])),_:1}),i("h3",{class:"text-h6 text-grey-darken-1"},"Search Error"),i("p",{class:"text-body-2 text-grey"}," An error occurred while fetching search results. "),i(C,{color:"primary",to:"/help","prepend-icon":"mdi-arrow-left"},{default:u((()=>[n(" Return to Help Center ")])),_:1})])),_:1})])),_:1})):(c(),m(p,{key:2},[i(V,null,{default:u((()=>[i(j,{cols:"12"},{default:u((()=>[i("h1",{class:"text-h4 font-weight-bold mb-4"},' Search Results for "'+d(A.value)+'" ',1),i("p",{class:"text-body-1 text-grey-darken-1"}," Found "+d(q.value)+" results ",1)])),_:1})])),_:1}),i(V,null,{default:u((()=>[i(j,{cols:"12"},{default:u((()=>[i(H,{lines:"none"},{default:u((()=>[(c(!0),m(p,null,f($.value,(e=>(c(),m(s,{key:e.id,article:e},null,8,["article"])))),128))])),_:1})])),_:1})])),_:1}),q.value>B.value?(c(),m(V,{key:0},{default:u((()=>[i(j,{cols:"12",class:"d-flex justify-center"},{default:u((()=>[i(U,{modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,length:I.value,"total-visible":7},null,8,["modelValue","onUpdate:modelValue","length"])])),_:1})])),_:1})):h("",!0),0===$.value.length?(c(),m(V,{key:1},{default:u((()=>[i(j,{cols:"12",class:"text-center py-12"},{default:u((()=>[i(R,{icon:"mdi-file-search-outline",size:"64",color:"grey",class:"mb-3"}),i("div",{class:"text-subtitle-1 font-weight-medium mb-1"}," No results found "),i("div",{class:"text-body-2 text-grey"}," Try different keywords or browse categories ")])),_:1})])),_:1})):h("",!0)],64))];F.value?t(v(V,null,{default:u(((e,t,l,r)=>{if(!t)return[i(j,{cols:"12"},{default:u((()=>[i(k,{type:"heading",class:"mb-4"}),i(k,{type:"paragraph",class:"mb-2"}),i(k,{type:"paragraph",class:"mb-2"})])),_:1})];t(v(j,{cols:"12"},{default:u(((e,t,l,r)=>{if(!t)return[i(k,{type:"heading",class:"mb-4"}),i(k,{type:"paragraph",class:"mb-2"}),i(k,{type:"paragraph",class:"mb-2"})];t(v(k,{type:"heading",class:"mb-4"},null,l,r)),t(v(k,{type:"paragraph",class:"mb-2"},null,l,r)),t(v(k,{type:"paragraph",class:"mb-2"},null,l,r))})),_:1},l,r))})),_:1},l,r)):T.value?t(v(V,null,{default:u(((e,t,l,r)=>{if(!t)return[i(j,{cols:"12",class:"text-center py-12"},{default:u((()=>[i(R,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u((()=>[n(" mdi-alert-circle-outline ")])),_:1}),i("h3",{class:"text-h6 text-grey-darken-1"},"Search Error"),i("p",{class:"text-body-2 text-grey"}," An error occurred while fetching search results. "),i(C,{color:"primary",to:"/help","prepend-icon":"mdi-arrow-left"},{default:u((()=>[n(" Return to Help Center ")])),_:1})])),_:1})];t(v(j,{cols:"12",class:"text-center py-12"},{default:u(((e,t,l,r)=>{if(!t)return[i(R,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u((()=>[n(" mdi-alert-circle-outline ")])),_:1}),i("h3",{class:"text-h6 text-grey-darken-1"},"Search Error"),i("p",{class:"text-body-2 text-grey"}," An error occurred while fetching search results. "),i(C,{color:"primary",to:"/help","prepend-icon":"mdi-arrow-left"},{default:u((()=>[n(" Return to Help Center ")])),_:1})];t(v(R,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u(((e,t,l,r)=>{if(!t)return[n(" mdi-alert-circle-outline ")];t(" mdi-alert-circle-outline ")})),_:1},l,r)),t(`<h3 class="text-h6 text-grey-darken-1" data-v-8b9d3262${r}>Search Error</h3><p class="text-body-2 text-grey" data-v-8b9d3262${r}> An error occurred while fetching search results. </p>`),t(v(C,{color:"primary",to:"/help","prepend-icon":"mdi-arrow-left"},{default:u(((e,t,l,r)=>{if(!t)return[n(" Return to Help Center ")];t(" Return to Help Center ")})),_:1},l,r))})),_:1},l,r))})),_:1},l,r)):(t("\x3c!--[--\x3e"),t(v(V,null,{default:u(((e,t,l,r)=>{if(!t)return[i(j,{cols:"12"},{default:u((()=>[i("h1",{class:"text-h4 font-weight-bold mb-4"},' Search Results for "'+d(A.value)+'" ',1),i("p",{class:"text-body-1 text-grey-darken-1"}," Found "+d(q.value)+" results ",1)])),_:1})];t(v(j,{cols:"12"},{default:u(((e,t,l,r)=>{if(!t)return[i("h1",{class:"text-h4 font-weight-bold mb-4"},' Search Results for "'+d(A.value)+'" ',1),i("p",{class:"text-body-1 text-grey-darken-1"}," Found "+d(q.value)+" results ",1)];t(`<h1 class="text-h4 font-weight-bold mb-4" data-v-8b9d3262${r}> Search Results for &quot;${y(A.value)}&quot; </h1><p class="text-body-1 text-grey-darken-1" data-v-8b9d3262${r}> Found ${y(q.value)} results </p>`)})),_:1},l,r))})),_:1},l,r)),t(v(V,null,{default:u(((e,t,l,r)=>{if(!t)return[i(j,{cols:"12"},{default:u((()=>[i(H,{lines:"none"},{default:u((()=>[(c(!0),m(p,null,f($.value,(e=>(c(),m(s,{key:e.id,article:e},null,8,["article"])))),128))])),_:1})])),_:1})];t(v(j,{cols:"12"},{default:u(((e,t,l,r)=>{if(!t)return[i(H,{lines:"none"},{default:u((()=>[(c(!0),m(p,null,f($.value,(e=>(c(),m(s,{key:e.id,article:e},null,8,["article"])))),128))])),_:1})];t(v(H,{lines:"none"},{default:u(((e,t,l,r)=>{if(!t)return[(c(!0),m(p,null,f($.value,(e=>(c(),m(s,{key:e.id,article:e},null,8,["article"])))),128))];t("\x3c!--[--\x3e"),g($.value,(e=>{t(v(s,{key:e.id,article:e},null,l,r))})),t("\x3c!--]--\x3e")})),_:1},l,r))})),_:1},l,r))})),_:1},l,r)),q.value>B.value?t(v(V,null,{default:u(((e,t,l,r)=>{if(!t)return[i(j,{cols:"12",class:"d-flex justify-center"},{default:u((()=>[i(U,{modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,length:I.value,"total-visible":7},null,8,["modelValue","onUpdate:modelValue","length"])])),_:1})];t(v(j,{cols:"12",class:"d-flex justify-center"},{default:u(((e,t,l,r)=>{if(!t)return[i(U,{modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,length:I.value,"total-visible":7},null,8,["modelValue","onUpdate:modelValue","length"])];t(v(U,{modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,length:I.value,"total-visible":7},null,l,r))})),_:1},l,r))})),_:1},l,r)):t("\x3c!----\x3e"),0===$.value.length?t(v(V,null,{default:u(((e,t,l,r)=>{if(!t)return[i(j,{cols:"12",class:"text-center py-12"},{default:u((()=>[i(R,{icon:"mdi-file-search-outline",size:"64",color:"grey",class:"mb-3"}),i("div",{class:"text-subtitle-1 font-weight-medium mb-1"}," No results found "),i("div",{class:"text-body-2 text-grey"}," Try different keywords or browse categories ")])),_:1})];t(v(j,{cols:"12",class:"text-center py-12"},{default:u(((e,t,l,r)=>{if(!t)return[i(R,{icon:"mdi-file-search-outline",size:"64",color:"grey",class:"mb-3"}),i("div",{class:"text-subtitle-1 font-weight-medium mb-1"}," No results found "),i("div",{class:"text-body-2 text-grey"}," Try different keywords or browse categories ")];t(v(R,{icon:"mdi-file-search-outline",size:"64",color:"grey",class:"mb-3"},null,l,r)),t(`<div class="text-subtitle-1 font-weight-medium mb-1" data-v-8b9d3262${r}> No results found </div><div class="text-body-2 text-grey" data-v-8b9d3262${r}> Try different keywords or browse categories </div>`)})),_:1},l,r))})),_:1},l,r)):t("\x3c!----\x3e"),t("\x3c!--]--\x3e"))})),_:1},r))}}}),B=z.setup;z.setup=(e,l)=>{const r=t();return(r.modules||(r.modules=new Set)).add("views/help/HelpSearchResultsPage.vue"),B?B(e,l):void 0};const F=S(z,[["__scopeId","data-v-8b9d3262"]]),T=l({__name:"index",__ssrInlineRender:!0,setup(e){const t=$(),l=a((()=>t.talastageApp));return q({title:a((()=>{var e;return(null==(e=l.value)?void 0:e.name)?`Help Search Results - ${l.value.name}`:"Help Search Results - TalaStage"})),description:"Browse search results for help articles to find answers to your questions and get the support you need on TalaStage.",keywords:"help, support, articles, FAQ, knowledge base, TalaStage, search results",image:a((()=>{var e;return(null==(e=l.value)?void 0:e.logo_url)||"/default-support-image.png"})),url:a((()=>`${A().public.frontendUrl}/help/search`)),type:"website",siteName:a((()=>{var e;return(null==(e=l.value)?void 0:e.name)||"TalaStage"})),twitterUsername:"@talastage"}),(e,t,l,r)=>{const a=F;t(v(w,o({class:"help-search-results-page"},r),{default:u(((e,t,l,r)=>{if(!t)return[i(a)];t(v(a,null,null,l,r))})),_:1},l))}}}),I=T.setup;T.setup=(e,l)=>{const r=t();return(r.modules||(r.modules=new Set)).add("pages/help/search/index.vue"),I?I(e,l):void 0};const L=S(T,[["__scopeId","data-v-72a1143f"]]);export{L as default};
