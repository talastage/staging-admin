import{useSSRContext as e,defineComponent as r,ref as t,resolveComponent as a,withCtx as l,createVNode as i,unref as n,openBlock as s,createBlock as o,Fragment as m,renderList as u,createCommentVNode as d,toDisplayString as c,computed as p}from"vue";import{ssrRenderComponent as g,ssrInterpolate as v,ssrRenderList as f}from"vue/server-renderer";import{useRouter as h,useRoute as y}from"vue-router";import{_ as x,e as _,b,U as R,V as $,f as k,u as w}from"./server.mjs";import{V as j}from"./VContainer-By3q0af_.mjs";import{V as T}from"./VRow-rkX0LEXR.mjs";import{V as P}from"./VCol-CKxprC4g.mjs";import{V}from"./VAlert-DneVUU3Q.mjs";import{V as C}from"./VAvatar-JL8WKjry.mjs";import{V as A}from"./VCard-CsohsM82.mjs";import{u as L}from"./useApps-hYo13Xt3.mjs";import{u as S}from"./useSeo-Dl9beXFt.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"pinia-plugin-persistedstate";import"./VImg-B2jcJjnn.mjs";const z=r({__name:"PremieresByCategoryPage",__ssrInlineRender:!0,setup(e){const r=h(),p=y(),x=t(null),k=t([]),L=t(!1),S=t(!1),z=t(null);t(1),t(1),p.params.categorySlug;const{reminderLoading:I,hasReminder:N,handleReminderToggle:D}=function(){const{$axios:e,$protectedAction:r}=w(),a=t(null),l=t([]),i=t({show:!1,text:"",color:"success"}),hasReminder=e=>l.value.includes(e),showSnackbar=(e,r="success")=>{i.value={show:!0,text:e,color:r}};return{reminderLoading:a,reminders:l,snackbar:i,hasReminder:hasReminder,handleReminderToggle:async t=>{await r((async()=>{a.value=t.id;try{if(hasReminder(t.id)){const r=(await e.get("/api/premiering/reminders")).data.find((e=>e.project_id===t.id));r&&(await e.delete(`/api/premiering/reminders/${r.id}`),l.value=l.value.filter((e=>e!==t.id)),showSnackbar("Reminder removed"))}else{const r=new Date(t.premiere_start_date),a=new Date(r.getTime()-9e5);await e.post(`/api/premiering/reminders/${t.id}/reminders`,{reminder_time:a.toISOString()}),l.value.push(t.id),showSnackbar("Reminder set successfully")}}finally{a.value=null}}),{onError:e=>{console.error("Error toggling reminder:",e),showSnackbar("Failed to update reminder","error")}})},fetchReminders:async()=>{try{const r=await e.get("/api/premiering/reminders");l.value=r.data.map((e=>e.project_id))}catch(e){console.error("Error fetching reminders:",e)}}}}();return _((()=>({title:x.value?`${x.value.name} Premieres`:"Loading...",meta:[{name:"description",content:x.value?`Watch live premieres in the ${x.value.name} category`:"Loading category premieres..."}]}))),(e,t,p,h)=>{const y=a("CategoryDetailSkeleton"),_=a("ProjectPremiereCard");t(g(j,h,{default:l(((e,t,a,p)=>{if(!t)return[L.value&&!x.value?(s(),o(y,{key:0})):z.value?(s(),o(T,{key:1},{default:l((()=>[i(P,{cols:"12"},{default:l((()=>[i(V,{type:"error",text:z.value,class:"mb-4"},null,8,["text"])])),_:1})])),_:1})):x.value?(s(),o(m,{key:2},[i("div",{class:"d-flex align-center mb-8"},[i(b,{icon:"mdi-arrow-left",variant:"text",class:"mr-4",onClick:e=>n(r).back()},null,8,["onClick"]),x.value.avatar_url?(s(),o(C,{key:0,image:x.value.avatar_url,size:"48",class:"mr-4"},null,8,["image"])):d("",!0),i("h1",{class:"text-h4"},c(x.value.name),1)]),i(T,null,{default:l((()=>[(s(!0),o(m,null,u(k.value,(e=>(s(),o(P,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l((()=>[i(_,{premiere:e,hasReminder:n(N)(e.id),reminderLoading:n(I)===e.id,onReminderToggle:n(D)},null,8,["premiere","hasReminder","reminderLoading","onReminderToggle"])])),_:2},1024)))),128))])),_:1}),S.value?(s(),o(T,{key:0,class:"mt-4"},{default:l((()=>[i(P,{cols:"12",class:"text-center"},{default:l((()=>[i(R,{indeterminate:"",color:"primary"})])),_:1})])),_:1})):d("",!0),k.value.length||L.value?d("",!0):(s(),o(T,{key:1},{default:l((()=>[i(P,{cols:"12"},{default:l((()=>[i(A,{class:"text-center pa-8"},{default:l((()=>[i($,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),i("h3",{class:"text-h5 mb-2"},"No Premieres Available"),i("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")])),_:1})])),_:1})])),_:1}))],64)):d("",!0)];L.value&&!x.value?t(g(y,null,null,a,p)):z.value?t(g(T,null,{default:l(((e,r,t,a)=>{if(!r)return[i(P,{cols:"12"},{default:l((()=>[i(V,{type:"error",text:z.value,class:"mb-4"},null,8,["text"])])),_:1})];r(g(P,{cols:"12"},{default:l(((e,r,t,a)=>{if(!r)return[i(V,{type:"error",text:z.value,class:"mb-4"},null,8,["text"])];r(g(V,{type:"error",text:z.value,class:"mb-4"},null,t,a))})),_:1},t,a))})),_:1},a,p)):x.value?(t(`\x3c!--[--\x3e<div class="d-flex align-center mb-8"${p}>`),t(g(b,{icon:"mdi-arrow-left",variant:"text",class:"mr-4",onClick:e=>n(r).back()},null,a,p)),x.value.avatar_url?t(g(C,{image:x.value.avatar_url,size:"48",class:"mr-4"},null,a,p)):t("\x3c!----\x3e"),t(`<h1 class="text-h4"${p}>${v(x.value.name)}</h1></div>`),t(g(T,null,{default:l(((e,r,t,a)=>{if(!r)return[(s(!0),o(m,null,u(k.value,(e=>(s(),o(P,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l((()=>[i(_,{premiere:e,hasReminder:n(N)(e.id),reminderLoading:n(I)===e.id,onReminderToggle:n(D)},null,8,["premiere","hasReminder","reminderLoading","onReminderToggle"])])),_:2},1024)))),128))];r("\x3c!--[--\x3e"),f(k.value,(e=>{r(g(P,{key:e.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(((r,t,a,l)=>{if(!t)return[i(_,{premiere:e,hasReminder:n(N)(e.id),reminderLoading:n(I)===e.id,onReminderToggle:n(D)},null,8,["premiere","hasReminder","reminderLoading","onReminderToggle"])];t(g(_,{premiere:e,hasReminder:n(N)(e.id),reminderLoading:n(I)===e.id,onReminderToggle:n(D)},null,a,l))})),_:2},t,a))})),r("\x3c!--]--\x3e")})),_:1},a,p)),S.value?t(g(T,{class:"mt-4"},{default:l(((e,r,t,a)=>{if(!r)return[i(P,{cols:"12",class:"text-center"},{default:l((()=>[i(R,{indeterminate:"",color:"primary"})])),_:1})];r(g(P,{cols:"12",class:"text-center"},{default:l(((e,r,t,a)=>{if(!r)return[i(R,{indeterminate:"",color:"primary"})];r(g(R,{indeterminate:"",color:"primary"},null,t,a))})),_:1},t,a))})),_:1},a,p)):t("\x3c!----\x3e"),k.value.length||L.value?t("\x3c!----\x3e"):t(g(T,null,{default:l(((e,r,t,a)=>{if(!r)return[i(P,{cols:"12"},{default:l((()=>[i(A,{class:"text-center pa-8"},{default:l((()=>[i($,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),i("h3",{class:"text-h5 mb-2"},"No Premieres Available"),i("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")])),_:1})])),_:1})];r(g(P,{cols:"12"},{default:l(((e,r,t,a)=>{if(!r)return[i(A,{class:"text-center pa-8"},{default:l((()=>[i($,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),i("h3",{class:"text-h5 mb-2"},"No Premieres Available"),i("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")])),_:1})];r(g(A,{class:"text-center pa-8"},{default:l(((e,r,t,a)=>{if(!r)return[i($,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"}),i("h3",{class:"text-h5 mb-2"},"No Premieres Available"),i("p",{class:"text-body-1 text-medium-emphasis"}," There are currently no premieres in this category ")];r(g($,{size:"64",color:"grey-lighten-1",icon:"mdi-movie-open-off",class:"mb-4"},null,t,a)),r(`<h3 class="text-h5 mb-2"${a}>No Premieres Available</h3><p class="text-body-1 text-medium-emphasis"${a}> There are currently no premieres in this category </p>`)})),_:1},t,a))})),_:1},t,a))})),_:1},a,p)),t("\x3c!--]--\x3e")):t("\x3c!----\x3e")})),_:1},p))}}}),I=z.setup;z.setup=(r,t)=>{const a=e();return(a.modules||(a.modules=new Set)).add("views/premieres/PremieresByCategoryPage.vue"),I?I(r,t):void 0};const N=r({__name:"[categorySlug]",__ssrInlineRender:!0,setup(e){const r=y(),a=L(),l=p((()=>r.params.categorySlug)),i=t(null),n=p((()=>{var e;return(null==(e=a.talastageApp)?void 0:e.name)||"TalaStage"})),s=p((()=>{var e;return(null==(e=i.value)?void 0:e.name)?`Premieres in ${i.value.name} - ${n.value}`:`Premieres - ${n.value}`})),o=p((()=>{var e,r;return(null==(e=i.value)?void 0:e.seo_description)?i.value.seo_description:`Explore the latest premiered ${(null==(r=l.value)?void 0:r.replace(/-/g," "))||"projects"} in the entertainment industry on ${n.value}.`})),m=p((()=>{var e,r;const t="premieres, entertainment, new releases, TalaStage";return(null==(e=i.value)?void 0:e.meta_keywords)?`${i.value.meta_keywords}, ${t}`:`${(null==(r=l.value)?void 0:r.replace(/-/g,", "))||""}, ${t}`})),u=p((()=>`${k().public.frontendUrl}/premieres/${l.value}`)),d=p((()=>{var e,r;return(null==(e=a.talastageApp)?void 0:e.thumbnail_url)||(null==(r=a.talastageApp)?void 0:r.logo_url)||"https://talastage.com/default-thumbnail.png"}));return S({title:s,description:o,keywords:m,image:d,type:"website",siteName:n,url:u,structured:p((()=>{var e;return{"@context":"https://schema.org","@type":"CollectionPage",name:s.value,description:o.value,url:u.value,publisher:{"@type":"Organization",name:n.value,logo:{"@type":"ImageObject",url:(null==(e=a.talastageApp)?void 0:e.logo_url)||"https://talastage.com/default-thumbnail.png"}}}}))}),(e,r,t,a)=>{r(g(z,a,null,t))}}}),D=N.setup;N.setup=(r,t)=>{const a=e();return(a.modules||(a.modules=new Set)).add("pages/premieres/[categorySlug].vue"),D?D(r,t):void 0};const E=x(N,[["__scopeId","data-v-5229d1b7"]]);export{E as default};
