import{_ as e}from"./BaseCard-5i8D5k_7.mjs";import{useSSRContext as t,mergeProps as a,withCtx as s,unref as i,createVNode as n,openBlock as l,createBlock as c,createCommentVNode as r,defineComponent as d,createTextVNode as p,toDisplayString as m,withModifiers as o}from"vue";import{ssrRenderComponent as y,ssrInterpolate as u,ssrRenderClass as v,ssrRenderAttrs as h,ssrRenderList as f}from"vue/server-renderer";import{aL as _,_ as g,au as x,U as w,V as j}from"./server.mjs";import{a as k}from"./VCard-CsohsM82.mjs";import{V as b}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{_ as $}from"./UserAvatar-DFFlBvus.mjs";import{u as z}from"./useDateFormatter-W2Hui1rv.mjs";import{u as C}from"./useCurrencyFormatter-Dfs2ioxk.mjs";import{V}from"./VImg-B2jcJjnn.mjs";import{a as P}from"./VChip-f_o2BAA4.mjs";import{V as D}from"./VDivider-BmyMVZMt.mjs";const I={__name:"PaymentListSkeleton",__ssrInlineRender:!0,setup(t){const{mobile:d,smAndDown:p}=_();return(t,d,m,o)=>{d(y(e,a({class:"mb-3 payment-skeleton"},o),{default:s(((e,t,a,d)=>{if(!t)return[n(k,null,{default:s((()=>[n("div",{class:"skeleton-layout"},[n("div",{class:"skeleton-content"},[n("div",{class:"d-flex align-center mb-3"},[n(b,{type:"avatar",size:"24",class:"mr-3"}),n(b,{type:"text",width:"120",class:"amount-skeleton"}),n(b,{type:"chip",width:"80",class:"ml-2 status-skeleton"})]),n(b,{type:"text",width:"180",class:"mb-2"}),n(b,{type:"text",width:"140"})]),n("div",{class:"skeleton-preview"},[n(b,{type:i(p)?"avatar":"image",width:i(p)?40:120,height:i(p)?40:68,class:"preview-skeleton"},null,8,["type","width","height"]),i(p)?r("",!0):(l(),c(b,{key:0,type:"text",width:"80",class:"mt-2 name-skeleton"}))])])])),_:1})];t(y(k,null,{default:s(((e,t,a,s)=>{if(!t)return[n("div",{class:"skeleton-layout"},[n("div",{class:"skeleton-content"},[n("div",{class:"d-flex align-center mb-3"},[n(b,{type:"avatar",size:"24",class:"mr-3"}),n(b,{type:"text",width:"120",class:"amount-skeleton"}),n(b,{type:"chip",width:"80",class:"ml-2 status-skeleton"})]),n(b,{type:"text",width:"180",class:"mb-2"}),n(b,{type:"text",width:"140"})]),n("div",{class:"skeleton-preview"},[n(b,{type:i(p)?"avatar":"image",width:i(p)?40:120,height:i(p)?40:68,class:"preview-skeleton"},null,8,["type","width","height"]),i(p)?r("",!0):(l(),c(b,{key:0,type:"text",width:"80",class:"mt-2 name-skeleton"}))])])];t(`<div class="skeleton-layout" data-v-22c8f91e${s}><div class="skeleton-content" data-v-22c8f91e${s}><div class="d-flex align-center mb-3" data-v-22c8f91e${s}>`),t(y(b,{type:"avatar",size:"24",class:"mr-3"},null,a,s)),t(y(b,{type:"text",width:"120",class:"amount-skeleton"},null,a,s)),t(y(b,{type:"chip",width:"80",class:"ml-2 status-skeleton"},null,a,s)),t("</div>"),t(y(b,{type:"text",width:"180",class:"mb-2"},null,a,s)),t(y(b,{type:"text",width:"140"},null,a,s)),t(`</div><div class="skeleton-preview" data-v-22c8f91e${s}>`),t(y(b,{type:i(p)?"avatar":"image",width:i(p)?40:120,height:i(p)?40:68,class:"preview-skeleton"},null,a,s)),i(p)?t("\x3c!----\x3e"):t(y(b,{type:"text",width:"80",class:"mt-2 name-skeleton"},null,a,s)),t("</div></div>")})),_:1},a,d))})),_:1},m))}}},L=I.setup;I.setup=(e,a)=>{const s=t();return(s.modules||(s.modules=new Set)).add("components/payment/PaymentListSkeleton.vue"),L?L(e,a):void 0};const A=g(I,[["__scopeId","data-v-22c8f91e"]]),B=d({__name:"PaymentListItem",__ssrInlineRender:!0,props:{payment:{}},setup(t){const{formatRelativeDate:d}=z(),{currencyFormatter:h}=C(),{mobile:f,smAndDown:g}=_(),b=x(),getStatusColor=e=>({pending:"warning",processing:"info",completed:"success",failed:"error",cancelled:"grey",refunded:"purple"}[e]||"grey"),getStatusIcon=e=>({pending:"mdi-clock-outline",processing:"mdi-progress-clock",completed:"mdi-check-circle",failed:"mdi-alert-circle",cancelled:"mdi-cancel",refunded:"mdi-cash-refund"}[e]||"mdi-help-circle"),formatStatus=e=>e.charAt(0).toUpperCase()+e.slice(1),formatPaymentType=e=>({tip:"User Tip",project_tip:"Project Tip",project_watching:"Project Purchase"}[e]||e),truncateText=(e,t)=>e.length>t?e.substring(0,t)+"...":e,navigateToProject=e=>{b.push(`/watch/${e}`)},navigateToUser=e=>{e&&b.push(`/${e}`)};return(t,f,_,x)=>{const b=$;f(y(e,a({to:`/payments/payment-${t.payment.reference}`,hover:"",class:"mb-3 payment-list-item"},x),{default:s(((e,a,f,_)=>{if(!a)return[n(k,{class:"pa-4"},{default:s((()=>[n("div",{class:"payment-item-content"},[n("div",{class:"preview-section"},[["project_watching","project_tip"].includes(t.payment.payment_type)&&t.payment.project?(l(),c("div",{key:0,class:"project-preview clickable",onClick:o((e=>navigateToProject(t.payment.project.access_uuid)),["stop"])},[n(V,{src:t.payment.project.thumbnail_url,alt:t.payment.project.name,width:i(g)?64:80,height:i(g)?36:45,cover:"",class:"rounded-lg project-thumbnail"},{placeholder:s((()=>[n("div",{class:"d-flex align-center justify-center fill-height"},[n(w,{indeterminate:"",color:"grey-lighten-4",size:"20"})])])),default:s((()=>[n("div",{class:"play-overlay"},[n(j,{color:"white",size:"20"},{default:s((()=>[p("mdi-play")])),_:1})])])),_:1},8,["src","alt","width","height"]),n("div",{class:"text-caption mt-1 project-name"},m(truncateText(t.payment.project.name,40)),1)],8,["onClick"])):"tip"===t.payment.payment_type&&t.payment.recipient?(l(),c("div",{key:1,class:"user-preview clickable",onClick:o((e=>navigateToUser(t.payment.recipient.username)),["stop"])},[n(b,{username:t.payment.recipient.username,profile_photo:t.payment.recipient.profile_photo,size:i(g)?"sm":"md",class:"user-avatar"},null,8,["username","profile_photo","size"]),n("div",{class:"text-caption mt-1 recipient-name"},m(t.payment.recipient.display_name),1)],8,["onClick"])):r("",!0)]),n("div",{class:"payment-details"},[n("div",{class:"d-flex align-center justify-between mb-2 payment-header"},[n("div",{class:"d-flex align-center"},[n(j,{color:getStatusColor(t.payment.status),size:i(g)?18:20,class:"mr-2"},{default:s((()=>[p(m(getStatusIcon(t.payment.status)),1)])),_:1},8,["color","size"]),n("span",{class:[i(g)?"text-subtitle-2":"text-subtitle-1","font-weight-medium"]},m(i(h)(t.payment.amount,t.payment.currency.symbol,t.payment.currency.code)),3)]),n(P,{color:getStatusColor(t.payment.status),size:"small",class:"status-chip",variant:"tonal"},{default:s((()=>[p(m(formatStatus(t.payment.status)),1)])),_:1},8,["color"])]),n("div",{class:"text-body-2 text-medium-emphasis mb-2 payment-info"},[n("div",{class:"d-flex align-center flex-wrap gap-2"},[n("div",{class:"d-flex align-center"},[n(j,{size:"14",class:"mr-1"},{default:s((()=>[p("mdi-clock-outline")])),_:1}),n("span",{class:"date-text"},m(i(d)(t.payment.created_at)),1)]),n(D,{vertical:"",class:"separator-divider"}),n("span",{class:"payment-type"},m(formatPaymentType(t.payment.payment_type)),1)])]),n("div",{class:"d-flex align-center justify-between text-caption text-medium-emphasis"},[n("div",{class:"d-flex align-center payment-method"},[n(j,{size:"14",class:"mr-1"},{default:s((()=>[p("mdi-wallet-outline")])),_:1}),n("span",null,m(t.payment.payment_method.name),1)]),n("span",{class:"order-ref"},"Order #"+m(t.payment.order.reference.slice(-8)),1)])]),n("div",{class:"chevron-container"},[n(j,{size:"18",color:"grey-lighten-1"},{default:s((()=>[p("mdi-chevron-right")])),_:1})])])])),_:1})];a(y(k,{class:"pa-4"},{default:s(((e,a,f,_)=>{if(!a)return[n("div",{class:"payment-item-content"},[n("div",{class:"preview-section"},[["project_watching","project_tip"].includes(t.payment.payment_type)&&t.payment.project?(l(),c("div",{key:0,class:"project-preview clickable",onClick:o((e=>navigateToProject(t.payment.project.access_uuid)),["stop"])},[n(V,{src:t.payment.project.thumbnail_url,alt:t.payment.project.name,width:i(g)?64:80,height:i(g)?36:45,cover:"",class:"rounded-lg project-thumbnail"},{placeholder:s((()=>[n("div",{class:"d-flex align-center justify-center fill-height"},[n(w,{indeterminate:"",color:"grey-lighten-4",size:"20"})])])),default:s((()=>[n("div",{class:"play-overlay"},[n(j,{color:"white",size:"20"},{default:s((()=>[p("mdi-play")])),_:1})])])),_:1},8,["src","alt","width","height"]),n("div",{class:"text-caption mt-1 project-name"},m(truncateText(t.payment.project.name,40)),1)],8,["onClick"])):"tip"===t.payment.payment_type&&t.payment.recipient?(l(),c("div",{key:1,class:"user-preview clickable",onClick:o((e=>navigateToUser(t.payment.recipient.username)),["stop"])},[n(b,{username:t.payment.recipient.username,profile_photo:t.payment.recipient.profile_photo,size:i(g)?"sm":"md",class:"user-avatar"},null,8,["username","profile_photo","size"]),n("div",{class:"text-caption mt-1 recipient-name"},m(t.payment.recipient.display_name),1)],8,["onClick"])):r("",!0)]),n("div",{class:"payment-details"},[n("div",{class:"d-flex align-center justify-between mb-2 payment-header"},[n("div",{class:"d-flex align-center"},[n(j,{color:getStatusColor(t.payment.status),size:i(g)?18:20,class:"mr-2"},{default:s((()=>[p(m(getStatusIcon(t.payment.status)),1)])),_:1},8,["color","size"]),n("span",{class:[i(g)?"text-subtitle-2":"text-subtitle-1","font-weight-medium"]},m(i(h)(t.payment.amount,t.payment.currency.symbol,t.payment.currency.code)),3)]),n(P,{color:getStatusColor(t.payment.status),size:"small",class:"status-chip",variant:"tonal"},{default:s((()=>[p(m(formatStatus(t.payment.status)),1)])),_:1},8,["color"])]),n("div",{class:"text-body-2 text-medium-emphasis mb-2 payment-info"},[n("div",{class:"d-flex align-center flex-wrap gap-2"},[n("div",{class:"d-flex align-center"},[n(j,{size:"14",class:"mr-1"},{default:s((()=>[p("mdi-clock-outline")])),_:1}),n("span",{class:"date-text"},m(i(d)(t.payment.created_at)),1)]),n(D,{vertical:"",class:"separator-divider"}),n("span",{class:"payment-type"},m(formatPaymentType(t.payment.payment_type)),1)])]),n("div",{class:"d-flex align-center justify-between text-caption text-medium-emphasis"},[n("div",{class:"d-flex align-center payment-method"},[n(j,{size:"14",class:"mr-1"},{default:s((()=>[p("mdi-wallet-outline")])),_:1}),n("span",null,m(t.payment.payment_method.name),1)]),n("span",{class:"order-ref"},"Order #"+m(t.payment.order.reference.slice(-8)),1)])]),n("div",{class:"chevron-container"},[n(j,{size:"18",color:"grey-lighten-1"},{default:s((()=>[p("mdi-chevron-right")])),_:1})])])];a(`<div class="payment-item-content" data-v-73d9c264${_}><div class="preview-section" data-v-73d9c264${_}>`),["project_watching","project_tip"].includes(t.payment.payment_type)&&t.payment.project?(a(`<div class="project-preview clickable" data-v-73d9c264${_}>`),a(y(V,{src:t.payment.project.thumbnail_url,alt:t.payment.project.name,width:i(g)?64:80,height:i(g)?36:45,cover:"",class:"rounded-lg project-thumbnail"},{placeholder:s(((e,t,a,s)=>{if(!t)return[n("div",{class:"d-flex align-center justify-center fill-height"},[n(w,{indeterminate:"",color:"grey-lighten-4",size:"20"})])];t(`<div class="d-flex align-center justify-center fill-height" data-v-73d9c264${s}>`),t(y(w,{indeterminate:"",color:"grey-lighten-4",size:"20"},null,a,s)),t("</div>")})),default:s(((e,t,a,i)=>{if(!t)return[n("div",{class:"play-overlay"},[n(j,{color:"white",size:"20"},{default:s((()=>[p("mdi-play")])),_:1})])];t(`<div class="play-overlay" data-v-73d9c264${i}>`),t(y(j,{color:"white",size:"20"},{default:s(((e,t,a,s)=>{if(!t)return[p("mdi-play")];t("mdi-play")})),_:1},a,i)),t("</div>")})),_:1},f,_)),a(`<div class="text-caption mt-1 project-name" data-v-73d9c264${_}>${u(truncateText(t.payment.project.name,40))}</div></div>`)):"tip"===t.payment.payment_type&&t.payment.recipient?(a(`<div class="user-preview clickable" data-v-73d9c264${_}>`),a(y(b,{username:t.payment.recipient.username,profile_photo:t.payment.recipient.profile_photo,size:i(g)?"sm":"md",class:"user-avatar"},null,f,_)),a(`<div class="text-caption mt-1 recipient-name" data-v-73d9c264${_}>${u(t.payment.recipient.display_name)}</div></div>`)):a("\x3c!----\x3e"),a(`</div><div class="payment-details" data-v-73d9c264${_}><div class="d-flex align-center justify-between mb-2 payment-header" data-v-73d9c264${_}><div class="d-flex align-center" data-v-73d9c264${_}>`),a(y(j,{color:getStatusColor(t.payment.status),size:i(g)?18:20,class:"mr-2"},{default:s(((e,a,s,i)=>{if(!a)return[p(m(getStatusIcon(t.payment.status)),1)];a(`${u(getStatusIcon(t.payment.status))}`)})),_:1},f,_)),a(`<span class="${v([i(g)?"text-subtitle-2":"text-subtitle-1","font-weight-medium"])}" data-v-73d9c264${_}>${u(i(h)(t.payment.amount,t.payment.currency.symbol,t.payment.currency.code))}</span></div>`),a(y(P,{color:getStatusColor(t.payment.status),size:"small",class:"status-chip",variant:"tonal"},{default:s(((e,a,s,i)=>{if(!a)return[p(m(formatStatus(t.payment.status)),1)];a(`${u(formatStatus(t.payment.status))}`)})),_:1},f,_)),a(`</div><div class="text-body-2 text-medium-emphasis mb-2 payment-info" data-v-73d9c264${_}><div class="d-flex align-center flex-wrap gap-2" data-v-73d9c264${_}><div class="d-flex align-center" data-v-73d9c264${_}>`),a(y(j,{size:"14",class:"mr-1"},{default:s(((e,t,a,s)=>{if(!t)return[p("mdi-clock-outline")];t("mdi-clock-outline")})),_:1},f,_)),a(`<span class="date-text" data-v-73d9c264${_}>${u(i(d)(t.payment.created_at))}</span></div>`),a(y(D,{vertical:"",class:"separator-divider"},null,f,_)),a(`<span class="payment-type" data-v-73d9c264${_}>${u(formatPaymentType(t.payment.payment_type))}</span></div></div><div class="d-flex align-center justify-between text-caption text-medium-emphasis" data-v-73d9c264${_}><div class="d-flex align-center payment-method" data-v-73d9c264${_}>`),a(y(j,{size:"14",class:"mr-1"},{default:s(((e,t,a,s)=>{if(!t)return[p("mdi-wallet-outline")];t("mdi-wallet-outline")})),_:1},f,_)),a(`<span data-v-73d9c264${_}>${u(t.payment.payment_method.name)}</span></div><span class="order-ref" data-v-73d9c264${_}>Order #${u(t.payment.order.reference.slice(-8))}</span></div></div><div class="chevron-container" data-v-73d9c264${_}>`),a(y(j,{size:"18",color:"grey-lighten-1"},{default:s(((e,t,a,s)=>{if(!t)return[p("mdi-chevron-right")];t("mdi-chevron-right")})),_:1},f,_)),a("</div></div>")})),_:1},f,_))})),_:1},_))}}}),S=B.setup;B.setup=(e,a)=>{const s=t();return(s.modules||(s.modules=new Set)).add("components/payment/PaymentListItem.vue"),S?S(e,a):void 0};const F=g(B,[["__scopeId","data-v-73d9c264"]]),R=d({__name:"PaymentList",__ssrInlineRender:!0,props:{payments:{},loading:{type:Boolean}},setup:e=>(e,t,s,i)=>{const n=F;t(`<div${h(a({class:"payment-list"},i))}>\x3c!--[--\x3e`),f(e.payments,(e=>{t(y(n,{key:e.reference,payment:e},null,s))})),t("\x3c!--]--\x3e</div>")}}),O=R.setup;R.setup=(e,a)=>{const s=t();return(s.modules||(s.modules=new Set)).add("components/payment/PaymentList.vue"),O?O(e,a):void 0};export{A as _,R as a};
