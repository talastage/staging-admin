import{ref as e,watchEffect as t,mergeProps as r,withCtx as s,unref as o,createTextVNode as n,createVNode as i,toDisplayString as l,openBlock as c,createBlock as a,Fragment as u,renderList as p,useSSRContext as m}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as h,ssrInterpolate as f,ssrRenderList as b}from"vue/server-renderer";import{u as C}from"./usePusher-CX6o09md.mjs";import{b as v,f as _}from"./server.mjs";import{V as $}from"./VCard-CsohsM82.mjs";import{a as g}from"./VChip-f_o2BAA4.mjs";import"util";import"crypto";import"stream";import"url";import"buffer";import"events";import"assert";import"net";import"tls";import"child_process";import"fs";import"http";import"https";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"vue-router";import"pinia-plugin-persistedstate";import"./VAvatar-JL8WKjry.mjs";import"./VImg-B2jcJjnn.mjs";import"./index--K8ZrFMm.mjs";const j={__name:"pusher",__ssrInlineRender:!0,setup(m){const{connectionStatus:j,initializePusher:k,subscribeTo:x,disconnect:S}=C(),y=_(),T=e([]),D=e({}),addMessage=e=>{T.value.push({id:Date.now(),timestamp:(new Date).toLocaleTimeString(),text:e})},testChannel=()=>{try{const e=x("test-channel");e&&(e.bind("test-event",(e=>{addMessage(`Received: ${JSON.stringify(e)}`)})),addMessage("Subscribed to test-channel"))}catch(e){addMessage(`Error: ${e.message}`)}};return t((()=>{D.value={connectionStatus:j.value,pusherKey:y.public.pusherKey,pusherCluster:y.public.pusherCluster,pusherForceTLS:y.public.pusherForceTLS,frontendUrl:y.public.frontendUrl,backendUrl:y.public.backendUrl}})),(e,t,m,C)=>{t(`<div${d(r({class:"pa-4"},C))}><h1>Pusher Connection Test</h1>`),t(h($,{class:"ma-4 pa-4"},{default:s(((e,t,r,c)=>{if(!t)return[i("h2",null,"Connection Status: "+l(o(j)),1),i(v,{onClick:o(k),disabled:"connected"===o(j),color:"primary",class:"mr-2"},{default:s((()=>[n(" Connect to Pusher ")])),_:1},8,["onClick","disabled"]),i(v,{onClick:o(S),disabled:"disconnected"===o(j),color:"error",class:"mr-2"},{default:s((()=>[n(" Disconnect ")])),_:1},8,["onClick","disabled"]),i(v,{onClick:testChannel,disabled:"connected"!==o(j),color:"success"},{default:s((()=>[n(" Test Channel ")])),_:1},8,["disabled"])];t(`<h2${c}>Connection Status: ${f(o(j))}</h2>`),t(h(v,{onClick:o(k),disabled:"connected"===o(j),color:"primary",class:"mr-2"},{default:s(((e,t,r,s)=>{if(!t)return[n(" Connect to Pusher ")];t(" Connect to Pusher ")})),_:1},r,c)),t(h(v,{onClick:o(S),disabled:"disconnected"===o(j),color:"error",class:"mr-2"},{default:s(((e,t,r,s)=>{if(!t)return[n(" Disconnect ")];t(" Disconnect ")})),_:1},r,c)),t(h(v,{onClick:testChannel,disabled:"connected"!==o(j),color:"success"},{default:s(((e,t,r,s)=>{if(!t)return[n(" Test Channel ")];t(" Test Channel ")})),_:1},r,c))})),_:1},m)),t(h($,{class:"ma-4 pa-4"},{default:s(((e,t,r,s)=>{if(!t)return[i("h3",null,"Debug Info"),i("pre",null,l(o(D)),1)];t(`<h3${s}>Debug Info</h3><pre${s}>${f(o(D))}</pre>`)})),_:1},m)),t(h($,{class:"ma-4 pa-4"},{default:s(((e,t,r,m)=>{if(!t)return[i("h3",null,"Messages"),(c(!0),a(u,null,p(o(T),(e=>(c(),a("div",{key:e.id,class:"mb-2"},[i(g,null,{default:s((()=>[n(l(e.timestamp),1)])),_:2},1024),n(" "+l(e.text),1)])))),128))];t(`<h3${m}>Messages</h3>\x3c!--[--\x3e`),b(o(T),(e=>{t(`<div class="mb-2"${m}>`),t(h(g,null,{default:s(((t,r,s,o)=>{if(!r)return[n(l(e.timestamp),1)];r(`${f(e.timestamp)}`)})),_:2},r,m)),t(` ${f(e.text)}</div>`)})),t("\x3c!--]--\x3e")})),_:1},m)),t("</div>")}}},k=j.setup;j.setup=(e,t)=>{const r=m();return(r.modules||(r.modules=new Set)).add("pages/test/pusher.vue"),k?k(e,t):void 0};export{j as default};
