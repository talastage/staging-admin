import{_ as t,c as e,u as o,e as n,aZ as a,f as r}from"./server.mjs";import{useSSRContext as i,defineComponent as p,withAsyncContext as c,mergeProps as s,unref as l,computed as m}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as u}from"vue/server-renderer";import{u as g}from"./asyncData-BkL_fZdA.mjs";import"node:http";import"node:https";import"node:zlib";import"node:stream";import"node:buffer";import"node:util";import"node:url";import"node:net";import"node:fs";import"node:path";import"../_/nitro.mjs";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"unhead";import"vue-router";import"pinia-plugin-persistedstate";const y=p({__name:"index",__ssrInlineRender:!0,async setup(t){let i,p;const y=e(),{$api:h}=o(),v=y.params.access_uuid,{data:w,pending:_,error:b}=([i,p]=c((()=>g(`watch-project-${v}`,(()=>h.get(`/api/projects/${v}/watch`,{params:{timezone:"UTC"}}).then((t=>t.data))),{server:!0,lazy:!1}))),i=await i,p(),i);return[i,p]=c((()=>g(`watch-credits-${v}`,(()=>h.get(`/guest/projects/${v}/credits`,{params:{limit:10}}).then((t=>{var e;return(null==(e=t.data)?void 0:e.flatMap((t=>t.credits)))||[]}))),{server:!0,lazy:!0}))),i=await i,p(),[i,p]=c((()=>g("recommended-projects",(()=>h.get("/api/recommended/projects",{params:{page:1}}).then((t=>t.projects||[]))),{server:!0,lazy:!0}))),i=await i,p(),((t,e)=>{const o=r().public.frontendUrl||"https://talastage.com",a="TalaStage",i=`${o}/talastage_logo.png`,p=m((()=>{var n,r,p,c;const s=t.value,l=(null==s?void 0:s.name)||"Watch Video on TalaStage",m=(null==(n=null==s?void 0:s.creator)?void 0:n.display_name)||(null==(r=null==s?void 0:s.creator)?void 0:r.username)||"TalaStage Creator",d=(null==(p=null==s?void 0:s.creator)?void 0:p.username)||"",u=d?`${o}/${d}`:o,g=(null==s?void 0:s.description)?`${s.description.slice(0,155)}...`:`Watch "${l}" by ${m} on TalaStage. Your Stage to the World of Entertainment.`,y=(null==s?void 0:s.thumbnail_url)?s.thumbnail_url.startsWith("http")?s.thumbnail_url:`${o}${s.thumbnail_url}`:i,h=(null==s?void 0:s.video_url)||"",v=h&&h.startsWith("http"),w=(null==s?void 0:s.duration)||0,_=h.includes(".m3u8")?"application/x-mpegURL":"video/mp4",b=`${o}/watch/${(null==s?void 0:s.access_uuid)||e}`,f=(s?[s.type||"video",m,"entertainment","streaming",a].filter(Boolean):["video","entertainment",a]).join(", "),j=(null==(c=null==s?void 0:s.premiering)?void 0:c.utc)||(new Date).toISOString();return{title:l,htmlAttrs:{lang:"en"},meta:[{name:"description",content:g},{name:"keywords",content:f},{name:"robots",content:"index, follow"},{name:"author",content:m},{property:"og:type",content:"video.other"},{property:"og:site_name",content:a},{property:"og:title",content:l},{property:"og:description",content:g},{property:"og:url",content:b},{property:"og:image",content:y},{property:"og:image:secure_url",content:y},{property:"og:image:type",content:"image/jpeg"},{property:"og:image:width",content:"1200"},{property:"og:image:height",content:"630"},{property:"og:image:alt",content:l},...v?[{property:"og:video",content:h},{property:"og:video:secure_url",content:h},{property:"og:video:type",content:_},{property:"og:video:width",content:"1920"},{property:"og:video:height",content:"1080"},{property:"video:duration",content:w.toString()},{property:"video:release_date",content:j}]:[],{name:"twitter:card",content:v?"player":"summary_large_image"},{name:"twitter:site",content:"@talastage"},{name:"twitter:creator",content:"@talastage"},{name:"twitter:title",content:l},{name:"twitter:description",content:g},{name:"twitter:image",content:y},{name:"twitter:image:alt",content:l},...v?[{name:"twitter:player",content:b},{name:"twitter:player:width",content:"1920"},{name:"twitter:player:height",content:"1080"},{name:"twitter:player:stream",content:h},{name:"twitter:player:stream:content_type",content:_}]:[],{property:"og:locale",content:"en_US"}],link:[{rel:"canonical",href:b}],script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Organization",name:a,url:o,logo:i,sameAs:["https://twitter.com/talastage","https://facebook.com/talastage"]})},...v?[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"VideoObject",name:l,description:g,thumbnailUrl:y,uploadDate:j,duration:w?`PT${w}S`:void 0,contentUrl:h,embedUrl:b,author:{"@type":"Person",name:m,url:u},publisher:{"@type":"Organization",name:a,logo:{"@type":"ImageObject",url:i}},keywords:f})}]:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebPage",name:l,description:g,image:y,url:b,author:{"@type":"Person",name:m,url:u}})}],{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:o},{"@type":"ListItem",position:2,name:"Watch",item:`${o}/watch`},{"@type":"ListItem",position:3,name:l,item:b}]})}]}}));n(p)})(w,v),(t,e,o,n)=>{const r=a;e(`<div${d(s({class:"watch-page-container"},n))} data-v-695c409b>`),l(_)?e('<div class="loading-container" data-v-695c409b><p data-v-695c409b>Loading...</p></div>'):l(w)?e(u(r,null,{},o)):e('<div class="error-container" data-v-695c409b><p data-v-695c409b>Failed to load project data.</p></div>'),e("</div>")}}}),h=y.setup;y.setup=(t,e)=>{const o=i();return(o.modules||(o.modules=new Set)).add("pages/watch/[access_uuid]/index.vue"),h?h(t,e):void 0};const v=t(y,[["__scopeId","data-v-695c409b"]]);export{v as default};
