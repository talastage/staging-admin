import{_ as e}from"./SelectCountry-DrAcTXho.mjs";import{useSSRContext as a,defineComponent as l,ref as t,reactive as i,computed as d,mergeProps as o,withCtx as r,createVNode as s,toDisplayString as n,createTextVNode as u,openBlock as m,createBlock as c,createCommentVNode as p}from"vue";import{ssrRenderAttrs as f,ssrRenderComponent as v,ssrInterpolate as y}from"vue/server-renderer";import{a as b,V as g,b as V,_ as h}from"./server.mjs";import{useRouter as N}from"vue-router";import{V as _}from"./VForm-HRC00ryg.mjs";import{V as U}from"./VAlert-DneVUU3Q.mjs";import{V as D}from"./VTextField-rd-VvEF8.mjs";import{V as C}from"./VAutocomplete-BqaBgOKW.mjs";const k=l({__name:"SocialPersonalInfoForm",__ssrInlineRender:!0,props:{userId:{},socialData:{}},emits:["submit"],setup(a,{emit:l}){const h=a,k=l,q=N(),x=b(),F=t(null),S=t(!1),I=t(""),w=t(null),L=["Male","Female","Other"],R=i({firstName:"",lastName:"",displayName:"",gender:"",birthday:"",countryId:null}),$=i({hasSubmitted:!1}),j=d((()=>{const e=new Date;return e.setFullYear(e.getFullYear()-18),e.toISOString().split("T")[0]})),O=d((()=>!!(R.firstName&&R.lastName&&R.gender&&R.birthday&&R.countryId))),A={required:e=>!!e||"Required",ageLimit:e=>{if(!e)return!0;return(new Date).getFullYear()-new Date(e).getFullYear()>=18||"Must be at least 18 years old"}},getProviderIcon=e=>({google:"mdi-google",facebook:"mdi-facebook",twitter:"mdi-twitter",instagram:"mdi-instagram",tiktok:"mdi-music-note",linkedin:"mdi-linkedin"}[e]||"mdi-account"),capitalizeProvider=e=>e.charAt(0).toUpperCase()+e.slice(1),handleCountrySelection=e=>{R.countryId=(null==e?void 0:e.id)||null},submit=async()=>{try{if(S.value=!0,$.hasSubmitted=!0,I.value="",!O.value)return void(I.value="Please fill in all required fields correctly");const e=await x.completeSocialRegistration({user_id:h.userId,first_name:R.firstName,last_name:R.lastName,display_name:R.displayName||null,gender:R.gender,country_id:R.countryId,birthday:R.birthday});k("submit"),e.user&&e.token&&q.push("/")}catch(e){I.value=e.message||"An error occurred during registration"}finally{S.value=!1}};return(a,l,t,i)=>{const d=e;l(`<div${f(o({class:"social-personal-info-form"},i))} data-v-7bd3a14d>`),l(v(_,{ref_key:"form",ref:F,onSubmit:submit,class:"form-wrapper"},{default:r(((e,l,t,i)=>{if(!l)return[a.socialData?(m(),c(U,{key:0,type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:r((()=>[s("div",{class:"d-flex align-center"},[s(g,{icon:getProviderIcon(a.socialData.provider),class:"mr-2"},null,8,["icon"]),s("span",null,"Connected with "+n(capitalizeProvider(a.socialData.provider)),1)])])),_:1})):p("",!0),I.value?(m(),c(U,{key:1,type:"error",variant:"tonal",class:"mb-4",density:"compact",border:"",closable:"","onClick:close":e=>I.value=""},{default:r((()=>[u(n(I.value),1)])),_:1},8,["onClick:close"])):p("",!0),s(D,{modelValue:R.firstName,"onUpdate:modelValue":e=>R.firstName=e,label:"First Name",rules:[A.required],variant:"outlined",density:"compact",placeholder:"First name","prepend-inner-icon":"mdi-account",class:"field","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","rules"]),s(D,{modelValue:R.lastName,"onUpdate:modelValue":e=>R.lastName=e,label:"Last Name",rules:[A.required],variant:"outlined",density:"compact",placeholder:"Last name",class:"field","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","rules"]),s(D,{modelValue:R.displayName,"onUpdate:modelValue":e=>R.displayName=e,variant:"outlined",density:"compact",placeholder:"Choose display name (optional)","prepend-inner-icon":"mdi-account-badge",class:"field","hide-details":"auto"},{label:r((()=>[u(" Display Name "),s("span",{class:"optional-label"},"(Optional)")])),_:1},8,["modelValue","onUpdate:modelValue"]),s("div",{class:"gender-birthday-fields"},[s(C,{modelValue:R.gender,"onUpdate:modelValue":e=>R.gender=e,items:L,label:"Gender",rules:[A.required],variant:"outlined",density:"compact","prepend-inner-icon":"mdi-gender-male-female",class:"field gender-field","hide-details":"auto","menu-props":{maxHeight:200},"no-filter":"","auto-select-first":""},null,8,["modelValue","onUpdate:modelValue","rules"]),s(D,{modelValue:R.birthday,"onUpdate:modelValue":e=>R.birthday=e,label:"Birthday",type:"date",rules:[A.required,A.ageLimit],variant:"outlined",density:"compact",max:j.value,class:"field","hide-details":"auto"},null,8,["modelValue","onUpdate:modelValue","rules","max"])]),s(d,{modelValue:w.value,"onUpdate:modelValue":e=>w.value=e,onCountrySelected:handleCountrySelection,rules:[A.required],error:$.hasSubmitted&&!R.countryId,density:"compact",class:"field"},null,8,["modelValue","onUpdate:modelValue","rules","error"]),s(V,{type:"submit",color:"primary",block:"",loading:S.value,disabled:!O.value||S.value,class:"submit-btn",elevation:"1"},{default:r((()=>[s(g,{left:"",class:"mr-2",size:"small"},{default:r((()=>[u("mdi-account-plus")])),_:1}),u(" Complete Registration ")])),_:1},8,["loading","disabled"])];a.socialData?l(v(U,{type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:r(((e,l,t,i)=>{if(!l)return[s("div",{class:"d-flex align-center"},[s(g,{icon:getProviderIcon(a.socialData.provider),class:"mr-2"},null,8,["icon"]),s("span",null,"Connected with "+n(capitalizeProvider(a.socialData.provider)),1)])];l(`<div class="d-flex align-center" data-v-7bd3a14d${i}>`),l(v(g,{icon:getProviderIcon(a.socialData.provider),class:"mr-2"},null,t,i)),l(`<span data-v-7bd3a14d${i}>Connected with ${y(capitalizeProvider(a.socialData.provider))}</span></div>`)})),_:1},t,i)):l("\x3c!----\x3e"),I.value?l(v(U,{type:"error",variant:"tonal",class:"mb-4",density:"compact",border:"",closable:"","onClick:close":e=>I.value=""},{default:r(((e,a,l,t)=>{if(!a)return[u(n(I.value),1)];a(`${y(I.value)}`)})),_:1},t,i)):l("\x3c!----\x3e"),l(v(D,{modelValue:R.firstName,"onUpdate:modelValue":e=>R.firstName=e,label:"First Name",rules:[A.required],variant:"outlined",density:"compact",placeholder:"First name","prepend-inner-icon":"mdi-account",class:"field","hide-details":"auto"},null,t,i)),l(v(D,{modelValue:R.lastName,"onUpdate:modelValue":e=>R.lastName=e,label:"Last Name",rules:[A.required],variant:"outlined",density:"compact",placeholder:"Last name",class:"field","hide-details":"auto"},null,t,i)),l(v(D,{modelValue:R.displayName,"onUpdate:modelValue":e=>R.displayName=e,variant:"outlined",density:"compact",placeholder:"Choose display name (optional)","prepend-inner-icon":"mdi-account-badge",class:"field","hide-details":"auto"},{label:r(((e,a,l,t)=>{if(!a)return[u(" Display Name "),s("span",{class:"optional-label"},"(Optional)")];a(` Display Name <span class="optional-label" data-v-7bd3a14d${t}>(Optional)</span>`)})),_:1},t,i)),l(`<div class="gender-birthday-fields" data-v-7bd3a14d${i}>`),l(v(C,{modelValue:R.gender,"onUpdate:modelValue":e=>R.gender=e,items:L,label:"Gender",rules:[A.required],variant:"outlined",density:"compact","prepend-inner-icon":"mdi-gender-male-female",class:"field gender-field","hide-details":"auto","menu-props":{maxHeight:200},"no-filter":"","auto-select-first":""},null,t,i)),l(v(D,{modelValue:R.birthday,"onUpdate:modelValue":e=>R.birthday=e,label:"Birthday",type:"date",rules:[A.required,A.ageLimit],variant:"outlined",density:"compact",max:j.value,class:"field","hide-details":"auto"},null,t,i)),l("</div>"),l(v(d,{modelValue:w.value,"onUpdate:modelValue":e=>w.value=e,onCountrySelected:handleCountrySelection,rules:[A.required],error:$.hasSubmitted&&!R.countryId,density:"compact",class:"field"},null,t,i)),l(v(V,{type:"submit",color:"primary",block:"",loading:S.value,disabled:!O.value||S.value,class:"submit-btn",elevation:"1"},{default:r(((e,a,l,t)=>{if(!a)return[s(g,{left:"",class:"mr-2",size:"small"},{default:r((()=>[u("mdi-account-plus")])),_:1}),u(" Complete Registration ")];a(v(g,{left:"",class:"mr-2",size:"small"},{default:r(((e,a,l,t)=>{if(!a)return[u("mdi-account-plus")];a("mdi-account-plus")})),_:1},l,t)),a(" Complete Registration ")})),_:1},t,i))})),_:1},t)),l("</div>")}}}),q=k.setup;k.setup=(e,l)=>{const t=a();return(t.modules||(t.modules=new Set)).add("components/register/SocialPersonalInfoForm.vue"),q?q(e,l):void 0};const x=h(k,[["__scopeId","data-v-7bd3a14d"]]);export{x as _};
