import{_ as e}from"./HelpItem-DrLQHdSM.mjs";import{ref as r,defineComponent as a,watch as t,unref as l,withCtx as o,createVNode as i,openBlock as s,createBlock as c,Fragment as u,renderList as n,createTextVNode as p,toDisplayString as d,useSSRContext as m}from"vue";import{ssrRenderAttrs as f,ssrRenderComponent as h,ssrRenderList as y,ssrInterpolate as v}from"vue/server-renderer";import{u as g,b as _}from"./server.mjs";import{V as x}from"./VRow-rkX0LEXR.mjs";import{V as A}from"./VCol-CKxprC4g.mjs";import{V}from"./VSkeletonLoader-CXOx9RZQ.mjs";import{V as k}from"./VAlert-DneVUU3Q.mjs";function useHelp(){const{$axios:e}=g(),a=r([]),t=r([]),l=r(""),o=r(!1),i=r([]),s=r(!1),c=r(null);return{categories:a,articles:t,searchQuery:l,loading:o,fetchCategories:async()=>{o.value=!0;try{const r=await e.get("/api/help/categories");a.value=r.data}catch(e){console.error("Error fetching categories:",e)}finally{o.value=!1}},searchArticles:async r=>{o.value=!0;try{const a=await e.get(`/api/help/search?q=${r}`);t.value=a.data}catch(e){console.error("Error searching articles:",e)}finally{o.value=!1}},popularArticles:i,isLoadingPopular:s,popularError:c,fetchPopularArticles:async(r="")=>{s.value=!0,c.value=null;try{const a=await e.get("/api/help/popular",{params:{search:r}});a.data&&a.data.data?i.value=a.data.data:i.value=[]}catch(e){console.error("Failed to fetch popular articles:",e),c.value="Failed to load popular articles"}finally{s.value=!1}}}}const H=a({__name:"HelpPopularArticles",__ssrInlineRender:!0,props:{searchQuery:{}},setup(r){const a=r,{popularArticles:m,isLoadingPopular:g,popularError:H,fetchPopularArticles:C}=useHelp();function retryFetch(){C(a.searchQuery||"")}return t((()=>a.searchQuery),(e=>{C(e||"")})),(r,a,t,C)=>{const P=e;a(`<div${f(C)}><h2 class="text-h5 font-weight-medium mb-4">Popular Help Articles</h2>`),l(g)?a(h(x,null,{default:o(((e,r,a,t)=>{if(!r)return[(s(),c(u,null,n(2,(e=>i(A,{key:e,cols:"12",md:"6"},{default:o((()=>[i(V,{type:"article"})])),_:2},1024))),64))];r("\x3c!--[--\x3e"),y(2,(e=>{r(h(A,{key:e,cols:"12",md:"6"},{default:o(((e,r,a,t)=>{if(!r)return[i(V,{type:"article"})];r(h(V,{type:"article"},null,a,t))})),_:2},a,t))})),r("\x3c!--]--\x3e")})),_:1},t)):l(H)?a(h(k,{type:"error",variant:"tonal",class:"my-4"},{append:o(((e,r,a,t)=>{if(!r)return[i(_,{color:"error",variant:"text",onClick:retryFetch,loading:l(g)},{default:o((()=>[p(" Retry ")])),_:1},8,["loading"])];r(h(_,{color:"error",variant:"text",onClick:retryFetch,loading:l(g)},{default:o(((e,r,a,t)=>{if(!r)return[p(" Retry ")];r(" Retry ")})),_:1},a,t))})),default:o(((e,r,a,t)=>{if(!r)return[p(d(l(H))+" ",1)];r(`${v(l(H))} `)})),_:1},t)):l(m).length?a(h(x,null,{default:o(((e,r,a,t)=>{if(!r)return[(s(!0),c(u,null,n(l(m),(e=>(s(),c(A,{key:e.id,cols:"12",md:"6"},{default:o((()=>[i(P,{article:e},null,8,["article"])])),_:2},1024)))),128))];r("\x3c!--[--\x3e"),y(l(m),(e=>{r(h(A,{key:e.id,cols:"12",md:"6"},{default:o(((r,a,t,l)=>{if(!a)return[i(P,{article:e},null,8,["article"])];a(h(P,{article:e},null,t,l))})),_:2},a,t))})),r("\x3c!--]--\x3e")})),_:1},t)):a(h(k,{type:"info",variant:"tonal",class:"my-4"},{default:o(((e,r,a,t)=>{if(!r)return[p(" No popular articles available at the moment. ")];r(" No popular articles available at the moment. ")})),_:1},t)),a("</div>")}}}),C=H.setup;H.setup=(e,r)=>{const a=m();return(a.modules||(a.modules=new Set)).add("components/help/HelpPopularArticles.vue"),C?C(e,r):void 0};export{H as _,useHelp as u};
