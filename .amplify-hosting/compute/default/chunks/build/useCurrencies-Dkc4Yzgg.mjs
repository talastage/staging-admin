import{d as e,u as r}from"./server.mjs";import{ref as a,computed as c}from"vue";const u=e("currency",(()=>{const e=a([]),u=a(null),t=a(!1),n=a(!1),{$axios:s}=r(),i=c((()=>u.value?u.value:e.value.find((e=>e.is_default))||null)),fetchCurrencies=async()=>{if(!n.value){n.value=!0;try{const r=await s.get("/api/currencies"),{data:a,user_currency:c}=r.data;e.value=a,u.value=c,t.value=!0}catch(e){console.error("Error fetching currencies:",e)}finally{n.value=!1}}};return{currencies:e,selectedCurrency:i,userCurrency:u,isFetched:t,isLoading:n,fetchCurrencies:fetchCurrencies,fetchGuestCurrencies:async()=>{if(!n.value){n.value=!0;try{const r=await s.get("/api/currencies");e.value=r.data.data,t.value=!0}catch(e){console.error("Error fetching guest currencies:",e)}finally{n.value=!1}}},updateCurrency:async e=>{try{await s.post("/api/user/currency",{currency_code:e}),await fetchCurrencies()}catch(e){throw console.error("Error updating currency:",e),e}}}}));export{u};
