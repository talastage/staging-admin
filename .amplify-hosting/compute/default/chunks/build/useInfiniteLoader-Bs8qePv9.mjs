import{ref as e}from"vue";import{u as a}from"./index-8pAncyvV.mjs";function useInfiniteLoader(n,o,t={}){const i=e(1),l=e(!1),r=e(null);async function loadNextPage(){if("function"==typeof o?o():o.value){l.value=!0;try{i.value+=1,await n(i.value)}catch(e){console.error("Infinite loader error:",e)}finally{l.value=!1}}}return a(r,(([e])=>{e.isIntersecting&&!l.value&&loadNextPage()}),{threshold:.1}),{sentinelRef:r,page:i,isLoading:l,initLoader:async function(){i.value=1,l.value=!0;try{await n(i.value)}catch(e){console.error("Initial load error:",e)}finally{l.value=!1}},loadNextPage:loadNextPage}}export{useInfiniteLoader as u};
