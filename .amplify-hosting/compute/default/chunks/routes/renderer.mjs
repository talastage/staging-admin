import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env};import{getRequestDependencies as t,getPreloadLinks as r,getPrefetchLinks as n,createRenderer as o}from"vue-bundle-renderer/runtime";import{a,b as s,p as i,g as d,c as l,e as u,f as p,h as c,i as h,u as f}from"../_/nitro.mjs";import{stringify as m,uneval as y}from"devalue";import{renderToString as g}from"vue/server-renderer";import{propsToString as b,renderSSRHead as v}from"@unhead/ssr";import{createServerHead as _,CapoPlugin as w}from"unhead";import{version as x,unref as C}from"vue";import{defineHeadPlugin as A}from"@unhead/shared";import"node:http";import"node:https";import"node:fs";import"node:url";import"consola/core";import"nuxt-site-config/urls";import"ipx";import"node:path";const T="3"===x[0];function resolveUnrefHeadInput(e){if(e instanceof Promise||e instanceof Date||e instanceof RegExp)return e;const t="function"==typeof(r=e)?r():C(r);var r;if(!e||!t)return t;if(Array.isArray(t))return t.map((e=>resolveUnrefHeadInput(e)));if("object"==typeof t){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&("titleTemplate"===r||"o"===r[0]&&"n"===r[1]?e[r]=C(t[r]):e[r]=resolveUnrefHeadInput(t[r]));return e}return t}const j=A({hooks:{"entries:resolve":e=>{for(const t of e.entries)t.resolvedInput=resolveUnrefHeadInput(t.input)}}});function createServerHead(e={}){const t=_(e);return t.use(j),t.install=function(e){return{install(t){T&&(t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide("usehead",e))}}.install}(t),t}const S=[w({track:!0})],R={omitLineBreaks:!1},k={meta:[{name:"viewport",content:"width=device-width, initial-scale=1"},{charset:"utf-8"},{name:"format-detection",content:"telephone=no"}],link:[{rel:"icon",type:"image/png",href:"/talastage_favicon.png"},{rel:"shortcut icon",href:"/talastage_favicon.png"},{rel:"apple-touch-icon",href:"/talastage_favicon.png"}],style:[],script:[],noscript:[],charset:"utf-8",viewport:"width=device-width, initial-scale=1",htmlAttrs:{lang:"en"},bodyAttrs:{style:"background-color: rgb(243, 244, 247); margin: 0; padding: 0;"}},P={id:"teleports"};globalThis.__buildAssetsURL=s,globalThis.__publicAssetsURL=i;const getClientManifest=()=>import("../build/client.manifest.mjs").then((e=>e.default||e)).then((e=>"function"==typeof e?e():e)),H=lazyCachedFunction((()=>import("../build/styles.mjs").then((e=>e.default||e)))),U=lazyCachedFunction((async()=>{const e=await getClientManifest();if(!e)throw new Error("client.manifest is not available");const t=await import("../build/server.mjs").then((e=>e.default||e));if(!t)throw new Error("Server bundle is not available");return o(t,{manifest:e,renderToString:async function(e,t){const r=await g(e,t);return M+r+z},buildAssetsURL:s})})),$=lazyCachedFunction((async()=>{const e=await getClientManifest(),t=await import("../virtual/_virtual_spa-template.mjs").then((e=>e.template)).catch((()=>"")).then((e=>M+e+z)),r=o((()=>()=>{}),{manifest:e,renderToString:()=>t,buildAssetsURL:s}),n=await r.renderToString({});return{rendererContext:r.rendererContext,renderToString:e=>{const t=p(e.event);return e.modules=e.modules||new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(n)}}})),L=!!P.id,N=L?`<div${b(P)}>`:"",O=L?"</div>":"",M=`<div${b({id:"__nuxt"})}>`,z="</div>",I=/\/_payload.json(\?.*)?$/,F=a((async e=>{const o=f(),a=e.path.startsWith("/__nuxt_error")?d(e):null;if(a&&a.statusCode&&(a.statusCode=Number.parseInt(a.statusCode)),a&&!("__unenv__"in e.node.req))throw l({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const s=false,i=void 0;let y=a?.url||e.path;const g=I.test(y)&&!0;g&&(y=y.substring(0,y.lastIndexOf("/"))||"/",e._path=y,e.node.req.url=y);const b=u(e),_=createServerHead({plugins:S}),w={mode:"server"};_.push(k,w);const x={url:y,event:e,runtimeConfig:p(e),noSSR:e.context.nuxt?.noSSR||!1===b.ssr&&!0||!1,head:_,error:!!a,nuxt:void 0,payload:a?{error:a}:{},_payloadReducers:Object.create(null),modules:new Set,islandContext:i},C=x.noSSR?await $():await U();for(const e of await getClientManifest().then((e=>Object.values(e).filter((e=>e._globalCSS)).map((e=>e.src)))))x.modules.add(e);const A=await C.renderToString(x).catch((async e=>{if(x._renderResponse&&"skipping render"===e.message)return{};const t=!a&&x.payload?.error||e;throw await(x.nuxt?.hooks.callHook("app:error",t)),t}));if(await(x.nuxt?.hooks.callHook("app:rendered",{ssrContext:x,renderResult:A})),x._renderResponse)return x._renderResponse;if(x.payload?.error&&!a)throw x.payload.error;if(g){const e=function(e){return{body:m(splitPayload(e).payload,e._payloadReducers),statusCode:c(e.event),statusMessage:h(e.event),headers:{"content-type":"application/json;charset=utf-8","x-powered-by":"Nuxt"}}}(x);return e}const T=await async function(e){const t=await H(),r=new Set;for(const n of e)if(n in t&&t[n])for(const e of await t[n]())r.add(e);return Array.from(r).map((e=>({innerHTML:e})))}(x.modules??[]),j=b.experimentalNoScripts,{styles:M,scripts:z}=t(x,C.rendererContext);T.length&&_.push({style:T});{const e=[];for(const t of Object.values(M))e.push({rel:"stylesheet",href:C.rendererContext.buildAssetsURL(t.file),crossorigin:""});e.length&&_.push({link:e},w)}j||(_.push({link:r(x,C.rendererContext)},w),_.push({link:n(x,C.rendererContext)},w),_.push({script:renderPayloadJsonScript({ssrContext:x,data:x.payload})},{...w,tagPosition:"bodyClose",tagPriority:"high"})),b.experimentalNoScripts||_.push({script:Object.values(z).map((e=>({type:e.module?"module":null,src:C.rendererContext.buildAssetsURL(e.file),defer:!e.module||null,tagPosition:"head",crossorigin:""})))},w);const{headTags:F,bodyTags:E,bodyTagsOpen:D,htmlAttrs:X,bodyAttrs:q}=await v(_,R),B={island:s,htmlAttrs:X?[X]:[],head:normalizeChunks([F]),bodyAttrs:q?[q]:[],bodyPrepend:normalizeChunks([D,x.teleports?.body]),body:[A.html,N+(L?joinTags([x.teleports?.[`#${P.id}`]]):"")+O],bodyAppend:[E]};await o.hooks.callHook("render:html",B,{event:e});var J;return{body:(J=B,`<!DOCTYPE html><html${joinAttrs(J.htmlAttrs)}><head>${joinTags(J.head)}</head><body${joinAttrs(J.bodyAttrs)}>${joinTags(J.bodyPrepend)}${joinTags(J.body)}${joinTags(J.bodyAppend)}</body></html>`),statusCode:c(e),statusMessage:h(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}}}));function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch((e=>{throw t=null,e}))),t)}function normalizeChunks(e){return e.filter(Boolean).map((e=>e.trim()))}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?m(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${y(e.ssrContext.config)}`}]}function splitPayload(e){const{data:t,prerenderedAt:r,...n}=e.payload;return{initial:{...n,prerenderedAt:r},payload:{data:t,prerenderedAt:r}}}export{F as default};
